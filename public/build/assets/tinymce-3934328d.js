var mG={exports:{}};(function(ET){(function(){var Jb=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},TT=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Jf=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Qf=function(e,n){return nd(function(o,r){return e.eq(n(o),n(r))})},nd=function(e){return{eq:e}},eg=nd(function(e,n){return e===n}),En=eg,vc=function(e){return nd(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},rC=function(e,n){return Qf(vc(e),function(o){return Jf(o,n)})},Ri=function(e){return nd(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!rC(En).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},su=nd(function(e,n){if(e===n)return!0;var o=Jb(e),r=Jb(n);return o!==r?!1:TT(o)?e===n:o==="array"?vc(su).eq(e,n):o==="object"?Ri(su).eq(e,n):!1});const hl=Object.getPrototypeOf,Ur=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Mi=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Ur(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},ar=e=>n=>Mi(n)===e,gt=e=>n=>typeof n===e,Bi=e=>n=>e===n,ru=(e,n)=>Sn(e)&&Ur(e,n,(o,r)=>hl(o)===r),K=ar("string"),Sn=ar("object"),sp=e=>ru(e,Object),An=ar("array"),J=Bi(null),on=gt("boolean"),Bs=Bi(void 0),cn=e=>e==null,Se=e=>!cn(e),q=gt("function"),ba=gt("number"),Dn=(e,n)=>{if(An(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},vt=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),No=(e,n)=>o=>e(n(o)),Le=e=>()=>e,ho=e=>e,Ot=(e,n)=>e===n;function Ee(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Po=e=>n=>!e(n),va=e=>()=>{throw new Error(e)},$o=e=>e(),Br=e=>{e()},we=Le(!1),Xe=Le(!0);class N{constructor(n,o){this.tag=n,this.value=o}static some(n){return new N(!0,n)}static none(){return N.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?N.some(n(this.value)):N.none()}bind(n){return this.tag?n(this.value):N.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:N.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Se(n)?N.some(n):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const km=Array.prototype.slice,Wn=Array.prototype.indexOf,ts=Array.prototype.push,Yn=(e,n)=>Wn.call(e,n),kT=(e,n)=>{const o=Yn(e,n);return o===-1?N.none():N.some(o)},Rt=(e,n)=>Yn(e,n)>-1,no=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Ft=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},he=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},au=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},br=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},ht=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},od=(e,n,o)=>(au(e,(r,c)=>{o=n(o,r,c)}),o),_o=(e,n,o)=>(he(e,(r,c)=>{o=n(o,r,c)}),o),rp=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return N.some(u);if(o(u,r))break}return N.none()},Fo=(e,n)=>rp(e,n,we),Wr=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return N.some(o)}return N.none()},ap=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!An(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ts.apply(n,e[o])}return n},Ua=(e,n)=>ap(Ft(e,n)),Gs=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},io=e=>{const n=km.call(e,0);return n.reverse(),n},cp=(e,n)=>ht(e,o=>!Rt(n,o)),ms=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},lo=(e,n)=>{const o=km.call(e,0);return o.sort(n),o},tg=(e,n)=>n>=0&&n<e.length?N.some(e[n]):N.none(),vr=e=>tg(e,0),cu=e=>tg(e,e.length-1),Zr=q(Array.from)?Array.from:e=>km.call(e),sd=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return N.none()},ip=(e,n)=>{const o=[],r=q(n)?c=>no(o,u=>n(u,c)):c=>Rt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},yr=Object.keys,Qb=Object.hasOwnProperty,Ze=(e,n)=>{const o=yr(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},yn=(e,n)=>Wa(e,(o,r)=>({k:r,v:n(o,r)})),Wa=(e,n)=>{const o={};return Ze(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},ya=e=>(n,o)=>{e[o]=n},lp=(e,n,o,r)=>{Ze(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},rd=(e,n)=>{const o={},r={};return lp(e,n,ya(o),ya(r)),{t:o,f:r}},oo=(e,n)=>{const o={};return lp(e,n,ya(o),vt),o},ad=(e,n)=>{const o=[];return Ze(e,(r,c)=>{o.push(n(r,c))}),o},_m=e=>ad(e,ho),Xn=(e,n)=>Tt(e,n)?N.from(e[n]):N.none(),Tt=(e,n)=>Qb.call(e,n),jr=(e,n)=>Tt(e,n)&&e[n]!==void 0&&e[n]!==null,cd=(e,n,o=su)=>Ri(o).eq(e,n),up=e=>{const n={};return he(e,o=>{n[o]={}}),yr(n)},ev=e=>e.length!==void 0,Gr=Array.isArray,cr=e=>{if(Gr(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ns=(e,n,o)=>{if(!e)return!1;if(o=o||e,ev(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Tt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Ni=(e,n)=>{const o=[];return ns(e,(r,c)=>{o.push(n(r,c,e))}),o},dp=(e,n)=>{const o=[];return ns(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},pl=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Ca=(e,n,o,r)=>{let c=Bs(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Io=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},yc=e=>e[e.length-1],id=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},_T=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),C=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!C,O=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,A=!x&&!C&&!O;return{isiPad:Le(c),isiPhone:Le(u),isTablet:Le(C),isPhone:Le(x),isTouch:Le(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Le(O),isDesktop:Le(A)}},OT=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},bl=(e,n)=>{const o=OT(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return qr(r(1),r(2))},QF=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?te():bl(e,o)},te=()=>qr(0,0),qr=(e,n)=>({major:e,minor:n}),Om={nu:qr,detect:QF,unknown:te},aC=(e,n)=>sd(n.brands,o=>{const r=o.brand.toLowerCase();return Fo(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Om.nu(parseInt(o.version,10),0)}))}),tv=(e,n)=>{const o=String(n).toLowerCase();return Fo(e,r=>r.search(o))},Jn=(e,n)=>tv(e,n).map(o=>{const r=Om.detect(o.versionRegexes,n);return{current:o.name,version:r}}),nv=(e,n)=>tv(e,n).map(o=>{const r=Om.detect(o.versionRegexes,n);return{current:o.name,version:r}}),AT=(e,n)=>e.substring(n),ng=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Am=(e,n)=>xs(e,n)?AT(e,n.length):e,qs=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Bs(r)?!0:c+n.length<=r:!1},xs=(e,n)=>ng(e,n,0),vl=(e,n)=>ng(e,n,e.length-n.length),Cc=e=>n=>n.replace(e,""),ld=Cc(/^\s+|\s+$/g),og=Cc(/^\s+/g),Dm=Cc(/\s+$/g),Pn=e=>e.length>0,wa=e=>!Pn(e),DT=(e,n)=>n<=0?"":new Array(n+1).join(e),ud=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?N.none():N.some(o)},iu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Za=e=>n=>qs(n,e),Oo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>qs(e,"edge/")&&qs(e,"chrome")&&qs(e,"safari")&&qs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,iu],search:e=>qs(e,"chrome")&&!qs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>qs(e,"msie")||qs(e,"trident")},{name:"Opera",versionRegexes:[iu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Za("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Za("firefox")},{name:"Safari",versionRegexes:[iu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(qs(e,"safari")||qs(e,"mobile/"))&&qs(e,"applewebkit")}],RT=[{name:"Windows",search:Za("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>qs(e,"iphone")||qs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Za("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Za("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Za("linux"),versionRegexes:[]},{name:"Solaris",search:Za("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Za("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Za("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],cC={browsers:Le(Oo),oses:Le(RT)},Bn="Edge",ja="Chromium",Sa="IE",Ks="Opera",mp="Firefox",dd="Safari",wc=()=>md({current:void 0,version:Om.unknown()}),md=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Bn),isChromium:r(ja),isIE:r(Sa),isOpera:r(Ks),isFirefox:r(mp),isSafari:r(dd)}},Jc={unknown:wc,nu:md,edge:Le(Bn),chromium:Le(ja),ie:Le(Sa),opera:Le(Ks),firefox:Le(mp),safari:Le(dd)},iC="Windows",ov="iOS",lC="Android",Qc="Linux",lu="macOS",fp="Solaris",gp="FreeBSD",sv="ChromeOS",rv=()=>sg({current:void 0,version:Om.unknown()}),sg=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(iC),isiOS:r(ov),isAndroid:r(lC),isMacOS:r(lu),isLinux:r(Qc),isSolaris:r(fp),isFreeBSD:r(gp),isChromeOS:r(sv)}},uC={unknown:rv,nu:sg,windows:Le(iC),ios:Le(ov),android:Le(lC),linux:Le(Qc),macos:Le(lu),solaris:Le(fp),freebsd:Le(gp),chromeos:Le(sv)},Sc={detect:(e,n,o)=>{const r=cC.browsers(),c=cC.oses(),u=n.bind(C=>aC(r,C)).orThunk(()=>Jn(r,e)).fold(Jc.unknown,Jc.nu),f=nv(c,e).fold(uC.unknown,uC.nu),b=_T(f,u,e,o);return{browser:u,os:f,deviceType:b}}},MT=e=>window.matchMedia(e).matches;let av=id(()=>Sc.detect(navigator.userAgent,N.from(navigator.userAgentData),MT));const ei=()=>av(),BT=navigator.userAgent,hp=ei(),Es=hp.browser,Ys=hp.os,fd=hp.deviceType,dC=BT.indexOf("Windows Phone")!==-1,Ke={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Es.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Es.isIE(),windowsPhone:dC,browser:{current:Es.current,version:Es.version,isChromium:Es.isChromium,isEdge:Es.isEdge,isFirefox:Es.isFirefox,isIE:Es.isIE,isOpera:Es.isOpera,isSafari:Es.isSafari},os:{current:Ys.current,version:Ys.version,isAndroid:Ys.isAndroid,isChromeOS:Ys.isChromeOS,isFreeBSD:Ys.isFreeBSD,isiOS:Ys.isiOS,isLinux:Ys.isLinux,isMacOS:Ys.isMacOS,isSolaris:Ys.isSolaris,isWindows:Ys.isWindows},deviceType:{isDesktop:fd.isDesktop,isiPad:fd.isiPad,isiPhone:fd.isiPhone,isPhone:fd.isPhone,isTablet:fd.isTablet,isTouch:fd.isTouch,isWebView:fd.isWebView}},mC=/^\s*|\s*$/g,po=e=>cn(e)?"":(""+e).replace(mC,""),Kr=(e,n)=>n?n==="array"&&Gr(e)?!0:typeof e===n:e!==void 0,cv=(e,n,o={})=>{const r=K(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},qo=Tt,NT=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(Tt(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},rg=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ns(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(rg(c,n,o,r),!0)))},Re={trim:po,isArray:Gr,is:Kr,toArray:cr,makeMap:cv,each:ns,map:Ni,grep:dp,inArray:pl,hasOwn:qo,extend:NT,walk:rg,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>An(e)?e:e===""?[]:Ni(e.split(n||","),po),_addCacheSuffix:e=>{const n=Ke.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},bo=(e,n,o=Ot)=>e.exists(r=>o(r,n)),cg=(e,n,o=Ot)=>ir(e,n,o).getOr(e.isNone()&&n.isNone()),Ns=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},ir=(e,n,o)=>e.isSome()&&n.isSome()?N.some(o(e.getOrDie(),n.getOrDie())):N.none(),uu=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?N.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):N.none(),mn=(e,n)=>e?N.some(n):N.none(),yl=typeof window<"u"?window:Function("return this;")(),Ps=(e,n)=>{let o=n??yl;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Rm=(e,n)=>{const o=e.split(".");return Ps(o,n)},os=(e,n)=>Rm(e,n),du=(e,n)=>{const o=os(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},iv=Object.getPrototypeOf,lv=e=>du("HTMLElement",e),fn=e=>{const n=Rm("ownerDocument.defaultView",e);return Sn(e)&&(lv(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(iv(e).constructor.name))},uv=8,mu=9,xc=11,gd=1,ig=3,Qn=e=>e.dom.nodeName.toLowerCase(),fs=e=>e.dom.nodeType,ti=e=>n=>fs(n)===e,PT=e=>fs(e)===uv||Qn(e)==="#comment",uo=e=>Xs(e)&&fn(e.dom),Xs=ti(gd),Js=ti(ig),fC=ti(mu),dv=ti(xc),ni=e=>n=>Xs(n)&&Qn(n)===e,pp=(e,n,o)=>{if(K(o)||on(o)||ba(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Zn=(e,n,o)=>{pp(e.dom,n,o)},Pi=(e,n)=>{const o=e.dom;Ze(n,(r,c)=>{pp(o,c,r)})},Nr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},$i=(e,n)=>N.from(Nr(e,n)),hd=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Lo=(e,n)=>{e.dom.removeAttribute(n)},oi=e=>{const n=e.dom.attributes;return n==null||n.length===0},lg=e=>_o(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),ug=(e,n)=>{const o=Nr(e,n);return o===void 0||o===""?[]:o.split(" ")},gC=(e,n,o)=>{const c=ug(e,n).concat([o]);return Zn(e,n,c.join(" ")),!0},mv=(e,n,o)=>{const r=ht(ug(e,n),c=>c!==o);return r.length>0?Zn(e,n,r.join(" ")):Lo(e,n),!1},si=e=>e.dom.classList!==void 0,dg=e=>ug(e,"class"),Pr=(e,n)=>gC(e,"class",n),bp=(e,n)=>mv(e,"class",n),fv=(e,n)=>Rt(dg(e),n)?bp(e,n):Pr(e,n),pd=(e,n)=>{si(e)?e.dom.classList.add(n):Pr(e,n)},gv=e=>{(si(e)?e.dom.classList:dg(e)).length===0&&Lo(e,"class")},bd=(e,n)=>{si(e)?e.dom.classList.remove(n):bp(e,n),gv(e)},hC=(e,n)=>{const o=si(e)?e.dom.classList.toggle(n):fv(e,n);return gv(e),o},fu=(e,n)=>si(e)&&e.dom.classList.contains(n),pC=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Mm(r.childNodes[0])},bC=(e,n)=>{const r=(n||document).createElement(e);return Mm(r)},vC=(e,n)=>{const r=(n||document).createTextNode(e);return Mm(r)},Mm=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},U={fromHtml:pC,fromTag:bC,fromText:vC,fromDom:Mm,fromPoint:(e,n,o)=>N.from(e.dom.elementFromPoint(n,o)).map(Mm)},Bm=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ec=(e,n)=>{const o=e.dom;if(o.nodeType!==gd)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},vp=e=>e.nodeType!==gd&&e.nodeType!==mu&&e.nodeType!==xc||e.childElementCount===0,kD=(e,n)=>{const o=n===void 0?document:n.dom;return vp(o)?[]:Ft(o.querySelectorAll(e),U.fromDom)},$T=(e,n)=>{const o=n===void 0?document:n.dom;return vp(o)?N.none():N.from(o.querySelector(e)).map(U.fromDom)},Cn=(e,n)=>e.dom===n.dom,Cr=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Fi=e=>U.fromDom(e.dom.ownerDocument),Cl=e=>fC(e)?e:Fi(e),hv=e=>U.fromDom(Cl(e).dom.documentElement),Nm=e=>U.fromDom(Cl(e).dom.defaultView),Ea=e=>N.from(e.dom.parentNode).map(U.fromDom),mg=e=>N.from(e.dom.parentElement).map(U.fromDom),pv=(e,n)=>{const o=q(n)?n:we;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=U.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},CC=e=>{const n=o=>ht(o,r=>!Cn(e,r));return Ea(e).map($s).map(n).getOr([])},Tc=e=>N.from(e.dom.previousSibling).map(U.fromDom),fg=e=>N.from(e.dom.nextSibling).map(U.fromDom),bv=e=>io(Bm(e,Tc)),Ta=e=>Bm(e,fg),$s=e=>Ft(e.dom.childNodes,U.fromDom),gu=(e,n)=>{const o=e.dom.childNodes;return N.from(o[n]).map(U.fromDom)},Pm=e=>gu(e,0),kc=e=>gu(e,e.dom.childNodes.length-1),Yr=e=>e.dom.childNodes.length,vv=e=>e.dom.hasChildNodes(),wC=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return U.fromDom(n)},gg=e=>dv(e)&&Se(e.dom.host),yv=q(Element.prototype.attachShadow)&&q(Node.prototype.getRootNode),yp=Le(yv),Ii=yv?e=>U.fromDom(e.dom.getRootNode()):Cl,SC=e=>gg(e)?e:wC(Cl(e)),_D=e=>gg(e)?e:U.fromDom(Cl(e).dom.body),OD=e=>{const n=Ii(e);return gg(n)?N.some(n):N.none()},FT=e=>U.fromDom(e.dom.host),hg=e=>{if(yp()&&Se(e.target)){const n=U.fromDom(e.target);if(Xs(n)&&xC(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return vr(o)}}return N.from(e.target)},xC=e=>Se(e.dom.shadowRoot),$m=e=>{const n=Js(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return OD(U.fromDom(n)).fold(()=>o.body.contains(n),No($m,FT))};var mo=(e,n,o,r,c)=>e(o,r)?N.some(o):q(c)&&c(o)?N.none():n(o,r,c);const vo=(e,n,o)=>{let r=e.dom;const c=q(o)?o:we;for(;r.parentNode;){r=r.parentNode;const u=U.fromDom(r);if(n(u))return N.some(u);if(c(u))break}return N.none()},Ga=(e,n,o)=>mo((c,u)=>u(c),vo,e,n,o),Cv=(e,n)=>{const o=e.dom;return o.parentNode?IT(U.fromDom(o.parentNode),r=>!Cn(e,r)&&n(r)):N.none()},IT=(e,n)=>{const o=c=>n(U.fromDom(c));return Fo(e.dom.childNodes,o).map(U.fromDom)},wr=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=U.fromDom(r.childNodes[c]);if(n(u))return N.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return N.none()};return o(e.dom)},Fm=(e,n,o)=>vo(e,r=>Ec(r,n),o),ka=(e,n)=>$T(n,e),Li=(e,n,o)=>mo((c,u)=>Ec(c,u),Fm,e,n,o),EC=e=>Li(e,"[contenteditable]"),$t=(e,n=!1)=>$m(e)?e.dom.isContentEditable:EC(e).fold(Le(n),o=>Xr(o)==="true"),Xr=e=>e.dom.contentEditable,hu=e=>e.style!==void 0&&q(e.style.getPropertyValue),Im=(e,n,o)=>{if(!K(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);hu(e)&&e.style.setProperty(n,o)},TC=(e,n)=>{hu(e)&&e.style.removeProperty(n)},kC=(e,n,o)=>{const r=e.dom;Im(r,n,o)},Jr=(e,n)=>{const o=e.dom;Ze(n,(r,c)=>{Im(o,c,r)})},ss=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!$m(e)?_a(o,n):c},_a=(e,n)=>hu(e)?e.style.getPropertyValue(n):"",rs=(e,n)=>{const o=e.dom,r=_a(o,n);return N.from(r).filter(c=>c.length>0)},_C=e=>{const n={},o=e.dom;if(hu(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Cp=(e,n)=>{const o=e.dom;TC(o,n),bo($i(e,"style").map(ld),"")&&Lo(e,"style")},Ho=e=>e.dom.offsetWidth,gs=(e,n)=>{Ea(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},ri=(e,n)=>{fg(e).fold(()=>{Ea(e).each(c=>{Ko(c,n)})},r=>{gs(r,n)})},wp=(e,n)=>{Pm(e).fold(()=>{Ko(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Ko=(e,n)=>{e.dom.appendChild(n.dom)},wv=(e,n)=>{gs(e,n),Ko(n,e)},OC=(e,n)=>{he(n,(o,r)=>{const c=r===0?e:n[r-1];ri(c,o)})},$n=(e,n)=>{he(n,o=>{Ko(e,o)})},Lm=e=>{e.dom.textContent="",he($s(e),n=>{Tn(n)})},Tn=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ai=e=>{const n=$s(e);n.length>0&&OC(e,n),Tn(e)},Sv=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,$s(U.fromDom(r))},Sp=e=>Ft(e,U.fromDom),qt=e=>e.dom.innerHTML,Hm=(e,n)=>{const r=Fi(e).dom,c=U.fromDom(r.createDocumentFragment()),u=Sv(n,r);$n(c,u),Lm(e),Ko(e,c)},AC=e=>{const n=U.fromTag("div"),o=U.fromDom(e.dom.cloneNode(!0));return Ko(n,o),qt(n)},xv=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),AD=e=>{const n=U.fromDom(hg(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=k(r,o);return xv(n,e.clientX,e.clientY,o,r,c,e)},LT=(e,n)=>o=>{e(o)&&n(AD(o))},DC=(e,n,o,r,c)=>{const u=LT(o,r);return e.dom.addEventListener(n,u,c),{unbind:Ee(Ev,e,n,u,c)}},xp=(e,n,o,r)=>DC(e,n,o,r,!1),Ev=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},vd=(e,n)=>({left:e,top:n,translate:(r,c)=>vd(e+r,n+c)}),Vm=vd,RC=e=>{const n=e.getBoundingClientRect();return Vm(n.left,n.top)},_c=(e,n)=>e!==void 0?e:n!==void 0?n:0,HT=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Vm(o.offsetLeft,o.offsetTop);const u=_c(r==null?void 0:r.pageYOffset,c.scrollTop),f=_c(r==null?void 0:r.pageXOffset,c.scrollLeft),b=_c(c.clientTop,o.clientTop),C=_c(c.clientLeft,o.clientLeft);return zm(e).translate(f-C,u-b)},zm=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Vm(r.offsetLeft,r.offsetTop):$m(e)?RC(n):Vm(0,0)},Oc=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Vm(o,r)},Tv=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},kv=(e,n)=>{ei().browser.isSafari()&&q(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},_v=e=>{const n=e===void 0?window:e;return ei().browser.isFirefox()?N.none():N.from(n.visualViewport)},Ov=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Av=e=>{const n=e===void 0?window:e,o=n.document,r=Oc(U.fromDom(o));return _v(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Ov(r.left,r.top,u,f)},c=>Ov(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},MC=(e,n)=>ht($s(e),n),Dv=(e,n)=>{let o=[];return he($s(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Dv(r,n))}),o},hs=(e,n)=>kD(n,e),BC=(e,n,o)=>Fm(e,n,o).isSome();class Fn{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const ct=e=>n=>!!n&&n.nodeType===e,ci=e=>!!e&&!Object.getPrototypeOf(e),qe=ct(1),Ep=e=>{const n=e.toLowerCase();return o=>Se(o)&&o.nodeName.toLowerCase()===n},Hi=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Rt(n,r)}return!1}},pu=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(qe(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Qr=e=>n=>qe(n)&&n.hasAttribute(e),Tp=(e,n)=>o=>qe(o)&&o.getAttribute(e)===n,Vi=e=>qe(e)&&e.hasAttribute("data-mce-bogus"),Ts=e=>qe(e)&&e.getAttribute("data-mce-bogus")==="all",qa=e=>qe(e)&&e.tagName==="TABLE",pg=e=>n=>!!(qe(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),kp=Hi(["textarea","input"]),Oe=ct(3),NC=ct(4),yd=ct(7),wl=ct(8),Ac=ct(9),_p=ct(11),yo=Ep("br"),ro=Ep("img"),ks=pg("true"),an=pg("false"),zi=Hi(["td","th"]),Fs=Hi(["td","th","caption"]),ii=Hi(["video","audio","object","embed"]),Is=Ep("li"),Qs=Ep("details"),Op=Ep("summary"),ve="\uFEFF",In=" ",Rv=e=>e===ve,Vo=e=>e.replace(/\uFEFF/g,""),Mv=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?N.from(u.dom.nodeValue):N.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Js,"text"),ea=e=>Mv.get(e),PC=e=>Mv.getOption(e),vu=(e,n)=>Mv.set(e,n),$C=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Oa=["td","th"],gn=["thead","tbody","tfoot"],Ui=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Cd=["h1","h2","h3","h4","h5","h6"],er=["li","dd","dt"],Bv=["ul","ol","dl"],wd=["pre","script","textarea","style"],FC=["pre"].concat(Cd),as=e=>{let n;return o=>(n=n||ms(e,Xe),Tt(n,Qn(o)))},Aa=as($C),ne=e=>Qn(e)==="table",$r=e=>Xs(e)&&!Aa(e),Dc=e=>Xs(e)&&Qn(e)==="br",li=as(Ui),Ka=as(Bv),Yo=as(er),ps=as(gn),Ap=as(Oa),ta=as(wd),Nv=as(FC),pt=e=>Nv(e)||$r(e),DD=e=>{const n=[];let o=e.dom;for(;o;)n.push(U.fromDom(o)),o=o.lastChild;return n},Rc=e=>{const n=hs(e,"br"),o=ht(DD(e).slice(-1),Dc);n.length===o.length&&he(o,Tn)},bg=()=>{const e=U.fromTag("br");return Zn(e,"data-mce-bogus","1"),e},yu=e=>{Lm(e),Ko(e,bg())},VT=e=>{kc(e).each(n=>{Tc(n).each(o=>{Aa(e)&&Dc(n)&&Aa(o)&&Tn(n)})})},tr=ve,Pv=Rv,Sr=Vo,Cu=qe,Sd=Oe,Um=e=>(Sd(e)&&(e=e.parentNode),Cu(e)&&e.hasAttribute("data-mce-caret")),na=e=>Sd(e)&&Pv(e.data),Da=e=>Um(e)||na(e),$v=e=>e.firstChild!==e.lastChild||!yo(e.firstChild),Dp=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(tr),u=e.parentNode;if(n){const f=e.previousSibling;if(Sd(f)){if(Da(f))return f;if(Bp(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(Sd(f)){if(Da(f))return f;if(Mp(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},vg=e=>{const n=e.container();return Oe(n)?n.data.charAt(e.offset())===tr||e.isAtStart()&&na(n.previousSibling):!1},Rp=e=>{const n=e.container();return Oe(n)?n.data.charAt(e.offset()-1)===tr||e.isAtEnd()&&na(n.nextSibling):!1},xd=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(bg().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Mp=e=>Sd(e)&&e.data[0]===tr,Bp=e=>Sd(e)&&e.data[e.data.length-1]===tr,Fv=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Vi(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},yg=e=>e&&e.hasAttribute("data-mce-caret")?(Fv(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,bs=e=>Um(e.startContainer),ui=ks,Cg=an,Ed=yo,IC=Oe,Ya=Hi(["script","style","textarea"]),Td=Hi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Np=Hi(["table"]),Iv=Da,Ls=e=>Iv(e)?!1:IC(e)?!Ya(e.parentNode):Td(e)||Ed(e)||Np(e)||wg(e),oa=e=>qe(e)&&e.getAttribute("unselectable")==="true",wg=e=>!oa(e)&&Cg(e),Mc=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(wg(o))return!1;if(ui(o))return!0}return!0},zT=e=>wg(e)?!_o(Zr(e.getElementsByTagName("*")),(n,o)=>n||ui(o),!1):!1,kd=e=>Td(e)||zT(e),_d=(e,n)=>Ls(e)&&Mc(e,n),wu=/^[ \t\r\n]*$/,Su=e=>wu.test(e),Wm=e=>{for(const n of e)if(!Rv(n))return!1;return!0},Lv=e=>" \f	\v".indexOf(e)!==-1,Hv=e=>e===`
`||e==="\r",Co=(e,n)=>n<e.length&&n>=0?Hv(e[n]):!1,Pp=(e,n=4,o=!0,r=!0)=>{const c=DT(" ",n),u=e.replace(/\t/g,c);return _o(u,(b,C)=>Lv(C)||C===In?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Co(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+In}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Hv(C),str:b.str+C},{pcIsSpace:!1,str:""}).str},di=(e,n)=>{const o=U.fromDom(n),r=U.fromDom(e);return BC(r,"pre,code",Ee(Cn,o))},xu=(e,n)=>Oe(e)&&Su(e.data)&&!di(e,n),Od=e=>qe(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Wi=(e,n)=>Ls(e)&&!xu(e,n)||Od(e)||sa(e),sa=Qr("data-mce-bookmark"),Sg=Qr("data-mce-bogus"),xg=Tp("data-mce-bogus","all"),UT=(e,n)=>{let o=0;if(Wi(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new Fn(r,e);do{if(n){if(xg(r)){r=c.next(!0);continue}if(Sg(r)){r=c.next();continue}}if(yo(r)){o++,r=c.next();continue}if(Wi(r,e))return!1;r=c.next()}while(r);return o<=1}},wo=(e,n=!0)=>UT(e.dom,n),Ad="data-mce-block",Eu=e=>ht(yr(e),n=>!/[A-Z]/.test(n)),$p=e=>Eu(e).join(","),Eg=(e,n)=>Se(n.querySelector(e))?(n.setAttribute(Ad,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Ad),!1),Sl=(e,n)=>{const o=$p(e.getTransparentElements()),r=$p(e.getBlockElements());return ht(n.querySelectorAll(o),c=>Eg(r,c))},mi=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(wo(U.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},Xa=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();mi(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();mi(u,!1),wo(U.fromDom(c))||r.insertBefore(c,e),wo(U.fromDom(n))||r.insertBefore(n,e),wo(U.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},Dd=(e,n,o)=>{const r=e.getBlockElements(),c=U.fromDom(n),u=b=>Qn(b)in r,f=b=>Cn(b,c);he(Sp(o),b=>{vo(b,u,f).each(C=>{const x=MC(b,O=>u(O)&&!e.isValidChild(Qn(C),Qn(O)));if(x.length>0){const O=mg(C);he(x,A=>{vo(A,u,f).each(B=>{Xa(B.dom,A.dom)})}),O.each(A=>Sl(e,A.dom))}})})},Tu=(e,n,o)=>{he([...o,...ku(e,n)?[n]:[]],r=>he(hs(U.fromDom(r),r.nodeName.toLowerCase()),c=>{zv(e,c.dom)&&ai(c)}))},Fp=(e,n)=>{const o=Sl(e,n);Dd(e,n,o),Tu(e,n,o)},Ip=(e,n)=>{if(Hp(e,n)){const o=$p(e.getBlockElements());Eg(o,n)}},Vv=(e,n,o)=>{const r=u=>Cn(u,U.fromDom(n)),c=pv(U.fromDom(o),r);tg(c,c.length-2).filter(Xs).fold(()=>Fp(e,n),u=>Fp(e,u.dom))},Zm=e=>e.hasAttribute(Ad),Lp=(e,n)=>Tt(e.getTransparentElements(),n),Hp=(e,n)=>qe(n)&&Lp(e,n.nodeName),ku=(e,n)=>Hp(e,n)&&Zm(n),zv=(e,n)=>Hp(e,n)&&!Zm(n),rn=(e,n)=>n.type===1&&Lp(e,n.name)&&K(n.attr(Ad)),lt=ei().browser,_u=e=>Fo(e,Xs),Vp=e=>lt.isFirefox()&&Qn(e)==="table"?_u($s(e)).filter(n=>Qn(n)==="caption").bind(n=>_u(Ta(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Tg=(e,n)=>e.children&&Rt(e.children,n),WT=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&ss(U.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!Tg(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Tg(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Vp(U.fromDom(n))}return{x:r,y:c}},Uv=(e,n={})=>{let o=0;const r={},c=U.fromDom(e),u=Cl(c),f=F=>{n.referrerPolicy=F},b=F=>{n.contentCssCors=F},C=F=>{Ko(SC(c),F)},x=F=>{const V=SC(c);ka(V,"#"+F).each(Tn)},O=F=>Xn(r,F).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),A=F=>new Promise((V,Y)=>{let X;const Q=Re._addCacheSuffix(F),se=O(Q);r[Q]=se,se.count++;const Ce=(le,Te)=>{he(le,Br),se.status=Te,se.passed=[],se.failed=[],X&&(X.onload=null,X.onerror=null,X=null)},Ie=()=>Ce(se.passed,2),Pe=()=>Ce(se.failed,3);if(V&&se.passed.push(V),Y&&se.failed.push(Y),se.status===1)return;if(se.status===2){Ie();return}if(se.status===3){Pe();return}se.status=1;const ce=U.fromTag("link",u.dom);Pi(ce,{rel:"stylesheet",type:"text/css",id:se.id}),n.contentCssCors&&Zn(ce,"crossOrigin","anonymous"),n.referrerPolicy&&Zn(ce,"referrerpolicy",n.referrerPolicy),X=ce.dom,X.onload=Ie,X.onerror=Pe,C(ce),Zn(ce,"href",Q)}),B=F=>Promise.allSettled(Ft(F,Y=>A(Y).then(Le(Y)))).then(Y=>{const X=br(Y,Q=>Q.status==="fulfilled");return X.fail.length>0?Promise.reject(Ft(X.fail,Q=>Q.reason)):Ft(X.pass,Q=>Q.value)}),L=F=>{const V=Re._addCacheSuffix(F);Xn(r,V).each(Y=>{--Y.count===0&&(delete r[V],x(Y.id))})};return{load:A,loadAll:B,unload:L,unloadAll:F=>{he(F,V=>{L(V)})},_setReferrerPolicy:f,_setContentCssCors:b}},Wv=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Ii(o).dom;return N.from(e.get(u)).getOrThunk(()=>{const f=Uv(u,r);return e.set(u,f),f})}}})(),zp=e=>e.nodeName.toLowerCase()==="span",Zv=(e,n)=>Se(e)&&(Wi(e,n)||$r(U.fromDom(e))),be=(e,n)=>{const o=new Fn(e,n).prev(!1),r=new Fn(e,n).next(!1),c=Bs(o)||Zv(o,n),u=Bs(r)||Zv(r,n);return c&&u},Up=e=>zp(e)&&e.getAttribute("data-mce-type")==="bookmark",ZT=(e,n)=>Oe(e)&&e.data.length>0&&be(e,n),Wp=e=>qe(e)?e.childNodes.length>0:!1,jT=e=>_p(e)||Ac(e),Ou=(e,n,o)=>{var r;const c=o||n;if(qe(n)&&Up(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)Ou(e,u[f],c);if(qe(n)){const f=n.childNodes;f.length===1&&Up(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!jT(n)&&!Wi(n,c)&&!Wp(n)&&!ZT(n,c)&&e.remove(n),n},jv=Re.makeMap,Zi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rd=/[<>&\"\']/g,Vn=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ji={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},xl={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Bc={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Gv=e=>{const n=U.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},jp=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!xl[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},El=jp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),LC=(e,n)=>e.replace(n?Zi:Zp,o=>xl[o]||o),GT=e=>(""+e).replace(Rd,n=>xl[n]||n),qv=(e,n)=>e.replace(n?Zi:Zp,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":xl[o]||"&#"+o.charCodeAt(0)+";"),Kv=(e,n,o)=>{const r=o||El;return e.replace(n?Zi:Zp,c=>xl[c]||r[c]||c)},Du={encodeRaw:LC,encodeAllRaw:GT,encodeNumeric:qv,encodeNamed:Kv,getEncodeFunc:(e,n)=>{const o=jp(n)||El,r=(f,b)=>f.replace(b?Zi:Zp,C=>xl[C]!==void 0?xl[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),c=(f,b)=>Kv(f,b,o),u=jv(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:Kv:u.numeric?qv:LC},decode:e=>e.replace(Vn,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):ji[o]||String.fromCharCode(o)):Bc[n]||El[n]||Gv(n))},vs=(e,n)=>(e=Re.trim(e),e?e.split(n||" "):[]),Yv=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Je=e=>{const n=/^(~)?(.+)$/;return Ua(vs(e,","),o=>{const r=n.exec(o);if(r){const c=r[1]==="~",u=c?"span":"div",f=r[2];return[{inline:c,cloneName:u,name:f}]}else return[]})},Xv=e=>{let n,o,r,c;if(n="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const u="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav "+u,r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}return e!=="html5-strict"&&(n+=" xml:lang",r=[r,"acronym applet basefont big font strike tt"].join(" "),o=[o,"center dir isindex noframes"].join(" "),c=[o,r].join(" ")),c=c||[o,r].join(" "),{globalAttributes:n,blockContent:o,phrasingContent:r,flowContent:c}},qT=e=>{const{globalAttributes:n,phrasingContent:o,flowContent:r}=Xv(e),c={},u=(b,C="",x="")=>{const O=vs(x),A=vs(b);let B=A.length;for(;B--;){const L=vs([n,C].join(" "));c[A[B]]={attributes:ms(L,Le({})),attributesOrder:L,children:ms(O,Le({}))}}},f=(b,C)=>{const x=vs(b),O=vs(C);let A=x.length;for(;A--;){const B=c[x[A]];for(let L=0,z=O.length;L<z;L++)B.attributes[O[L]]={},B.attributesOrder.push(O[L])}};return e!=="html5-strict"&&(he(vs("acronym applet basefont big font strike tt"),x=>{u(x,"",o)}),he(vs("center dir isindex noframes"),x=>{u(x,"",r)})),u("html","manifest","head body"),u("head","","base command link meta noscript script style title"),u("title hr noscript br"),u("base","href target"),u("link","href rel media hreflang type sizes hreflang"),u("meta","name http-equiv content charset"),u("style","media type scoped"),u("script","src async defer type charset"),u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),u("dd div","",r),u("address dt caption","",e==="html4"?o:r),u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),u("blockquote","cite",r),u("ol","reversed start type","li"),u("ul","","li"),u("li","value",r),u("dl","","dt dd"),u("a","href target rel media hreflang type",e==="html4"?o:r),u("q","cite",o),u("ins del","cite datetime",r),u("img","src sizes srcset alt usemap ismap width height"),u("iframe","src name width height",r),u("embed","src type width height"),u("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),u("param","name value"),u("map","name",[r,"area"].join(" ")),u("area","alt coords shape href target rel media hreflang type"),u("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),u("colgroup","span","col"),u("col","span"),u("tbody thead tfoot","","tr"),u("tr","","td th"),u("td","colspan rowspan headers",r),u("th","colspan rowspan headers scope abbr",r),u("form","accept-charset action autocomplete enctype method name novalidate target",r),u("fieldset","disabled form name",[r,"legend"].join(" ")),u("label","form for",o),u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),u("select","disabled form multiple name required size","option optgroup"),u("optgroup","disabled label","option"),u("option","disabled label selected value"),u("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),u("menu","type label",[r,"li"].join(" ")),u("noscript","",r),e!=="html4"&&(u("wbr"),u("ruby","",[o,"rt rp"].join(" ")),u("figcaption","",r),u("mark rt rp summary bdi","",o),u("canvas","width height",r),u("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),u("picture","","img source"),u("source","src srcset type media sizes"),u("track","kind src srclang label default"),u("datalist","",[o,"option"].join(" ")),u("article section nav aside main header footer","",r),u("hgroup","","h1 h2 h3 h4 h5 h6"),u("figure","",[r,"figcaption"].join(" ")),u("time","datetime",o),u("dialog","open",r),u("command","type label icon disabled checked radiogroup command"),u("output","for form name",o),u("progress","value max",o),u("meter","value min max low high optimum",o),u("details","open",[r,"summary"].join(" ")),u("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),e!=="html4"&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&he([c.video,c.audio],b=>{delete b.children.audio,delete b.children.video}),he(vs("a form meter progress dfn"),b=>{c[b]&&delete c[b].children[b]}),delete c.caption.children.table,delete c.script,c},Jv=e=>e==="-"?"remove":"add",HC=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ua(vs(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?Jv(c):"replace",f=r[2],b=vs(r[3],"|");return[{operation:u,name:f,validChildren:b}]}else return[]})},KT=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return he(vs(e,"|"),f=>{const b=o.exec(f);if(b){const C={},x=b[1],O=b[2].replace(/[\\:]:/g,":"),A=b[3],B=b[4];if(x==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(O),C.required=!0),x==="-"){delete c[O],u.splice(Re.inArray(u,O),1);return}if(A&&(A==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:O,value:B}),C.defaultValue=B):A==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:O,value:B}),C.forcedValue=B):A==="<"&&(C.validValues=Re.makeMap(B,"?"))),r.test(O)){const L=C;n.attributePatterns=n.attributePatterns||[],L.pattern=Yv(O),n.attributePatterns.push(L)}else c[O]||u.push(O),c[O]=C}})},Tl=(e,n)=>{Ze(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Ru=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ua(vs(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],C=c[4],x=c[5],O={attributes:{},attributesOrder:[]};if(e.each(A=>Tl(A,O)),u==="#"?O.paddEmpty=!0:u==="-"&&(O.removeEmpty=!0),C==="!"&&(O.removeEmptyAttrs=!0),x&&KT(x,O),b&&(O.outputName=f),f==="@")if(e.isNone())e=N.some(O);else return[];return[b?{name:f,element:O,aliasName:b}:{name:f,element:O}]}else return[]})},kl={},kg=Re.makeMap,Ra=Re.each,Gp=Re.extend,VC=Re.explode,jm=(e,n={})=>{const o=kg(e," ",kg(e.toUpperCase()," "));return Gp(o,n)},Ja=e=>jm("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Qv=(e,n)=>{if(e){const o={};return K(e)&&(e={"*":e}),Ra(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?kg(r,/[, ]/):VC(r,/[, ]/)}),o}else return},fi=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(Qe,Ut,wn)=>{const go=e[Qe];if(go)return kg(go,/[, ]/,kg(go.toUpperCase(),/[, ]/));{let On=kl[Qe];return On||(On=jm(Ut,wn),kl[Qe]=On),On}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",x=qT(C);e.verify_html===!1&&(e.valid_elements="*[*]");const O=Qv(e.valid_styles),A=Qv(e.invalid_styles,"map"),B=Qv(e.valid_classes,"map"),L=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),z=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),F=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),V=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Y="td th iframe video audio object script code",X=b("non_empty_elements",Y+" pre",F),Q=b("move_caret_before_on_enter_elements",Y+" table",F),se=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ce=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",se),Ie=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Pe=b("transparent_elements","a ins del canvas map");Ra("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Qe=>{f[Qe]=new RegExp("</"+Qe+"[^>]*>","gi")});const ce=Qe=>{const Ut=N.from(o["@"]),wn=/[*?+]/;he(Ru(Ut,Qe??""),({name:go,element:On,aliasName:Rs})=>{if(Rs&&(o[Rs]=On),wn.test(go)){const hc=On;hc.pattern=Yv(go),c.push(hc)}else o[go]=On})},le=Qe=>{c=[],he(yr(o),Ut=>{delete o[Ut]}),ce(Qe)},Te=Qe=>{delete kl.text_block_elements,delete kl.block_elements,he(Je(Qe??""),({inline:Ut,name:wn,cloneName:go})=>{if(r[wn]=r[go],u[wn]=go,X[wn.toUpperCase()]={},X[wn]={},Ut||(Ce[wn.toUpperCase()]={},Ce[wn]={}),!o[wn]){let On=o[go];On=Gp({},On),delete On.removeEmptyAttrs,delete On.removeEmpty,o[wn]=On}Ze(r,(On,Rs)=>{On[go]&&(r[Rs]=On=Gp({},r[Rs]),On[wn]=On[go])})})},tt=Qe=>{he(HC(Qe??""),({operation:Ut,name:wn,validChildren:go})=>{const On=Ut==="replace"?{"#comment":{}}:r[wn];he(go,Rs=>{Ut==="remove"?delete On[Rs]:On[Rs]={}}),r[wn]=On})},it=Qe=>{const Ut=o[Qe];if(Ut)return Ut;let wn=c.length;for(;wn--;){const go=c[wn];if(go.pattern.test(Qe))return go}};e.valid_elements?(le(e.valid_elements),Ra(x,(Qe,Ut)=>{r[Ut]=Qe.children})):(Ra(x,(Qe,Ut)=>{o[Ut]={attributes:Qe.attributes,attributesOrder:Qe.attributesOrder},r[Ut]=Qe.children}),Ra(vs("strong/b em/i"),Qe=>{const Ut=vs(Qe,"/");o[Ut[1]].outputName=Ut[0]}),Ra(Ie,(Qe,Ut)=>{o[Ut]&&(e.padd_empty_block_inline_children&&(o[Ut].paddInEmptyBlock=!0),o[Ut].removeEmpty=!0)}),Ra(vs("ol ul blockquote a table tbody"),Qe=>{o[Qe]&&(o[Qe].removeEmpty=!0)}),Ra(vs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Qe=>{o[Qe]&&(o[Qe].paddEmpty=!0)}),Ra(vs("span"),Qe=>{o[Qe].removeEmptyAttrs=!0})),Te(e.custom_elements),tt(e.valid_children),ce(e.extended_valid_elements),tt("+ol[ul|ol],+ul[ul|ol]"),Ra({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Qe,Ut)=>{o[Ut]&&(o[Ut].parentsRequired=vs(Qe))}),e.invalid_elements&&Ra(VC(e.invalid_elements),Qe=>{o[Qe]&&delete o[Qe]}),it("span")||ce("span[!data-mce-type|*]");const Bt=Le(O),zt=Le(A),un=Le(B),xn=Le(V),ko=Le(Ce),Go=Le(se),Ss=Le(Ie),Me=Le(Object.seal(F)),je=Le(z),sn=Le(X),Ht=Le(Q),st=Le(L),Be=Le(Pe),De=Le(Object.seal(f)),bt=(Qe,Ut)=>{const wn=r[Qe.toLowerCase()];return!!(wn&&wn[Ut.toLowerCase()])},jt=(Qe,Ut)=>{const wn=it(Qe);if(wn)if(Ut){if(wn.attributes[Ut])return!0;const go=wn.attributePatterns;if(go){let On=go.length;for(;On--;)if(go[On].pattern.test(Ut))return!0}}else return!0;return!1},pn=Le(u);return{type:C,children:r,elements:o,getValidStyles:Bt,getValidClasses:un,getBlockElements:ko,getInvalidStyles:zt,getVoidElements:Me,getTextBlockElements:Go,getTextInlineElements:Ss,getBoolAttrs:xn,getElementRule:it,getSelfClosingElements:je,getNonEmptyElements:sn,getMoveCaretBeforeOnEnterElements:Ht,getWhitespaceElements:st,getTransparentElements:Be,getSpecialElements:De,isValidChild:bt,isValid:jt,getCustomElements:pn,addValidElements:ce,setValidElements:le,addCustomElements:Te,addValidChildren:tt}},qp=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const C=ve;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let A=0;A<x.length;A++)u[x[A]]=C+A,u[C+A]=x[A];const O={parse:A=>{const B={};let L=!1;const z=e.url_converter,F=e.url_converter_scope||O,V=(ce,le,Te)=>{const tt=B[ce+"-top"+le];if(!tt)return;const it=B[ce+"-right"+le];if(!it)return;const Bt=B[ce+"-bottom"+le];if(!Bt)return;const zt=B[ce+"-left"+le];if(!zt)return;const un=[tt,it,Bt,zt];let xn=un.length-1;for(;xn--&&un[xn]===un[xn+1];);xn>-1&&Te||(B[ce+le]=xn===-1?un[0]:un.join(" "),delete B[ce+"-top"+le],delete B[ce+"-right"+le],delete B[ce+"-bottom"+le],delete B[ce+"-left"+le])},Y=ce=>{const le=B[ce];if(!le)return;const Te=le.indexOf(",")>-1?[le]:le.split(" ");let tt=Te.length;for(;tt--;)if(Te[tt]!==Te[0])return!1;return B[ce]=Te[0],!0},X=(ce,le,Te,tt)=>{Y(le)&&Y(Te)&&Y(tt)&&(B[ce]=B[le]+" "+B[Te]+" "+B[tt],delete B[le],delete B[Te],delete B[tt])},Q=ce=>(L=!0,u[ce]),se=(ce,le)=>(L&&(ce=ce.replace(/\uFEFF[0-9]/g,Te=>u[Te])),le||(ce=ce.replace(/\\([\'\";:])/g,"$1")),ce),Ce=ce=>String.fromCharCode(parseInt(ce.slice(1),16)),Ie=ce=>ce.replace(/\\[0-9a-f]+/gi,Ce),Pe=(ce,le,Te,tt,it,Bt)=>{if(it=it||Bt,it)return it=se(it),"'"+it.replace(/\'/g,"\\'")+"'";if(le=se(le||Te||tt||""),!e.allow_script_urls){const zt=le.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(zt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(zt))return""}return z&&(le=z.call(F,le,"style")),"url('"+le.replace(/\'/g,"\\'")+"')"};if(A){A=A.replace(/[\u0000-\u001F]/g,""),A=A.replace(/\\[\"\';:\uFEFF]/g,Q).replace(/\"[^\"]+\"|\'[^\']+\'/g,le=>le.replace(/[;:]/g,Q));let ce;for(;ce=r.exec(A);){r.lastIndex=ce.index+ce[0].length;let le=ce[1].replace(c,"").toLowerCase(),Te=ce[2].replace(c,"");if(le&&Te){if(le=Ie(le),Te=Ie(Te),le.indexOf(C)!==-1||le.indexOf('"')!==-1||!e.allow_script_urls&&(le==="behavior"||/expression\s*\(|\/\*|\*\//.test(Te)))continue;le==="font-weight"&&Te==="700"?Te="bold":(le==="color"||le==="background-color")&&(Te=Te.toLowerCase()),Te=Te.replace(o,Pe),B[le]=L?se(Te,!0):Te}}V("border","",!0),V("border","-width"),V("border","-color"),V("border","-style"),V("padding",""),V("margin",""),X("border","border-width","border-style","border-color"),B.border==="medium none"&&delete B.border,B["border-image"]==="none"&&delete B["border-image"]}return B},serialize:(A,B)=>{let L="";const z=(V,Y)=>{const X=Y[V];if(X)for(let Q=0,se=X.length;Q<se;Q++){const Ce=X[Q],Ie=A[Ce];Ie&&(L+=(L.length>0?" ":"")+Ce+": "+Ie+";")}},F=(V,Y)=>{if(!b||!Y)return!0;let X=b["*"];return X&&X[V]?!1:(X=b[Y],!(X&&X[V]))};return B&&f?(z("*",f),z(B,f)):Ze(A,(V,Y)=>{V&&F(Y,B)&&(L+=(L.length>0?" ":"")+Y+": "+V+";")}),L}};return O},YT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},zC=e=>e instanceof Event||q(e.initEvent),Mu=e=>e.isDefaultPrevented===Xe||e.isDefaultPrevented===we,Nc=e=>cn(e.preventDefault)||zC(e),Fr=(e,n)=>{const o=n??{};for(const r in e)Tt(YT,r)||(o[r]=e[r]);return Se(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},Kp=(e,n,o,r)=>{var c;const u=Fr(n,r);return u.type=e,cn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),Nc(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Xe,q(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Xe,q(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Xe,u.stopPropagation()},Mu(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Xe:we,u.isPropagationStopped=u.cancelBubble===!0?Xe:we,u.isImmediatePropagationStopped=we)),u},XT="mce-data-",JT=/^(?:mouse|contextmenu)|click/,Yp=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},ra=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Xp=e=>Se(e)&&JT.test(e.type),Gm=(e,n)=>{const o=Kp(e.type,e,document,n);if(Xp(e)&&Bs(e.pageX)&&!Bs(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},UC=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{ra(e,"DOMContentLoaded",f),ra(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():Yp(e,"DOMContentLoaded",f),o.domLoaded||Yp(e,"load",f)};class Gi{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=XT+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,C=B=>{u.executeHandlers(Gm(B||b.event),x)};if(!n||Oe(n)||wl(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const O=o.split(" ");let A=O.length;for(;A--;){let B=O[A],L=C,z=!1,F=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(c,Gm({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(z=!0,F=B==="focusin"?"focus":"blur",L=V=>{const Y=Gm(V||b.event);Y.type=Y.type==="focus"?"focusin":"focusout",u.executeHandlers(Y,x)}),f=u.events[x][B],f?B==="ready"&&u.domLoaded?r(Gm({type:B})):f.push({func:r,scope:c}):(u.events[x][B]=f=[{func:r,scope:c}],f.fakeName=F,f.capture=z,f.nativeHandler=L,B==="ready"?UC(n,L,u):Yp(n,F||B,L,z))}return n=f=null,r}unbind(n,o,r){if(!n||Oe(n)||wl(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const C=f[b],x=u[C];if(x){if(r){let O=x.length;for(;O--;)if(x[O].func===r){const A=x.nativeHandler,B=x.fakeName,L=x.capture,z=x.slice(0,O).concat(x.slice(O+1));z.nativeHandler=A,z.fakeName=B,z.capture=L,u[C]=z}}(!r||x.length===0)&&(delete u[C],ra(n,x.fakeName||C,x.nativeHandler,x.capture))}}}else Ze(u,(f,b)=>{ra(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Tt(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Oe(n)||wl(n))return this;const c=Gm({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||Oe(n)||wl(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Gi.Event=new Gi;const e0=Re.each,WC=Re.grep,Md="data-mce-style",t0=Re.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Bu=(e,n,o)=>{cn(o)||o===""?Lo(e,n):Zn(e,n,o)},_g=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),qm=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&Oe(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},n0=(e,n)=>{const o=Nr(n,"style"),r=e.serialize(e.parse(o),Qn(n));Bu(n,Md,r)},o0=(e,n)=>ba(e)?Tt(t0,n)?e+"":e+"px":e,ZC=(e,n,o)=>{const r=_g(n);cn(o)||o===""?Cp(e,r):kC(e,r,o0(o,r))},QT=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,C)=>{const x=U.fromDom(f);q(n.url_converter)&&Se(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),C,f));const O="data-mce-"+C;Bu(x,O,b),Bu(x,C,b)},get:(f,b)=>{const C=U.fromDom(f);return Nr(C,"data-mce-"+b)||Nr(C,b)}},u={style:{set:(f,b)=>{const C=U.fromDom(f);r&&Bu(C,Md,b),Lo(C,"style"),K(b)&&Jr(C,e.parse(b))},get:f=>{const b=U.fromDom(f),C=Nr(b,Md)||Nr(b,"style");return e.serialize(e.parse(C),Qn(b))}}};return r&&(u.href=u.src=c),u},hn=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,C=Wv.forElement(U.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],O=n.schema?n.schema:fi({}),A=qp({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),B=n.ownEvents?new Gi:Gi.Event,L=O.getBlockElements(),z=re=>K(re)?Tt(L,re):qe(re)&&(Tt(L,re.nodeName)||ku(O,re)),F=re=>re&&e&&K(re)?e.getElementById(re):re,V=re=>{const ae=F(re);return Se(ae)?U.fromDom(ae):null},Y=(re,ae,Ne="")=>{let _e;const dt=V(re);if(Se(dt)&&Xs(dt)){const tn=ep[ae];tn&&tn.get?_e=tn.get(dt.dom,ae):_e=Nr(dt,ae)}return Se(_e)?_e:Ne},X=re=>{const ae=F(re);return cn(ae)?[]:ae.attributes},Q=(re,ae,Ne)=>{je(re,_e=>{if(qe(_e)){const dt=U.fromDom(_e),tn=Ne===""?null:Ne,Kn=Nr(dt,ae),Ms=ep[ae];Ms&&Ms.set?Ms.set(dt.dom,tn,ae):Bu(dt,ae,tn),Kn!==tn&&n.onSetAttrib&&n.onSetAttrib({attrElm:dt.dom,attrName:ae,attrValue:tn})}})},se=(re,ae)=>re.cloneNode(ae),Ce=()=>n.root_element||e.body,Ie=re=>{const ae=Av(re);return{x:ae.x,y:ae.y,w:ae.width,h:ae.height}},Pe=(re,ae)=>WT(e.body,F(re),ae),ce=(re,ae,Ne)=>{je(re,_e=>{const dt=U.fromDom(_e);ZC(dt,ae,Ne),n.update_styles&&n0(A,dt)})},le=(re,ae)=>{je(re,Ne=>{const _e=U.fromDom(Ne);Ze(ae,(dt,tn)=>{ZC(_e,tn,dt)}),n.update_styles&&n0(A,_e)})},Te=(re,ae,Ne)=>{const _e=F(re);if(!(cn(_e)||!qe(_e)))return Ne?ss(U.fromDom(_e),_g(ae)):(ae=ae.replace(/-(\D)/g,(dt,tn)=>tn.toUpperCase()),ae==="float"&&(ae="cssFloat"),_e.style?_e.style[ae]:void 0)},tt=re=>{const ae=F(re);if(!ae)return{w:0,h:0};let Ne=Te(ae,"width"),_e=Te(ae,"height");return(!Ne||Ne.indexOf("px")===-1)&&(Ne="0"),(!_e||_e.indexOf("px")===-1)&&(_e="0"),{w:parseInt(Ne,10)||ae.offsetWidth||ae.clientWidth,h:parseInt(_e,10)||ae.offsetHeight||ae.clientHeight}},it=re=>{const ae=F(re),Ne=Pe(ae),_e=tt(ae);return{x:Ne.x,y:Ne.y,w:_e.w,h:_e.h}},Bt=(re,ae)=>{if(!re)return!1;const Ne=An(re)?re:[re];return no(Ne,_e=>Ec(U.fromDom(_e),ae))},zt=(re,ae,Ne,_e)=>{const dt=[];let tn=F(re);_e=_e===void 0;const Kn=Ne||(Ce().nodeName!=="BODY"?Ce().parentNode:null);if(K(ae))if(ae==="*")ae=qe;else{const Ms=ae;ae=rr=>Bt(rr,Ms)}for(;tn&&!(tn===Kn||cn(tn.nodeType)||Ac(tn)||_p(tn));){if(!ae||ae(tn))if(_e)dt.push(tn);else return[tn];tn=tn.parentNode}return _e?dt:null},un=(re,ae,Ne)=>{const _e=zt(re,ae,Ne,!1);return _e&&_e.length>0?_e[0]:null},xn=(re,ae,Ne)=>{let _e=ae;if(re){K(ae)&&(_e=dt=>Bt(dt,ae));for(let dt=re[Ne];dt;dt=dt[Ne])if(q(_e)&&_e(dt))return dt}return null},ko=(re,ae)=>xn(re,ae,"nextSibling"),Go=(re,ae)=>xn(re,ae,"previousSibling"),Ss=re=>q(re.querySelectorAll),Me=(re,ae)=>{var Ne,_e;const dt=(_e=(Ne=F(ae))!==null&&Ne!==void 0?Ne:n.root_element)!==null&&_e!==void 0?_e:e;return Ss(dt)?Zr(dt.querySelectorAll(re)):[]},je=function(re,ae,Ne){const _e=Ne??this;if(An(re)){const dt=[];return e0(re,(tn,Kn)=>{const Ms=F(tn);Ms&&dt.push(ae.call(_e,Ms,Kn))}),dt}else{const dt=F(re);return dt?ae.call(_e,dt):!1}},sn=(re,ae)=>{je(re,Ne=>{Ze(ae,(_e,dt)=>{Q(Ne,dt,_e)})})},Ht=(re,ae)=>{je(re,Ne=>{const _e=U.fromDom(Ne);Hm(_e,ae)})},st=(re,ae,Ne,_e,dt)=>je(re,tn=>{const Kn=K(ae)?e.createElement(ae):ae;return Se(Ne)&&sn(Kn,Ne),_e&&(!K(_e)&&_e.nodeType?Kn.appendChild(_e):K(_e)&&Ht(Kn,_e)),dt?Kn:tn.appendChild(Kn)}),Be=(re,ae,Ne)=>st(e.createElement(re),re,ae,Ne,!0),De=Du.decode,bt=Du.encodeAllRaw,jt=(re,ae,Ne="")=>{let _e="<"+re;for(const dt in ae)jr(ae,dt)&&(_e+=" "+dt+'="'+bt(ae[dt])+'"');return wa(Ne)&&Tt(O.getVoidElements(),re)?_e+" />":_e+">"+Ne+"</"+re+">"},pn=re=>{const ae=e.createElement("div"),Ne=e.createDocumentFragment();Ne.appendChild(ae),re&&(ae.innerHTML=re);let _e;for(;_e=ae.firstChild;)Ne.appendChild(_e);return Ne.removeChild(ae),Ne},Qe=(re,ae)=>je(re,Ne=>{const _e=U.fromDom(Ne);return ae&&he($s(_e),dt=>{Js(dt)&&dt.dom.length===0?Tn(dt):gs(_e,dt)}),Tn(_e),_e.dom}),Ut=re=>je(re,ae=>{const Ne=ae.attributes;for(let _e=Ne.length-1;_e>=0;_e--)ae.removeAttributeNode(Ne.item(_e))}),wn=re=>A.parse(re),go=(re,ae)=>A.serialize(re,ae),On=re=>{if(ou!==hn.DOM&&e===document){if(o[re])return;o[re]=!0}let ae=e.getElementById("mceDefaultStyles");if(!ae){ae=e.createElement("style"),ae.id="mceDefaultStyles",ae.type="text/css";const Ne=e.head;Ne.firstChild?Ne.insertBefore(ae,Ne.firstChild):Ne.appendChild(ae)}ae.styleSheet?ae.styleSheet.cssText+=re:ae.appendChild(e.createTextNode(re))},Rs=re=>{re||(re=""),he(re.split(","),ae=>{c[ae]=!0,C.load(ae).catch(vt)})},hc=(re,ae,Ne)=>{je(re,_e=>{if(qe(_e)){const dt=U.fromDom(_e),tn=ae.split(" ");he(tn,Kn=>{Se(Ne)?(Ne?pd:bd)(dt,Kn):hC(dt,Kn)})}})},Ha=(re,ae)=>{hc(re,ae,!0)},Kc=(re,ae)=>{hc(re,ae,!1)},jf=(re,ae)=>{const Ne=V(re),_e=ae.split(" ");return Se(Ne)&&Gs(_e,dt=>fu(Ne,dt))},Jh=re=>{je(re,ae=>Cp(U.fromDom(ae),"display"))},Gf=re=>{je(re,ae=>kC(U.fromDom(ae),"display","none"))},qf=re=>{const ae=V(re);return Se(ae)&&bo(rs(ae,"display"),"none")},hT=re=>(re||"mce_")+u++,pT=re=>{const ae=V(re);return Se(ae)?qe(ae.dom)?ae.dom.outerHTML:AC(ae):""},bT=(re,ae)=>{je(re,Ne=>{qe(Ne)&&(Ne.outerHTML=ae)})},q2=(re,ae)=>{const Ne=F(ae);return je(re,_e=>{const dt=Ne==null?void 0:Ne.parentNode,tn=Ne==null?void 0:Ne.nextSibling;return dt&&(tn?dt.insertBefore(_e,tn):dt.appendChild(_e)),_e})},K2=(re,ae,Ne)=>je(ae,_e=>{var dt;const tn=An(ae)?re.cloneNode(!0):re;return Ne&&e0(WC(_e.childNodes),Kn=>{tn.appendChild(Kn)}),(dt=_e.parentNode)===null||dt===void 0||dt.replaceChild(tn,_e),_e}),Y2=(re,ae)=>{if(re.nodeName!==ae.toUpperCase()){const Ne=Be(ae);return e0(X(re),_e=>{Q(Ne,_e.nodeName,Y(re,_e.nodeName))}),K2(Ne,re,!0),Ne}else return re},Gb=(re,ae)=>{let Ne=re;for(;Ne;){let _e=ae;for(;_e&&Ne!==_e;)_e=_e.parentNode;if(Ne===_e)break;Ne=Ne.parentNode}return!Ne&&re.ownerDocument?re.ownerDocument.documentElement:Ne},nu=re=>{if(qe(re)){const ae=re.nodeName.toLowerCase()==="a"&&!Y(re,"href")&&Y(re,"id");if(Y(re,"name")||Y(re,"data-mce-bookmark")||ae)return!0}return!1},qb=(re,ae,Ne)=>{let _e=0;if(nu(re))return!1;const dt=re.firstChild;if(dt){const tn=new Fn(dt,re),Kn=O?O.getWhitespaceElements():{},Ms=ae||(O?O.getNonEmptyElements():null);let rr=dt;do{if(qe(rr)){const nC=rr.getAttribute("data-mce-bogus");if(nC){rr=tn.next(nC==="all");continue}const oC=rr.nodeName.toLowerCase();if(Ms&&Ms[oC]){if(oC==="br"){_e++,rr=tn.next();continue}return!1}if(nu(rr))return!1}if(wl(rr)||Oe(rr)&&!Su(rr.data)&&(!(Ne!=null&&Ne.includeZwsp)||!Wm(rr.data))||Oe(rr)&&rr.parentNode&&Kn[rr.parentNode.nodeName]&&Su(rr.data))return!1;rr=tn.next()}while(rr)}return _e<=1},Qh=()=>e.createRange(),xm=(re,ae,Ne)=>{let _e=Qh(),dt,tn;if(re&&ae&&re.parentNode&&ae.parentNode){const Kn=re.parentNode;return _e.setStart(Kn,qm(re)),_e.setEnd(ae.parentNode,qm(ae)),dt=_e.extractContents(),_e=Qh(),_e.setStart(ae.parentNode,qm(ae)+1),_e.setEnd(Kn,qm(re)+1),tn=_e.extractContents(),Kn.insertBefore(Ou(ou,dt),re),Ne?Kn.insertBefore(Ne,re):Kn.insertBefore(ae,re),Kn.insertBefore(Ou(ou,tn),re),Qe(re),Ne||ae}else return},X2=(re,ae,Ne,_e)=>{if(An(re)){let dt=re.length;const tn=[];for(;dt--;)tn[dt]=X2(re[dt],ae,Ne,_e);return tn}else return n.collect&&(re===e||re===r)&&x.push([re,ae,Ne,_e]),B.bind(re,ae,Ne,_e||ou)},J2=(re,ae,Ne)=>{if(An(re)){let _e=re.length;const dt=[];for(;_e--;)dt[_e]=J2(re[_e],ae,Ne);return dt}else{if(x.length>0&&(re===e||re===r)){let _e=x.length;for(;_e--;){const[dt,tn,Kn]=x[_e];re===dt&&(!ae||ae===tn)&&(!Ne||Ne===Kn)&&B.unbind(dt,tn,Kn)}}return B.unbind(re,ae,Ne)}},td=(re,ae,Ne)=>B.dispatch(re,ae,Ne),Em=(re,ae,Ne)=>B.dispatch(re,ae,Ne),Q2=re=>{if(re&&qe(re)){const ae=re.getAttribute("data-mce-contenteditable");return ae&&ae!=="inherit"?ae:re.contentEditable!=="inherit"?re.contentEditable:null}else return null},ou={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:C,boundEvents:x,styles:A,schema:O,events:B,isBlock:z,root:null,clone:se,getRoot:Ce,getViewPort:Ie,getRect:it,getSize:tt,getParent:un,getParents:zt,get:F,getNext:ko,getPrev:Go,select:Me,is:Bt,add:st,create:Be,createHTML:jt,createFragment:pn,remove:Qe,setStyle:ce,getStyle:Te,setStyles:le,removeAllAttribs:Ut,setAttrib:Q,setAttribs:sn,getAttrib:Y,getPos:Pe,parseStyle:wn,serializeStyle:go,addStyle:On,loadCSS:Rs,addClass:Ha,removeClass:Kc,hasClass:jf,toggleClass:hc,show:Jh,hide:Gf,isHidden:qf,uniqueId:hT,setHTML:Ht,getOuterHTML:pT,setOuterHTML:bT,decode:De,encode:bt,insertAfter:q2,replace:K2,rename:Y2,findCommonAncestor:Gb,run:je,getAttribs:X,isEmpty:qb,createRng:Qh,nodeIndex:qm,split:xm,bind:X2,unbind:J2,fire:Em,dispatch:td,getContentEditable:Q2,getContentEditableParent:re=>{const ae=Ce();let Ne=null;for(let _e=re;_e&&_e!==ae&&(Ne=Q2(_e),Ne===null);_e=_e.parentNode);return Ne},isEditable:re=>{if(Se(re)){const ae=qe(re)?re:re.parentElement;return Se(ae)&&$t(U.fromDom(ae))}else return!1},destroy:()=>{if(x.length>0){let re=x.length;for(;re--;){const[ae,Ne,_e]=x[re];B.unbind(ae,Ne,_e)}}Ze(c,(re,ae)=>{C.unload(ae),delete c[ae]})},isChildOf:(re,ae)=>re===ae||ae.contains(re),dumpRng:re=>"startContainer: "+re.startContainer.nodeName+", startOffset: "+re.startOffset+", endContainer: "+re.endContainer.nodeName+", endOffset: "+re.endOffset},ep=QT(A,n,Le(ou));return ou};hn.DOM=hn(document),hn.nodeIndex=qm;const s0=hn.DOM,jC=0,GC=1,Og=2,ek=3;class qi{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=s0;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=Re._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Og}markDone(n){this.states[n]=Og}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=jC),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,x)=>{Xn(o.scriptLoadedCallbacks,x).each(O=>{he(O,A=>A[C](x))}),delete o.scriptLoadedCallbacks[x]},c=C=>{const x=ht(C,O=>O.status==="rejected");return x.length>0?Promise.reject(Ua(x,({reason:O})=>An(O)?O:[O])):Promise.resolve()},u=C=>Promise.allSettled(Ft(C,x=>o.states[x]===Og?(r("resolve",x),Promise.resolve()):o.states[x]===ek?(r("reject",x),Promise.reject(x)):(o.states[x]=GC,o.loadScript(x).then(()=>{o.states[x]=Og,r("resolve",x);const O=o.queue;return O.length>0?(o.queue=[],u(O).then(c)):Promise.resolve()},()=>(o.states[x]=ek,r("reject",x),Promise.reject(x)))))),f=C=>(o.loading=!0,u(C).then(x=>{o.loading=!1;const O=o.queueLoadedCallbacks.shift();return N.from(O).each(Br),c(x)})),b=up(n);return o.loading?new Promise((C,x)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(C,x)})}):f(b)}}qi.ScriptLoader=new qi;const zo=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Ag=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Km=e=>Sn(e)&&Tt(e,"raw"),qC=e=>An(e)&&e.length>1,Dg={},r0=zo("en"),So=()=>Xn(Dg,r0.get()),Qa={getData:()=>yn(Dg,e=>({...e})),setCode:e=>{e&&r0.set(e)},getCode:()=>r0.get(),add:(e,n)=>{let o=Dg[e];o||(Dg[e]=o={});const r=Ft(yr(n),c=>c.toLowerCase());Ze(n,(c,u)=>{const f=u.toLowerCase();f!==u&&Ag(r,f)?(Tt(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=So().getOr({}),o=f=>q(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return Tt(n,b)?o(n[b]):Xn(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Km(e))return o(e.raw);if(qC(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(C,x)=>Tt(f,x)?o(f[x]):C);return u(b)}return u(c(e))},isRtl:()=>So().bind(e=>Xn(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Tt(Dg,e)},xo=()=>{const e=[],n={},o={},r=[],c=(F,V)=>{const Y=ht(r,X=>X.name===F&&X.state===V);he(Y,X=>X.resolve())},u=F=>Tt(n,F),f=F=>Tt(o,F),b=F=>{if(o[F])return o[F].instance},C=(F,V)=>{const Y=Qa.getCode(),X=","+(V||"")+",";!Y||V&&X.indexOf(","+Y+",")===-1||qi.ScriptLoader.add(n[F]+"/langs/"+Y+".js")},x=(F,V)=>{xo.languageLoad!==!1&&(u(F)?C(F,V):z(F,"loaded").then(()=>C(F,V)))},O=(F,V)=>(e.push(V),o[F]={instance:V},c(F,"added"),V),A=F=>{delete n[F],delete o[F]},B=(F,V)=>K(V)?K(F)?{prefix:"",resource:V,suffix:""}:{prefix:F.prefix,resource:V,suffix:F.suffix}:V,L=(F,V)=>{if(n[F])return Promise.resolve();let Y=K(V)?V:V.prefix+V.resource+V.suffix;Y.indexOf("/")!==0&&Y.indexOf("://")===-1&&(Y=xo.baseURL+"/"+Y),n[F]=Y.substring(0,Y.lastIndexOf("/"));const X=()=>(c(F,"loaded"),Promise.resolve());return o[F]?X():qi.ScriptLoader.add(Y).then(X)},z=(F,V="added")=>V==="added"&&f(F)||V==="loaded"&&u(F)?Promise.resolve():new Promise(Y=>{r.push({name:F,state:V,resolve:Y})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:O,remove:A,createUrl:B,load:L,waitFor:z}};xo.languageLoad=!0,xo.baseURL="",xo.PluginManager=xo(),xo.ThemeManager=xo(),xo.ModelManager=xo();const Ao=e=>{const n=zo(N.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(b))}}},nk=e=>{const n=zo(N.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(setInterval(b,e)))}}},gi=()=>{const e=Ao(vt);return{...e,on:o=>e.get().each(o)}},Rg=(e,n)=>{let o=null;return{cancel:()=>{J(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{J(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Jp=(e,n)=>{let o=null;const r=()=>{J(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},ec=Le("mce-annotation"),ca=Le("data-mce-annotation"),Bd=Le("data-mce-annotation-uid"),Ym=Le("data-mce-annotation-active"),Mg=Le("data-mce-annotation-classes"),Bg=Le("data-mce-annotation-attrs"),KC=e=>n=>Cn(n,e),c0=(e,n)=>{const o=e.selection.getRng(),r=U.fromDom(o.startContainer),c=U.fromDom(e.getBody()),u=n.fold(()=>"."+ec(),C=>`[${ca()}="${C}"]`),f=gu(r,o.startOffset).getOr(r);return Li(f,u,KC(c)).bind(C=>$i(C,`${Bd()}`).bind(x=>$i(C,`${ca()}`).map(O=>{const A=XC(e,x);return{uid:x,name:O,elements:A}})))},ok=e=>Xs(e)&&fu(e,ec()),YC=(e,n)=>hd(e,"data-mce-bogus")||BC(e,'[data-mce-bogus="all"]',KC(n)),XC=(e,n)=>{const o=U.fromDom(e.getBody()),r=hs(o,`[${Bd()}="${n}"]`);return ht(r,c=>!YC(c,o))},i0=(e,n)=>{const o=U.fromDom(e.getBody()),r=hs(o,`[${ca()}="${n}"]`),c={};return he(r,u=>{if(!YC(u,o)){const f=Nr(u,Bd()),b=Xn(c,f).getOr([]);c[f]=b.concat([u])}}),c},JC=(e,n)=>{const o=zo({}),r=()=>({listeners:[],previous:gi()}),c=(A,B)=>{u(A,L=>(B(L),L))},u=(A,B)=>{const L=o.get(),z=Xn(L,A).getOrThunk(r),F=B(z);L[A]=F,o.set(L)},f=(A,B,L)=>{c(A,z=>{he(z.listeners,F=>F(!0,A,{uid:B,nodes:Ft(L,V=>V.dom)}))})},b=A=>{c(A,B=>{he(B.listeners,L=>L(!1,A))})},C=(A,B)=>{he(XC(e,A),L=>{B?Zn(L,Ym(),"true"):Lo(L,Ym())})},x=Jp(()=>{const A=lo(n.getNames());he(A,B=>{u(B,L=>{const z=L.previous.get();return c0(e,N.some(B)).fold(()=>{z.each(F=>{b(B),L.previous.clear(),C(F,!1)})},({uid:F,name:V,elements:Y})=>{bo(z,F)||(z.each(X=>C(X,!1)),f(V,F,Y),L.previous.set(F),C(F,!0))}),{previous:L.previous,listeners:L.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(A,B)=>{u(A,L=>({previous:L.previous,listeners:L.listeners.concat([B])}))}}},BD=(e,n)=>{const o=ca(),r=u=>N.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Bd(),null),u.attr(ca(),null),u.attr(Ym(),null);const C=N.from(u.attr(Bg())).map(B=>B.split(",")).getOr([]),x=N.from(u.attr(Mg())).map(B=>B.split(",")).getOr([]);he(C,B=>u.attr(B,null));const O=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],A=cp(O,[ec()].concat(x));u.attr("class",A.length>0?A.join(" "):null),u.attr(Mg(),null),u.attr(Bg(),null)};e.serializer.addTempAttr(Ym()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},Qp=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Xn(e,c).map(u=>u.settings),getNames:()=>yr(e)}};let QC=0;const jn=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return QC++,e+"_"+r+QC+String(o)},l0=(e,n)=>{he(n,o=>{pd(e,o)})},u0=(e,n)=>{he(n,o=>{bd(e,o)})},ew=(e,n)=>U.fromDom(e.dom.cloneNode(n)),Ol=e=>ew(e,!1),Hs=e=>ew(e,!0),Er=(e,n)=>{const o=U.fromTag(n),r=lg(e);return Pi(o,r),o},tw=(e,n)=>{const o=Er(e,n);ri(e,o);const r=$s(e);return $n(o,r),Tn(e),o},d0=(e,n,o=we)=>{const r=new Fn(e,n),c=u=>{let f;do f=r[u]();while(f&&!Oe(f)&&!o(f));return N.from(f).filter(Oe)};return{current:()=>N.from(r.current()).filter(Oe),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Nu=(e,n)=>{const o=n||(f=>e.isBlock(f)||yo(f)||an(f)),r=(f,b,C,x)=>{if(Oe(f)){const O=x(f,b,f.data);if(O!==-1)return N.some({container:f,offset:O})}return C().bind(O=>r(O.container,O.offset,C,x))};return{backwards:(f,b,C,x)=>{const O=d0(f,x??e.getRoot(),o);return r(f,b,()=>O.prev().map(A=>({container:A,offset:A.length})),C).getOrNull()},forwards:(f,b,C,x)=>{const O=d0(f,x??e.getRoot(),o);return r(f,b,()=>O.next().map(A=>({container:A,offset:0})),C).getOrNull()}}},Nd=Math.round,Pd=e=>e?{left:Nd(e.left),top:Nd(e.top),bottom:Nd(e.bottom),right:Nd(e.right),width:Nd(e.width),height:Nd(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},e1=(e,n)=>(e=Pd(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Al=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,t1=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,eo=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:t1(n.top-e.bottom,e,n)},ia=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:t1(n.bottom-e.top,e,n),Xm=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,sk=e=>_o(e,(n,o)=>n.fold(()=>N.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return N.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),N.none()),m0=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},rk=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),$d=(e,n,o)=>Math.min(Math.max(e,n),o),Jm=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},tc=(e,n)=>{if(qe(e)&&e.hasChildNodes()){const o=e.childNodes,r=$d(n,0,o.length-1);return o[r]}else return e},f0=(e,n)=>{if(!(n<0&&qe(e)&&e.hasChildNodes()))return tc(e,n)},nw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),ow=e=>K(e)&&e.charCodeAt(0)>=768&&nw.test(e),ak=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},sw=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},n1=qe,o1=Ls,rw=pu("display","block table"),g0=pu("float","left right"),Fd=sw(n1,o1,Po(g0)),aw=Po(pu("white-space","pre pre-line pre-wrap")),s1=Oe,Dl=yo,r1=hn.nodeIndex,la=f0,Qm=e=>e?e.createRange():hn.DOM.createRng(),Yt=e=>K(e)&&/[\r\n\t ]/.test(e),Tr=e=>!!e.setStart&&!!e.setEnd,Rl=e=>{const n=e.startContainer,o=e.startOffset;if(Yt(e.toString())&&aw(n.parentNode)&&Oe(n)){const r=n.data;if(Yt(r[o-1])||Yt(r[o+1]))return!0}return!1},h0=e=>{const n=e.ownerDocument,o=Qm(n),r=n.createTextNode(In),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Pd(o.getBoundingClientRect());return c.removeChild(r),u},zn=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&Oe(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Ml(u)}else return null},p0=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ml=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Pd(r[0]):o=Pd(e.getBoundingClientRect()),!Tr(e)&&Dl(e)&&p0(o)?h0(e):p0(o)&&Tr(e)&&(n=zn(e))!==null&&n!==void 0?n:o},Do=(e,n)=>{const o=e1(e,n);return o.width=1,o.right=o.left+1,o},Ki=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Al(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const C=Qm(f.ownerDocument);if(b<f.data.length){if(ow(f.data[b]))return;if(ow(f.data[b-1])&&(C.setStart(f,b),C.setEnd(f,b+1),!Rl(C))){o(Do(Ml(C),!1));return}}b>0&&(C.setStart(f,b-1),C.setEnd(f,b),Rl(C)||o(Do(Ml(C),!1))),b<f.data.length&&(C.setStart(f,b),C.setEnd(f,b+1),Rl(C)||o(Do(Ml(C),!0)))},c=e.container(),u=e.offset();if(s1(c))return r(c,u),n;if(n1(c))if(e.isAtEnd()){const f=la(c,u);s1(f)&&r(f,f.data.length),Fd(f)&&!Dl(f)&&o(Do(Ml(f),!1))}else{const f=la(c,u);if(s1(f)&&r(f,0),Fd(f)&&e.isAtEnd())return o(Do(Ml(f),!1)),n;const b=la(e.container(),e.offset()-1);Fd(b)&&!Dl(b)&&(rw(b)||rw(f)||!Fd(f))&&o(Do(Ml(b),!1)),Fd(f)&&o(Do(Ml(f),!0))}return n},de=(e,n,o)=>{const r=()=>(s1(e),n===0),c=()=>s1(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const O=Qm(e.ownerDocument);return O.setStart(e,n),O.setEnd(e,n),O},f=()=>(o||(o=Ki(de(e,n))),o),b=()=>f().length>0,C=O=>O&&e===O.container()&&n===O.offset(),x=O=>la(e,O?n-1:n);return{container:Le(e),offset:Le(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:C,getNode:x}};de.fromRangeStart=e=>de(e.startContainer,e.startOffset),de.fromRangeEnd=e=>de(e.endContainer,e.endOffset),de.after=e=>de(e.parentNode,r1(e)+1),de.before=e=>de(e.parentNode,r1(e)),de.isAbove=(e,n)=>ir(vr(n.getClientRects()),cu(e.getClientRects()),eo).getOr(!1),de.isBelow=(e,n)=>ir(cu(n.getClientRects()),vr(e.getClientRects()),ia).getOr(!1),de.isAtStart=e=>e?e.isAtStart():!1,de.isAtEnd=e=>e?e.isAtEnd():!1,de.isTextPosition=e=>e?Oe(e.container()):!1,de.isElementPosition=e=>!de.isTextPosition(e);const a1=(e,n)=>{Oe(n)&&n.data.length===0&&e.remove(n)},ck=(e,n,o)=>{n.insertNode(o),a1(e,o.previousSibling),a1(e,o.nextSibling)},c1=(e,n,o)=>{const r=N.from(o.firstChild),c=N.from(o.lastChild);n.insertNode(o),r.each(u=>a1(e,u.previousSibling)),c.each(u=>a1(e,u.nextSibling))},Yi=(e,n,o)=>{_p(o)?c1(e,n,o):ck(e,n,o)},Ma=Oe,Ng=Vi,i1=hn.nodeIndex,b0=e=>{const n=e.parentNode;return Ng(n)?b0(n):n},l1=e=>e?Ca(e.childNodes,(n,o)=>(Ng(o)&&o.nodeName!=="BR"?n=n.concat(l1(o)):n.push(o),n),[]):[],cw=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Ma(o);)n+=o.data.length;return n},Pu=e=>n=>e===n,nc=e=>{let n,o;n=l1(b0(e)),o=Io(n,Pu(e),e),n=n.slice(0,o+1);const r=Ca(n,(c,u,f)=>(Ma(u)&&Ma(n[f-1])&&c++,c),0);return n=dp(n,Hi([e.nodeName])),o=Io(n,Pu(e),e),o-r},Ir=e=>(Ma(e)?"text()":e.nodeName.toLowerCase())+"["+nc(e)+"]",Vs=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},iw=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(Ma(r))u=cw(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(Ir(r));let f=Vs(e,r);return f=dp(f,Po(Vi)),o=o.concat(Ni(f,b=>Ir(b))),o.reverse().join("/")+","+u},$u=(e,n,o)=>{let r=l1(e);return r=dp(r,(c,u)=>!Ma(c)||!Ma(r[u-1])),r=dp(r,Hi([n])),r[o]},lw=(e,n)=>{let o=e,r=0;for(;Ma(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!Ma(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return Ma(e)&&n>e.data.length&&(n=e.data.length),de(e,n)},Pg=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Ca(r,(f,b)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),$u(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!Ma(u)&&u.parentNode){let f;return c==="after"?f=i1(u)+1:f=i1(u),de(u.parentNode,f)}return lw(u,parseInt(c,10))},Id=an,v0=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&Oe(c);c=c.previousSibling)r+=e(c.data).length;return r},u1=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],C=e.getRoot();if(Oe(u))b.push(o?v0(n,u,f):f);else{let x=0;const O=u.childNodes;f>=O.length&&O.length&&(x=1,f=Math.max(0,O.length-1)),b.push(e.nodeIndex(O[f],o)+x)}for(let x=u;x&&x!==C;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},uw=(e,n,o,r)=>{const c=n.dom,u=u1(c,e,o,r,!0),f=n.isForward(),b=bs(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const C=u1(c,e,o,r,!1);return{start:u,end:C,forward:f,...b}}},d1=(e,n,o)=>{let r=0;return Re.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},y0=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(qe(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Xo=e=>(y0(e,!0),y0(e,!1),e),_s=(e,n)=>{if(qe(e)&&(e=tc(e,n),Id(e)))return e;if(Da(e)){Oe(e)&&Um(e)&&(e=e.parentNode);let o=e.previousSibling;if(Id(o)||(o=e.nextSibling,Id(o)))return o}},Lr=e=>_s(e.startContainer,e.startOffset)||_s(e.endContainer,e.endOffset),Gn=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Id(r)){const f=r.nodeName;return{name:f,index:d1(o.dom,f,r)}}const u=Lr(c);if(u){const f=u.tagName;return{name:f,index:d1(o.dom,f,u)}}return uw(e,o,n,c)},Os=e=>{const n=e.getRng();return{start:iw(e.dom.getRoot(),de.fromRangeStart(n)),end:iw(e.dom.getRoot(),de.fromRangeEnd(n)),forward:e.isForward()}},ys=e=>({rng:e.getRng(),forward:e.isForward()}),m1=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},f1=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,C=e.isForward();if(b==="IMG")return{name:b,index:d1(o,b,f)};const x=Xo(r.cloneRange());if(!u){x.collapse(!1);const A=m1(o,c+"_end",n);Yi(o,x,A)}r=Xo(r),r.collapse(!0);const O=m1(o,c+"_start",n);return Yi(o,r,O),e.moveToBookmark({id:c,keep:!0,forward:C}),{id:c,forward:C}},dw=(e,n,o=!1)=>n===2?Gn(Sr,o,e):n===3?Os(e):n?ys(e):f1(e,!1),g1=Ee(Gn,ho,!0),C0=e=>{const n=u=>u(e),o=Le(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Xe,isError:we,map:u=>zs.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>N.some(e)};return c},w0=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:we,isError:Xe,map:n,mapError:r=>zs.error(r(e)),bind:n,exists:we,forall:Xe,getOr:ho,or:ho,getOrThunk:$o,orThunk:$o,getOrDie:va(String(e)),each:vt,toOptional:N.none};return o},zs={value:C0,error:w0,fromOption:(e,n)=>e.fold(()=>w0(n),C0)},Bl={generate:e=>{if(!An(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return he(e,(r,c)=>{const u=yr(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!An(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const x=C.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...A)=>{if(A.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+A.length);return A[c].apply(null,C)},match:A=>{const B=yr(A);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!Gs(n,z=>Rt(B,z)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return A[f].apply(null,C)},log:A=>{console.log(A,{constructors:n,constructor:f,params:C})}}}}),o}};Bl.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ik=e=>{const n=[],o=[];return he(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},lk=e=>e.type==="inline-command"||e.type==="inline-format",uk=e=>e.type==="block-command"||e.type==="block-format",S0=e=>{const n=r=>zs.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(An(e.format)){if(!Gs(e.format,K))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(K(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return zs.value(c(f))}else return e.cmd!==void 0?K(e.cmd)?zs.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Sn(e))return n("Raw pattern is not an object");if(!K(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!K(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?K(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):zs.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},fw=e=>ht(e,uk),gw=e=>ht(e,lk),h1=(e,n)=>({inlinePatterns:gw(e),blockPatterns:fw(e),dynamicPatternsLookup:n}),hw=e=>{const n=ik(Ft(e,S0));return he(n.errors,o=>console.error(o.message,o.pattern)),n.values},pw=e=>n=>{const o=e(n);return hw(o)},Ae=ei().deviceType,dk=Ae.isTouch(),As=hn.DOM,mk=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return _o(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[ld(u)]=ld(f),o},{})},x0=e=>ru(e,RegExp),Ye=e=>n=>n.options.get(e),nr=e=>K(e)||Sn(e),bw=(e,n="")=>o=>{const r=K(o);if(r)if(o.indexOf("=")!==-1){const c=mk(o);return{value:Xn(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},vw=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:bw(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:bw(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=K(o)&&Pn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Rt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>on(o)?{valid:!0,value:o}:K(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||K(o)||Dn(o,K);return r?K(o)?{value:Ft(o.split(","),ld),valid:r}:An(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Dw(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=K(o)||Dn(o,K);return r?{value:An(o)?o:Ft(o.split(","),ld),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=on(o)||K(o);return r?o===!1||Ae.isiPhone()||Ae.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!dk}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||K(o)||q(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||K(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:nr}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:nr}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:nr}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>K(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Dn(o,Sn)||o===!1?{value:hw(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>q(o)?{value:pw(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Dn(o,x0)?{value:o,valid:!0}:x0(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Rt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Rt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Qa.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:As.getAttrib(e.getElement(),"placeholder")})})},oc=Ye("iframe_attrs"),p1=Ye("doctype"),ef=Ye("document_base_url"),hi=Ye("body_id"),sc=Ye("body_class"),Ld=Ye("content_security_policy"),Pc=Ye("br_in_pre"),lr=Ye("forced_root_block"),tf=Ye("forced_root_block_attrs"),E0=Ye("newline_behavior"),yw=Ye("br_newline_selector"),Cw=Ye("no_newline_selector"),T0=Ye("keep_styles"),fk=Ye("end_container_on_empty_block"),k0=Ye("automatic_uploads"),ww=Ye("images_reuse_filename"),gk=Ye("images_replace_blob_uris"),Sw=Ye("icons"),hk=Ye("icons_url"),pk=Ye("images_upload_url"),_0=Ye("images_upload_base_path"),bk=Ye("images_upload_credentials"),xw=Ye("images_upload_handler"),vk=Ye("content_css_cors"),nf=Ye("referrer_policy"),Ew=Ye("language"),yk=Ye("language_url"),Tw=Ye("indent_use_margin"),Ck=Ye("indentation"),kw=Ye("content_css"),b1=Ye("content_style"),Fu=Ye("font_css"),of=Ye("directionality"),Un=Ye("inline_boundaries_selector"),O0=Ye("object_resizing"),kr=Ye("resize_img_proportional"),sf=Ye("placeholder"),cs=Ye("event_root"),_w=Ye("service_message"),Xi=Ye("theme"),wk=Ye("theme_url"),v1=Ye("model"),Ow=Ye("model_url"),$g=Ye("inline_boundaries"),Sk=Ye("formats"),xk=Ye("preview_styles"),Ek=Ye("format_empty_lines"),Fg=Ye("format_noneditable_selector"),Aw=Ye("custom_ui_selector"),Dw=Ye("inline"),Hd=Ye("hidden_input"),Tk=Ye("submit_patch"),kk=Ye("add_form_submit_trigger"),_k=Ye("add_unload_trigger"),Rw=Ye("custom_undo_redo_levels"),A0=Ye("disable_nodechange"),Nl=Ye("readonly"),Mw=Ye("editable_root"),Bw=Ye("content_css_cors"),y1=Ye("plugins"),Ok=Ye("external_plugins"),Pl=Ye("block_unsupported_drop"),C1=Ye("visual"),w1=Ye("visual_table_class"),Ig=Ye("visual_anchor_class"),Nw=Ye("iframe_aria_text"),Ji=Ye("setup"),S1=Ye("init_instance_callback"),Pw=Ye("urlconverter_callback"),pi=Ye("auto_focus"),Iu=Ye("browser_spellcheck"),D0=Ye("protect"),$w=Ye("paste_block_drop"),x1=Ye("paste_data_images"),Ak=Ye("paste_preprocess"),Fw=Ye("paste_postprocess"),Dk=Ye("newdocument_content"),Rk=Ye("paste_webkit_styles"),Iw=Ye("paste_remove_styles_if_webkit"),Lw=Ye("paste_merge_formats"),Hw=Ye("smart_paste"),Mk=Ye("paste_as_text"),Bk=Ye("paste_tab_spaces"),Nk=Ye("allow_html_data_urls"),Vw=Ye("text_patterns"),R0=Ye("text_patterns_lookup"),M0=Ye("noneditable_class"),Pk=Ye("editable_class"),$k=Ye("noneditable_regexp"),E1=Ye("preserve_cdata"),zw=Ye("highlight_on_focus"),T1=Ye("xss_sanitization"),Lg=Ye("init_content_sync"),k1=e=>e.options.isSet("text_patterns_lookup"),B0=e=>Re.explode(e.options.get("font_size_style_values")),Uw=e=>Re.explode(e.options.get("font_size_classes")),Ww=e=>e.options.get("encoding")==="xml",N0=e=>Re.explode(e.options.get("images_file_types")),Fk=Ye("table_tab_navigation"),Zw=Ye("details_initial_state"),Hg=Ye("details_serialized_state"),Ik=qe,_1=Oe,jw=e=>{const n=e.parentNode;n&&n.removeChild(e)},Gw=e=>{const n=Sr(e);return{count:e.length-n.length,text:n}},qw=e=>{let n;for(;(n=e.data.lastIndexOf(tr))!==-1;)e.deleteData(n,1)},O1=(e,n)=>(Jo(e),n),Lk=(e,n)=>{const o=Gw(e.data.substr(0,n.offset())),r=Gw(e.data.substr(n.offset()));return(o.text+r.text).length>0?(qw(e),de(e,n.offset()-o.count)):n},Vg=(e,n)=>{const o=n.container(),r=kT(Zr(o.childNodes),e).map(c=>c<n.offset()?de(o,n.offset()-1):n).getOr(n);return Jo(e),r},Hk=(e,n)=>_1(e)&&n.container()===e?Lk(e,n):O1(e,n),Vk=(e,n)=>n.container()===e.parentNode?Vg(e,n):O1(e,n),Kw=(e,n)=>de.isTextPosition(n)?Hk(e,n):Vk(e,n),Jo=e=>{Ik(e)&&Da(e)&&($v(e)?e.removeAttribute("data-mce-caret"):jw(e)),_1(e)&&(qw(e),e.data.length===0&&jw(e))},zk=an,rf=ii,Uk=zi,zg="*[contentEditable=false],video,audio,embed,object",P0=(e,n,o)=>{const r=e1(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Wk=e=>{var n,o;const r=hs(U.fromDom(e),zg);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(Bp(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Mp(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},Zk=(e,n,o,r)=>{const c=gi();let u,f;const b=lr(e),C=e.dom,x=(F,V)=>{let Y;if(O(),Uk(V))return null;if(o(V)){const X=xd(b,V,F),Q=P0(n,V,F);C.setStyle(X,"top",Q.top),f=X;const se=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(se,{...Q}),C.add(n,se),c.set({caret:se,element:V,before:F}),F&&C.addClass(se,"mce-visual-caret-before"),A(),Y=V.ownerDocument.createRange(),Y.setStart(X,0),Y.setEnd(X,0)}else return f=Dp(V,F),Y=V.ownerDocument.createRange(),Lu(f.nextSibling)?(Y.setStart(f,0),Y.setEnd(f,0)):(Y.setStart(f,1),Y.setEnd(f,1)),Y;return Y},O=()=>{Wk(n),f&&(Jo(f),f=null),c.on(F=>{C.remove(F.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},A=()=>{u=setInterval(()=>{c.on(F=>{r()?C.toggleClass(F.caret,"mce-visual-caret-hidden"):C.addClass(F.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:O,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(F=>{const V=P0(n,F.element,F.before);C.setStyles(F.caret,{...V})})},destroy:()=>clearInterval(u)}},$0=()=>Ke.browser.isFirefox(),Lu=e=>zk(e)||rf(e),af=e=>(Lu(e)||qa(e)&&$0())&&mg(U.fromDom(e)).exists($t),_r=ks,Vd=an,Yw=ii,Xw=pu("display","block table table-cell table-caption list-item"),F0=Da,I0=Um,L0=qe,jk=Oe,Ug=Ls,A1=e=>e>0,Hu=e=>e<0,Wg=(e,n)=>{let o;for(;o=e(n);)if(!I0(o))return o;return null},bi=(e,n,o,r,c)=>{const u=new Fn(e,r),f=Vd(e)||I0(e);let b;if(Hu(n)){if(f&&(b=Wg(u.prev.bind(u),!0),o(b)))return b;for(;b=Wg(u.prev.bind(u),c);)if(o(b))return b}if(A1(n)){if(f&&(b=Wg(u.next.bind(u),!0),o(b)))return b;for(;b=Wg(u.next.bind(u),c);)if(o(b))return b}return null},Gk=(e,n)=>{const o=c=>_r(c.dom),r=c=>c.dom===n;return vo(U.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Qi=(e,n)=>{for(;e&&e!==n;){if(Xw(e))return e;e=e.parentNode}return null},$c=(e,n,o)=>Qi(e.container(),o)===Qi(n.container(),o),cf=(e,n)=>{if(!n)return N.none();const o=n.container(),r=n.offset();return L0(o)?N.from(o.childNodes[r+e]):N.none()},H0=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},lf=(e,n,o)=>Qi(n,e)===Qi(o,e),$l=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&F0(u)&&(u=u[r]),Vd(u)||Yw(u)){if(lf(n,u,c))return u;break}if(Ug(u))break;c=c.parentNode}return null},uf=Ee(H0,!0),zd=Ee(H0,!1),V0=(e,n,o)=>{let r;const c=Ee($l,!0,n),u=Ee($l,!1,n),f=o.startContainer,b=o.startOffset;if(Um(f)){const C=jk(f)?f.parentNode:f,x=C.getAttribute("data-mce-caret");if(x==="before"&&(r=C.nextSibling,af(r)))return uf(r);if(x==="after"&&(r=C.previousSibling,af(r)))return zd(r)}if(!o.collapsed)return o;if(Oe(f)){if(F0(f)){if(e===1){if(r=u(f),r)return uf(r);if(r=c(f),r)return zd(r)}if(e===-1){if(r=c(f),r)return zd(r);if(r=u(f),r)return uf(r)}return o}if(Bp(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?uf(r):o;if(Mp(f)&&b<=1)return e===-1&&(r=c(f),r)?zd(r):o;if(b===f.data.length)return r=u(f),r?uf(r):o;if(b===0)return r=c(f),r?zd(r):o}return o},Jw=(e,n)=>cf(e?0:-1,n).filter(Vd),Ud=(e,n,o)=>{const r=V0(e,n,o);return e===-1?de.fromRangeStart(r):de.fromRangeEnd(r)},Wd=e=>N.from(e.getNode()).map(U.fromDom),Qw=e=>N.from(e.getNode(!0)).map(U.fromDom),D1=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},df=(e,n)=>{const o=$c(e,n);return!o&&yo(e.getNode())?!0:o};var Cs;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Cs||(Cs={}));const qk=an,vi=Oe,z0=qe,mf=yo,Zd=Ls,U0=kd,R1=_d,Kk=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},eS=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Zg=(e,n)=>{if(A1(e)){if(Zd(n.previousSibling)&&!vi(n.previousSibling))return de.before(n);if(vi(n))return de(n,0)}if(Hu(e)){if(Zd(n.nextSibling)&&!vi(n.nextSibling))return de.after(n);if(vi(n))return de(n,n.data.length)}return Hu(e)?mf(n)?de.before(n):de.after(n):de.before(n)},tS=(e,n)=>{const o=n.nextSibling;return o&&Zd(o)?vi(o)?de(o,0):de.before(o):nS(Cs.Forwards,de.after(n),e)},nS=(e,n,o)=>{let r,c,u,f;if(!z0(o)||!n)return null;if(n.isEqual(de.after(o))&&o.lastChild){if(f=de.after(o.lastChild),Hu(e)&&Zd(o.lastChild)&&z0(o.lastChild))return mf(o.lastChild)?de.before(o.lastChild):f}else f=n;const b=f.container();let C=f.offset();if(vi(b)){if(Hu(e)&&C>0)return de(b,--C);if(A1(e)&&C<b.length)return de(b,++C);r=b}else{if(Hu(e)&&C>0&&(c=eS(b,C-1),Zd(c)))return!U0(c)&&(u=bi(c,e,R1,c),u)?vi(u)?de(u,u.data.length):de.after(u):vi(c)?de(c,c.data.length):de.before(c);if(A1(e)&&C<b.childNodes.length&&(c=eS(b,C),Zd(c)))return mf(c)?tS(o,c):!U0(c)&&(u=bi(c,e,R1,c),u)?vi(u)?de(u,0):de.before(u):vi(c)?de(c,0):de.after(c);r=c||f.getNode()}if(r&&(A1(e)&&f.isAtEnd()||Hu(e)&&f.isAtStart())&&(r=bi(r,e,Xe,o,!0),R1(r,o)))return Zg(e,r);c=r&&bi(r,e,R1,o);const x=yc(ht(Kk(b,o),qk));return x&&(!c||!x.contains(c))?(A1(e)?f=de.after(x):f=de.before(x),f):c?Zg(e,c):null},Vu=e=>({next:n=>nS(Cs.Forwards,n,e),prev:n=>nS(Cs.Backwards,n,e)}),PD=(e,n,o)=>{const r=e?de.before(o):de.after(o);return Ba(e,n,r)},jg=e=>yo(e)?de.before(e):de.after(e),oS=e=>de.isTextPosition(e)?e.offset()===0:Ls(e.getNode()),or=e=>{if(de.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Ls(e.getNode(!0))},M1=(e,n)=>!de.isTextPosition(e)&&!de.isTextPosition(n)&&e.getNode()===n.getNode(!0),jd=e=>!de.isTextPosition(e)&&yo(e.getNode()),Gd=(e,n,o)=>e?!M1(n,o)&&!jd(n)&&or(n)&&oS(o):!M1(o,n)&&oS(n)&&or(o),Ba=(e,n,o)=>{const r=Vu(n);return N.from(e?r.next(o):r.prev(o))},zu=(e,n,o)=>Ba(e,n,o).bind(r=>$c(o,r,n)&&Gd(e,o,r)?Ba(e,n,r):N.some(r)),W0=(e,n,o,r)=>zu(e,n,o).bind(c=>r(c)?W0(e,n,c,r):N.some(c)),ff=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Oe(o)?N.some(de(o,e?0:o.data.length)):o?Ls(o)?N.some(e?de.before(o):jg(o)):PD(e,n,o):N.none()},Hr=Ee(Ba,!0),ur=Ee(Ba,!1),Eo=Ee(ff,!0),Na=Ee(ff,!1),B1="_mce_caret",Us=e=>qe(e)&&e.id===B1,Uu=(e,n)=>{let o=n;for(;o&&o!==e;){if(Us(o))return o;o=o.parentNode}return null},gf=e=>K(e.start),Gg=e=>Tt(e,"rng"),Z0=e=>Tt(e,"id"),j0=e=>Tt(e,"name"),Fl=e=>Re.isArray(e.start),qg=e=>!j0(e)&&on(e.forward)?e.forward:!0,yi=(e,n)=>(qe(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Yk=(e,n)=>{const o=N.from(Pg(e.getRoot(),n.start)),r=N.from(Pg(e.getRoot(),n.end));return ir(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:qg(n)}})},G0=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(tr);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},sS=e=>!e.hasChildNodes(),$D=(e,n)=>Na(e).fold(we,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),rS=(e,n,o)=>sS(n)&&Uu(e,n)?(G0(n,o),!0):!1,aS=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let C=c.length-1;f&&C>=1;C--){const x=f.childNodes;if(rS(u,f,r))return!0;if(c[C]>x.length-1)return rS(u,f,r)?!0:$D(f,r);f=x[c[C]]}Oe(f)&&(b=Math.min(c[0],f.data.length)),qe(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},q0=e=>Oe(e)&&e.data.length>0,K0=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):q0(r.nextSibling)?(f=r.nextSibling,b=0):q0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):q0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const C=r.previousSibling,x=r.nextSibling;Re.each(Re.grep(r.childNodes),A=>{Oe(A)&&(A.data=A.data.replace(/\uFEFF/g,""))});let O;for(;O=e.get(o.id+"_"+n);)e.remove(O,!0);if(Oe(x)&&Oe(C)&&!Ke.browser.isOpera()){const A=C.data.length;C.appendData(x.data),e.remove(x),f=C,b=A}}return N.some(de(f,b))}else return N.none()},Y0=(e,n)=>{const o=e.createRng();return aS(e,!0,n,o)&&aS(e,!1,n,o)?N.some({range:o,forward:qg(n)}):N.none()},cS=(e,n)=>{const o=K0(e,"start",n),r=K0(e,"end",n);return ir(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(yi(e,c.container()),c.offset()),f.setEnd(yi(e,u.container()),u.offset()),{range:f,forward:qg(n)}})},iS=(e,n)=>N.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),lS=(e,n)=>{const o=e.dom;if(n){if(Fl(n))return Y0(o,n);if(gf(n))return Yk(o,n);if(Z0(n))return cS(o,n);if(j0(n))return iS(o,n);if(Gg(n))return N.some({range:n.rng,forward:qg(n)})}return N.none()},Xk=(e,n,o)=>dw(e,n,o),Jk=(e,n)=>{lS(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Pa=e=>qe(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Zt=(e=>n=>e===n)(In),rc=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Wu=e=>!rc(e)&&!Zt(e)&&!Rv(e),X0=e=>({value:uS(e)}),uS=e=>Am(e,"#").toUpperCase(),hf=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},e_=e=>{const n=hf(e.red)+hf(e.green)+hf(e.blue);return X0(n)},J0=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,N1=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Kg=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),t_=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Kg(c,u,f,b)},Q0=e=>{if(e==="transparent")return N.some(Kg(0,0,0,0));const n=J0.exec(e);if(n!==null)return N.some(t_(n[1],n[2],n[3],"1"));const o=N1.exec(e);return o!==null?N.some(t_(o[1],o[2],o[3],o[4])):N.none()},P1=e=>Q0(e).map(e_).map(n=>"#"+n.value).getOr(e),ey=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},FD=e=>Ua(e,n=>{const o=Jm(n);return o?[U.fromDom(o)]:[]}),dS=e=>ey(e).length>1,ty=e=>ht(FD(e),Ap),pf=e=>hs(e,"td[data-mce-selected],th[data-mce-selected]"),Yg=(e,n)=>{const o=pf(n);return o.length>0?o:ty(e)},Zu=e=>Yg(ey(e.selection.getSel()),U.fromDom(e.getBody())),el=(e,n)=>Fm(e,"table",n),mS=e=>{const n=e.startContainer,o=e.startOffset;return Oe(n)?o===0?N.some(U.fromDom(n)):N.none():N.from(n.childNodes[o]).map(U.fromDom)},n_=e=>{const n=e.endContainer,o=e.endOffset;return Oe(n)?o===n.data.length?N.some(U.fromDom(n)):N.none():N.from(n.childNodes[o-1]).map(U.fromDom)},fS=e=>Pm(e).fold(Le([e]),n=>[e].concat(fS(n))),ny=e=>kc(e).fold(Le([e]),n=>Qn(n)==="br"?Tc(n).map(o=>[e].concat(ny(o))).getOr([]):[e].concat(ny(n))),bf=(e,n)=>ir(mS(n),n_(n),(o,r)=>{const c=Fo(fS(e),Ee(Cn,o)),u=Fo(ny(e),Ee(Cn,r));return c.isSome()&&u.isSome()}).getOr(!1),oy=(e,n,o,r)=>{const c=o,u=new Fn(o,c),f=oo(e.schema.getMoveCaretBeforeOnEnterElements(),(C,x)=>!Rt(["td","th","table"],x.toLowerCase()));let b=o;do{if(Oe(b)&&Re.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},$1=e=>{const n=e.selection.getSel();return Se(n)&&n.rangeCount>0},sy=(e,n)=>{const o=Zu(e);o.length>0?he(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},gS=(e,n,o)=>{const r=f1(e,n);o(r),e.moveToBookmark(r)},Xg=e=>ba(e==null?void 0:e.nodeType),ry=e=>qe(e)&&!Pa(e)&&!Us(e)&&!Vi(e),o_=(e,n)=>{if(ry(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Fc=e=>e.isContentEditable===!0,hS=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=an(u);gS(r,!0,()=>{n()}),f&&an(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&s_(c,r)},s_=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!o_(e,b)&&qe(u)){const C=u.childNodes,x=e.getRoot();let O;if(f<C.length){const A=C[f];O=new Fn(A,(o=e.getParent(A,e.isBlock))!==null&&o!==void 0?o:x)}else{const A=C[C.length-1];O=new Fn(A,(r=e.getParent(A,e.isBlock))!==null&&r!==void 0?r:x),O.next(!0)}for(let A=O.current();A;A=O.next()){if(e.getContentEditable(A)==="false")return;if(Oe(A)&&!is(A)){c.setStart(A,0),n.setRng(c);return}}}},We=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(qe(e)||!is(e))return e}},Qo=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ku(e,n),Ic=(e,n,o)=>e.schema.isValidChild(n,o),is=(e,n=!1)=>{if(Se(e)&&Oe(e)){const o=n?e.data.replace(/ /g," "):e.data;return Su(o)}else return!1},Lc=e=>Se(e)&&Oe(e)&&e.length===0,pS=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Fg(e),c=wa(r)?o:`${o},${r}`;return Ec(U.fromDom(n),c)},Jg=(e,n)=>{const o=e.dom;return ry(n)&&o.getContentEditable(n)==="false"&&pS(e,n)&&o.select('[contenteditable="true"]',n).length===0},ac=(e,n)=>q(e)?e(n):(Se(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),F1=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Qg=(e,n)=>{if(cn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=P1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},eh=(e,n,o)=>{const r=e.getStyle(n,o);return Qg(r,o)},ay=(e,n)=>{let o;return e.getParent(n,r=>qe(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},th=(e,n,o)=>e.getParents(n,o,e.getRoot()),I1=(e,n,o)=>{const r=e.formatter.get(n);return Se(r)&&no(r,o)},cy=(e,n)=>I1(e,n,r=>{const c=u=>q(u)||u.length>1&&u.charAt(0)==="%";return no(["styles","attributes"],u=>Xn(r,u).exists(f=>{const b=An(f)?f:_m(f);return no(b,c)}))}),r_=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>oo(u,(f,b)=>no(r,C=>C===b));return I1(e,n,u=>{const f=c(u);return I1(e,o,b=>{const C=c(b);return cd(f,C)})})},Hc=e=>jr(e,"block"),L1=e=>Hc(e)&&e.wrapper===!0,nh=e=>Hc(e)&&e.wrapper!==!0,ua=e=>jr(e,"selector"),Uo=e=>jr(e,"inline"),iy=e=>ua(e)&&Uo(e)&&bo(Xn(e,"mixed"),!0),oh=e=>ua(e)&&e.expand!==!1&&!Uo(e),$a=Pa,sh=th,ly=is,uy=Qo,a_=e=>yo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,bS=(e,n)=>{let o=n;for(;o;){if(qe(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},rh=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},vS=(e,n,o)=>rh(e,n,o,r=>Zt(r)||rc(r)),c_=(e,n,o)=>rh(e,n,o,Wu),ju=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,C=(O,A,B)=>{const L=Nu(e),z=c?L.backwards:L.forwards;return N.from(z(O,A,(F,V)=>$a(F.parentNode)?-1:(f=F,B(c,F,V)),b))};return C(o,r,vS).bind(O=>u?C(O.container,O.offset+(c?-1:0),c_):N.some(O)).orThunk(()=>f?N.some({container:f,offset:c?0:f.length}):N.none())},Ws=(e,n,o,r,c)=>{const u=r[c];Oe(r)&&wa(r.data)&&u&&(r=u);const f=sh(e,r);for(let b=0;b<f.length;b++)for(let C=0;C<n.length;C++){const x=n[C];if(!(Se(x.collapsed)&&x.collapsed!==o.collapsed)&&ua(x)&&e.is(f[b],x.selector))return f[b]}return r},cc=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(Hc(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const C=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(Oe(o)?o.parentNode:o,x=>x!==f&&uy(e.schema,x),C)}if(u&&Hc(b)&&b.wrapper&&(u=sh(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!F1(u,"br")););return u||o},Fa=(e,n,o,r)=>{const c=o.parentNode;return Se(o[r])?!1:c===n||cn(c)||e.isBlock(c)?!0:Fa(e,n,c,r)},da=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(Oe(o)&&!ly(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[f];C;C=C[f]){const x=Oe(C)&&!Fa(e,b,C,f);if(!$a(C)&&!a_(C)&&!ly(C,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},H1=e=>$a(e.parentNode)||$a(e),qd=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const C=o[0];return qe(c)&&c.hasChildNodes()&&(c=tc(c,u),Oe(c)&&(u=0)),qe(f)&&f.hasChildNodes()&&(f=tc(f,n.collapsed?b:b-1),Oe(f)&&(b=f.data.length)),c=bS(e,c),f=bS(e,f),H1(c)&&(c=$a(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,Oe(c)&&(u=n.collapsed?c.length:0)),H1(f)&&(f=$a(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,Oe(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(ju(e,e.getRoot(),c,u,!0,r).each(({container:A,offset:B})=>{c=A,u=B}),ju(e,e.getRoot(),f,b,!1,r).each(({container:A,offset:B})=>{f=A,b=B})),(Uo(C)||C.block_expand)&&((!Uo(C)||!Oe(c)||u===0)&&(c=da(e,o,c,u,!0)),(!Uo(C)||!Oe(f)||b===f.data.length)&&(f=da(e,o,f,b,!1))),oh(C)&&(c=Ws(e,o,n,c,"previousSibling"),f=Ws(e,o,n,f,"nextSibling")),(Hc(C)||ua(C))&&(c=cc(e,o,c,"previousSibling"),f=cc(e,o,f,"nextSibling"),Hc(C)&&(e.isBlock(c)||(c=da(e,o,c,u,!0)),e.isBlock(f)||(f=da(e,o,f,b,!1)))),qe(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),qe(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},Il=(e,n,o)=>{var r;const c=n.startOffset,u=tc(n.startContainer,c),f=n.endOffset,b=tc(n.endContainer,f-1),C=V=>{const Y=V[0];Oe(Y)&&Y===u&&c>=Y.data.length&&V.splice(0,1);const X=V[V.length-1];return f===0&&V.length>0&&X===b&&Oe(X)&&V.splice(V.length-1,1),V},x=(V,Y,X)=>{const Q=[];for(;V&&V!==X;V=V[Y])Q.push(V);return Q},O=(V,Y)=>e.getParent(V,X=>X.parentNode===Y,Y),A=(V,Y,X)=>{const Q=X?"nextSibling":"previousSibling";for(let se=V,Ce=se.parentNode;se&&se!==Y;se=Ce){Ce=se.parentNode;const Ie=x(se===V?se:se[Q],Q);Ie.length&&(X||Ie.reverse(),o(C(Ie)))}};if(u===b)return o(C([u]));const B=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return A(u,B,!0);if(e.isChildOf(b,u))return A(b,B);const L=O(u,B)||u,z=O(b,B)||b;A(u,L,!0);const F=x(L===u?L:L.nextSibling,"nextSibling",z===b?z.nextSibling:z);F.length&&o(C(F)),A(b,z)},i_=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],dy=e=>Js(e)&&ea(e)===tr,l_=(e,n,o,r)=>Ea(n).fold(()=>"skipping",c=>r==="br"||dy(n)?"valid":ok(n)?"existing":Us(n.dom)?"caret":no(i_,u=>Ec(n,u))?"valid-block":!Ic(e,o,r)||!Ic(e,Qn(c),o)?"invalid-child":"valid"),yS=(e,n)=>{const o=qd(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},CS=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;pd(e,ec()),Zn(e,`${Bd()}`,f),Zn(e,`${ca()}`,r);const{attributes:C={},classes:x=[]}=c(f,b);if(Pi(e,C),l0(e,x),u){x.length>0&&Zn(e,`${Mg()}`,x.join(","));const O=yr(C);O.length>0&&Zn(e,`${Bg()}`,O.join(","))}},wS=e=>{bd(e,ec()),Lo(e,`${Bd()}`),Lo(e,`${ca()}`),Lo(e,`${Ym()}`);const n=$i(e,`${Bg()}`).map(r=>r.split(",")).getOr([]),o=$i(e,`${Mg()}`).map(r=>r.split(",")).getOr([]);he(n,r=>Lo(e,r)),u0(e,o),Lo(e,`${Mg()}`),Lo(e,`${Bg()}`)},V1=(e,n,o,r,c)=>{const u=U.fromTag("span",e);return CS(u,n,o,r,c,!1),u},my=(e,n,o,r,c,u)=>{const f=[],b=V1(e.getDoc(),o,u,r,c),C=gi(),x=()=>{C.clear()},O=()=>C.get().getOrThunk(()=>{const z=Ol(b);return f.push(z),C.set(z),z}),A=z=>{he(z,B)},B=z=>{switch(l_(e,z,"span",Qn(z))){case"invalid-child":{x();const V=$s(z);A(V),x();break}case"valid-block":{x(),CS(z,o,u,r,c,!0);break}case"valid":{const V=O();wv(z,V);break}}},L=z=>{const F=Ft(z,U.fromDom);A(F)};return Il(e.dom,n,z=>{x(),L(z)}),f},Rn=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Zu(e).length>0,b=jn("mce-annotation");if(u.collapsed&&!f&&yS(e,u),c.getRng().collapsed&&!f){const C=V1(e.getDoc(),b,r,n,o.decorate);Hm(C,In),c.getRng().insertNode(C.dom),c.select(C.dom)}else gS(c,!1,()=>{sy(e,C=>{my(e,C,b,n,o.decorate,r)})})})},Ll=e=>{const n=Qp();BD(e,n);const o=JC(e,n),r=ni("span"),c=u=>{he(u,f=>{r(f)?ai(f):wS(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Rn(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{c0(e,N.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();Ze(i0(e,u),(b,C)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=i0(e,u);return yn(f,b=>Ft(b,C=>C.dom))}}},vf=e=>({getBookmark:Ee(Xk,e),moveToBookmark:Ee(Jk,e)});vf.isBookmarkNode=Pa;const fy=(e,n,o)=>o.collapsed?!1:no(o.getClientRects(),r=>Xm(r,e,n)),SS=(e,n)=>e.dispatch("PreProcess",n),gy=(e,n)=>e.dispatch("PostProcess",n),xS=e=>{e.dispatch("remove")},z1=e=>{e.dispatch("detach")},u_=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},d_=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},ES=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},m_=e=>{e.dispatch("PreInit")},hy=e=>{e.dispatch("PostRender")},yf=e=>{e.dispatch("Init")},Cf=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},U1=(e,n,o)=>{e.dispatch(n,o)},TS=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},ic=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Zs=(e,n)=>e.dispatch("BeforeSetContent",n),sr=(e,n)=>e.dispatch("SetContent",n),tl=(e,n)=>e.dispatch("BeforeGetContent",n),f_=(e,n)=>e.dispatch("GetContent",n),g_=(e,n)=>{e.dispatch("AutocompleterStart",n)},h_=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Xt=e=>{e.dispatch("AutocompleterEnd")},p_=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),kS=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),W1=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),b_=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Ge={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ge.metaKeyPressed(e),metaKeyPressed:e=>Ke.os.isMacOS()||Ke.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Kd="data-mce-selected",v_="table,img,figure.image,hr,video,span.mce-preview-object,details",_S=Math.abs,Z1=Math.round,ah={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},py=e=>e.type==="longpress"||e.type.indexOf("touch")===0,by=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,C,x,O,A,B,L,z,F,V,Y,X,Q,se,Ce,Ie;const Pe=De=>Se(De)&&(ro(De)||o.is(De,"figure.image")),ce=De=>ii(De)||o.hasClass(De,"mce-preview-object"),le=(De,bt)=>{if(py(De)){const jt=De.touches[0];return Pe(De.target)&&!fy(jt.clientX,jt.clientY,bt)}else return Pe(De.target)&&!fy(De.clientX,De.clientY,bt)},Te=De=>{const bt=De.target;le(De,n.selection.getRng())&&!De.isDefaultPrevented()&&n.selection.select(bt)},tt=De=>o.hasClass(De,"mce-preview-object")&&Se(De.firstElementChild)?[De,De.firstElementChild]:o.is(De,"figure.image")?[De.querySelector("img")]:[De],it=De=>{const bt=O0(n);return!bt||De.getAttribute("data-mce-resize")==="false"||De===n.getBody()?!1:o.hasClass(De,"mce-preview-object")&&Se(De.firstElementChild)?Ec(U.fromDom(De.firstElementChild),bt):Ec(U.fromDom(De),bt)},Bt=De=>ce(De)?o.create("img",{src:Ke.transparentSrc}):De.cloneNode(!0),zt=(De,bt,jt)=>{if(Se(jt)){const pn=tt(De);he(pn,Qe=>{Qe.style[bt]||!n.schema.isValid(Qe.nodeName.toLowerCase(),bt)?o.setStyle(Qe,bt,jt):o.setAttrib(Qe,bt,""+jt)})}},un=(De,bt,jt)=>{zt(De,"width",bt),zt(De,"height",jt)},xn=De=>{let bt,jt,pn,Qe,Ut;bt=De.screenX-A,jt=De.screenY-B,Q=bt*x[2]+F,se=jt*x[3]+V,Q=Q<5?5:Q,se=se<5?5:se,(Pe(f)||ce(f))&&kr(n)!==!1?pn=!Ge.modifierPressed(De):pn=Ge.modifierPressed(De),pn&&(_S(bt)>_S(jt)?(se=Z1(Q*Y),Q=Z1(se/Y)):(Q=Z1(se/Y),se=Z1(Q*Y))),un(b,Q,se),Qe=x.startPos.x+bt,Ut=x.startPos.y+jt,Qe=Qe>0?Qe:0,Ut=Ut>0?Ut:0,o.setStyles(C,{left:Qe,top:Ut,display:"block"}),C.innerHTML=Q+" &times; "+se,x[2]<0&&b.clientWidth<=Q&&o.setStyle(b,"left",L+(F-Q)),x[3]<0&&b.clientHeight<=se&&o.setStyle(b,"top",z+(V-se)),bt=u.scrollWidth-Ce,jt=u.scrollHeight-Ie,bt+jt!==0&&o.setStyles(C,{left:Qe-bt,top:Ut-jt}),X||(d_(n,f,F,V,"corner-"+x.name),X=!0)},ko=()=>{const De=X;X=!1,De&&(zt(f,"width",Q),zt(f,"height",se)),o.unbind(r,"mousemove",xn),o.unbind(r,"mouseup",ko),c!==r&&(o.unbind(c,"mousemove",xn),o.unbind(c,"mouseup",ko)),o.remove(b),o.remove(C),o.remove(O),Go(f),De&&(ES(n,f,Q,se,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Go=De=>{Ht();const bt=o.getPos(De,u),jt=bt.x,pn=bt.y,Qe=De.getBoundingClientRect(),Ut=Qe.width||Qe.right-Qe.left,wn=Qe.height||Qe.bottom-Qe.top;f!==De&&(Me(),f=De,Q=se=0);const go=n.dispatch("ObjectSelected",{target:De});it(De)&&!go.isDefaultPrevented()?Ze(ah,(On,Rs)=>{const hc=Kc=>{const jf=tt(f)[0];A=Kc.screenX,B=Kc.screenY,F=jf.clientWidth,V=jf.clientHeight,Y=V/F,x=On,x.name=Rs,x.startPos={x:Ut*On[0]+jt,y:wn*On[1]+pn},Ce=u.scrollWidth,Ie=u.scrollHeight,O=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(O,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Bt(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:jt,top:pn,margin:0}),un(b,Ut,wn),b.removeAttribute(Kd),u.appendChild(b),o.bind(r,"mousemove",xn),o.bind(r,"mouseup",ko),c!==r&&(o.bind(c,"mousemove",xn),o.bind(c,"mouseup",ko)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},F+" &times; "+V)};let Ha=o.get("mceResizeHandle"+Rs);Ha&&o.remove(Ha),Ha=o.add(u,"div",{id:"mceResizeHandle"+Rs,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Rs+"-resize; margin:0; padding:0"}),o.bind(Ha,"mousedown",Kc=>{Kc.stopImmediatePropagation(),Kc.preventDefault(),hc(Kc)}),On.elm=Ha,o.setStyles(Ha,{left:Ut*On[0]+jt-Ha.offsetWidth/2,top:wn*On[1]+pn-Ha.offsetHeight/2})}):Me(!1)},Ss=Rg(Go,0),Me=(De=!0)=>{Ss.cancel(),Ht(),f&&De&&f.removeAttribute(Kd),Ze(ah,(bt,jt)=>{const pn=o.get("mceResizeHandle"+jt);pn&&(o.unbind(pn),o.remove(pn))})},je=(De,bt)=>o.isChildOf(De,bt),sn=De=>{if(X||n.removed||n.composing)return;const bt=De.type==="mousedown"?De.target:e.getNode(),jt=Li(U.fromDom(bt),v_).map(Qe=>Qe.dom).filter(Qe=>o.isEditable(Qe.parentElement)).getOrUndefined(),pn=Se(jt)?o.getAttrib(jt,Kd,"1"):"1";if(he(o.select(`img[${Kd}],hr[${Kd}]`),Qe=>{Qe.removeAttribute(Kd)}),Se(jt)&&je(jt,u)&&n.hasFocus()){st();const Qe=e.getStart(!0);if(je(Qe,jt)&&je(e.getEnd(!0),jt)){o.setAttrib(jt,Kd,pn),Ss.throttle(jt);return}}Me()},Ht=()=>{Ze(ah,De=>{De.elm&&(o.unbind(De.elm),delete De.elm)})},st=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{st(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",sn),n.on("keyup compositionend",De=>{f&&f.nodeName==="TABLE"&&sn(De)}),n.on("hide blur",Me),n.on("contextmenu longpress",Te,!0)}),n.on("remove",Ht),{isResizable:it,showResizeRect:Go,hideResizeRect:Me,updateResizeRect:sn,destroy:()=>{Ss.cancel(),f=b=O=null}}},y_=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},ID=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},OS=(e,n,o)=>{const r=e.document.createRange();return y_(r,n),ID(r,o),r},AS=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},j1=Bl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),C_=(e,n,o)=>n(U.fromDom(o.startContainer),o.startOffset,U.fromDom(o.endContainer),o.endOffset),yt=(e,n)=>n.match({domRange:o=>({ltr:Le(o),rtl:N.none}),relative:(o,r)=>({ltr:id(()=>OS(e,o,r)),rtl:id(()=>N.some(OS(e,r,o)))}),exact:(o,r,c,u)=>({ltr:id(()=>AS(e,o,r,c,u)),rtl:id(()=>N.some(AS(e,c,u,o,r)))})}),w_=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>j1.rtl(U.fromDom(c.endContainer),c.endOffset,U.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>C_(e,j1.ltr,o)):C_(e,j1.ltr,o)},S_=(e,n)=>{const o=yt(e,n);return w_(e,o)};j1.ltr,j1.rtl;const ch={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},G1=(e,n,o)=>{var r,c;return N.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return N.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),N.some(f)})},x_=(e,n,o)=>{var r,c;return N.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},E_=(()=>document.caretPositionFromPoint?G1:document.caretRangeFromPoint?x_:N.none)(),T_=(e,n,o)=>{const r=U.fromDom(e.document);return E_(r,n,o).map(c=>ch.create(U.fromDom(c.startContainer),c.startOffset,U.fromDom(c.endContainer),c.endOffset))},ih=Bl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vy=(e,n,o,r)=>e.fold(n,o,r),DS=e=>e.fold(ho,ho,ho),yy=ih.before,Cy=ih.on,RS=ih.after,Hl={before:yy,on:Cy,after:RS,cata:vy,getStart:DS},wf=Bl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wy=e=>wf.exact(e.start,e.soffset,e.finish,e.foffset),k_=e=>e.match({domRange:n=>U.fromDom(n.startContainer),relative:(n,o)=>Hl.getStart(n),exact:(n,o,r,c)=>n}),__=wf.domRange,ln=wf.relative,Sy=wf.exact,nl=e=>{const n=k_(e);return Nm(n)},ol=ch.create,Vl={domRange:__,relative:ln,exact:Sy,exactFromRange:wy,getWin:nl,range:ol},dr=(e,n)=>{const o=Qn(e);return o==="input"?Hl.after(e):Rt(["br","img"],o)?n===0?Hl.before(e):Hl.after(e):Hl.on(e,n)},q1=(e,n)=>{const o=e.fold(Hl.before,dr,Hl.after),r=n.fold(Hl.before,dr,Hl.after);return Vl.relative(o,r)},Sf=(e,n,o,r)=>{const c=dr(e,n),u=dr(o,r);return Vl.relative(c,u)},K1=e=>e.match({domRange:n=>{const o=U.fromDom(n.startContainer),r=U.fromDom(n.endContainer);return Sf(o,n.startOffset,r,n.endOffset)},relative:q1,exact:Sf}),Yd=(e,n)=>{const r=(n||document).createDocumentFragment();return he(e,c=>{r.appendChild(c.dom)}),U.fromDom(r)},O_=e=>{const n=Vl.getWin(e).dom,o=(c,u,f,b)=>AS(n,c,u,f,b),r=K1(e);return S_(n,r).match({ltr:o,rtl:o})},HD=(e,n,o)=>T_(e,n,o),A_=(e,n,o)=>{const r=Nm(U.fromDom(o));return HD(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},MS=(e,n)=>Se(e)&&Se(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,Jt=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Vc=(e,n,o)=>Jt(e,n,o)!==null,xf=(e,n,o)=>Vc(e,n,r=>r.nodeName===o),D_=(e,n)=>Da(e)&&!Vc(e,n,Us),Xd=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Fn(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(yo(u))return!0}return!1},en=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},R_=(e,n)=>{let o=n;for(;o&&o!==e;){if(an(o))return!0;o=o.parentNode}return!1},Y1=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let C,x;if(!b)return N.none();const O=e.getParent(b,e.isBlock)||u;if(r&&yo(c)&&n&&e.isEmpty(O))return N.some(de(b,e.nodeIndex(c)));const A=new Fn(c,O);for(;x=A[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||D_(x,u))return N.none();if(Oe(x)&&x.data.length>0)return xf(x,u,"A")?N.none():N.some(de(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return N.none();C=x}return wl(C)?N.none():o&&C?N.some(de(C,0)):N.none()},X1=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const x=qe(b)&&C===b.childNodes.length,O=e.schema.getNonEmptyElements();let A=o;if(Da(b))return N.none();if(qe(b)&&C>b.childNodes.length-1&&(A=!1),Ac(b)&&(b=c,C=0),b===c){if(A&&(u=b.childNodes[C>0?C-1:0],u&&(Da(u)||O[u.nodeName]||qa(u))))return N.none();if(b.hasChildNodes()){if(C=Math.min(!A&&C>0?C-1:C,b.childNodes.length-1),b=b.childNodes[C],C=Oe(b)&&x?b.data.length:0,!n&&b===c.lastChild&&qa(b)||R_(c,b)||Da(b))return N.none();if(b.hasChildNodes()&&!qa(b)){u=b;const B=new Fn(b,c);do{if(an(u)||Da(u)){f=!1;break}if(Oe(u)&&u.data.length>0){C=A?0:u.data.length,b=u,f=!0;break}if(O[u.nodeName.toLowerCase()]&&!Fs(u)){C=e.nodeIndex(u),b=u.parentNode,A||C++,f=!0;break}}while(u=A?B.next():B.prev())}}}return n&&(Oe(b)&&C===0&&Y1(e,x,n,!0,b).each(B=>{b=B.container(),C=B.offset(),f=!0}),qe(b)&&(u=b.childNodes[C],u||(u=b.childNodes[C-1]),u&&yo(u)&&!en(u,"A")&&!Xd(e,u,!1)&&!Xd(e,u,!0)&&Y1(e,x,n,!0,u).each(B=>{b=B.container(),C=B.offset(),f=!0}))),A&&!n&&Oe(b)&&C===b.data.length&&Y1(e,x,n,!1,b).each(B=>{b=B.container(),C=B.offset(),f=!0}),f&&b?N.some(de(b,C)):N.none()},J1=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=de.fromRangeStart(n);return X1(e,o,!0,r).each(u=>{(!o||!de.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||X1(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),MS(n,r)?N.none():N.some(r)},zl=(e,n)=>e.splitText(n),sl=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&Oe(n)){if(o>0&&o<n.data.length)if(r=zl(n,o),n=r.previousSibling,c>o){c=c-o;const u=zl(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(Oe(n)&&o>0&&o<n.data.length&&(n=zl(n,o),o=0),Oe(r)&&c>0&&c<r.data.length){const u=zl(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},l=e=>({walk:(u,f)=>Il(e,u,f),split:sl,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=qd(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(b.startContainer,b.startOffset),C.setEnd(b.endContainer,b.endOffset),C}return u},normalize:u=>J1(e,u).fold(we,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});l.compareRanges=MS,l.getCaretRangeFromPoint=A_,l.getSelectedNode=Jm,l.getNode=tc;const h=((e,n)=>{const o=(b,C)=>{if(!ba(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const x=b.dom;hu(x)&&(x.style[e]=C+"px")},r=b=>{const C=n(b);if(C<=0||C===null){const x=ss(b,e);return parseFloat(x)||0}return C},c=r,u=(b,C)=>_o(C,(x,O)=>{const A=ss(b,O),B=A===void 0?0:parseInt(A,10);return isNaN(B)?x:x+B},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,C,x)=>{const O=u(b,x);return C>O?C-O:0}}})("height",e=>{const n=e.dom;return $m(e)?n.getBoundingClientRect().height:n.offsetHeight}),v=e=>h.get(e),S=()=>U.fromDom(document),T=(e,n)=>e.view(n).fold(Le([]),r=>{const c=e.owner(r),u=T(e,c);return[r].concat(u)}),M=(e,n)=>{const o=n.owner(e);return T(n,o)};var W=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?N.none():N.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(U.fromDom)},owner:e=>Cl(e)});const ee=e=>{const n=S(),o=Oc(n),r=M(e,W),c=zm(e),u=od(r,(f,b)=>{const C=zm(b);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return Vm(u.left+c.left+o.left,u.top+c.top+o.top)},ye=e=>Qn(e)==="textarea",ze=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),He=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},pe=(e,n)=>{const o=$s(e);if(o.length===0||ye(e))return{element:e,offset:n};if(n<o.length&&!ye(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return ye(r)?{element:e,offset:n}:Qn(r)==="img"?{element:r,offset:1}:Js(r)?{element:r,offset:ea(r).length}:{element:r,offset:$s(r).length}}},Ve=(e,n)=>{const o=HT(e),r=v(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},ge=(e,n)=>{const o=pe(e,n),r=U.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+tr+"</span>");return gs(o.element,r),Ve(r,()=>Tn(r))},et=e=>Ve(U.fromDom(e),vt),wt=(e,n,o,r)=>{Ro(e,(c,u)=>qn(e,n,o,r),o)},It=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(ze(e,u))return;const f=Oc(n).top;o(e,n,f,r,c),He(e,u)},qn=(e,n,o,r)=>{const c=U.fromDom(e.getBody()),u=U.fromDom(e.getDoc());Ho(c);const f=ge(U.fromDom(o.startContainer),o.startOffset);It(e,u,n,f,r),f.cleanup()},Wo=(e,n,o,r)=>{const c=U.fromDom(e.getDoc());It(e,c,o,et(n),r)},Ro=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(U.fromDom(r),U.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},mr=(e,n,o,r,c)=>{const u=n.pos;if(r)Tv(u.left,u.top,c);else{const f=u.top-o+n.height;Tv(-e.getBody().getBoundingClientRect().left,f,c)}},Jd=(e,n,o,r,c,u)=>{const f=r+o,b=c.pos.top,C=c.bottom,x=C-b>=r;b<o?mr(e,c,r,u!==!1,n):b>f?mr(e,c,r,x?u!==!1:u===!0,n):C>f&&!x&&mr(e,c,r,u===!0,n)},lh=(e,n,o,r,c)=>{const u=Nm(n).dom.innerHeight;Jd(e,n,o,u,r,c)},Q1=(e,n,o,r,c)=>{const u=Nm(n).dom.innerHeight;Jd(e,n,o,u,r,c);const f=ee(r.element),b=Av(window);f.top<b.y?kv(r.element,c!==!1):f.top>b.bottom&&kv(r.element,c===!0)},eb=(e,n,o)=>wt(e,lh,n,o),kn=(e,n,o)=>Wo(e,n,lh,o),fr=(e,n,o)=>wt(e,Q1,n,o),Or=(e,n,o)=>Wo(e,n,Q1,o),zc=(e,n,o)=>{(e.inline?kn:Or)(e,n,o)},Ar=(e,n,o)=>{(e.inline?eb:fr)(e,n,o)},Qd=e=>e.dom.focus(),gr=e=>{const n=Ii(e).dom;return e.dom===n.activeElement},uh=(e=S())=>N.from(e.dom.activeElement).map(U.fromDom),dh=e=>uh(Ii(e)).filter(n=>e.dom.contains(n.dom)),Ci=(e,n)=>{const o=Js(n)?ea(n).length:$s(n).length+1;return e>o?o:e<0?0:e},ws=e=>Vl.range(e.start,Ci(e.soffset,e.start),e.finish,Ci(e.foffset,e.finish)),xy=(e,n)=>!ci(n.dom)&&(Cr(e,n)||Cn(e,n)),BS=e=>n=>xy(e,n.start)&&xy(e,n.finish),NS=e=>e.inline||Ke.browser.isFirefox(),PS=e=>Vl.range(U.fromDom(e.startContainer),e.startOffset,U.fromDom(e.endContainer),e.endOffset),M_=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?N.none():N.from(n.getRangeAt(0))).map(PS)},Ey=e=>{const n=Nm(e);return M_(n.dom).filter(BS(e))},B_=(e,n)=>N.from(n).filter(BS(e)).map(ws),mh=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),N.some(n)}catch{return N.none()}},N_=e=>{const n=NS(e)?Ey(U.fromDom(e.getBody())):N.none();e.bookmark=n.isSome()?n:e.bookmark},$S=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>B_(U.fromDom(e.getBody()),o)).bind(mh),VD=e=>{$S(e).each(n=>e.selection.setRng(n))},zD={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},e6=(e,n)=>(ba(n)||(n=0),setTimeout(e,n)),$_=(e,n)=>(ba(n)||(n=0),setInterval(e,n)),wi={setEditorTimeout:(e,n,o)=>e6(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=$_(()=>{e.removed?clearInterval(r):n()},o);return r}},UD=e=>e.type==="nodechange"&&e.selectionChange,WD=(e,n)=>{const o=()=>{n.throttle()};hn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{hn.DOM.unbind(document,"mouseup",o)})},ZD=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},t6=(e,n)=>{ZD(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{UD(o)||N_(e)})},n6=e=>{const n=Rg(()=>{N_(e)},0);e.on("init",()=>{e.inline&&WD(e,n),t6(e,n)}),e.on("remove",()=>{n.cancel()})};let tb;const F_=hn.DOM,FS=e=>qe(e)&&zD.isEditorUIElement(e),IS=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Ty=(e,n)=>{const o=Aw(e);return F_.getParent(n,c=>FS(c)||(o?e.dom.is(c,o):!1))!==null},LS=e=>{try{const n=Ii(U.fromDom(e.getElement()));return uh(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},jD=(e,n)=>{const o=n.editor;n6(o);const r=(c,u)=>{if(zw(c)&&c.inline!==!0){const f=U.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;IS(LS(o))&&r(o,pd),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{wi.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!IS(LS(o))||c!==o)&&r(o,bd),!Ty(o,LS(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),tb||(tb=c=>{const u=e.activeEditor;u&&hg(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!Ty(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},F_.bind(document,"focusin",tb))},o6=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&tb&&(F_.unbind(document,"focusin",tb),tb=null)},s6=e=>{e.on("AddEditor",Ee(jD,e)),e.on("RemoveEditor",Ee(o6,e))},r6=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),a6=e=>e.collapsed?N.from(tc(e.startContainer,e.startOffset)).map(U.fromDom):N.none(),c6=(e,n)=>a6(n).bind(o=>ps(o)?N.some(o):Cr(e,o)?N.none():N.some(e)),GD=(e,n)=>{c6(U.fromDom(e.getBody()),n).bind(o=>Eo(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},I_=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},i6=e=>gr(e)||dh(e).isSome(),l6=e=>Se(e.iframeElement)&&gr(U.fromDom(e.iframeElement)),u6=e=>{const n=e.getBody();return n&&i6(U.fromDom(n))},d6=e=>{const n=Ii(U.fromDom(e.getElement()));return uh(n).filter(o=>!IS(o.dom)&&Ty(e,o.dom)).isSome()},fh=e=>e.inline?u6(e):l6(e),HS=e=>fh(e)||d6(e),qD=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Se(e.bookmark)&&!fh(e)&&$S(e).each(u=>{e.selection.setRng(u),r=u});const c=r6(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){I_(c),GD(e,r),VS(e);return}e.inline||(Ke.browser.isOpera()||I_(o),e.getWin().focus()),(Ke.browser.isFirefox()||e.inline)&&(I_(o),GD(e,r)),VS(e)},VS=e=>e.editorManager.setActive(e),m6=(e,n)=>{e.removed||(n?VS(e):qD(e))},KD=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return N.from(u).map(U.fromDom).map(b=>!r||!n.collapsed?gu(b,c(b,f)).getOr(b):b).bind(b=>Xs(b)?N.some(b):Ea(b).filter(Xs)).map(b=>b.dom).getOr(e)},YD=(e,n,o=!1)=>KD(e,n,!0,o,(r,c)=>Math.min(Yr(r),c)),XD=(e,n,o=!1)=>KD(e,n,!1,o,(r,c)=>c>0?c-1:c),JD=(e,n)=>{const o=e;for(;e&&Oe(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},f6=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),Oe(o)&&Oe(r)&&(o.length===c?o=JD(o.nextSibling,!0):o=o.parentNode,u===0?r=JD(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=Oe(f)?f.parentNode:f;return qe(b)?b:e},QD=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||YD(u,n,n.collapsed),e.isBlock),b=e.getParent(r||XD(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let C;const x=new Fn(f,u);for(;(C=x.next())&&C!==b;)e.isBlock(C)&&c.push(C)}return b&&f!==b&&b!==u&&c.push(b),c},g6=(e,n,o)=>N.from(n).bind(r=>N.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(oy(e,f,r,!0),oy(e,f,r,!1)),f})),zS=(e,n)=>Ft(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),eR=e=>Qn(e)==="img"?1:PC(e).fold(()=>$s(e).length,n=>n.length),h6=e=>PC(e).filter(n=>n.trim().length!==0||n.indexOf(In)>-1).isSome(),p6=e=>uo(e)&&Nr(e,"contenteditable")==="false",b6=["img","br"],tR=e=>h6(e)||Rt(b6,Qn(e))||p6(e),v6=e=>wr(e,tR),y6=e=>C6(e,tR),C6=(e,n)=>{const o=r=>{const c=$s(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return N.some(f);const b=o(f);if(b.isSome())return b}return N.none()};return o(e)},nR="[data-mce-autocompleter]",w6=(e,n)=>{if(oR(U.fromDom(e.getBody())).isNone()){const o=U.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Ko(o,U.fromDom(n.extractContents())),n.insertNode(o.dom),Ea(o).each(r=>r.dom.normalize()),y6(o).map(r=>{e.selection.setCursorLocation(r.dom,eR(r))})}},S6=e=>Li(e,nR),oR=e=>ka(e,nR),x6=(e,n)=>oR(n).each(o=>{const r=e.selection.getBookmark();ai(o),e.selection.moveToBookmark(r)}),E6={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},US=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},T6=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Su(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},sR=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ia{static create(n,o){const r=new Ia(n,E6[n]||1);return o&&Ze(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!K(n))return Se(n)&&Ze(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Ia(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=US(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=US(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(sR(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||sR(f))return!1}if(f.type===8||f.type===3&&!T6(f)||f.type===3&&f.parent&&o[f.parent.name]&&Su((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=US(f,u));return!0}walk(n){return US(this,null,n)}}const k6=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),rR=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&k6(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},ut=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const C=r.exec(n);if(C===null)return b;if(C[1]==="!"){xs(C[2],"--")?b=rR(n,!1,C.index+3):b=rR(n,!0,C.index+1);break}else{c.lastIndex=r.lastIndex;const x=c.exec(n);if(J(x)||x.index!==r.lastIndex)continue;C[1]==="/"?f-=1:Tt(u,C[2])||(f+=1),b=r.lastIndex+x[0].length;break}}return b},aR=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},L_=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=aR(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,C=f[0].length;let x;u[f[1]]?x=b:x=ut(r,c,b),c=c.substring(0,b-C)+c.substring(x),o.lastIndex=b-C}return Sr(c)},_6=L_,WS=e=>{const n=hs(e,"[data-mce-bogus]");he(n,o=>{Nr(o,"data-mce-bogus")==="all"?Tn(o):Dc(o)?(gs(o,U.fromText(ve)),Tn(o)):ai(o)})},cR=e=>{const n=hs(e,"input");he(n,o=>{Lo(o,"name")})},O6=(e,n)=>{const o=lr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},A6=(e,n)=>{const o=e.getDoc(),r=Ii(U.fromDom(e.getBody())),c=U.fromTag("div",o);Zn(c,"data-mce-bogus","all"),Jr(c,{position:"fixed",left:"-9999999px",top:"0"}),Hm(c,n.innerHTML),WS(c),cR(c);const u=_D(r);Ko(u,c);const f=Sr(c.dom.innerText);return Tn(c),f},D6=(e,n,o)=>{let r;return n.format==="raw"?r=Re.trim(_6(e.serializer,o.innerHTML)):n.format==="text"?r=A6(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=O6(e,e.serializer.serialize(o,n)),n.format!=="text"&&!ta(U.fromDom(o))&&K(r)?Re.trim(r):r},R6=(e,n)=>N.from(e.getBody()).fold(Le(n.format==="tree"?new Ia("body",11):""),o=>D6(e,n,o)),ky=Re.makeMap,H_=e=>{const n=[];e=e||{};const o=e.indent,r=ky(e.indent_before||""),c=ky(e.indent_after||""),u=Du.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,C,x)=>{if(o&&r[b]&&n.length>0){const O=n[n.length-1];O.length>0&&O!==`
`&&n.push(`
`)}if(n.push("<",b),C)for(let O=0,A=C.length;O<A;O++){const B=C[O];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const O=n[n.length-1];O.length>0&&O!==`
`&&n.push(`
`)}},end:b=>{let C;n.push("</",b,">"),o&&c[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(b,C)=>{b.length>0&&(n[n.length]=C?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,C)=>{C?n.push("<?",b," ",u(C),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},gh=(e={},n=fi())=>{const o=H_(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:C=>{var x;o.text((x=C.value)!==null&&x!==void 0?x:"",C.raw)},8:C=>{var x;o.comment((x=C.value)!==null&&x!==void 0?x:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var x;o.doctype((x=C.value)!==null&&x!==void 0?x:"")},4:C=>{var x;o.cdata((x=C.value)!==null&&x!==void 0?x:"")},11:C=>{let x=C;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=C=>{var x;const O=f[C.type];if(O)O(C);else{const A=C.name,B=A in n.getVoidElements();let L=C.attributes;if(u&&L&&L.length>1){const z=[];z.map={};const F=n.getElementRule(C.name);if(F){for(let V=0,Y=F.attributesOrder.length;V<Y;V++){const X=F.attributesOrder[V];if(X in L.map){const Q=L.map[X];z.map[X]=Q,z.push({name:X,value:Q})}}for(let V=0,Y=L.length;V<Y;V++){const X=L[V].name;if(!(X in z.map)){const Q=L.map[X];z.map[X]=Q,z.push({name:X,value:Q})}}L=z}}if(o.start(A,L,B),!B){let z=C.firstChild;if(z){(A==="pre"||A==="textarea")&&z.type===3&&((x=z.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(z);while(z=z.next)}o.end(A)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},iR=new Set;he(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{iR.add(n)});const kt=["font","text-decoration","text-emphasis"],V_=(e,n)=>yr(e.parseStyle(e.getAttrib(n,"style"))),Nt=e=>iR.has(e),lR=(e,n)=>Gs(V_(e,n),o=>!Nt(o)),xZ=e=>ht(e,n=>no(kt,o=>xs(n,o))),EZ=(e,n,o)=>{const r=V_(e,n),c=V_(e,o),u=f=>{var b,C;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",O=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return Pn(x)&&Pn(O)&&x!==O};return no(r,f=>{const b=C=>no(C,x=>x===f);if(!b(c)&&b(kt)){const C=xZ(c);return no(C,u)}else return u(f)})},uR=(e,n,o)=>N.from(o.container()).filter(Oe).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),dR=Ee(uR,!0,rc),mR=Ee(uR,!1,rc),M6=e=>{const n=e.container();return Oe(n)&&(n.data.length===0||Pv(n.data)&&vf.isBookmarkNode(n.parentNode))},Ef=(e,n)=>o=>cf(e?0:-1,o).filter(n).isSome(),Ct=e=>ro(e)&&ss(U.fromDom(e),"display")==="block",fR=e=>an(e)&&!Ts(e),B6=Ef(!0,Ct),N6=Ef(!1,Ct),em=Ef(!0,ii),nb=Ef(!1,ii),gR=Ef(!0,qa),hR=Ef(!1,qa),Tf=Ef(!0,fR),tm=Ef(!1,fR),P6=e=>e.slice(0,-1),TZ=(e,n,o)=>Cr(n,e)?P6(pv(e,r=>o(r)||Cn(r,n))):[],$6=(e,n)=>TZ(e,n,we),nm=(e,n)=>[e].concat($6(e,n)),z_=(e,n,o)=>W0(e,n,o,M6),pR=(e,n)=>Fo(nm(U.fromDom(n.container()),e),Aa),bR=(e,n,o)=>z_(e,n.dom,o).forall(r=>pR(n,o).fold(()=>!$c(r,o,n.dom),c=>!$c(r,o,n.dom)&&Cr(c,U.fromDom(r.container())))),U_=(e,n,o)=>pR(n,o).fold(()=>z_(e,n.dom,o).forall(r=>!$c(r,o,n.dom)),r=>z_(e,r.dom,o).isNone()),W_=Ee(U_,!1),Lt=Ee(U_,!0),vR=Ee(bR,!1),ZS=Ee(bR,!0),yR=e=>Wd(e).exists(Dc),_y=(e,n,o)=>{const r=ht(nm(U.fromDom(o.container()),n),Aa),c=vr(r).getOr(n);return Ba(e,c.dom,o).filter(yR)},jS=(e,n)=>Wd(n).exists(Dc)||_y(!0,e,n).isSome(),GS=(e,n)=>Qw(n).exists(Dc)||_y(!1,e,n).isSome(),CR=Ee(_y,!1),F6=Ee(_y,!0),Z_=e=>de.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),wR=(e,n)=>{const o=ht(nm(U.fromDom(n.container()),e),Aa);return vr(o).getOr(e)},SR=(e,n)=>Z_(n)?mR(n):mR(n)||ur(wR(e,n).dom,n).exists(mR),xR=(e,n)=>Z_(n)?dR(n):dR(n)||Hr(wR(e,n).dom,n).exists(dR),I6=e=>Rt(["pre","pre-wrap"],e),j_=e=>Wd(e).bind(n=>Ga(n,Xs)).exists(n=>I6(ss(n,"white-space"))),L6=(e,n)=>ur(e.dom,n).isNone(),H6=(e,n)=>Hr(e.dom,n).isNone(),V6=(e,n)=>L6(e,n)||H6(e,n)||W_(e,n)||Lt(e,n)||GS(e,n)||jS(e,n),G_=e=>Se(e)&&an(e)&&Xw(e),qS=(e,n)=>o=>G_(new Fn(o,e)[n]()),z6=(e,n)=>{const o=Hr(e.dom,n).getOr(n),r=qS(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},U6=(e,n)=>{const o=ur(e.dom,n).getOr(n),r=qS(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},ER=(e,n)=>j_(n)?!1:V6(e,n)||SR(e,n)||xR(e,n),Oy=(e,n)=>j_(n)?!1:W_(e,n)||vR(e,n)||GS(e,n)||SR(e,n)||U6(e,n),W6=e=>{const n=e.container(),o=e.offset();return Oe(n)&&o<n.data.length?de(n,o+1):e},Ay=(e,n)=>j_(n)?!1:Lt(e,n)||ZS(e,n)||jS(e,n)||xR(e,n)||z6(e,n),q_=(e,n)=>Oy(e,n)||Ay(e,W6(n)),TR=(e,n)=>Zt(e.charAt(n)),K_=(e,n)=>rc(e.charAt(n)),Z6=e=>{const n=e.container();return Oe(n)&&qs(n.data,In)},j6=e=>{const n=e.split("");return Ft(n,(o,r)=>Zt(o)&&r>0&&r<n.length-1&&Wu(n[r-1])&&Wu(n[r+1])?" ":o).join("")},kf=(e,n,o)=>{const r=n.data,c=de(n,0);return!o&&TR(r,0)&&!q_(e,c)?(n.data=" "+r.slice(1),!0):o&&K_(r,0)&&Oy(e,c)?(n.data=In+r.slice(1),!0):!1},G6=e=>{const n=e.data,o=j6(n);return o!==n?(e.data=o,!0):!1},Y_=(e,n,o)=>{const r=n.data,c=de(n,r.length-1);return!o&&TR(r,r.length-1)&&!q_(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&K_(r,r.length-1)&&Ay(e,c)?(n.data=r.slice(0,-1)+In,!0):!1},q6=(e,n)=>{const o=n.container();if(!Oe(o))return N.none();if(Z6(n)){const r=kf(e,o,!1)||G6(o)||Y_(e,o,!1);return mn(r,n)}else if(q_(e,n)){const r=kf(e,o,!0)||Y_(e,o,!0);return mn(r,n)}else return N.none()},K6=e=>{const n=U.fromDom(e.getBody());e.selection.isCollapsed()&&q6(n,de.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},X_=(e,n,o)=>{if(o===0)return;const r=U.fromDom(e),c=vo(r,Aa).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Ay(c,de(e,e.data.length)),b=n===0&&Oy(c,de(e,0));e.replaceData(n,o,Pp(u,4,b,f))},Dy=(e,n)=>{const o=e.data.slice(n),r=o.length-og(o).length;X_(e,n,r)},KS=(e,n)=>{const o=e.data.slice(0,n),r=o.length-Dm(o).length;X_(e,n-r,r)},YS=(e,n,o,r=!0)=>{const c=Dm(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Tn(U.fromDom(f)),o&&Dy(u,c),u},ma=(e,n)=>{const o=e.container(),r=e.offset();return!de.isTextPosition(e)&&o===n.parentNode&&r>de.before(n).offset()},Y6=(e,n)=>ma(n,e)?de(n.container(),n.offset()-1):n,X6=e=>Oe(e)?de(e,0):de.before(e),J6=e=>Oe(e)?de(e,e.data.length):de.after(e),kR=e=>Ls(e.previousSibling)?N.some(J6(e.previousSibling)):e.previousSibling?Na(e.previousSibling):N.none(),_R=e=>Ls(e.nextSibling)?N.some(X6(e.nextSibling)):e.nextSibling?Eo(e.nextSibling):N.none(),hh=(e,n)=>N.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>ur(e,de.before(o))).orThunk(()=>Hr(e,de.after(n))),Q6=(e,n)=>Hr(e,de.after(n)).orThunk(()=>ur(e,de.before(n))),eI=(e,n)=>kR(n).orThunk(()=>_R(n)).orThunk(()=>hh(e,n)),co=(e,n)=>_R(n).orThunk(()=>kR(n)).orThunk(()=>Q6(e,n)),XS=(e,n,o)=>e?co(n,o):eI(n,o),kZ=(e,n,o)=>XS(e,n,o).map(Ee(Y6,o)),js=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},bn=e=>n=>n.dom===e,Uc=(e,n)=>n&&Tt(e.schema.getBlockElements(),Qn(n)),tI=e=>{if(wo(e)){const n=U.fromHtml('<br data-mce-bogus="1">');return Lm(e),Ko(e,n),N.some(de.before(n.dom))}else return N.none()},OR=(e,n,o)=>{const r=Tc(e).filter(Js),c=fg(e).filter(Js);return Tn(e),uu(r,c,n,(u,f,b)=>{const C=u.dom,x=f.dom,O=C.data.length;return YS(C,x,o),b.container()===x?de(C,O):b}).orThunk(()=>(o&&(r.each(u=>KS(u.dom,u.dom.length)),c.each(u=>Dy(u.dom,0))),n))},J_=(e,n)=>Tt(e.schema.getTextInlineElements(),Qn(n)),om=(e,n,o,r=!0)=>{const c=kZ(n,e.getBody(),o.dom),u=vo(o,Ee(Uc,e),bn(e.getBody())),f=OR(o,c,J_(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(tI).fold(()=>{r&&js(e,n,f)},b=>{r&&js(e,n,N.some(b))})},AR=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,DR=e=>AR.test(e),ph=(e,n)=>Ec(U.fromDom(n),Un(e))&&!ku(e.schema,n)&&e.dom.isEditable(n),RR=e=>{var n;return hn.DOM.getStyle(e,"direction",!0)==="rtl"||DR((n=e.textContent)!==null&&n!==void 0?n:"")},Q_=(e,n,o)=>ht(hn.DOM.getParents(o.container(),"*",n),e),sm=(e,n,o)=>{const r=Q_(e,n,o);return N.from(r[r.length-1])},rl=(e,n,o)=>{const r=Qi(n,e),c=Qi(o,e);return Se(r)&&r===c},nI=e=>vg(e)||Rp(e),Si=(e,n)=>{const o=n.container(),r=n.offset();return e?na(o)?Oe(o.nextSibling)?de(o.nextSibling,0):de.after(o):vg(n)?de(o,r+1):n:na(o)?Oe(o.previousSibling)?de(o.previousSibling,o.previousSibling.data.length):de.before(o):Rp(n)?de(o,r-1):n},oI=Ee(Si,!0),JS=Ee(Si,!1),MR=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},Ry=e=>{e.execCommand("delete")},e4=e=>MR(e,"Delete"),ob=e=>MR(e,"ForwardDelete"),xi=e=>n=>bo(Ea(n),e,Cn),My=e=>li(e)||Yo(e),_n=(e,n)=>Cr(e,n)?Ga(n,My,xi(e)):N.none(),bh=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},t4=(e,n,o)=>ir(Eo(o),Na(o),(r,c)=>{const u=Si(!0,r),f=Si(!1,c),b=Si(!1,n);return e?Hr(o,b).exists(C=>C.isEqual(f)&&n.isEqual(u)):ur(o,b).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),n4=e=>(PT(e)?Tc(e):kc(e)).bind(n4).orThunk(()=>N.some(e)),QS=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=n4(o).getOr(o),f=U.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?bh(e,r):wo(f)&&(yu(f),r&&e.selection.setCursorLocation(f.dom,0)),!Cn(o,f)){const b=bo(Ea(f),o)?[]:CC(f);he(b.concat($s(o)),C=>{!Cn(C,f)&&!Cr(C,f)&&wo(C)&&Tn(C)})}},o4=e=>n=>Cn(e,n),By=e=>hs(e,"td,th"),s4=(e,n)=>{const o=x=>el(U.fromDom(x),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=ir(r,c,Cn).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},sb=(e,n)=>({start:e,end:n}),r4=(e,n,o)=>({rng:e,table:n,cells:o}),rb=Bl.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Ny=(e,n)=>Li(U.fromDom(e),"td,th",n),a4=e=>!Cn(e.start,e.end),c4=(e,n)=>el(e.start,n).bind(o=>el(e.end,n).bind(r=>mn(Cn(o,r),o))),BR=(e,n)=>!a4(e)&&c4(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),ab=(e,n)=>{const o=Ny(e.startContainer,n),r=Ny(e.endContainer,n);return ir(o,r,sb)},NR=e=>n=>el(n,e).bind(o=>cu(By(o)).map(r=>sb(n,r))),i4=e=>n=>el(n,e).bind(o=>vr(By(o)).map(r=>sb(r,n))),l4=e=>n=>c4(n,e).map(o=>r4(n,o,By(o))),PR=(e,n,o,r)=>{if(o.collapsed||!e.forall(a4))return N.none();if(n.isSameTable){const c=e.bind(l4(r));return N.some({start:c,end:c})}else{const c=Ny(o.startContainer,r),u=Ny(o.endContainer,r),f=c.bind(NR(r)).bind(l4(r)),b=u.bind(i4(r)).bind(l4(r));return N.some({start:f,end:b})}},u4=(e,n)=>Wr(e,o=>Cn(o,n)),ex=e=>ir(u4(e.cells,e.rng.start),u4(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),$R=(e,n,o)=>e.exists(r=>BR(r,o)&&bf(r.start,n)),Py=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},FR=(e,n,o,r)=>PR(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=ex(c).getOr([]);if(u&&c.cells.length===f.length)return N.some(rb.fullTable(c.table));if(f.length>0){if(u)return N.some(rb.partialTable(f,N.none()));{const b=Py(o,n);return N.some(rb.partialTable(f,N.some({...n,rng:b})))}}else return N.none()}),IR=(e,n,o,r)=>PR(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(ex).getOr([]),b=u.bind(ex).getOr([]);if(f.length>0&&b.length>0){const C=Py(o,n);return N.some(rb.multiTable(f,b,C))}else return N.none()}),LR=(e,n)=>{const o=o4(e),r=ab(n,o),c=s4(n,o);return $R(r,n,o)?r.map(u=>rb.singleCellTable(n,u.start)):c.isMultiTable?IR(r,c,n,o):FR(r,c,n,o)},d4=e=>he(e,n=>{Lo(n,"contenteditable"),yu(n)}),HR=(e,n)=>N.from(e.dom.getParent(n,e.dom.isBlock)).map(U.fromDom),VR=(e,n,o)=>{o.each(r=>{n?Tn(r):(yu(r),e.selection.setCursorLocation(r.dom,0))})},tx=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),$y(e,c,n,!1).each(u=>u())},m4=e=>{const n=Zu(e),o=U.fromDom(e.selection.getNode());zi(o.dom)&&wo(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&no(n,r=>Cn(r,o))&&Zn(o,"data-mce-selected","1")},f4=(e,n,o)=>N.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=HR(e,f?u.endContainer:u.startContainer);u.deleteContents(),VR(e,f,b.filter(wo));const C=f?n[0]:n[n.length-1];return tx(e,C,r,f),wo(C)?N.none():N.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);d4(c),m4(e)}),zR=(e,n,o,r)=>N.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];tx(e,u,c,!0),tx(e,f,c,!1);const b=wo(u)?n:n.slice(1),C=wo(f)?o:o.slice(0,-1);d4(b.concat(C)),r.deleteContents(),m4(e)}),$y=(e,n,o,r=!0)=>N.some(()=>{QS(e,n,o,r)}),UR=(e,n)=>N.some(()=>om(e,!1,n)),WR=(e,n,o)=>LR(n,o).bind(r=>r.fold(Ee($y,e),Ee(UR,e),Ee(f4,e),Ee(zR,e))),ZR=(e,n)=>Fy(e,n),jR=(e,n,o,r)=>cb(n,r).fold(()=>WR(e,n,o),c=>ZR(e,c)),GR=(e,n,o)=>{const r=U.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?f4(e,o,N.none()):jR(e,r,c,n)},nx=(e,n)=>Fo(nm(n,e),Ap),cb=(e,n)=>Fo(nm(n,e),ni("caption")),qR=(e,n,o,r,c)=>zu(o,e.getBody(),c).bind(u=>nx(n,U.fromDom(u.getNode())).bind(f=>Cn(f,r)?N.none():N.some(vt))),Fy=(e,n)=>N.some(()=>{yu(n),e.selection.setCursorLocation(n.dom,0)}),ox=(e,n,o,r)=>Eo(e.dom).bind(c=>Na(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),g4=(e,n)=>Fy(e,n),Iy=(e,n,o)=>cb(e,U.fromDom(o.getNode())).fold(()=>N.some(vt),r=>mn(!Cn(r,n),vt)),h4=(e,n,o,r,c)=>zu(o,e.getBody(),c).fold(()=>N.some(vt),u=>ox(r,o,c,u)?g4(e,r):Iy(n,r,u)),KR=(e,n,o,r)=>{const c=de.fromRangeStart(e.selection.getRng());return nx(o,r).bind(u=>wo(u)?Fy(e,u):qR(e,o,n,u,c))},ib=(e,n,o,r)=>{const c=de.fromRangeStart(e.selection.getRng());return wo(r)?Fy(e,r):h4(e,o,n,r,c)},sx=(e,n)=>e?gR(n):hR(n),p4=(e,n)=>{const o=de.fromRangeStart(e.selection.getRng());return sx(n,o)||Ba(n,e.getBody(),o).exists(r=>sx(n,r))},Ly=(e,n,o)=>{const r=U.fromDom(e.getBody());return cb(r,o).fold(()=>KR(e,n,r,o).orThunk(()=>mn(p4(e,n),vt)),c=>ib(e,n,r,c))},Gu=(e,n)=>{const o=U.fromDom(e.selection.getStart(!0)),r=Zu(e);return e.selection.isCollapsed()&&r.length===0?Ly(e,n,o):GR(e,o,r)},_f=(e,n)=>{let o=n;for(;o&&o!==e;){if(ks(o)||an(o))return o;o=o.parentNode}return null},sI=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],YR=Re.each,rx=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const O={};return YR(n.getAttribs(x),A=>{const B=A.nodeName.toLowerCase();B!=="style"&&!c(B)&&(O[B]=n.getAttrib(x,B))}),O},C=(x,O)=>{for(const A in x)if(Tt(x,A)){const B=O[A];if(Bs(B)||x[A]!==B)return!1;delete O[A]}for(const A in O)if(Tt(O,A))return!1;return!0};return qe(u)&&qe(f)&&(!C(b(u),b(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Pa(u)&&!Pa(f)},c=u=>no(sI,f=>xs(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},rI=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},aI=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const C=r.nodes[c];C?C.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],C=b.name;if(C in o.attributes.map){const x=r.attributes[C];x?x.nodes.push(o):r.attributes[C]={filter:b,nodes:[o]}}}},cI=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&rI(o,c=>{aI(e,n,c,r)}),r},ax=(e,n)=>{const o=(r,c)=>{Ze(r,u=>{const f=Zr(u.nodes);he(u.filter.callbacks,b=>{for(let C=f.length-1;C>=0;C--){const x=f[C];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||cn(x.parent))&&f.splice(C,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},al=(e,n,o,r={})=>{const c=cI(e,n,o);ax(c,r)},Hy=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Ia("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Ia("#text",3)).value=In},cx=e=>{var n;return ix(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===In},ix=(e,n)=>{const o=e==null?void 0:e.firstChild;return Se(o)&&o===e.lastChild&&o.name===n},iI=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},lb=(e,n,o,r)=>r.isEmpty(n,o,c=>iI(e,c)),lI=(e,n)=>Se(e)&&(n(e)||e.name==="br"),XR=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return N.from(n)},Vy=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Vy(c,n,o);e.unwrap()}},b4=(e,n,o,r=vt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Re.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,x=O=>O!==o&&!b[O.name];for(let O=0;O<e.length;O++){const A=e[O];let B,L,z;if(!A.parent||C.has(A))continue;if(c[A.name]&&A.parent.name==="li"){let V=A.next;for(;V&&c[V.name];){V.name="li",C.add(V),A.parent.insert(V,A.parent);V=V.next}A.unwrap();continue}const F=[A];for(B=A.parent;B&&!n.isValidChild(B.name,A.name)&&x(B);B=B.parent)F.push(B);if(B&&F.length>1)if(n.isValidChild(B.name,A.name)){F.reverse(),L=F[0].clone(),r(L);let V=L;for(let Y=0;Y<F.length-1;Y++){n.isValidChild(V.name,F[Y].name)&&Y>0?(z=F[Y].clone(),r(z),V.append(z)):z=V;for(let X=F[Y].firstChild;X&&X!==F[Y+1];){const Q=X.next;z.append(X),X=Q}V=z}lb(n,u,f,L)?B.insert(A,F[0],!0):(B.insert(L,F[0],!0),B.insert(A,L)),B=F[0],(lb(n,u,f,B)||ix(B,"br"))&&B.empty().remove()}else Vy(A,n);else if(A.parent){if(A.name==="li"){let V=A.prev;if(V&&(V.name==="ul"||V.name==="ol")){V.append(A);continue}if(V=A.next,V&&(V.name==="ul"||V.name==="ol")&&V.firstChild){V.insert(A,V.firstChild,!0);continue}const Y=new Ia("ul",1);r(Y),A.wrap(Y);continue}if(n.isValidChild(A.parent.name,"div")&&n.isValidChild("div",A.name)){const V=new Ia("div",1);r(V),A.wrap(V)}else Vy(A,n)}}},JR=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},QR=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&JR(o,"a")),zy=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},eM=e=>{const n=de.fromRangeStart(e),o=de.fromRangeEnd(e),r=e.commonAncestorContainer;return Ba(!1,r,o).map(c=>!$c(n,o,r)&&$c(n,c,r)?zy(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},v4=e=>e.collapsed?e:eM(e),tM=e=>Se(e.firstChild)&&e.firstChild===e.lastChild,uI=e=>e.name==="br"||e.value===In,dI=(e,n)=>e.getBlockElements()[n.name]&&tM(n)&&uI(n.firstChild),mI=(e,n)=>{const o=e.getNonEmptyElements();return Se(n)&&(n.isEmpty(o)||dI(e,n))},fI=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),mI(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},gI=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},nM=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return gI(c)},hI=e=>{var n;return ht((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},y4=e=>e.data===In||yo(e),vh=e=>Se(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&y4(e.firstChild),pI=e=>!e.firstChild||vh(e),bI=e=>e.length>0&&pI(e[e.length-1])?e.slice(0,-1):e,ub=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},oM=(e,n)=>!!ub(e,n),sM=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},vI=(e,n)=>{const o=de.before(e),c=Vu(n).next(o);return c?c.toRange():null},C4=(e,n)=>{const o=de.after(e),c=Vu(n).prev(o);return c?c.toRange():null},yI=(e,n,o,r)=>{const c=sM(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Re.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),C4(n[n.length-1],o)},yh=(e,n,o)=>{const r=e.parentNode;return r&&Re.each(n,c=>{r.insertBefore(c,e)}),vI(e,o)},rM=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),C4(n[0],o)),aM=(e,n,o,r)=>{const c=nM(n,e,r),u=ub(n,o.startContainer),f=bI(hI(c.firstChild)),b=1,C=2,x=n.getRoot(),O=A=>{const B=de.fromRangeStart(o),L=Vu(n.getRoot()),z=A===b?L.prev(B):L.next(B),F=z==null?void 0:z.getNode();return F?ub(n,F)!==u:!0};return u?O(b)?yh(u,f,x):O(C)?rM(u,f,x,n):yI(u,f,x,o):null},cM=["pre"],lx=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===b,x=Rt(cM,u.name);if(C&&x){const O=u.attr("contenteditable")!=="false",A=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,B=N.from(_f(r,o)).forall(ks);return O&&A&&B}else return!1},ux=zi,CI=(e,n,o)=>{if(Se(o)){const r=e.getParent(n.endContainer,ux);return o===r&&bf(U.fromDom(o),n)}else return!1},iM=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},wI=(e,n)=>{N.from(e.getParent(n,"td,th")).map(U.fromDom).each(VT)},SI=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=rx(e);Re.each(r.select("*[data-mce-fragment]"),f=>{if(Se(o[f.nodeName.toLowerCase()])&&lR(r,f)){for(let C=f.parentElement;Se(C)&&C!==c&&!EZ(r,f,C);C=C.parentElement)if(u.compare(C,f)){r.remove(f,!0);break}}})}},dx=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},lM=e=>{Re.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},w4=e=>!!e.getAttribute("data-mce-fragment"),xI=(e,n)=>Se(n)&&!e.schema.getVoidElements()[n.nodeName],EI=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const C=_f(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),b.select(C);return}let x=f.createRng();const O=n.previousSibling;if(Oe(O)){x.setStart(O,(r=(o=O.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const L=n.nextSibling;Oe(L)&&(O.appendData(L.data),(c=L.parentNode)===null||c===void 0||c.removeChild(L))}else x.setStartBefore(n),x.setEndBefore(n);const A=L=>{let z=de.fromRangeStart(L);return z=Vu(e.getBody()).next(z),z==null?void 0:z.toRange()},B=f.getParent(n,f.isBlock);if(f.remove(n),B&&f.isEmpty(B)){const L=ux(B);Lm(U.fromDom(B)),x.setStart(B,0),x.setEnd(B,0),!L&&!w4(B)&&(u=A(x))?(x=u,f.remove(B)):f.add(B,f.create("br",L?{}:{"data-mce-bogus":"1"}))}b.setRng(x)},uM=e=>{const n=e.dom,o=v4(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,ux);CI(n,o,r)?$y(e,o,U.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Oe(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},S4=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return N.some(n);return N.none()},dM=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,C=o.merge,x=gh({validate:!0},e.schema),O='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,O);let A=u.getRng();const B=A.startContainer,L=e.getBody();B===L&&u.isCollapsed()&&f.isBlock(L.firstChild)&&xI(e,L.firstChild)&&f.isEmpty(L.firstChild)&&(A=f.createRng(),A.setStart(L.firstChild,0),A.setEnd(L.firstChild,0),u.setRng(A)),u.isCollapsed()||uM(e);const z=u.getNode(),F={context:z.nodeName.toLowerCase(),data:o.data,insert:!0},V=b.parse(n,F);if(o.paste===!0&&fI(e.schema,V)&&oM(f,z))return A=aM(x,f,u.getRng(),V),A&&u.setRng(A),n;o.paste===!0&&lx(f,V,z,e.getBody())&&((r=V.firstChild)===null||r===void 0||r.unwrap()),dx(V);let Y=V.lastChild;if(Y&&Y.attr("id")==="mce_marker"){const X=Y;for(Y=Y.prev;Y;Y=Y.walk(!0))if(Y.type===3||!f.isBlock(Y.name)){Y.parent&&e.schema.isValidChild(Y.parent.name,"span")&&Y.parent.insert(X,Y,Y.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(z),!F.invalid)n=x.serialize(V),iM(e,n,z);else{e.selection.setContent(O);let X=u.getNode(),Q;const se=e.getBody();for(Ac(X)?X=Q=se:Q=X;Q&&Q!==se;)X=Q,Q=Q.parentNode;n=X===se?se.innerHTML:f.getOuterHTML(X);const Ce=b.parse(n),Ie=S4(Ce),Pe=Ie.bind(XR).getOr(Ce);Ie.each(tt=>tt.replace(V));const ce=V.children(),le=(c=V.parent)!==null&&c!==void 0?c:Ce;V.unwrap();const Te=ht(ce,tt=>QR(e.schema,tt,le));b4(Te,e.schema,Pe),al(b.getNodeFilters(),b.getAttributeFilters(),Ce),n=x.serialize(Ce),X===se?f.setHTML(se,n):f.setOuterHTML(X,n)}return SI(e,C),EI(e,f.get("mce_marker")),lM(e.getBody()),wI(f,u.getStart()),Vv(e.schema,e.getBody(),u.getStart()),n},mx=e=>e instanceof Ia,TI=e=>{fh(e)&&Eo(e.getBody()).each(n=>{const o=n.getNode(),r=qa(o)?Eo(o).getOr(n):n;e.selection.setRng(r.toRange())})},x4=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&TI(e)},fx=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=lr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,tf(e),o)):o||(o=c),x4(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=gh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=ta(U.fromDom(n))?o:Re.trim(o);return x4(e,c,r.no_selection),{content:c,html:c}}},rm=(e,n,o,r)=>{al(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=gh({validate:!1},e.schema).serialize(o),u=ta(U.fromDom(n))?c:Re.trim(c);return x4(e,u,r.no_selection),{content:o,html:u}},kI=(e,n,o)=>N.from(e.getBody()).map(r=>mx(n)?rm(e,r,n,o):fx(e,r,n,o)).getOr({content:n,html:mx(o.content)?"":o.content}),E4=(e,n,o)=>vo(e,n,o).isSome(),Zo=(e,n)=>Cv(e,n).isSome(),gx=e=>q(e)?e:we,T4=(e,n,o)=>{let r=e.dom;const c=gx(o);for(;r.parentNode;){r=r.parentNode;const u=U.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return N.none()},Ul=(e,n,o)=>{const r=n(e),c=gx(o);return r.orThunk(()=>c(e)?N.none():T4(e,n,c))},hx=F1,k4=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(ua(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Ch=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>k4(e,b,o)?!0:b.parentNode===u||!!lc(e,b,o,r,!0));return!!lc(e,f,o,r,c)},px=(e,n,o)=>Uo(o)&&hx(n,o.inline)||Hc(o)&&hx(n,o.block)?!0:ua(o)?qe(n)&&e.is(n,o.selector):!1,mM=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(q(o.onmatch))return o.onmatch(n,o,r);if(f){if(ev(f)){for(let C=0;C<f.length;C++)if(b?e.getAttrib(n,f[C]):eh(e,n,f[C]))return!0}else for(const C in f)if(Tt(f,C)){const x=b?e.getAttrib(n,C):eh(e,n,C),O=ac(f[C],u),A=cn(x)||wa(x);if(A&&cn(O))continue;if(c&&A&&!o.exact||(!c||o.exact)&&!hx(x,Qg(O,C)))return!1}}return!0},lc=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&qe(n))for(let b=0;b<u.length;b++){const C=u[b];if(px(e.dom,n,C)&&mM(f,n,C,"attributes",c,r)&&mM(f,n,C,"styles",c,r)){const x=C.classes;if(x){for(let O=0;O<x.length;O++)if(!e.dom.hasClass(n,ac(x[O],r)))return}return C}}},_4=(e,n,o,r,c)=>{if(r)return Ch(e,r,n,o,c);if(r=e.selection.getNode(),Ch(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Ch(e,u,n,o,c))},wh=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const C=n[b];!c[C]&&lc(e,f,C,o)&&(c[C]=!0,r.push(C))}},e.dom.getRoot()),r},_I=(e,n)=>{const o=c=>Cn(c,U.fromDom(e.getBody())),r=(c,u)=>lc(e,c.dom,u)?N.some(u):N.none();return N.from(e.selection.getStart(!0)).bind(c=>Ul(U.fromDom(c),u=>sd(n,f=>r(u,f)),o)).getOrNull()},Of=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=th(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!ua(b))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],b.selector))return!0}}return!1},Ei=(e,n,o)=>_o(o,(r,c)=>{const u=cy(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),am=tr,O4=(e,n)=>e.importNode(n,!0),OI=e=>{const n=[];let o=e;for(;o;){if(Oe(o)&&o.data!==am||o.childNodes.length>1)return[];qe(o)&&n.push(o),o=o.firstChild}return n},fM=e=>OI(e).length>0,Uy=e=>{if(e){const n=new Fn(e,e);for(let o=n.current();o;o=n.next())if(Oe(o))return o}return null},A4=e=>{const n=U.fromTag("span");return Pi(n,{id:B1,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ko(n,U.fromText(am)),n},cl=e=>{const n=Uy(e);return n&&n.data.charAt(0)===am&&n.deleteData(0,1),n},db=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(fM(n))om(e,!1,U.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,C=u.startOffset,x=u.endContainer,O=u.endOffset,A=cl(n);r.remove(n,!0),b===A&&C>0&&u.setStart(A,C-1),x===A&&O>0&&u.setEnd(A,O-1),f&&r.isEmpty(f)&&yu(U.fromDom(f)),c.setRng(u)}},bx=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)db(e,n,o);else if(n=Uu(e.getBody(),c.getStart()),!n)for(;n=r.get(B1);)db(e,n,o)},D4=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Ee(Qo,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Rc(U.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},vx=(e,n)=>(e.appendChild(n),n),Af=(e,n)=>{var o;const r=od(e,(u,f)=>vx(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return vx(r,c.createTextNode(am))},R4=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,C=ht(yr(f.get()),A=>A!==r&&!qs(A,"removeformat")),x=Ei(e,o,C);if(ht(x,A=>!r_(e,A,r)).length>0){const A=o.cloneNode(!1);return b.add(n,A),f.remove(r,c,A,u),b.remove(A),N.some(A)}else return N.none()},AI=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=Uu(e.getBody(),c.getStart());const O=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&O.test(x.charAt(b))&&O.test(x.charAt(b-1))){const A=c.getBookmark();f.collapse(!0);let B=qd(e.dom,f,u);B=sl(B),e.formatter.apply(n,o,B),c.moveToBookmark(A)}else{let A=r?Uy(r):null;(!r||(A==null?void 0:A.data)!==am)&&(r=O4(e.getDoc(),A4(!0).dom),A=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(A,b)}},gM=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const C=u.getRng(),x=C.startContainer,O=C.startOffset;let A=x;Oe(x)&&(O!==x.data.length&&(f=!0),A=A.parentNode);const B=[];let L;for(;A;){if(lc(e,A,n,o,r)){L=A;break}A.nextSibling&&(f=!0),B.push(A),A=A.parentNode}if(L)if(f){const z=u.getBookmark();C.collapse(!0);let F=qd(c,C,b,!0);F=sl(F),e.formatter.remove(n,o,F,r),u.moveToBookmark(z)}else{const z=Uu(e.getBody(),L),F=A4(!1).dom;D4(e,F,z??L);const V=R4(e,F,L,n,o,r),Y=Af(B.concat(V.toArray()),F);z&&db(e,z,!1),u.setCursorLocation(Y,1),c.isEmpty(L)&&c.remove(L)}},DI=(e,n,o)=>{const r=e.selection,c=e.getBody();bx(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===am&&bx(e,Uu(c,r.getStart())),(n===37||n===39)&&bx(e,Uu(c,r.getStart()))},RI=e=>Oe(e)&&vl(e.data,In),MI=e=>{e.on("mouseup keydown",n=>{DI(e,n.keyCode,RI(e.selection.getRng().endContainer))})},hM=e=>{const n=A4(!1),o=Af(e,n.dom);return{caretContainer:n,caretPosition:de(o,0)}},mb=(e,n)=>{const{caretContainer:o,caretPosition:r}=hM(n);return gs(U.fromDom(e),o),Tn(U.fromDom(e)),r},BI=(e,n)=>{const{caretContainer:o,caretPosition:r}=hM(n);return e.insertNode(o.dom),r},M4=(e,n)=>{const o=e.schema.getTextInlineElements();return Tt(o,Qn(n))&&!Us(n.dom)&&!Vi(n.dom)},yx=e=>Us(e.dom)&&fM(e.dom),Wy={},B4=Hi(["pre"]),pM=(e,n)=>{Wy[e]||(Wy[e]=[]),Wy[e].push(n)},NI=(e,n)=>{Tt(Wy,e)&&he(Wy[e],o=>{o(n)})};pM("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return B4(f)&&Rt(c,f)},r=(c,u)=>{const f=U.fromDom(u),b=Cl(f).dom;Tn(f),$n(U.fromDom(c),[U.fromTag("br",b),U.fromTag("br",b),...$s(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=ht(ht(c,B4),o(c));he(u,f=>{r(f.previousSibling,f)})}});const bM=["fontWeight","fontStyle","color","fontSize","fontFamily"],PI=e=>Sn(e.styles)&&no(yr(e.styles),n=>Rt(bM,n)),$I=e=>Fo(e,n=>Uo(n)&&n.inline==="span"&&PI(n)),vM=(e,n)=>{const o=e.get(n);return An(o)?$I(o):N.none()},yM=(e,n)=>ur(n,de.fromRangeStart(e)).isNone(),CM=(e,n)=>Hr(n,de.fromRangeEnd(e)).exists(o=>!yo(o.getNode())||Hr(n,o).isSome())===!1,wM=e=>n=>Is(n)&&e.isEditable(n),FI=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return yM(o,n[0])&&CM(o,n[0])?n:[];{const r=vr(n).filter(f=>yM(o,f)).toArray(),c=cu(n).filter(f=>CM(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},II=e=>ht(FI(e),wM(e.dom)),SM=e=>ht(e.getSelectedBlocks(),wM(e.dom)),N4=Re.each,P4=e=>qe(e)&&!Pa(e)&&!Us(e)&&!Vi(e),$4=(e,n)=>{for(let o=e;o;o=o[n]){if(Oe(o)&&Pn(o.data))return e;if(qe(o)&&!Pa(o))return o}return e},xM=(e,n,o)=>{const r=rx(e),c=qe(n)&&Fc(n),u=qe(o)&&Fc(o);if(c&&u){const f=$4(n,"previousSibling"),b=$4(o,"nextSibling");if(r.compare(f,b)){for(let C=f.nextSibling;C&&C!==b;){const x=C;C=C.nextSibling,f.appendChild(x)}return e.dom.remove(b),Re.each(Re.grep(b.childNodes),C=>{f.appendChild(C)}),f}}return o},Sh=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=xM(e,We(r),r))!==null&&c!==void 0?c:r;xM(e,u,We(u,!0))}},LI=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";N4(e.select(r,o),c=>{P4(c)&&Fc(c)&&N4(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},F4=(e,n,o)=>{N4(e.childNodes,r=>{P4(r)&&(n(r)&&o(r),r.hasChildNodes()&&F4(r,n,o))})},HI=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},EM=(e,n)=>o=>!!(o&&eh(e,o,n)),I4=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),HI(e,r)},xh=Bl.generate([{keep:[]},{rename:["name"]},{removed:[]}]),VI=/^(src|href|style)$/,L4=Re.each,Cx=F1,zI=e=>/^(TR|TH|TD)$/.test(e.nodeName),TM=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),kM=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(qe(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return Oe(r)&&o&&c>=r.data.length&&(r=new Fn(r,e.getBody()).next()||r),Oe(r)&&!o&&c===0&&(r=new Fn(r,e.getBody()).prev()||r),r},_M=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return zI(e)&&r?e.nodeName==="TR"&&r[o]||r:e},H4=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},OM=(e,n,o,r,c)=>{const u=U.fromDom(n),f=U.fromDom(e.create(r,c)),b=o?Ta(u):bv(u);return $n(f,b),o?(gs(u,f),wp(f,u)):(ri(u,f),Ko(f,u)),f.dom},V4=(e,n)=>n.links&&e.nodeName==="A",z4=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=lr(e);Hc(o)&&r===u.getRoot()&&(!o.list_block||!Cx(n,o.list_block))&&he(Zr(n.childNodes),b=>{Ic(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=H4(u,b,f),u.setAttribs(c,tf(e))):c=null}),!(iy(o)&&!Cx(o.inline,n))&&u.remove(n,!0)},UI=(e,n,o)=>ba(e)?{name:n,value:null}:{name:e,value:ac(n,o)},fb=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},U4=(e,n,o,r,c)=>{let u=!1;L4(o.styles,(f,b)=>{const{name:C,value:x}=UI(b,f,r),O=Qg(x,C);(o.remove_similar||J(x)||!qe(c)||Cx(eh(e,c,C),O))&&e.setStyle(n,C,""),u=!0}),u&&fb(e,n)},Zy=(e,n,o)=>{n==="removeformat"?he(SM(e.selection),r=>{he(bM,c=>e.dom.setStyle(r,c,"")),fb(e.dom,r)}):vM(e.formatter,n).each(r=>{he(SM(e.selection),c=>U4(e.dom,c,r,o,null))})},gb=(e,n,o,r,c)=>{const u=e.dom,f=rx(e),b=e.schema;if(Uo(n)&&Lp(b,n.inline)&&ku(b,r)&&r.parentElement===e.getBody())return z4(e,r,n),xh.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!px(u,r,n)&&!V4(r,n))return xh.keep();const C=r,x=n.preserve_attributes;if(Uo(n)&&n.remove==="all"&&An(x)){const O=ht(u.getAttribs(C),A=>Rt(x,A.name.toLowerCase()));if(u.removeAllAttribs(C),he(O,A=>u.setAttrib(C,A.name,A.value)),O.length>0)return xh.rename("span")}if(n.remove!=="all"){U4(u,C,n,o,c),L4(n.attributes,(A,B)=>{const{name:L,value:z}=UI(B,A,o);if(n.remove_similar||J(z)||!qe(c)||Cx(u.getAttrib(c,L),z)){if(L==="class"){const F=u.getAttrib(C,L);if(F){let V="";if(he(F.split(/\s+/),Y=>{/mce\-\w+/.test(Y)&&(V+=(V?" ":"")+Y)}),V){u.setAttrib(C,L,V);return}}}if(VI.test(L)&&C.removeAttribute("data-mce-"+L),L==="style"&&Hi(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(L),u.setStyle(C,"list-style-type","none");return}L==="class"&&C.removeAttribute("className"),C.removeAttribute(L)}}),L4(n.classes,A=>{A=ac(A,o),(!qe(c)||u.hasClass(c,A))&&u.removeClass(C,A)});const O=u.getAttribs(C);for(let A=0;A<O.length;A++){const B=O[A].nodeName;if(!f.isAttributeInternal(B))return xh.keep()}}return n.remove!=="none"?(z4(e,C,n),xh.removed()):xh.keep()},AM=(e,n,o,r,c)=>{let u;return n.parentNode&&he(th(e.dom,n.parentNode).reverse(),f=>{if(!u&&qe(f)&&f.id!=="_start"&&f.id!=="_end"){const b=lc(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},_Z=(e,n,o,r)=>gb(e,n,o,r,r).fold(Le(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Le(null)),WI=(e,n,o,r,c,u,f,b)=>{var C,x;let O,A;const B=e.dom;if(o){const L=o.parentNode;for(let z=r.parentNode;z&&z!==L;z=z.parentNode){let F=B.clone(z,!1);for(let V=0;V<n.length&&(F=_Z(e,n[V],b,F),F!==null);V++);F&&(O&&F.appendChild(O),A||(A=F),O=F)}u&&(!f.mixed||!B.isBlock(o))&&(r=(C=B.split(o,r))!==null&&C!==void 0?C:r),O&&A&&((x=c.parentNode)===null||x===void 0||x.insertBefore(O,c),A.appendChild(c),Uo(f)&&Sh(e,f,b,O))}return r},OZ=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,C=e.selection,x=F=>{const V=AM(e,F,n,o,c);return WI(e,u,V,F,F,!0,f,o)},O=F=>Pa(F)&&qe(F)&&(F.id==="_start"||F.id==="_end"),A=F=>no(u,V=>jy(e,V,o,F,F)),B=F=>{const V=Zr(F.childNodes),X=A(F)||no(u,Ce=>px(b,F,Ce)),Q=F.parentNode;if(!X&&Se(Q)&&oh(f)&&A(Q),f.deep&&V.length)for(let Ce=0;Ce<V.length;Ce++)B(V[Ce]);he(["underline","line-through","overline"],Ce=>{qe(F)&&e.dom.getStyle(F,"text-decoration")===Ce&&F.parentNode&&ay(b,F.parentNode)===Ce&&jy(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ce}},void 0,F)})},L=F=>{const V=b.get(F?"_start":"_end");if(V){let Y=V[F?"firstChild":"lastChild"];return O(Y)&&(Y=Y[F?"firstChild":"lastChild"]),Oe(Y)&&Y.data.length===0&&(Y=F?V.previousSibling||V.nextSibling:V.nextSibling||V.previousSibling),b.remove(V,!0),Y}else return null},z=F=>{let V,Y,X=qd(b,F,u,F.collapsed);if(f.split){if(X=sl(X),V=kM(e,X,!0),Y=kM(e,X),V!==Y){if(V=_M(V,!0),Y=_M(Y,!1),TM(b,V,Y)){const se=N.from(V.firstChild).getOr(V);x(OM(b,se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),L(!0);return}if(TM(b,Y,V)){const se=N.from(Y.lastChild).getOr(Y);x(OM(b,se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),L(!1);return}V=H4(b,V,"span",{id:"_start","data-mce-type":"bookmark"}),Y=H4(b,Y,"span",{id:"_end","data-mce-type":"bookmark"});const Q=b.createRng();Q.setStartAfter(V),Q.setEndBefore(Y),Il(b,Q,se=>{he(se,Ce=>{!Pa(Ce)&&!Pa(Ce.parentNode)&&x(Ce)})}),x(V),x(Y),V=L(!0),Y=L()}else V=Y=x(V);X.startContainer=V.parentNode?V.parentNode:V,X.startOffset=b.nodeIndex(V),X.endContainer=Y.parentNode?Y.parentNode:Y,X.endOffset=b.nodeIndex(Y)+1}Il(b,X,Q=>{he(Q,B)})};if(r){if(Xg(r)){const F=b.createRng();F.setStartBefore(r),F.setEndAfter(r),z(F)}else z(r);ic(e,n,r,o);return}!C.isCollapsed()||!Uo(f)||Zu(e).length?(hS(e,()=>sy(e,z),F=>Uo(f)&&_4(e,n,o,F)),e.nodeChanged()):gM(e,n,o,c),Zy(e,n,o),ic(e,n,r,o)},DM=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&OZ(e,n,o,r,c)},jy=(e,n,o,r,c)=>gb(e,n,o,r,c).fold(we,u=>(e.dom.rename(r,u),!0),Xe),ZI=Re.each,jI=(e,n,o,r)=>{const c=u=>{if(qe(u)&&qe(u.parentNode)&&Fc(u)){const f=ay(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Re.walk(r,c,"childNodes"),c(r))},RM=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=EM(e,"fontSize");F4(r,u=>c(u)&&Fc(u),I4(e,"backgroundColor",ac(n.styles.backgroundColor,o)))}},GI=(e,n,o,r)=>{if(Uo(n)&&(n.inline==="sub"||n.inline==="sup")){const c=EM(e,"fontSize");F4(r,f=>c(f)&&Fc(f),I4(e,"fontSize",""));const u=ht(e.select(n.inline==="sup"?"sub":"sup",r),Fc);e.remove(u,!0)}},MM=(e,n,o,r)=>{ZI(n,c=>{Uo(c)&&ZI(e.dom.select(c.inline,r),u=>{P4(u)&&jy(e,c,o,u,c.exact?u:null)}),LI(e.dom,c,r)})},qI=(e,n,o,r,c)=>{const u=c.parentNode;lc(e,u,o,r)&&jy(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>lc(e,f,o,r)?(jy(e,n,r,c),!0):!1)},Eh=Re.each,BM=(e,n,o,r)=>{if(Ek(e)&&Uo(n)&&o.parentNode){const c=Ja(e.schema),u=Zo(U.fromDom(o),f=>Us(f.dom));return jr(c,r)&&wo(U.fromDom(o.parentNode),!1)&&!u}else return!1},ls=(e,n,o,r)=>{if(Eh(o.styles,(c,u)=>{e.setStyle(n,u,ac(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},AZ=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,C=e.selection,x=(z,F=u)=>{q(F.onformat)&&F.onformat(z,F,o,r),ls(b,z,F,o),Eh(F.attributes,(V,Y)=>{b.setAttrib(z,Y,ac(V,o))}),Eh(F.classes,V=>{const Y=ac(V,o);b.hasClass(z,Y)||b.addClass(z,Y)})},O=(z,F)=>{let V=!1;return Eh(z,Y=>ua(Y)?b.getContentEditable(F)==="false"&&!Y.ceFalseOverride||Se(Y.collapsed)&&Y.collapsed!==f?!0:b.is(F,Y.selector)&&!Us(F)?(x(F,Y),V=!0,!1):!0:!1),V},A=z=>{if(K(z)){const F=b.create(z);return x(F),F}else return null},B=(z,F,V)=>{const Y=[];let X=!0;const Q=u.inline||u.block,se=A(Q),Ce=ce=>L1(u)&&lc(e,ce,n,o),Ie=(ce,le,Te)=>{const tt=nh(u)&&Qo(e.schema,ce)&&Ic(e,le,Q);return Te&&tt},Pe=(ce,le,Te,tt)=>{const it=ce.nodeName.toLowerCase(),Bt=Ic(e,Q,it)&&Ic(e,le,Q),zt=!V&&Oe(ce)&&Pv(ce.data),un=Us(ce),xn=!Uo(u)||!z.isBlock(ce);return(Te||tt)&&Bt&&!zt&&!un&&xn};Il(z,F,ce=>{let le;const Te=tt=>{let it=!1,Bt=X,zt=!1;const un=tt.parentNode,xn=un.nodeName.toLowerCase(),ko=z.getContentEditable(tt);Se(ko)&&(Bt=X,X=ko==="true",it=!0,zt=Jg(e,tt));const Go=X&&!it;if(yo(tt)&&!BM(e,u,tt,xn)){le=null,Hc(u)&&z.remove(tt);return}if(Ce(tt)){le=null;return}if(Ie(tt,xn,Go)){const Ss=z.rename(tt,Q);x(Ss),Y.push(Ss),le=null;return}if(ua(u)){let Ss=O(c,tt);if(!Ss&&Se(un)&&oh(u)&&(Ss=O(c,un)),!Uo(u)||Ss){le=null;return}}Se(se)&&Pe(tt,xn,Go,zt)?(le||(le=z.clone(se,!1),un.insertBefore(le,tt),Y.push(le)),zt&&it&&(X=Bt),le.appendChild(tt)):(le=null,he(Zr(tt.childNodes),Te),it&&(X=Bt),le=null)};he(ce,Te)}),u.links===!0&&he(Y,ce=>{const le=Te=>{Te.nodeName==="A"&&x(Te,u),he(Zr(Te.childNodes),le)};le(ce)}),he(Y,ce=>{const le=it=>{let Bt=0;return he(it.childNodes,zt=>{!Lc(zt)&&!Pa(zt)&&Bt++}),Bt},Te=it=>Fo(it.childNodes,ry).filter(zt=>z.getContentEditable(zt)!=="false"&&px(z,zt,u)).map(zt=>{const un=z.clone(zt,!1);return x(un),z.replace(un,it,!0),z.remove(zt,!0),un}).getOr(it),tt=le(ce);if((Y.length>1||!z.isBlock(ce))&&tt===0){z.remove(ce,!0);return}(Uo(u)||Hc(u)&&u.wrapper)&&(!u.exact&&tt===1&&(ce=Te(ce)),MM(e,c,o,ce),qI(e,u,n,o,ce),RM(z,u,o,ce),jI(z,u,o,ce),GI(z,u,o,ce),Sh(e,u,o,ce))})},L=Xg(r)?r:C.getNode();if(b.getContentEditable(L)==="false"&&!Jg(e,L)){r=L,O(c,r),TS(e,n,r,o);return}if(u){if(r)if(Xg(r)){if(!O(c,r)){const z=b.createRng();z.setStartBefore(r),z.setEndAfter(r),B(b,qd(b,z,c),!0)}}else B(b,r,!0);else!f||!Uo(u)||Zu(e).length?(C.setRng(v4(C.getRng())),hS(e,()=>{sy(e,(z,F)=>{const V=F?z:qd(b,z,c);B(b,V,!1)})},Xe),e.nodeChanged()):AI(e,n,o),vM(e.formatter,n).each(z=>{he(II(e.selection),F=>ls(b,F,z,o))});NI(n,e)}TS(e,n,r,o)},KI=(e,n,o,r)=>{(r||e.selection.isEditable())&&AZ(e,n,o,r)},YI=e=>Tt(e,"vars"),DZ=(e,n)=>{e.set({}),n.on("NodeChange",o=>{im(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(c=>Xg(c)?c:c.startContainer).bind(c=>qe(c)?N.some(c):N.from(c.parentElement)).getOrThunk(()=>Ti(n));im(n,r,e.get())})},Ti=e=>e.selection.getStart(),Gy=(e,n,o,r,c)=>rp(n,b=>{const C=e.formatter.matchNode(b,o,c??{},r);return!Bs(C)},b=>k4(e,b,o)?!0:r?!1:Se(e.formatter.matchNode(b,o,c,!0))),cm=(e,n)=>{const o=n??Ti(e);return ht(th(e.dom,o),r=>qe(r)&&!Vi(r))},im=(e,n,o)=>{const r=cm(e,n);Ze(o,(c,u)=>{const f=b=>{const C=Gy(e,r,u,b.similar,YI(b)?b.vars:void 0),x=C.isSome();if(b.state.get()!==x){b.state.set(x);const O=C.getOr(n);YI(b)?b.callback(x,{node:O,format:u,parents:r}):he(b.callbacks,A=>A(x,{node:O,format:u,parents:r}))}};he([c.withSimilar,c.withoutSimilar],f),he(c.withVars,f)})},XI=(e,n,o,r,c,u)=>{const f=n.get();he(o.split(","),b=>{const C=Xn(f,b).getOrThunk(()=>{const O={withSimilar:{state:zo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:zo(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=O,O}),x=()=>{const O=cm(e);return Gy(e,O,b,c,u).isSome()};if(Bs(u)){const O=c?C.withSimilar:C.withoutSimilar;O.callbacks.push(r),O.callbacks.length===1&&O.state.set(x())}else C.withVars.push({state:zo(x()),similar:c,vars:u,callback:r})}),n.set(f)},JI=(e,n,o)=>{const r=e.get();he(n.split(","),c=>Xn(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ht(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ht(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ht(u.withVars,f=>f.callback!==o)}})),e.set(r)},hb=(e,n,o,r,c,u)=>(XI(e,n,o,r,c,u),{unbind:()=>JI(n,o,r)}),pb=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(_4(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?DM(e,n,o,r):KI(e,n,o,r))},Th=Re.explode,W4=()=>{const e={};return{addFilter:(c,u)=>{he(Th(c),f=>{Tt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>_m(e),removeFilter:(c,u)=>{he(Th(c),f=>{if(Tt(e,f))if(Se(u)){const b=e[f],C=ht(b.callbacks,x=>x!==u);C.length>0?b.callbacks=C:delete e[f]}else delete e[f]})}}},Z4=(e,n)=>{he(n,o=>{e.attr(o,null)})},NM=(e,n,o)=>{e.addNodeFilter("font",r=>{he(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),C=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),C&&ud(C).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),Z4(c,["color","face","size"])})})},PM=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";he(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},QI=(e,n,o)=>{var r;const c=qp();n.convert_fonts_to_spans&&NM(e,c,Re.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),PM(e,o,c)},e8=(e,n,o)=>{n.inline_styles&&QI(e,n,o)},j4=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=Re.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),C=o.getWhitespaceElements();f.body=1;const x=O=>O.name in f||rn(o,O);for(let O=0,A=r.length;O<A;O++){let B=r[O],L=B.parent;if(L&&x(L)&&B===L.lastChild){let z=B.prev;for(;z;){const F=z.name;if(F!=="span"||z.attr("data-mce-type")!=="bookmark"){F==="br"&&(B=null);break}z=z.prev}if(B&&(B.remove(),lb(o,b,C,L))){const F=o.getElementRule(L.name);F&&(F.removeEmpty?L.remove():F.paddEmpty&&Hy(e,u,x,L))}}else{let z=B;for(;L&&L.firstChild===z&&L.lastChild===z&&(z=L,!f[L.name]);)L=L.parent;if(z===L){const F=new Ia("#text",3);F.value=In,B.replace(F)}}}})},t8=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),n8=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},G4=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?n8(r):decodeURIComponent(r);return N.some({type:c[1],data:f,base64Encoded:u})}else return N.none()},$M=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return N.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return N.some(new Blob([c],{type:e}))},o8=e=>new Promise((n,o)=>{G4(e).bind(({type:r,data:c,base64Encoded:u})=>$M(r,c,u)).fold(()=>o("Invalid data URI"),n)}),FM=e=>xs(e,"blob:")?t8(e):xs(e,"data:")?o8(e):Promise.reject("Unknown URI format"),IM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let qy=0;const LM=e=>(e||"blobid")+qy++,HM=(e,n,o)=>G4(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return N.none();{const f=u?r:btoa(r);return o(f,c)}}),q4=(e,n,o)=>{const r=e.create(LM(),n,o);return e.add(r),r},VM=(e,n,o=!1)=>HM(n,o,(r,c)=>N.from(e.getByData(r,c)).orThunk(()=>$M(c,r).map(u=>q4(e,u,r)))),zM=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(xs(n,"blob:")){const r=e.getByUri(n);return Se(r)?Promise.resolve(r):FM(n).then(c=>IM(c).then(u=>HM(u,!1,f=>N.some(q4(e,c,f))).getOrThunk(o)))}else return xs(n,"data:")?VM(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},s8=e=>Se(e.attr("data-mce-bogus")),r8=e=>e.attr("src")===Ke.transparentSrc||Se(e.attr("data-mce-placeholder")),UM=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");r8(c)||s8(c)||cn(u)||VM(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>he(c,r))}},WM=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&j4(n,e,o),e.addAttributeFilter("href",c=>{let u=c.length;const f=C=>C.split(" ").filter(O=>O.length>0).concat(["noopener"]).sort().join(" "),b=C=>{const x=C?Re.trim(C):"";return/\b(noopener)\b/g.test(x)?x:f(x)};if(!n.allow_unsafe_link_target)for(;u--;){const C=c[u];C.name==="a"&&C.attr("target")==="_blank"&&C.attr("rel",b(C.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,C,x;for(;u--;)if(x=c[u],x.name==="a"&&x.firstChild&&!x.attr("href"))for(C=x.parent,f=x.lastChild;f&&C;)b=f.prev,C.insert(f,x),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const C=new Ia("li",1);C.attr("style","list-style-type: none"),f.wrap(C)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],C=(u=b.attr("class"))!==null&&u!==void 0?u:"",x=Re.explode(C," ");let O="";for(let A=0;A<x.length;A++){const B=x[A];let L=!1,z=r["*"];z&&z[B]&&(L=!0),z=r[b.name],!L&&z&&z[B]&&(L=!0),L&&(O&&(O+=" "),O+=B)}O.length||(O=null),b.attr("class",O)}}),UM(e,n)};function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Df(e)}function wx(e,n){return wx=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},wx(e,n)}function ZM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ky(e,n,o){return ZM()?Ky=Reflect.construct:Ky=function(c,u,f){var b=[null];b.push.apply(b,u);var C=Function.bind.apply(c,b),x=new C;return f&&wx(x,f.prototype),x},Ky.apply(null,arguments)}function Wl(e){return a8(e)||c8(e)||K4(e)||jM()}function a8(e){if(Array.isArray(e))return kh(e)}function c8(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function K4(e,n){if(e){if(typeof e=="string")return kh(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return kh(e,n)}}function kh(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function jM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var GM=Object.hasOwnProperty,Yy=Object.setPrototypeOf,i8=Object.isFrozen,l8=Object.getPrototypeOf,Rf=Object.getOwnPropertyDescriptor,fa=Object.freeze,Zl=Object.seal,Xy=Object.create,Y4=typeof Reflect<"u"&&Reflect,bb=Y4.apply,Sx=Y4.construct;bb||(bb=function(n,o,r){return n.apply(o,r)}),fa||(fa=function(n){return n}),Zl||(Zl=function(n){return n}),Sx||(Sx=function(n,o){return Ky(n,Wl(o))});var qM=ki(Array.prototype.forEach),u8=ki(Array.prototype.pop),Jy=ki(Array.prototype.push),xx=ki(String.prototype.toLowerCase),X4=ki(String.prototype.match),Mf=ki(String.prototype.replace),KM=ki(String.prototype.indexOf),d8=ki(String.prototype.trim),uc=ki(RegExp.prototype.test),J4=Vr(TypeError);function ki(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return bb(e,n,r)}}function Vr(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Sx(e,o)}}function Nn(e,n){Yy&&Yy(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=xx(r);c!==r&&(i8(n)||(n[o]=c),r=c)}e[r]=!0}return e}function qu(e){var n=Xy(null),o;for(o in e)bb(GM,e,[o])&&(n[o]=e[o]);return n}function Ku(e,n){for(;e!==null;){var o=Rf(e,n);if(o){if(o.get)return ki(o.get);if(typeof o.value=="function")return ki(o.value)}e=l8(e)}function r(c){return console.warn("fallback value for",c),null}return r}var Q4=fa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ga=fa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lm=fa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),YM=fa(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),e3=fa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),XM=fa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),JM=fa(["#text"]),t3=fa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_h=fa(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ex=fa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Tx=fa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),QM=Zl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),m8=Zl(/<%[\w\W]*|[\w\W]*%>/gm),n3=Zl(/^data-[\-\w.\u00B7-\uFFFF]/),o3=Zl(/^aria-[\-\w]+$/),f8=Zl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),g8=Zl(/^(?:\w+script|data):/i),Yu=Zl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),s3=Zl(/^html$/i),h8=function(){return typeof window>"u"?null:window},r3=function(n,o){if(Df(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function kx(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h8(),n=function(me){return kx(me)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,C=e.NodeFilter,x=e.NamedNodeMap,O=x===void 0?e.NamedNodeMap||e.MozNamedAttrMap:x,A=e.HTMLFormElement,B=e.DOMParser,L=e.trustedTypes,z=b.prototype,F=Ku(z,"cloneNode"),V=Ku(z,"nextSibling"),Y=Ku(z,"childNodes"),X=Ku(z,"parentNode");if(typeof u=="function"){var Q=r.createElement("template");Q.content&&Q.content.ownerDocument&&(r=Q.content.ownerDocument)}var se=r3(L,o),Ce=se?se.createHTML(""):"",Ie=r,Pe=Ie.implementation,ce=Ie.createNodeIterator,le=Ie.createDocumentFragment,Te=Ie.getElementsByTagName,tt=o.importNode,it={};try{it=qu(r).documentMode?r.documentMode:{}}catch{}var Bt={};n.isSupported=typeof X=="function"&&Pe&&typeof Pe.createHTMLDocument<"u"&&it!==9;var zt=QM,un=m8,xn=n3,ko=o3,Go=g8,Ss=Yu,Me=f8,je=null,sn=Nn({},[].concat(Wl(Q4),Wl(ga),Wl(lm),Wl(e3),Wl(JM))),Ht=null,st=Nn({},[].concat(Wl(t3),Wl(_h),Wl(Ex),Wl(Tx))),Be=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),De=null,bt=null,jt=!0,pn=!0,Qe=!1,Ut=!1,wn=!1,go=!1,On=!1,Rs=!1,hc=!1,Ha=!1,Kc=!0,jf=!0,Jh=!1,Gf={},qf=null,hT=Nn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),pT=null,bT=Nn({},["audio","video","img","source","image","track"]),q2=null,K2=Nn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Y2="http://www.w3.org/1998/Math/MathML",Gb="http://www.w3.org/2000/svg",nu="http://www.w3.org/1999/xhtml",qb=nu,Qh=!1,xm,X2=["application/xhtml+xml","text/html"],J2="text/html",td,Em=null,Q2=r.createElement("form"),eC=function(me){return me instanceof RegExp||me instanceof Function},tC=function(me){Em&&Em===me||((!me||Df(me)!=="object")&&(me={}),me=qu(me),je="ALLOWED_TAGS"in me?Nn({},me.ALLOWED_TAGS):sn,Ht="ALLOWED_ATTR"in me?Nn({},me.ALLOWED_ATTR):st,q2="ADD_URI_SAFE_ATTR"in me?Nn(qu(K2),me.ADD_URI_SAFE_ATTR):K2,pT="ADD_DATA_URI_TAGS"in me?Nn(qu(bT),me.ADD_DATA_URI_TAGS):bT,qf="FORBID_CONTENTS"in me?Nn({},me.FORBID_CONTENTS):hT,De="FORBID_TAGS"in me?Nn({},me.FORBID_TAGS):{},bt="FORBID_ATTR"in me?Nn({},me.FORBID_ATTR):{},Gf="USE_PROFILES"in me?me.USE_PROFILES:!1,jt=me.ALLOW_ARIA_ATTR!==!1,pn=me.ALLOW_DATA_ATTR!==!1,Qe=me.ALLOW_UNKNOWN_PROTOCOLS||!1,Ut=me.SAFE_FOR_TEMPLATES||!1,wn=me.WHOLE_DOCUMENT||!1,Rs=me.RETURN_DOM||!1,hc=me.RETURN_DOM_FRAGMENT||!1,Ha=me.RETURN_TRUSTED_TYPE||!1,On=me.FORCE_BODY||!1,Kc=me.SANITIZE_DOM!==!1,jf=me.KEEP_CONTENT!==!1,Jh=me.IN_PLACE||!1,Me=me.ALLOWED_URI_REGEXP||Me,qb=me.NAMESPACE||nu,me.CUSTOM_ELEMENT_HANDLING&&eC(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Be.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&eC(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Be.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Be.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xm=X2.indexOf(me.PARSER_MEDIA_TYPE)===-1?xm=J2:xm=me.PARSER_MEDIA_TYPE,td=xm==="application/xhtml+xml"?function(ot){return ot}:xx,Ut&&(pn=!1),hc&&(Rs=!0),Gf&&(je=Nn({},Wl(JM)),Ht=[],Gf.html===!0&&(Nn(je,Q4),Nn(Ht,t3)),Gf.svg===!0&&(Nn(je,ga),Nn(Ht,_h),Nn(Ht,Tx)),Gf.svgFilters===!0&&(Nn(je,lm),Nn(Ht,_h),Nn(Ht,Tx)),Gf.mathMl===!0&&(Nn(je,e3),Nn(Ht,Ex),Nn(Ht,Tx))),me.ADD_TAGS&&(je===sn&&(je=qu(je)),Nn(je,me.ADD_TAGS)),me.ADD_ATTR&&(Ht===st&&(Ht=qu(Ht)),Nn(Ht,me.ADD_ATTR)),me.ADD_URI_SAFE_ATTR&&Nn(q2,me.ADD_URI_SAFE_ATTR),me.FORBID_CONTENTS&&(qf===hT&&(qf=qu(qf)),Nn(qf,me.FORBID_CONTENTS)),jf&&(je["#text"]=!0),wn&&Nn(je,["html","head","body"]),je.table&&(Nn(je,["tbody"]),delete De.tbody),fa&&fa(me),Em=me)},vT=Nn({},["mi","mo","mn","ms","mtext"]),yT=Nn({},["foreignobject","desc","title","annotation-xml"]),WF=Nn({},["title","style","font","a","script"]),ou=Nn({},ga);Nn(ou,lm),Nn(ou,YM);var ep=Nn({},e3);Nn(ep,XM);var re=function(me){var ot=X(me);(!ot||!ot.tagName)&&(ot={namespaceURI:nu,tagName:"template"});var At=xx(me.tagName),Bo=xx(ot.tagName);return me.namespaceURI===Gb?ot.namespaceURI===nu?At==="svg":ot.namespaceURI===Y2?At==="svg"&&(Bo==="annotation-xml"||vT[Bo]):!!ou[At]:me.namespaceURI===Y2?ot.namespaceURI===nu?At==="math":ot.namespaceURI===Gb?At==="math"&&yT[Bo]:!!ep[At]:me.namespaceURI===nu?ot.namespaceURI===Gb&&!yT[Bo]||ot.namespaceURI===Y2&&!vT[Bo]?!1:!ep[At]&&(WF[At]||!ou[At]):!1},ae=function(me){Jy(n.removed,{element:me});try{me.parentNode.removeChild(me)}catch{try{me.outerHTML=Ce}catch{me.remove()}}},Ne=function(me,ot){try{Jy(n.removed,{attribute:ot.getAttributeNode(me),from:ot})}catch{Jy(n.removed,{attribute:null,from:ot})}if(ot.removeAttribute(me),me==="is"&&!Ht[me])if(Rs||hc)try{ae(ot)}catch{}else try{ot.setAttribute(me,"")}catch{}},_e=function(me){var ot,At;if(On)me="<remove></remove>"+me;else{var Bo=X4(me,/^[\r\n\t ]+/);At=Bo&&Bo[0]}xm==="application/xhtml+xml"&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");var Yc=se?se.createHTML(me):me;if(qb===nu)try{ot=new B().parseFromString(Yc,xm)}catch{}if(!ot||!ot.documentElement){ot=Pe.createDocument(qb,"template",null);try{ot.documentElement.innerHTML=Qh?"":Yc}catch{}}var Va=ot.body||ot.documentElement;return me&&At&&Va.insertBefore(r.createTextNode(At),Va.childNodes[0]||null),qb===nu?Te.call(ot,wn?"html":"body")[0]:wn?ot.documentElement:Va},dt=function(me){return ce.call(me.ownerDocument||me,me,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT,null,!1)},tn=function(me){return me instanceof A&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof O)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function")},Kn=function(me){return Df(f)==="object"?me instanceof f:me&&Df(me)==="object"&&typeof me.nodeType=="number"&&typeof me.nodeName=="string"},Ms=function(me,ot,At){Bt[me]&&qM(Bt[me],function(Bo){Bo.call(n,ot,At,Em)})},rr=function(me){var ot;if(Ms("beforeSanitizeElements",me,null),tn(me)||uc(/[\u0080-\uFFFF]/,me.nodeName))return ae(me),!0;var At=td(me.nodeName);if(Ms("uponSanitizeElement",me,{tagName:At,allowedTags:je}),me.hasChildNodes()&&!Kn(me.firstElementChild)&&(!Kn(me.content)||!Kn(me.content.firstElementChild))&&uc(/<[/\w]/g,me.innerHTML)&&uc(/<[/\w]/g,me.textContent)||At==="select"&&uc(/<template/i,me.innerHTML))return ae(me),!0;if(!je[At]||De[At]){if(!De[At]&&oC(At)&&(Be.tagNameCheck instanceof RegExp&&uc(Be.tagNameCheck,At)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(At)))return!1;if(jf&&!qf[At]){var Bo=X(me)||me.parentNode,Yc=Y(me)||me.childNodes;if(Yc&&Bo)for(var Va=Yc.length,zr=Va-1;zr>=0;--zr)Bo.insertBefore(F(Yc[zr],!0),V(me))}return ae(me),!0}return me instanceof b&&!re(me)||(At==="noscript"||At==="noembed")&&uc(/<\/no(script|embed)/i,me.innerHTML)?(ae(me),!0):(Ut&&me.nodeType===3&&(ot=me.textContent,ot=Mf(ot,zt," "),ot=Mf(ot,un," "),me.textContent!==ot&&(Jy(n.removed,{element:me.cloneNode()}),me.textContent=ot)),Ms("afterSanitizeElements",me,null),!1)},nC=function(me,ot,At){if(Kc&&(ot==="id"||ot==="name")&&(At in r||At in Q2))return!1;if(!(pn&&!bt[ot]&&uc(xn,ot))){if(!(jt&&uc(ko,ot))){if(!Ht[ot]||bt[ot]){if(!(oC(me)&&(Be.tagNameCheck instanceof RegExp&&uc(Be.tagNameCheck,me)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(me))&&(Be.attributeNameCheck instanceof RegExp&&uc(Be.attributeNameCheck,ot)||Be.attributeNameCheck instanceof Function&&Be.attributeNameCheck(ot))||ot==="is"&&Be.allowCustomizedBuiltInElements&&(Be.tagNameCheck instanceof RegExp&&uc(Be.tagNameCheck,At)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(At))))return!1}else if(!q2[ot]){if(!uc(Me,Mf(At,Ss,""))){if(!((ot==="src"||ot==="xlink:href"||ot==="href")&&me!=="script"&&KM(At,"data:")===0&&pT[me])){if(!(Qe&&!uc(Go,Mf(At,Ss,"")))){if(At)return!1}}}}}}return!0},oC=function(me){return me.indexOf("-")>0},wD=function(me){var ot,At,Bo,Yc;Ms("beforeSanitizeAttributes",me,null);var Va=me.attributes;if(Va){var zr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ht};for(Yc=Va.length;Yc--;){ot=Va[Yc];var Kb=ot,pa=Kb.name,ZF=Kb.namespaceURI;At=pa==="value"?ot.value:d8(ot.value),Bo=td(pa);var jF=At;if(zr.attrName=Bo,zr.attrValue=At,zr.keepAttr=!0,zr.forceKeepAttr=void 0,Ms("uponSanitizeAttribute",me,zr),At=zr.attrValue,!zr.forceKeepAttr){if(!zr.keepAttr){Ne(pa,me);continue}if(uc(/\/>/i,At)){Ne(pa,me);continue}Ut&&(At=Mf(At,zt," "),At=Mf(At,un," "));var hZ=td(me.nodeName);if(!nC(hZ,Bo,At)){Ne(pa,me);continue}if(At!==jF)try{ZF?me.setAttributeNS(ZF,pa,At):me.setAttribute(pa,At)}catch{Ne(pa,me)}}}Ms("afterSanitizeAttributes",me,null)}},gZ=function Vt(me){var ot,At=dt(me);for(Ms("beforeSanitizeShadowDOM",me,null);ot=At.nextNode();)Ms("uponSanitizeShadowNode",ot,null),!rr(ot)&&(ot.content instanceof c&&Vt(ot.content),wD(ot));Ms("afterSanitizeShadowDOM",me,null)};return n.sanitize=function(Vt,me){var ot,At,Bo,Yc,Va;if(Qh=!Vt,Qh&&(Vt="<!-->"),typeof Vt!="string"&&!Kn(Vt)){if(typeof Vt.toString!="function")throw J4("toString is not a function");if(Vt=Vt.toString(),typeof Vt!="string")throw J4("dirty is not a string, aborting")}if(!n.isSupported){if(Df(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Vt=="string")return e.toStaticHTML(Vt);if(Kn(Vt))return e.toStaticHTML(Vt.outerHTML)}return Vt}if(go||tC(me),n.removed=[],typeof Vt=="string"&&(Jh=!1),Jh){if(Vt.nodeName){var zr=td(Vt.nodeName);if(!je[zr]||De[zr])throw J4("root node is forbidden and cannot be sanitized in-place")}}else if(Vt instanceof f)ot=_e("<!---->"),At=ot.ownerDocument.importNode(Vt,!0),At.nodeType===1&&At.nodeName==="BODY"||At.nodeName==="HTML"?ot=At:ot.appendChild(At);else{if(!Rs&&!Ut&&!wn&&Vt.indexOf("<")===-1)return se&&Ha?se.createHTML(Vt):Vt;if(ot=_e(Vt),!ot)return Rs?null:Ha?Ce:""}ot&&On&&ae(ot.firstChild);for(var Kb=dt(Jh?Vt:ot);Bo=Kb.nextNode();)Bo.nodeType===3&&Bo===Yc||rr(Bo)||(Bo.content instanceof c&&gZ(Bo.content),wD(Bo),Yc=Bo);if(Yc=null,Jh)return Vt;if(Rs){if(hc)for(Va=le.call(ot.ownerDocument);ot.firstChild;)Va.appendChild(ot.firstChild);else Va=ot;return Ht.shadowroot&&(Va=tt.call(o,Va,!0)),Va}var pa=wn?ot.outerHTML:ot.innerHTML;return wn&&je["!doctype"]&&ot.ownerDocument&&ot.ownerDocument.doctype&&ot.ownerDocument.doctype.name&&uc(s3,ot.ownerDocument.doctype.name)&&(pa="<!DOCTYPE "+ot.ownerDocument.doctype.name+`>
`+pa),Ut&&(pa=Mf(pa,zt," "),pa=Mf(pa,un," ")),se&&Ha?se.createHTML(pa):pa},n.setConfig=function(Vt){tC(Vt),go=!0},n.clearConfig=function(){Em=null,go=!1},n.isValidAttribute=function(Vt,me,ot){Em||tC({});var At=td(Vt),Bo=td(me);return nC(At,Bo,ot)},n.addHook=function(Vt,me){typeof me=="function"&&(Bt[Vt]=Bt[Vt]||[],Jy(Bt[Vt],me))},n.removeHook=function(Vt){if(Bt[Vt])return u8(Bt[Vt])},n.removeHooks=function(Vt){Bt[Vt]&&(Bt[Vt]=[])},n.removeAllHooks=function(){Bt={}},n}var eB=kx();const a3=Re.each,tB=Re.trim,p8=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],b8={ftp:21,http:80,https:443,mailto:25},v8=["img","video"],y8=(e,n)=>Se(e)?!e:Se(n)?!Rt(v8,n):!0,C8=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},c3=(e,n,o)=>{const r=C8(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?y8(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class jl{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Du.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!c3(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=tB(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new jl(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&a3(p8,(b,C)=>{let x=f[C];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new jl(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new jl(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?b8[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(b.length>=C.length){for(u=0,f=b.length;u<f;u++)if(u>=C.length||b[u]!==C[u]){r=u+1;break}}if(b.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=b.length||b[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?c+="/"+C[u]:c+=C[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];a3(u,A=>{A&&b.push(A)});const C=[];for(let A=f.length-1;A>=0;A--)if(!(f[A].length===0||f[A]===".")){if(f[A]===".."){r++;continue}if(r>0){r--;continue}C.push(f[A])}const x=b.length-r;let O;return x<=0?O=io(C).join("/"):O=b.slice(0,x).join("/")+"/"+io(C).join("/"),O.indexOf("/")!==0&&(O="/"+O),c&&O.lastIndexOf("/")!==O.length-1&&(O+=c),O}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const w8=Re.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),i3="data-mce-type";let l3=0;const _x=(e,n,o,r)=>{var c,u,f,b;const C=n.validate,x=o.getSpecialElements();e.nodeType===uv&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const O=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==gd||O==="body")return;const A=U.fromDom(e),B=hd(A,i3),L=Nr(A,"data-mce-bogus");if(!B&&K(L)){L==="all"?Tn(A):ai(A);return}const z=o.getElementRule(O);if(C&&!z){Tt(x,O)?Tn(A):ai(A);return}else Se(r)&&(r.allowedTags[O]=!0);if(C&&z&&!B){if(he((f=z.attributesForced)!==null&&f!==void 0?f:[],F=>{Zn(A,F.name,F.value==="{$uid}"?`mce_${l3++}`:F.value)}),he((b=z.attributesDefault)!==null&&b!==void 0?b:[],F=>{hd(A,F.name)||Zn(A,F.name,F.value==="{$uid}"?`mce_${l3++}`:F.value)}),z.attributesRequired&&!no(z.attributesRequired,F=>hd(A,F))){ai(A);return}if(z.removeEmptyAttrs&&oi(A)){ai(A);return}z.outputName&&z.outputName!==O&&tw(A,z.outputName)}},u3=(e,n,o,r,c)=>!(r in w8&&c3(e,c,o))&&(!e.validate||n.isValid(o,r)||xs(r,"data-")||xs(r,"aria-")),d3=(e,n)=>e.hasAttribute(i3)&&(n==="id"||n==="class"||n==="style"),Ox=(e,n)=>e in n.getBoolAttrs(),nB=(e,n,o)=>{const{attributes:r}=e;for(let c=r.length-1;c>=0;c--){const u=r[c],f=u.name,b=u.value;!u3(n,o,e.tagName.toLowerCase(),f,b)&&!d3(e,f)?e.removeAttribute(f):Ox(f,o)&&e.setAttribute(f,f)}},oB=(e,n)=>{const o=eB();return o.addHook("uponSanitizeElement",(r,c)=>{_x(r,e,n,c)}),o.addHook("uponSanitizeAttribute",(r,c)=>{const u=r.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=u3(e,n,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,Ox(f,n)&&(c.attrValue=f),e.allow_svg_data_urls&&xs(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):d3(r,f)&&(c.forceKeepAttr=!0)}),o},sB=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},rB=(e,n)=>{if(e.sanitize){const o=oB(e,n);return(r,c)=>{o.sanitize(r,sB(e,c)),o.removed=[]}}else return(o,r)=>{const c=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=c.nextNode();)_x(u,e,n),qe(u)&&nB(u,e,n)}},aB=Re.makeMap,Ax=Re.extend,cB=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const C=u[f],x=new Ia(C.nodeName.toLowerCase(),C.nodeType);if(qe(C)){const O=C.attributes;for(let A=0,B=O.length;A<B;A++){const L=O[A];x.attr(L.name,L.value)}}else Oe(C)?(x.value=C.data,c&&(x.raw=!0)):(wl(C)||NC(C)||yd(C))&&(x.value=C.data);cB(x,C,o),e.append(x)}},Dx=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;he(n,b=>b(f)),cn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];he(o,f=>f(u))}},S8=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Ax(aB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=Ja(n),x=/[ \t\r\n]+/g,O=/^[ \t\r\n]+/,A=/[ \t\r\n]+$/,B=X=>{let Q=X.parent;for(;Se(Q);){if(Q.name in f)return!0;Q=Q.parent}return!1},L=X=>{let Q=X;for(;Se(Q);){if(Q.name in C)return lb(n,u,f,Q);Q=Q.parent}return!1},z=X=>X.name in b||rn(n,X),F=(X,Q)=>{const se=Q?X.prev:X.next;return Se(se)||cn(X.parent)?!1:z(X.parent)&&(X.parent!==e||r.isRootContent===!0)};return[X=>{var Q;if(X.type===3&&!B(X)){let se=(Q=X.value)!==null&&Q!==void 0?Q:"";se=se.replace(x," "),(lI(X.prev,z)||F(X,!0))&&(se=se.replace(O,"")),se.length===0?X.remove():X.value=se}},X=>{var Q;if(X.type===1){const se=n.getElementRule(X.name);if(c&&se){const Ce=lb(n,u,f,X);se.paddInEmptyBlock&&Ce&&L(X)?Hy(o,r,z,X):se.removeEmpty&&Ce?z(X)?X.remove():X.unwrap():se.paddEmpty&&(Ce||cx(X))&&Hy(o,r,z,X)}}else if(X.type===3&&!B(X)){let se=(Q=X.value)!==null&&Q!==void 0?Q:"";(X.next&&z(X.next)||F(X,!1))&&(se=se.replace(A,"")),se.length===0?X.remove():X.value=se}}]},x8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},vb=(e={},n=fi())=>{const o=W4(),r=W4(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=rB(c,n),b=(Q,se,Ce="html")=>{const Ie=Ce==="xhtml"?"application/xhtml+xml":"text/html",Pe=Tt(n.getSpecialElements(),se.toLowerCase()),ce=Pe?`<${se}>${Q}</${se}>`:Q,le=Ce==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ce}</body></html>`:`<body>${ce}</body>`,Te=u.parseFromString(le,Ie).body;return f(Te,Ie),Pe?Te.firstChild:Te},C=o.addFilter,x=o.getFilters,O=o.removeFilter,A=r.addFilter,B=r.getFilters,L=r.removeFilter,z=(Q,se)=>{QR(n,Q)&&se.push(Q)},F=(Q,se)=>{const Ce=K(se.attr(i3)),Ie=se.type===1&&!Tt(Q,se.name)&&!rn(n,se);return se.type===3||Ie&&!Ce},V=(Q,se)=>{const Ce=Ax(aB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ie=/^[ \t\r\n]+/,Pe=/[ \t\r\n]+$/;let ce=Q.firstChild,le=null;const Te=tt=>{var it,Bt;tt&&(ce=tt.firstChild,ce&&ce.type===3&&(ce.value=(it=ce.value)===null||it===void 0?void 0:it.replace(Ie,"")),ce=tt.lastChild,ce&&ce.type===3&&(ce.value=(Bt=ce.value)===null||Bt===void 0?void 0:Bt.replace(Pe,"")))};if(n.isValidChild(Q.name,se.toLowerCase())){for(;ce;){const tt=ce.next;F(Ce,ce)?(le||(le=new Ia(se,1),le.attr(c.forced_root_block_attrs),Q.insert(le,ce)),le.append(ce)):(Te(le),le=null),ce=tt}Te(le)}},X={schema:n,addAttributeFilter:A,getAttributeFilters:B,removeAttributeFilter:L,addNodeFilter:C,getNodeFilters:x,removeNodeFilter:O,parse:(Q,se={})=>{var Ce;const Ie=c.validate,Pe=(Ce=se.context)!==null&&Ce!==void 0?Ce:c.root_name,ce=b(Q,Pe,se.format);Fp(n,ce);const le=new Ia(Pe,11);cB(le,ce,n.getSpecialElements()),ce.innerHTML="";const[Te,tt]=S8(le,n,c,se),it=[],Bt=Ie?ko=>z(ko,it):vt,zt={nodes:{},attributes:{}},un=ko=>aI(x(),B(),ko,zt);if(Dx(le,[Te,un],[tt,Bt]),it.reverse(),Ie&&it.length>0)if(se.context){const{pass:ko,fail:Go}=br(it,Ss=>Ss.parent===le);b4(Go,n,le,un),se.invalid=ko.length>0}else b4(it,n,le,un);const xn=x8(c,se);return xn&&(le.name==="body"||se.isRootContent)&&V(le,xn),se.invalid||ax(zt,se),le}};return WM(X,c),e8(X,c,n),X},iB=e=>mx(e)?gh({validate:!1}).serialize(e):e,m3=(e,n,o)=>{const r=iB(e),c=n(r);if(c.isDefaultPrevented())return c;if(mx(e))if(c.content!==r){const u=vb({validate:!1,forced_root_block:!1,sanitize:o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},lB=(e,n)=>{if(n.no_events)return zs.value(n);{const o=tl(e,n);return o.isDefaultPrevented()?zs.error(f_(e,{content:"",...o}).content):zs.value(o)}},uB=(e,n,o)=>o.no_events?n:m3(n,c=>f_(e,{...o,content:c}),T1(e)).content,f3=(e,n)=>{if(n.no_events)return zs.value(n);{const o=m3(n.content,r=>Zs(e,{...n,content:r}),T1(e));return o.isDefaultPrevented()?(sr(e,o),zs.error(void 0)):zs.value(o)}},g3=(e,n,o)=>{o.no_events||sr(e,{...o,content:n})},h3=(e,n,o)=>({element:e,width:n,rows:o}),p3=(e,n)=>({element:e,cells:n}),RZ=(e,n)=>({x:e,y:n}),dB=(e,n)=>$i(e,n).bind(ud).getOr(1),E8=(e,n,o,r,c)=>{const u=dB(c,"rowspan"),f=dB(c,"colspan"),b=e.rows;for(let C=o;C<o+u;C++){b[C]||(b[C]=p3(Hs(r),[]));for(let x=n;x<n+f;x++){const O=b[C].cells;O[x]=C===o&&x===n?c:Ol(c)}}},T8=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},k8=(e,n,o)=>{for(;T8(e,n,o);)n++;return n},mB=e=>_o(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),fB=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Cn(c[u],n))return N.some(RZ(u,r))}return N.none()},gB=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const C=f[b].cells,x=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(p3(f[b].element,x))}return u},hB=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?gB(e,r,c,u,f):gB(e,r,f,u,c);return h3(e.element,mB(b),b)},_8=(e,n)=>{const o=Ol(e.element),r=U.fromTag("tbody");return $n(r,n),Ko(o,r),o},O8=e=>Ft(e.rows,n=>{const o=Ft(n.cells,c=>{const u=Hs(c);return Lo(u,"colspan"),Lo(u,"rowspan"),u}),r=Ol(n.element);return $n(r,o),r}),A8=e=>{const n=h3(Ol(e),0,[]);return he(hs(e,"tr"),(o,r)=>{he(hs(o,"td,th"),(c,u)=>{E8(n,k8(n,u,r),r,o,c)})}),h3(n.element,mB(n.rows),n.rows)},D8=e=>_8(e,O8(e)),R8=(e,n,o)=>fB(e,n).bind(r=>fB(e,o).map(c=>hB(e,r,c))),MZ=e=>Fo(e,n=>Qn(n)==="ul"||Qn(n)==="ol"),BZ=(e,n)=>Fo(e,o=>Qn(o)==="li"&&bf(o,n)).fold(Le([]),o=>MZ(e).map(r=>{const c=U.fromTag(Qn(r)),u=oo(_C(r),(f,b)=>xs(b,"list-style"));return Jr(c,u),[U.fromTag("li"),c]}).getOr([])),M8=(e,n)=>{const o=_o(n,(r,c)=>(Ko(c,r),c),e);return n.length>0?Yd([o]):o},B8=e=>Yo(e)?Ea(e).filter(Ka).fold(Le([]),n=>[e,n]):Ka(e)?[e]:[],NZ=(e,n)=>{const o=U.fromDom(n.commonAncestorContainer),r=nm(o,e),c=ht(r,pt),u=BZ(r,n),f=c.concat(u.length?u:B8(o));return Ft(f,Ol)},pB=()=>Yd([]),To=(e,n)=>M8(U.fromDom(n.cloneContents()),NZ(e,n)),b3=(e,n)=>Fm(n,"table",Ee(Cn,e)),PZ=(e,n)=>b3(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=A8(o);return R8(u,r,c).map(f=>Yd([D8(f)]))}).getOrThunk(pB),N8=(e,n)=>n.length>0&&n[0].collapsed?pB():To(e,n[0]),P8=(e,n)=>{const o=Yg(n,e);return o.length>0?PZ(e,o):N8(e,n)},um=(e,n)=>n>=0&&n<e.length&&rc(e.charAt(n)),$8=e=>Sr(e.innerText),$Z=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),hr=e=>N.from(e.selection.getRng()).map(n=>{var o;const r=N.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=$Z(r),f=U.fromDom(n.cloneContents());WS(f),cR(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=$8(b),x=Sr((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),um(x,0)||um(x,x.length-1)){const O=r.getOr(c),A=$8(O),B=A.indexOf(C);if(B===-1)return C;{const L=um(A,B-1),z=um(A,B+C.length);return(L?" ":"")+C+(z?" ":"")}}else return C}).getOr(""),bB=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=zS(e,ey(c)),f=n.contextual?P8(U.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},vB=(e,n)=>{if(n.format==="text")return hr(e);{const o=bB(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},yB=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),F8=(e,n,o={})=>{const r=yB(o,n);return lB(e,r).fold(ho,c=>{const u=vB(e,c);return uB(e,u,c)})},v3=0,Qy=1,CB=2,y3=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(O,A,B)=>({start:O,end:A,diag:B}),f=(O,A,B,L,z)=>{const F=C(O,A,B,L);if(F===null||F.start===A&&F.diag===A-L||F.end===O&&F.diag===O-B){let V=O,Y=B;for(;V<A||Y<L;)V<A&&Y<L&&e[V]===n[Y]?(z.push([v3,e[V]]),++V,++Y):A-O>L-B?(z.push([CB,e[V]]),++V):(z.push([Qy,n[Y]]),++Y)}else{f(O,F.start,B,F.start-F.diag,z);for(let V=F.start;V<F.end;++V)z.push([v3,e[V]]);f(F.end,A,F.end-F.diag,L,z)}},b=(O,A,B,L)=>{let z=O;for(;z-A<L&&z<B&&e[z]===n[z-A];)++z;return u(O,z,A)},C=(O,A,B,L)=>{const z=A-O,F=L-B;if(z===0||F===0)return null;const V=z-F,Y=F+z,X=(Y%2===0?Y:Y+1)/2;r[1+X]=O,c[1+X]=A+1;let Q,se,Ce,Ie,Pe;for(Q=0;Q<=X;++Q){for(se=-Q;se<=Q;se+=2){for(Ce=se+X,se===-Q||se!==Q&&r[Ce-1]<r[Ce+1]?r[Ce]=r[Ce+1]:r[Ce]=r[Ce-1]+1,Ie=r[Ce],Pe=Ie-O+B-se;Ie<A&&Pe<L&&e[Ie]===n[Pe];)r[Ce]=++Ie,++Pe;if(V%2!==0&&V-Q<=se&&se<=V+Q&&c[Ce-V]<=r[Ce])return b(c[Ce-V],se+O-B,A,L)}for(se=V-Q;se<=V+Q;se+=2){for(Ce=se+X-V,se===V-Q||se!==V+Q&&c[Ce+1]<=c[Ce-1]?c[Ce]=c[Ce+1]-1:c[Ce]=c[Ce-1],Ie=c[Ce]-1,Pe=Ie-O+B-se;Ie>=O&&Pe>=B&&e[Ie]===n[Pe];)c[Ce]=Ie--,Pe--;if(V%2===0&&-Q<=se&&se<=Q&&c[Ce]<=r[Ce+V])return b(c[Ce],se+O-B,A,L)}}return null},x=[];return f(0,e.length,0,n.length,x),x},wB=e=>qe(e)?e.outerHTML:Oe(e)?Du.encodeRaw(e.data,!1):wl(e)?"<!--"+e.data+"-->":"",SB=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},xB=(e,n,o)=>{const r=SB(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},C3=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},EB=(e,n)=>{let o=0;he(e,r=>{r[0]===v3?o++:r[0]===Qy?(xB(n,r[1],o),o++):r[0]===CB&&C3(n,o)})},w3=e=>ht(Ft(Zr(e.childNodes),wB),n=>n.length>0),I8=(e,n)=>{const o=Ft(Zr(n.childNodes),wB);return EB(y3(o,e),n),n},L8=id(()=>document.implementation.createHTMLDocument("undo")),H8=e=>e.indexOf("</iframe>")!==-1,_i=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),V8=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Rx=e=>{const n=w3(e.getBody()),o=Ua(n,c=>{const u=L_(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return H8(r)?_i(o):V8(r)},S3=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?I8(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Se(r)&&Fl(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},x3=e=>e.type==="fragmented"?e.fragments.join(""):e.content,TB=e=>{const n=U.fromTag("body",L8());return Hm(n,x3(e)),he(hs(n,"*[data-mce-bogus]"),ai),qt(n)},kB=(e,n)=>x3(e)===x3(n),z8=(e,n)=>TB(e)===TB(n),E3=(e,n)=>!e||!n?!1:kB(e,n)?!0:z8(e,n),T3=e=>e.get()===0,Oh=(e,n,o)=>{T3(o)&&(e.typing=n)},_B=(e,n)=>{e.typing&&(Oh(e,!1,n),e.add())},U8=e=>{e.typing&&(e.typing=!1,e.add())},OB=(e,n,o)=>{T3(n)&&o.set(g1(e.selection))},k3=(e,n,o,r,c,u,f)=>{const b=Rx(e),C=Re.extend(u||{},b);if(!T3(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&E3(x,C))return null;n.data[o.get()]&&c.get().each(B=>{n.data[o.get()].beforeBookmark=B});const O=Rw(e);if(O&&n.data.length>O){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}C.bookmark=g1(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const A={level:C,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",A),e.dispatch("change",A)):e.dispatch("AddUndo",A),C},W8=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},Z8=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];S3(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},FZ=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],S3(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},j8=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,Oh(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],S3(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},G8=e=>{e.clear(),e.add()},AB=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!E3(Rx(e),n.data[0]),DB=(e,n)=>n.get()<e.data.length-1&&!e.typing,q8=(e,n,o)=>(_B(e,n),e.beforeChange(),e.ignore(o),e.add()),Ah=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},yb=(e,n)=>{const o=e.dom,r=Se(n)?n:e.getBody();he(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=w1(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,C=Ig(e);b&&e.hasVisual?o.addClass(c,C):o.removeClass(c,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Cb=e=>({init:{bindEvents:vt},undoManager:{beforeChange:(n,o)=>OB(e,n,o),add:(n,o,r,c,u,f)=>k3(e,n,o,r,c,u,f),undo:(n,o,r)=>j8(e,n,o,r),redo:(n,o)=>FZ(e,n,o),clear:(n,o)=>W8(e,n,o),reset:n=>G8(n),hasUndo:(n,o)=>AB(e,n,o),hasRedo:(n,o)=>DB(n,o),transact:(n,o,r)=>q8(n,o,r),ignore:(n,o)=>Ah(n,o),extra:(n,o,r,c)=>Z8(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>_4(e,n,o,r,c),matchAll:(n,o)=>wh(e,n,o),matchNode:(n,o,r,c)=>lc(e,n,o,r,c),canApply:n=>Of(e,n),closest:n=>_I(e,n),apply:(n,o,r)=>KI(e,n,o,r),remove:(n,o,r,c)=>DM(e,n,o,r,c),toggle:(n,o,r)=>pb(e,n,o,r),formatChanged:(n,o,r,c,u)=>hb(e,n,o,r,c,u)},editor:{getContent:n=>R6(e,n),setContent:(n,o)=>kI(e,n,o),insertContent:(n,o)=>dM(e,n,o),addVisual:n=>yb(e,n)},selection:{getContent:(n,o)=>F8(e,n,o)},autocompleter:{addDecoration:n=>w6(e,n),removeDecoration:()=>x6(e,U.fromDom(e.getBody()))},raw:{getModel:()=>N.none()}}),RB=e=>{const n=x=>Sn(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,O,A)=>r.transact(A),ignore:(x,O)=>r.ignore(O),extra:(x,O,A,B)=>r.extra(A,B)},formatter:{match:(x,O,A,B)=>c.match(x,n(O),B),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,O,A)=>c.apply(x,n(O)),remove:(x,O,A,B)=>c.remove(x,n(O)),toggle:(x,O,A)=>c.toggle(x,n(O)),formatChanged:(x,O,A,B,L)=>c.formatChanged(O,A,B,L)},editor:{getContent:x=>u.getContent(x),setContent:(x,O)=>({content:u.setContent(x,O),html:""}),insertContent:(x,O)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,O)=>f.getContent(O)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>N.some(C.getRawModel())}}},MB=()=>{const e=Le(null),n=Le("");return{init:{bindEvents:vt},undoManager:{beforeChange:vt,add:e,undo:e,redo:e,clear:vt,reset:vt,hasUndo:we,hasRedo:we,transact:e,ignore:vt,extra:vt},formatter:{match:we,matchAll:Le([]),matchNode:Le(void 0),canApply:we,closest:n,apply:vt,remove:vt,toggle:vt,formatChanged:Le({unbind:vt})},editor:{getContent:n,setContent:Le({content:"",html:""}),insertContent:Le(""),addVisual:vt},selection:{getContent:n},autocompleter:{addDecoration:vt,removeDecoration:vt},raw:{getModel:Le(N.none())}}},Xu=e=>Tt(e.plugins,"rtc"),BB=e=>Xn(e.plugins,"rtc").bind(n=>N.from(n.setup)),K8=e=>{const n=e;return BB(e).fold(()=>(n.rtcInstance=Cb(e),N.none()),o=>(n.rtcInstance=MB(),N.some(()=>o().then(r=>(n.rtcInstance=RB(r),r.rtc.isRemote)))))},_3=e=>e.rtcInstance?e.rtcInstance:Cb(e),us=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},Y8=(e,n,o)=>{us(e).undoManager.beforeChange(n,o)},NB=(e,n,o,r,c,u,f)=>us(e).undoManager.add(n,o,r,c,u,f),X8=(e,n,o,r)=>us(e).undoManager.undo(n,o,r),J8=(e,n,o)=>us(e).undoManager.redo(n,o),e2=(e,n,o)=>{us(e).undoManager.clear(n,o)},PB=(e,n)=>{us(e).undoManager.reset(n)},$B=(e,n,o)=>us(e).undoManager.hasUndo(n,o),Q8=(e,n,o)=>us(e).undoManager.hasRedo(n,o),e7=(e,n,o,r)=>us(e).undoManager.transact(n,o,r),t7=(e,n,o)=>{us(e).undoManager.ignore(n,o)},FB=(e,n,o,r,c)=>{us(e).undoManager.extra(n,o,r,c)},n7=(e,n,o,r,c)=>us(e).formatter.match(n,o,r,c),o7=(e,n,o)=>us(e).formatter.matchAll(n,o),s7=(e,n,o,r,c)=>us(e).formatter.matchNode(n,o,r,c),r7=(e,n)=>us(e).formatter.canApply(n),IZ=(e,n)=>us(e).formatter.closest(n),Gl=(e,n,o,r)=>{us(e).formatter.apply(n,o,r)},O3=(e,n,o,r,c)=>{us(e).formatter.remove(n,o,r,c)},a7=(e,n,o,r)=>{us(e).formatter.toggle(n,o,r)},c7=(e,n,o,r,c,u)=>us(e).formatter.formatChanged(n,o,r,c,u),i7=(e,n)=>_3(e).editor.getContent(n),l7=(e,n,o)=>_3(e).editor.setContent(n,o),vn=(e,n,o)=>_3(e).editor.insertContent(n,o),LZ=(e,n,o)=>us(e).selection.getContent(n,o),u7=(e,n)=>us(e).editor.addVisual(n),IB=e=>us(e).init.bindEvents(),fo=(e,n)=>us(e).autocompleter.addDecoration(n),d7=e=>us(e).autocompleter.removeDecoration(),t2=(e,n={})=>{const o=n.format?n.format:"html";return LZ(e,o,n)},LB=e=>e.dom.length===0?(Tn(e),N.none()):N.some(e),m7=(e,n)=>e.filter(o=>vf.isBookmarkNode(o.dom)).bind(n?fg:Tc),f7=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(YS(c,u,!1,!r),o.setStart(u,f)):(YS(u,c,!1,!r),o.setEnd(u,f))},HB=(e,n)=>{Ea(e).each(o=>{const r=e.dom;n&&Oy(o,de(r,0))?Dy(r,0):!n&&Ay(o,de(r,r.length))&&KS(r,r.length)})},dm=(e,n,o,r)=>{e.bind(c=>((r?KS:Dy)(c.dom,r?c.dom.length:0),n.filter(Js).map(f=>f7(c,f,o,r)))).orThunk(()=>m7(n,r).or(n).filter(Js).map(u=>HB(u,r)))},dc=(e,n)=>{const o=N.from(n.firstChild).map(U.fromDom),r=N.from(n.lastChild).map(U.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Tc).filter(Js).bind(LB),u=r.bind(fg).filter(Js).bind(LB);dm(c,o,e,!0),dm(u,r,e,!1),e.collapse(!1)},n2=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),Bf=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return gh({validate:!1},e.schema).serialize(u)}else return n.content},Ju=(e,n,o={})=>{const r=n2(o,n);f3(e,r).each(c=>{const u=Bf(e,c),f=e.selection.getRng();dc(f,f.createContextualFragment(u)),e.selection.setRng(f),Ar(e,f),g3(e,u,c)})},wb=(e,n,o)=>{if(Tt(e,n)){const r=ht(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var A3=(e,n)=>{let o,r;const c=(b,C)=>Fo(C,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const C=b.element,x=u(C),O={};Ze(o,(A,B)=>{c(B,x).each(L=>{r[B]||(he(A,z=>{z(!0,{node:L,selector:B,parents:x})}),r[B]=A),O[B]=A})}),Ze(r,(A,B)=>{O[B]||(delete r[B],he(A,L=>{L(!1,{node:C,selector:B,parents:x})}))})})};return{selectorChangedWithUnbind:(b,C)=>(o||f(),o[b]||(o[b]=[]),o[b].push(C),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{wb(o,b,C),wb(r,b,C)}})}};const Mx=e=>!!(e&&e.ownerDocument)&&Cr(U.fromDom(e.ownerDocument),U.fromDom(e)),VB=e=>e?Mx(e.startContainer)&&Mx(e.endContainer):!1,D3=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=A3(e,r),b=(Me,je)=>{const sn=e.createRng();Se(Me)&&Se(je)?(sn.setStart(Me,je),sn.setEnd(Me,je),se(sn),Y(!1)):(oy(e,sn,r.getBody(),!0),se(sn))},C=Me=>t2(r,Me),x=(Me,je)=>Ju(r,Me,je),O=Me=>YD(r.getBody(),Q(),Me),A=Me=>XD(r.getBody(),Q(),Me),B=(Me,je)=>Go.getBookmark(Me,je),L=Me=>Go.moveToBookmark(Me),z=(Me,je)=>(g6(e,Me,je).each(se),Me),F=()=>{const Me=Q(),je=X();return!Me||Me.item?!1:Me.compareEndPoints?Me.compareEndPoints("StartToEnd",Me)===0:!je||Me.collapsed},V=()=>{const Me=Q(),je=r.getBody().querySelectorAll('[data-mce-selected="1"]');return je.length>0?Gs(je,sn=>e.isEditable(sn.parentElement)):Me.startContainer===Me.endContainer?e.isEditable(Me.startContainer):e.isEditable(Me.startContainer)&&e.isEditable(Me.endContainer)},Y=Me=>{const je=Q();je.collapse(!!Me),se(je)},X=()=>n.getSelection?n.getSelection():n.document.selection,Q=()=>{let Me;const je=(Ht,st,Be)=>{try{return st.compareBoundaryPoints(Ht,Be)}catch{return-1}},sn=n.document;if(Se(r.bookmark)&&!fh(r)){const Ht=$S(r);if(Ht.isSome())return Ht.map(st=>zS(r,[st])[0]).getOr(sn.createRange())}try{const Ht=X();Ht&&!ci(Ht.anchorNode)&&(Ht.rangeCount>0?Me=Ht.getRangeAt(0):Me=sn.createRange(),Me=zS(r,[Me])[0])}catch{}if(Me||(Me=sn.createRange()),Ac(Me.startContainer)&&Me.collapsed){const Ht=e.getRoot();Me.setStart(Ht,0),Me.setEnd(Ht,0)}return c&&u&&(je(Me.START_TO_START,Me,c)===0&&je(Me.END_TO_END,Me,c)===0?Me=u:(c=null,u=null)),Me},se=(Me,je)=>{if(!VB(Me))return;const sn=X();if(Me=r.dispatch("SetSelectionRange",{range:Me,forward:je}).range,sn){u=Me;try{sn.removeAllRanges(),sn.addRange(Me)}catch{}je===!1&&sn.extend&&(sn.collapse(Me.endContainer,Me.endOffset),sn.extend(Me.startContainer,Me.startOffset)),c=sn.rangeCount>0?sn.getRangeAt(0):null}if(!Me.collapsed&&Me.startContainer===Me.endContainer&&(sn!=null&&sn.setBaseAndExtent)&&Me.endOffset-Me.startOffset<2&&Me.startContainer.hasChildNodes()){const st=Me.startContainer.childNodes[Me.startOffset];st&&st.nodeName==="IMG"&&(sn.setBaseAndExtent(Me.startContainer,Me.startOffset,Me.endContainer,Me.endOffset),(sn.anchorNode!==Me.startContainer||sn.focusNode!==Me.endContainer)&&sn.setBaseAndExtent(st,0,st,1))}r.dispatch("AfterSetSelectionRange",{range:Me,forward:je})},Ce=Me=>(x(e.getOuterHTML(Me)),Me),Ie=()=>f6(r.getBody(),Q()),Pe=(Me,je)=>QD(e,Q(),Me,je),ce=()=>{const Me=X(),je=Me==null?void 0:Me.anchorNode,sn=Me==null?void 0:Me.focusNode;if(!Me||!je||!sn||ci(je)||ci(sn))return!0;const Ht=e.createRng(),st=e.createRng();try{Ht.setStart(je,Me.anchorOffset),Ht.collapse(!0),st.setStart(sn,Me.focusOffset),st.collapse(!0)}catch{return!0}return Ht.compareBoundaryPoints(Ht.START_TO_START,st)<=0},ko={dom:e,win:n,serializer:o,editor:r,expand:(Me={type:"word"})=>se(l(e).expand(Q(),Me)),collapse:Y,setCursorLocation:b,getContent:C,setContent:x,getBookmark:B,moveToBookmark:L,select:z,isCollapsed:F,isEditable:V,isForward:ce,setNode:Ce,getNode:Ie,getSel:X,setRng:se,getRng:Q,getStart:O,getEnd:A,getSelectedBlocks:Pe,normalize:()=>{const Me=Q(),je=X();if(!dS(je)&&$1(r)){const sn=J1(e,Me);return sn.each(Ht=>{se(Ht,ce())}),sn.getOr(Me)}return Me},selectorChanged:(Me,je)=>(f(Me,je),ko),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Me,je=e.getRoot();for(;je&&je.nodeName!=="BODY";){if(je.scrollHeight>je.clientHeight){Me=je;break}je=je.parentNode}return Me},scrollIntoView:(Me,je)=>{Se(Me)?zc(r,Me,je):Ar(r,Q(),je)},placeCaretAt:(Me,je)=>se(A_(Me,je,r.getDoc())),getBoundingClientRect:()=>{const Me=Q();return Me.collapsed?de.fromRangeStart(Me).getClientRects()[0]:Me.getBoundingClientRect()},destroy:()=>{n=c=u=null,Ss.destroy()}},Go=vf(ko),Ss=by(ko,r);return ko.bookmarkManager=Go,ko.controlSelection=Ss,ko},g7=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let C=r.length;for(;C--;){const x=r[C];let O=x.attr(u);O!==void 0?(x.attr(c,O.length>0?O:null),x.attr(u,null)):(O=x.attr(c),c==="style"?O=o.serializeStyle(o.parseStyle(O),x.name):f&&(O=f.call(b,O,c,x.name)),x.attr(c,O.length>0?O:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(N.from(b.firstChild).exists(x=>{var O;return!Pv((O=x.value)!==null&&O!==void 0?O:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Du.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const C=r[b],x=C.firstChild,O=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const A=C.attr("type");A&&C.attr("type",A==="mce-no/type"?null:A.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&O.length>0&&(x.value=`// <![CDATA[
`+f(O)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&O.length>0&&(x.value=`<!--
`+f(O)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{he(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&j4(n,e,e.schema)},h7=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},zB=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Re.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{b.body.appendChild(b.importNode(C,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return SS(e,{...o,node:u}),r&&(c.doc=r),u},UB=(e,n)=>Se(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,WB=(e,n,o)=>UB(e,o)?zB(e,n,o):n,ZB=(e,n,o)=>{Re.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},R3=(e,n,o)=>!n.no_events&&e?gy(e,{...n,content:o}).content:o,HZ=(e,n,o)=>{const r=Sr(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||ta(U.fromDom(n))?r:Re.trim(r)},p7=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return h7(c),c},VZ=(e,n,o)=>gh(e,n).serialize(o),b7=(e,n,o,r,c)=>{const u=VZ(n,o,r);return R3(e,c,u)},v7=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:hn.DOM,u=n&&n.schema?n.schema:fi(r),f=vb(r,u);g7(f,r,c);const b=(C,x={})=>{const O={format:"html",...x},A=WB(n,C,O),B=HZ(c,A,O),L=p7(f,B,O);return O.format==="tree"?L:b7(n,r,u,L,O)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ee(ZB,f,o),getTempAttrs:Le(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},ql=(e,n)=>{const o=v7(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},zZ="html",UZ=(e,n)=>({...e,format:n,get:!0,getInner:!0}),y7=(e,n={})=>{const o=n.format?n.format:zZ,r=UZ(n,o);return lB(e,r).fold(ho,c=>{const u=i7(e,c);return uB(e,u,c)})},o2="html",C7=(e,n)=>({format:o2,...e,set:!0,content:n}),Bx=(e,n,o={})=>{const r=C7(o,n);return f3(e,r).map(c=>{const u=l7(e,c.content,c);return g3(e,u.html,c),u.content}).getOr(n)},jB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),GB="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),w7="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),qB=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],mm=(e,n)=>{const o=ht(n,r=>Tt(e,r));return lo(o)},S7=e=>{const n=mm(e,jB),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),lo(n)},x7=e=>mm(e,GB),KB=(e,n)=>{const o=Re.makeMap(e.plugins," "),c=ht(n,u=>Tt(o,u));return lo(c)},E7=e=>KB(e,w7),T7=e=>KB(e,qB.map(n=>n.name)),k7=(e,n)=>{const o=S7(e),r=E7(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,C=f?`

Themes:${b}mobile`:"",x=c?`

Plugins:${b}${r.join(b)}`:"",O=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+C+x+O)}},_7=e=>Fo(qB,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),O7=(e,n)=>{const o=x7(e),r=T7(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(_7).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+C)}},A7=(e,n)=>{k7(e,n),O7(e,n)},Nx=hn.DOM,D7=e=>{Nx.setStyle(e.id,"display",e.orgDisplay)},M3=e=>N.from(e).each(n=>n.destroy()),s2=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},R7=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Nx.unbind(n,"submit reset",e.formEventDelegate))},B3=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Se(c==null?void 0:c.nextSibling)&&Nx.remove(c.nextSibling),xS(e),e.editorManager.remove(e),!e.inline&&r&&D7(e),z1(e),Nx.remove(e.getContainer()),M3(n),M3(o),e.destroy()}},M7=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),M3(o),M3(r)),R7(e),s2(e),e.destroyed=!0}},Px=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Tt(e,c)}})(),Sb=xo.ModelManager,Nf=(e,n)=>n.dom[e],Pf=(e,n)=>parseInt(ss(n,e),10),$x=Ee(Nf,"clientWidth"),Fx=Ee(Nf,"clientHeight"),Dh=Ee(Pf,"margin-top"),Rh=Ee(Pf,"margin-left"),Ix=e=>e.dom.getBoundingClientRect(),Lx=(e,n,o)=>{const r=$x(e),c=Fx(e);return n>=0&&o>=0&&n<=r&&o<=c},YB=(e,n,o,r)=>{const c=Ix(n),u=e?c.left+n.dom.clientLeft+Rh(n):0,f=e?c.top+n.dom.clientTop+Dh(n):0,b=o-u,C=r-f;return{x:b,y:C}},N3=(e,n,o)=>{const r=U.fromDom(e.getBody()),c=e.inline?r:hv(r),u=YB(e.inline,c,n,o);return Lx(c,u.x,u.y)},P3=e=>N.from(e).map(U.fromDom),XB=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return P3(n).map($m).getOr(!1)};var JB=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const Mh=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():JB()},r=()=>N.from(n[0]),c=(B,L)=>B.type===L.type&&B.text===L.text&&!B.progressBar&&!B.timeout&&!L.progressBar&&!L.timeout,u=()=>{he(n,B=>{B.reposition()})},f=B=>{n.push(B)},b=B=>{Wr(n,L=>L===B).each(L=>{n.splice(L,1)})},C=(B,L=!0)=>e.removed||!XB(e)?{}:(L&&e.dispatch("BeforeOpenNotification",{notification:B}),Fo(n,z=>c(o().getArgs(z),B)).getOrThunk(()=>{e.editorManager.setActive(e);const z=o().open(B,()=>{b(z),u(),r().fold(()=>e.focus(),F=>Qd(U.fromDom(F.getEl())))});return f(z),u(),e.dispatch("OpenNotification",{notification:{...z}}),z})),x=()=>{r().each(B=>{o().close(B),b(B),u()})},O=Le(n);return(B=>{B.on("SkinLoaded",()=>{const L=_w(B);L&&C({text:L,type:"warning",timeout:0},!1),u()}),B.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),B.on("remove",()=>{he(n.slice(),L=>{o().close(L)})})})(e),{open:C,close:x,getNotifications:O}},Bh=xo.PluginManager,$f=xo.ThemeManager;var QB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const r2=e=>{let n=[];const o=()=>{const F=e.theme;return F&&F.getWindowManagerImpl?F.getWindowManagerImpl():QB()},r=(F,V)=>(...Y)=>V?V.apply(F,Y):void 0,c=F=>{e.dispatch("OpenWindow",{dialog:F})},u=F=>{e.dispatch("CloseWindow",{dialog:F})},f=F=>{n.push(F),c(F)},b=F=>{u(F),n=ht(n,V=>V!==F),n.length===0&&e.focus()},C=()=>N.from(n[n.length-1]),x=F=>{e.editorManager.setActive(e),N_(e),e.ui.show();const V=F();return f(V),V},O=(F,V)=>x(()=>o().open(F,V,b)),A=F=>x(()=>o().openUrl(F,b)),B=(F,V,Y)=>{const X=o();X.alert(F,r(Y||X,V))},L=(F,V,Y)=>{const X=o();X.confirm(F,r(Y||X,V))},z=()=>{C().each(F=>{o().close(F),b(F)})};return e.on("remove",()=>{he(n,F=>{o().close(F)})}),{open:O,openUrl:A,alert:B,confirm:L,close:z}},$3=(e,n)=>{e.notificationManager.open({type:"error",text:n})},a2=(e,n)=>{e._skinLoaded?$3(e,n):e.on("SkinLoaded",()=>{$3(e,n)})},e5=(e,n)=>{a2(e,Qa.translate(["Failed to upload image: {0}",n]))},xb=(e,n,o)=>{U1(e,n,{message:o}),console.error(o)},Oi=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,Ff=(e,n,o)=>{xb(e,"PluginLoadError",Oi("plugin",n,o))},il=(e,n,o)=>{xb(e,"IconsLoadError",Oi("icons",n,o))},B7=(e,n,o)=>{xb(e,"LanguageLoadError",Oi("language",n,o))},N7=(e,n,o)=>{xb(e,"ThemeLoadError",Oi("theme",n,o))},P7=(e,n,o)=>{xb(e,"ModelLoadError",Oi("model",n,o))},$7=(e,n,o)=>{const r=Qa.translate(["Failed to initialize plugin: {0}",n]);U1(e,"PluginLoadError",{message:r}),Hx(r,o),a2(e,r)},Hx=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},F7=e=>/^[a-z0-9\-]+$/i.test(e),I7=e=>t5(e,kw(e)),L7=e=>t5(e,Fu(e)),t5=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Ft(n,u=>F7(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},H7=e=>{e.contentCSS=e.contentCSS.concat(I7(e),L7(e))},V7=e=>e?Zr(e.getElementsByTagName("img")):[],z7=(e,n)=>{const o={};return{findAll:(c,u=Xe)=>{const f=ht(V7(c),C=>{const x=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!x||x===Ke.transparentSrc?!1:xs(x,"blob:")?!e.isUploaded(x)&&u(C):xs(x,"data:")?u(C):!1}),b=Ft(f,C=>{const x=C.src;if(Tt(o,x))return o[x].then(O=>K(O)?O:{image:C,blobInfo:O.blobInfo});{const O=zM(n,x).then(A=>(delete o[x],{image:C,blobInfo:A})).catch(A=>(delete o[x],A));return o[x]=O,O}});return Promise.all(b)}}},Vx=()=>{let o={};const r=(B,L)=>({status:B,resultUri:L}),c=B=>B in o;return{hasBlobUri:c,getResultUri:B=>{const L=o[B];return L?L.resultUri:null},isPending:B=>c(B)?o[B].status===1:!1,isUploaded:B=>c(B)?o[B].status===2:!1,markPending:B=>{o[B]=r(1,null)},markUploaded:(B,L)=>{o[B]=r(2,L)},removeFailed:B=>{delete o[B]},destroy:()=>{o={}}}};let F3=0;const n5=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},U7=e=>e+F3+++n5(),W7=()=>{let e=[];const n=A=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[A.toLowerCase()]||"dat",o=(A,B,L,z,F)=>{if(K(A))return r({id:A,name:z,filename:F,blob:B,base64:L});if(Sn(A))return r(A);throw new Error("Unknown input type")},r=A=>{if(!A.blob||!A.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=A.id||U7("blobid"),L=A.name||B,z=A.blob;return{id:Le(B),name:Le(L),filename:Le(A.filename||L+"."+n(z.type)),blob:Le(z),base64:Le(A.base64),blobUri:Le(A.blobUri||URL.createObjectURL(z)),uri:Le(A.uri)}},c=A=>{f(A.id())||e.push(A)},u=A=>Fo(e,A).getOrUndefined(),f=A=>u(B=>B.id()===A);return{create:o,add:c,get:f,getByUri:A=>u(B=>B.blobUri()===A),getByData:(A,B)=>u(L=>L.base64()===A&&L.blob().type===B),findFirst:u,removeByUri:A=>{e=ht(e,B=>B.blobUri()===A?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:()=>{he(e,A=>{URL.revokeObjectURL(A.blobUri())}),e=[]}}},o5=(e,n)=>{const o={},r=(F,V)=>F?F.replace(/\/$/,"")+"/"+V.replace(/^\//,""):V,c=(F,V)=>new Promise((Y,X)=>{const Q=new XMLHttpRequest;Q.open("POST",n.url),Q.withCredentials=n.credentials,Q.upload.onprogress=Ce=>{V(Ce.loaded/Ce.total*100)},Q.onerror=()=>{X("Image upload failed due to a XHR Transport error. Code: "+Q.status)},Q.onload=()=>{if(Q.status<200||Q.status>=300){X("HTTP Error: "+Q.status);return}const Ce=JSON.parse(Q.responseText);if(!Ce||!K(Ce.location)){X("Invalid JSON: "+Q.responseText);return}Y(r(n.basePath,Ce.location))};const se=new FormData;se.append("file",F.blob(),F.filename()),Q.send(se)}),u=q(n.handler)?n.handler:c,f=()=>new Promise(F=>{F([])}),b=(F,V)=>({url:V,blobInfo:F,status:!0}),C=(F,V)=>({url:"",blobInfo:F,status:!1,error:V}),x=(F,V)=>{Re.each(o[F],Y=>{Y(V)}),delete o[F]},O=(F,V,Y)=>(e.markPending(F.blobUri()),new Promise(X=>{let Q,se;try{const Ce=()=>{Q&&(Q.close(),se=vt)},Ie=ce=>{Ce(),e.markUploaded(F.blobUri(),ce),x(F.blobUri(),b(F,ce)),X(b(F,ce))},Pe=ce=>{Ce(),e.removeFailed(F.blobUri()),x(F.blobUri(),C(F,ce)),X(C(F,ce))};se=ce=>{ce<0||ce>100||N.from(Q).orThunk(()=>N.from(Y).map($o)).each(le=>{Q=le,le.progressBar.value(ce)})},V(F,se).then(Ie,ce=>{Pe(K(ce)?{message:ce}:ce)})}catch(Ce){X(C(F,Ce))}})),A=F=>F===c,B=F=>{const V=F.blobUri();return new Promise(Y=>{o[V]=o[V]||[],o[V].push(Y)})},L=(F,V)=>(F=Re.grep(F,Y=>!e.isUploaded(Y.blobUri())),Promise.all(Re.map(F,Y=>e.isPending(Y.blobUri())?B(Y):O(Y,u,V))));return{upload:(F,V)=>!n.url&&A(u)?f():L(F,V)}},I3=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),zx=(e,n)=>o5(n,{url:pk(e),basePath:_0(e),credentials:bk(e),handler:xw(e)}),s5=e=>{const n=Vx(),o=zx(e,n);return{upload:(r,c=!0)=>o.upload(r,c?I3(e):void 0)}},r5=(e,n)=>e.dom.isEmpty(n.dom)&&Se(e.schema.getTextBlockElements()[Qn(n)]),L3=e=>n=>{r5(e,n)&&Ko(n,U.fromHtml('<br data-mce-bogus="1" />'))},Z7=e=>{const n=W7();let o,r;const c=Vx(),u=[],f=Q=>se=>e.selection?Q(se):[],b=Q=>Q+(Q.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(Q,se,Ce)=>{let Ie=0;do Ie=Q.indexOf(se,Ie),Ie!==-1&&(Q=Q.substring(0,Ie)+Ce+Q.substr(Ie+se.length),Ie+=Ce.length-se.length+1);while(Ie!==-1);return Q},x=(Q,se,Ce)=>{const Ie=`src="${Ce}"${Ce===Ke.transparentSrc?' data-mce-placeholder="1"':""}`;return Q=C(Q,`src="${se}"`,Ie),Q=C(Q,'data-mce-src="'+se+'"','data-mce-src="'+Ce+'"'),Q},O=(Q,se)=>{he(e.undoManager.data,Ce=>{Ce.type==="fragmented"?Ce.fragments=Ft(Ce.fragments,Ie=>x(Ie,Q,se)):Ce.content=x(Ce.content,Q,se)})},A=(Q,se)=>{const Ce=e.convertURL(se,"src");O(Q.src,se),Pi(U.fromDom(Q),{src:ww(e)?b(se):se,"data-mce-src":Ce})},B=()=>(o||(o=zx(e,c)),V().then(f(Q=>{const se=Ft(Q,Ce=>Ce.blobInfo);return o.upload(se,I3(e)).then(f(Ce=>{const Ie=[];let Pe=!1;const ce=Ft(Ce,(le,Te)=>{const{blobInfo:tt,image:it}=Q[Te];let Bt=!1;return le.status&&gk(e)?(le.url&&!qs(it.src,le.url)&&(Pe=!0),n.removeByUri(it.src),Xu(e)||A(it,le.url)):le.error&&(le.error.remove&&(O(it.src,Ke.transparentSrc),Ie.push(it),Bt=!0),e5(e,le.error.message)),{element:it,status:le.status,uploadUri:le.url,blobInfo:tt,removed:Bt}});return Ie.length>0&&!Xu(e)?e.undoManager.transact(()=>{he(Sp(Ie),le=>{const Te=Ea(le);Tn(le),Te.each(L3(e)),n.removeByUri(le.dom.src)})}):Pe&&e.undoManager.dispatchChange(),ce}))}))),L=()=>k0(e)?B():Promise.resolve([]),z=Q=>Gs(u,se=>se(Q)),F=Q=>{u.push(Q)},V=()=>(r||(r=z7(c,n)),r.findAll(e.getBody(),z).then(f(Q=>{const se=ht(Q,Ce=>K(Ce)?(a2(e,Ce),!1):Ce.uriType!=="blob");return Xu(e)||he(se,Ce=>{O(Ce.image.src,Ce.blobInfo.blobUri()),Ce.image.src=Ce.blobInfo.blobUri(),Ce.image.removeAttribute("data-mce-src")}),se}))),Y=()=>{n.destroy(),c.destroy(),r=o=null},X=Q=>Q.replace(/src="(blob:[^"]+)"/g,(se,Ce)=>{const Ie=c.getResultUri(Ce);if(Ie)return'src="'+Ie+'"';let Pe=n.getByUri(Ce);return Pe||(Pe=_o(e.editorManager.get(),(ce,le)=>ce||le.editorUpload&&le.editorUpload.blobCache.getByUri(Ce),void 0)),Pe?'src="data:'+Pe.blob().type+";base64,"+Pe.base64()+'"':se});return e.on("SetContent",()=>{k0(e)?L():V()}),e.on("RawSaveContent",Q=>{Q.content=X(Q.content)}),e.on("GetContent",Q=>{Q.source_view||Q.format==="raw"||Q.format==="tree"||(Q.content=X(Q.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Q=>{he(Q,se=>{const Ce=se.attr("src");if(!Ce||n.getByUri(Ce))return;const Ie=c.getResultUri(Ce);Ie&&se.attr("src",Ie)})})}),{blobCache:n,addFilter:F,uploadImages:B,uploadImagesAuto:L,scanForImages:V,destroy:Y}},j7=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>qe(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Re.each(f,(b,C)=>{n.setAttrib(c,C,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Re.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},Kl={remove_similar:!0,inherit:!1},ha={selector:"td,th",...Kl},Ux={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ha},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ha},tablecellbordercolor:{styles:{borderColor:"%value"},...ha},tablecellclass:{classes:["%value"],...ha},tableclass:{selector:"table",classes:["%value"],...Kl},tablecellborderstyle:{styles:{borderStyle:"%value"},...ha},tablecellborderwidth:{styles:{borderWidth:"%value"},...ha}},a5=Le(Ux),Wx=e=>{const n={},o=f=>Se(f)?n[f]:n,r=f=>Tt(n,f),c=(f,b)=>{f&&(K(f)?(An(b)||(b=[b]),he(b,C=>{Bs(C.deep)&&(C.deep=!ua(C)),Bs(C.split)&&(C.split=!ua(C)||Uo(C)),Bs(C.remove)&&ua(C)&&!Uo(C)&&(C.remove="none"),ua(C)&&Uo(C)&&(C.mixed=!0,C.block_expand=!0),K(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=b):Ze(f,(C,x)=>{c(x,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(j7(e)),c(a5()),c(Sk(e)),{get:o,has:r,register:c,unregister:u}},c2=Re.each,Wc=hn.DOM,Zx=e=>Se(e)&&Sn(e),H3=(e,n)=>{const o=n&&n.schema||fi({}),r=(C,x)=>{x.classes.length>0&&Wc.addClass(C,x.classes.join(" ")),Wc.setAttribs(C,x.attrs)},c=C=>{const x=K(C)?{name:C,classes:[],attrs:{}}:C,O=Wc.create(x.name);return r(O,x),O},u=(C,x)=>{const O=o.getElementRule(C.nodeName.toLowerCase()),A=O==null?void 0:O.parentsRequired;return A&&A.length?x&&Rt(A,x)?x:A[0]:!1},f=(C,x,O)=>{let A;const B=x[0],L=Zx(B)?B.name:void 0,z=u(C,L);if(z)L===z?(A=B,x=x.slice(1)):A=z;else if(B)A=B,x=x.slice(1);else if(!O)return C;const F=A?c(A):Wc.create("div");F.appendChild(C),O&&Re.each(O,Y=>{const X=c(Y);F.insertBefore(X,C)});const V=Zx(A)?A.siblings:void 0;return f(F,x,V)},b=Wc.create("div");if(e.length>0){const C=e[0],x=c(C),O=Zx(C)?C.siblings:void 0;b.appendChild(f(x,e.slice(1),O))}return b},c5=e=>{e=Re.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Re.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},i5=e=>K(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Re.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Re.map(n.split(/(?:~\+|~|\+)/),c5),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],jx=(e,n)=>{let o="",r=xk(e);if(r==="")return"";const c=B=>K(B)?B.replace(/%(\w+)/g,""):"",u=(B,L)=>Wc.getStyle(L??e.getBody(),B,!0);if(K(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let f=n.block||n.inline||"span",b;const C=i5(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,b=H3(C,e)):b=H3([f],e);const x=Wc.select(f,b)[0]||b.firstChild;c2(n.styles,(B,L)=>{const z=c(B);z&&Wc.setStyle(x,L,z)}),c2(n.attributes,(B,L)=>{const z=c(B);z&&Wc.setAttrib(x,L,z)}),c2(n.classes,B=>{const L=c(B);Wc.hasClass(x,L)||Wc.addClass(x,L)}),e.dispatch("PreviewFormats"),Wc.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const O=u("fontSize"),A=/px$/.test(O)?parseInt(O,10):0;return c2(r.split(" "),B=>{let L=u(B,x);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(L)&&(L=u(B),P1(L).toLowerCase()==="#ffffff"))&&!(B==="color"&&P1(L).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(L)){if(A===0)return;L=parseFloat(L)/(/%$/.test(L)?100:1)*A+"px"}B==="border"&&L&&(o+="padding:0 2px;"),o+=B+":"+L+";"}}),e.dispatch("AfterPreviewFormats"),Wc.remove(b),o},V3=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},l5=e=>{const n=Wx(e),o=zo({});return V3(e),MI(e),Xu(e)||DZ(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{Gl(e,r,c,u)},remove:(r,c,u,f)=>{O3(e,r,c,u,f)},toggle:(r,c,u)=>{a7(e,r,c,u)},match:(r,c,u,f)=>n7(e,r,c,u,f),closest:r=>IZ(e,r),matchAll:(r,c)=>o7(e,r,c),matchNode:(r,c,u,f)=>s7(e,r,c,u,f),canApply:r=>r7(e,r),formatChanged:(r,c,u,f)=>c7(e,o,r,c,u,f),getCssText:Ee(jx,e)}},u5=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},G7=(e,n,o)=>{const r=zo(!1),c=C=>{Oh(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const x=C.command;u5(x)||(_B(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const x=C.command;u5(x)||c(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",C=>{const x=C.keyCode;if(C.isDefaultPrevented())return;const O=Ke.os.isMacOS()&&C.key==="Meta";(x>=33&&x<=36||x>=37&&x<=40||x===45||C.ctrlKey||O)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!E3(Rx(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const x=C.keyCode;if(C.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(C);return}const O=C.ctrlKey&&!C.altKey||C.metaKey;if((x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!O){n.beforeChange(),Oh(n,!0,o),n.add({},C),r.set(!0);return}(Ke.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&c(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,b=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||b(C))&&c(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},q7=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},z3=e=>{const n=gi(),o=zo(0),r=zo(0),c={data:[],typing:!1,beforeChange:()=>{Y8(e,o,n)},add:(u,f)=>NB(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=Rx(e);u.bookmark=g1(e.selection),e.dispatch("change",{level:u,lastLevel:tg(c.data,r.get()).getOrUndefined()})},undo:()=>X8(e,c,o,r),redo:()=>J8(e,r,c.data),clear:()=>{e2(e,c,r)},reset:()=>{PB(e,c)},hasUndo:()=>$B(e,c,r),hasRedo:()=>Q8(e,c,r),transact:u=>e7(e,c,o,u),ignore:u=>{t7(e,o,u)},extra:(u,f)=>{FB(e,c,r,u,f)}};return Xu(e)||G7(e,c,o),q7(e),c},K7=[9,27,Ge.HOME,Ge.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ge.DOWN,Ge.UP,Ge.LEFT,Ge.RIGHT].concat(Ke.browser.isFirefox()?[224]:[]),d5="data-mce-placeholder",Gx=e=>e.type==="keydown"||e.type==="keyup",m5=e=>{const n=e.keyCode;return n===Ge.BACKSPACE||n===Ge.DELETE},Y7=e=>{if(Gx(e)){const n=e.keyCode;return!m5(e)&&(Ge.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Rt(K7,n))}else return!1},X7=e=>Gx(e)&&!(m5(e)||e.type==="keyup"&&e.keyCode===229),J7=(e,n,o)=>{if(wo(U.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},Q7=e=>{var n;const o=e.dom,r=lr(e),c=(n=sf(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(Y7(f))return;const C=e.getBody(),x=X7(f)?!1:J7(o,C,r);(o.getAttrib(C,d5)!==""!==x||b)&&(o.setAttrib(C,d5,x?c:null),o.setAttrib(C,"aria-placeholder",x?c:null),Cf(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};Pn(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>wi.setEditorTimeout(e,()=>u(b)))})},eL=(e,n)=>({block:e,position:n}),tL=(e,n)=>({from:e,to:n}),Eb=(e,n)=>{const o=U.fromDom(e),r=U.fromDom(n.container());return _n(o,r).map(c=>eL(c,n))},U3=e=>!Cn(e.from.block,e.to.block),f5=(e,n)=>Ga(n,c=>Ap(c)||ks(c.dom),c=>Cn(c,e)).filter(Xs).getOr(e),nL=(e,n)=>{const o=U.fromDom(e);return Cn(f5(o,n.from.block),f5(o,n.to.block))},oL=e=>an(e.from.block.dom)===!1&&an(e.to.block.dom)===!1,sL=e=>{const n=o=>li(o)||Zm(o.dom);return n(e.from.block)&&n(e.to.block)},g5=(e,n,o)=>yo(o.position.getNode())&&!wo(o.block)?ff(!1,o.block.dom).bind(r=>r.isEqual(o.position)?Ba(n,e,r).bind(c=>Eb(e,c)):N.some(o)).getOr(o):o,rL=(e,n,o)=>{const r=Eb(e,de.fromRangeStart(o)),c=r.bind(u=>Ba(n,e,u.position).bind(f=>Eb(e,f).map(b=>g5(e,n,b))));return ir(r,c,tL).filter(u=>U3(u)&&nL(e,u)&&oL(u)&&sL(u))},aL=(e,n,o)=>o.collapsed?rL(e,n,o):N.none(),W3=e=>{const n=$s(e);return Wr(n,Aa).fold(Le(n),o=>n.slice(0,o))},h5=e=>{const n=W3(e);return he(n,Tn),n},p5=(e,n)=>{const o=nm(n,e);return Fo(o.reverse(),r=>wo(r)).each(Tn)},cL=e=>ht(bv(e),n=>!wo(n)).length===0,iL=(e,n,o,r)=>{if(wo(o))return yu(o),Eo(o.dom);cL(r)&&wo(n)&&gs(r,U.fromTag("br"));const c=ur(o.dom,de.before(r.dom));return he(h5(n),u=>{gs(r,u)}),p5(e,n),c},lL=(e,n,o)=>{if(wo(o)){if(wo(n)){const u=od((f=>{const b=(C,x)=>Pm(C).fold(()=>x,O=>$r(O)?b(O,x.concat(Ol(O))):x);return b(f,[])})(o),(f,b)=>(wv(f,b),b),bg());Lm(n),Ko(n,u)}return Tn(o),Eo(n.dom)}const r=Na(o.dom);return he(h5(n),c=>{Ko(o,c)}),p5(e,n),r},uL=(e,n)=>{const o=nm(n,e);return N.from(o[o.length-1])},dL=(e,n)=>Cr(n,e)?uL(n,e):N.none(),i2=(e,n)=>{ff(e,n.dom).bind(o=>N.from(o.getNode())).map(U.fromDom).filter(Dc).each(Tn)},l2=(e,n,o)=>(i2(!0,n),i2(!1,o),dL(n,o).fold(Ee(lL,e,n,o),Ee(iL,e,n,o))),b5=(e,n,o,r)=>n?l2(e,r,o):l2(e,o,r),Z3=(e,n)=>{const o=U.fromDom(e.getBody());return aL(o.dom,n,e.selection.getRng()).map(c=>()=>{b5(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},qx=(e,n)=>{const o=n.getRng();return ir(_n(e,U.fromDom(o.startContainer)),_n(e,U.fromDom(o.endContainer)),(r,c)=>Cn(r,c)?N.none():N.some(()=>{o.deleteContents(),b5(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(N.none())},v5=(e,n)=>{const o=U.fromDom(n),r=Ee(Cn,e);return vo(o,Ap,r).isSome()},mL=(e,n)=>v5(e,n.startContainer)||v5(e,n.endContainer),fL=(e,n)=>{const o=ur(e.dom,de.fromRangeStart(n)).isNone(),r=Hr(e.dom,de.fromRangeEnd(n)).isNone();return!mL(e,n)&&o&&r},gL=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),hL=e=>{const n=U.fromDom(e.getBody()),o=e.selection.getRng();return fL(n,o)?gL(e):qx(n,e.selection)},j3=(e,n)=>e.selection.isCollapsed()?N.none():hL(e),fm=(e,n,o,r,c)=>N.from(n._selectionOverrides.showCaret(e,o,r,c)),pL=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},u2=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?N.none():N.some(pL(n)),bL=(e,n,o)=>{const r=V0(1,e.getBody(),n),c=de.fromRangeStart(r),u=c.getNode();if(Lu(u))return fm(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Lu(f))return fm(1,e,f,!1,!1);const b=_f(e.dom.getRoot(),c.getNode());return Lu(b)?fm(1,e,b,!1,o):N.none()},G3=(e,n,o)=>n.collapsed?bL(e,n,o).getOr(n):n,ZZ=e=>Tf(e)||em(e),ll=e=>tm(e)||nb(e),q3=(e,n)=>{Oe(n)&&n.data.length===0&&e.remove(n)},K3=(e,n,o,r,c,u)=>{fm(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),q3(e.dom,o)},y5=(e,n)=>{const o=e.selection.getRng();if(!Oe(o.commonAncestorContainer))return N.none();const r=n?Cs.Forwards:Cs.Backwards,c=Vu(e.getBody()),u=Ee(D1,n?c.next:c.prev),f=n?ZZ:ll,b=Ud(r,e.getBody(),o),C=u(b),x=C&&Si(n,C);if(!x||!df(b,x))return N.none();if(f(x))return N.some(()=>K3(e,o,b.getNode(),r,n,x));const O=u(x);return O&&f(O)&&df(x,O)?N.some(()=>K3(e,o,b.getNode(),r,n,O)):N.none()},Y3=(e,n)=>y5(e,n),Kx=(e,n)=>{const o=e.getBody();return n?Eo(o).filter(Tf):Na(o).filter(tm)},X3=e=>{const n=e.selection.getRng();return!n.collapsed&&(Kx(e,!0).exists(o=>o.isEqual(de.fromRangeStart(n)))||Kx(e,!1).exists(o=>o.isEqual(de.fromRangeEnd(n))))},C5=e=>Se(e)&&(Ap(U.fromDom(e))||Yo(U.fromDom(e))),Zc=Bl.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vL=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return qe(o)&&o.getAttribute("data-mce-caret")===r},yL=(e,n,o,r)=>{const c=u=>$r(U.fromDom(u))&&!$c(o,r,e);return Jw(!n,o).fold(()=>Jw(n,r).fold(we,c),c)},Nh=(e,n,o,r)=>{const c=r.getNode(!n);return _n(U.fromDom(e),U.fromDom(o.getNode())).map(u=>wo(u)?Zc.remove(u.dom):Zc.moveToElement(c)).orThunk(()=>N.some(Zc.moveToElement(c)))},J3=(e,n,o)=>Ba(n,e,o).bind(r=>C5(r.getNode())||yL(e,n,o,r)?N.none():n&&an(r.getNode())||!n&&an(r.getNode(!0))?Nh(e,n,o,r):n&&tm(o)||!n&&Tf(o)?N.some(Zc.moveToPosition(r)):N.none()),w5=(e,n)=>cn(n)?N.none():e&&an(n.nextSibling)?N.some(Zc.moveToElement(n.nextSibling)):!e&&an(n.previousSibling)?N.some(Zc.moveToElement(n.previousSibling)):N.none(),S5=(e,n,o)=>o.fold(r=>N.some(Zc.remove(r)),r=>N.some(Zc.moveToElement(r)),r=>$c(n,r,e)?N.none():N.some(Zc.moveToPosition(r))),Q3=(e,n,o)=>vL(n,o)?w5(n,o.getNode(!n)).orThunk(()=>J3(e,n,o)):J3(e,n,o).bind(r=>S5(e,o,r)),CL=(e,n,o)=>{const r=V0(n?1:-1,e,o),c=de.fromRangeStart(r),u=U.fromDom(e);return!n&&tm(c)?N.some(Zc.remove(c.getNode(!0))):n&&Tf(c)?N.some(Zc.remove(c.getNode())):!n&&Tf(c)&&GS(u,c)?CR(u,c).map(f=>Zc.remove(f.getNode())):n&&tm(c)&&jS(u,c)?F6(u,c).map(f=>Zc.remove(f.getNode())):Q3(e,n,c)},wL=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),om(e,n,U.fromDom(o)),!0),SL=(e,n)=>o=>{const r=n?de.before(o):de.after(o);return e.selection.setRng(r.toRange()),!0},jZ=e=>n=>(e.selection.setRng(n.toRange()),!0),xL=(e,n)=>N.from(_f(e.getBody(),n)),GZ=(e,n)=>{const o=e.selection.getNode();return xL(e,o).filter(an).fold(()=>CL(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(wL(e,n),SL(e,n),jZ(e))),()=>N.some(vt))},ul=e=>{he(hs(e,".mce-offscreen-selection"),Tn)},EL=(e,n)=>{const o=e.selection.getNode();return an(o)&&!zi(o)?xL(e,o.parentNode).filter(an).fold(()=>N.some(()=>{ul(U.fromDom(e.getBody())),om(e,n,U.fromDom(e.selection.getNode())),bh(e)}),()=>N.some(vt)):X3(e)?N.some(()=>{QS(e,e.selection.getRng(),U.fromDom(e.getBody()))}):N.none()},x5=e=>{const n=e.dom,o=e.selection,r=_f(e.getBody(),o.getNode());if(ks(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(de.before(c).toRange())}return!0},gm=(e,n)=>e.selection.isCollapsed()?GZ(e,n):EL(e,n),E5=(e,n)=>{const o=de.fromRangeStart(e.selection.getRng());return Ba(n,e.getBody(),o).filter(r=>n?B6(r):N6(r)).bind(r=>cf(n?0:-1,r)).map(r=>()=>e.selection.select(r))},eO=(e,n)=>e.selection.isCollapsed()?E5(e,n):N.none(),hm=Oe,T5=e=>hm(e)&&e.data[0]===tr,k5=e=>hm(e)&&e.data[e.data.length-1]===tr,_5=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(tr)},TL=e=>{var n;if(hm(e.previousSibling))return k5(e.previousSibling)||e.previousSibling.appendData(tr),e.previousSibling;if(hm(e))return T5(e)||e.insertData(0,tr),e;{const o=_5(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},kL=e=>{var n,o;if(hm(e.nextSibling))return T5(e.nextSibling)||e.nextSibling.insertData(0,tr),e.nextSibling;if(hm(e))return k5(e)||e.appendData(tr),e;{const r=_5(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Yx=(e,n)=>e?TL(n):kL(n),pm=Ee(Yx,!0),_L=Ee(Yx,!1),O5=(e,n)=>Oe(e.container())?Yx(n,e.container()):Yx(n,e.getNode()),A5=(e,n)=>{const o=n.get();return o&&e.container()===o&&na(o)},tO=(e,n)=>n.fold(o=>{Jo(e.get());const r=pm(o);return e.set(r),N.some(de(r,r.length-1))},o=>Eo(o).map(r=>{if(A5(r,e)){const c=e.get();return de(c,1)}else{Jo(e.get());const c=O5(r,!0);return e.set(c),de(c,1)}}),o=>Na(o).map(r=>{if(A5(r,e)){const c=e.get();return de(c,c.length-1)}else{Jo(e.get());const c=O5(r,!1);return e.set(c),de(c,c.length-1)}}),o=>{Jo(e.get());const r=_L(o);return e.set(r),N.some(de(r,1))}),D5=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return N.none()},Dr=Bl.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Xx=(e,n)=>{const o=Qi(n,e);return o||e},nO=(e,n,o)=>{const r=oI(o),c=Xx(n,r.container());return sm(e,c,r).fold(()=>Hr(c,r).bind(Ee(sm,e,c)).map(u=>Dr.before(u)),N.none)},R5=(e,n)=>Uu(e,n)===null,oO=(e,n,o)=>sm(e,n,o).filter(Ee(R5,n)),M5=(e,n,o)=>{const r=JS(o);return oO(e,n,r).bind(c=>ur(c,r).isNone()?N.some(Dr.start(c)):N.none())},OL=(e,n,o)=>{const r=oI(o);return oO(e,n,r).bind(c=>Hr(c,r).isNone()?N.some(Dr.end(c)):N.none())},d2=(e,n,o)=>{const r=JS(o),c=Xx(n,r.container());return sm(e,c,r).fold(()=>ur(c,r).bind(Ee(sm,e,c)).map(u=>Dr.after(u)),N.none)},Jx=e=>!RR(Qx(e)),Yl=(e,n,o)=>D5([nO,M5,OL,d2],[e,n,o]).filter(Jx),Qx=e=>e.fold(ho,ho,ho,ho),sO=e=>e.fold(Le("before"),Le("start"),Le("end"),Le("after")),m2=e=>e.fold(Dr.before,Dr.before,Dr.after,Dr.after),Tb=e=>e.fold(Dr.start,Dr.start,Dr.end,Dr.end),rO=(e,n)=>sO(e)===sO(n)&&Qx(e)===Qx(n),f2=(e,n,o,r,c,u)=>ir(sm(n,o,r),sm(n,o,c),(f,b)=>f!==b&&rl(o,f,b)?Dr.after(e?f:b):u).getOr(u),AL=(e,n)=>e.fold(Xe,o=>!rO(o,n)),B5=(e,n,o,r,c)=>{const u=Si(e,c);return Ba(e,o,u).map(Ee(Si,e)).fold(()=>r.map(m2),C=>Yl(n,o,C).map(Ee(f2,e,n,o,u,C)).filter(Ee(AL,r))).filter(Jx)},DL=(e,n)=>e?n.fold(k(N.some,Dr.start),N.none,k(N.some,Dr.after),N.none):n.fold(N.none,k(N.some,Dr.before),N.none,k(N.some,Dr.end)),RL=(e,n,o,r)=>{const c=Si(e,r),u=Yl(n,o,c);return Yl(n,o,c).bind(Ee(DL,e)).orThunk(()=>B5(e,n,o,u,r))},N5=e=>q(e.selection.getSel().modify),P5=(e,n,o)=>{const r=e?1:-1;return n.setRng(de(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},$5=(e,n)=>{const o=n.selection.getRng(),r=e?de.fromRangeEnd(o):de.fromRangeStart(o);return N5(n)?e&&vg(r)?P5(!0,n.selection,r):!e&&Rp(r)?P5(!1,n.selection,r):!1:!1};var bm;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(bm||(bm={}));const eE=(e,n)=>e===Cs.Backwards?io(n):n,ML=(e,n,o)=>e===Cs.Forwards?n.next(o):n.prev(o),BL=(e,n,o,r)=>yo(r.getNode(n===Cs.Forwards))?bm.Br:$c(o,r)===!1?bm.Block:bm.Wrap,F5=(e,n,o,r)=>{const c=Vu(o);let u=r;const f=[];for(;u;){const b=ML(n,c,u);if(!b)break;if(yo(b.getNode(!1)))return n===Cs.Forwards?{positions:eE(n,f).concat([b]),breakType:bm.Br,breakAt:N.some(b)}:{positions:eE(n,f),breakType:bm.Br,breakAt:N.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const C=BL(o,n,u,b);return{positions:eE(n,f),breakType:C,breakAt:N.some(b)}}f.push(b),u=b}return{positions:eE(n,f),breakType:bm.Eol,breakAt:N.none()}},I5=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===Cs.Backwards?u.concat(c):[c].concat(u)}).getOr([]),aO=(e,n)=>_o(e,(o,r)=>o.fold(()=>N.some(r),c=>ir(vr(c.getClientRects()),vr(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),N.none()),tE=(e,n)=>vr(n.getClientRects()).bind(o=>aO(e,o.left)),g2=Ee(F5,de.isAbove,-1),kb=Ee(F5,de.isBelow,1),L5=Ee(I5,-1,g2),If=Ee(I5,1,kb),cO=(e,n)=>g2(e,n).breakAt.isNone(),nE=(e,n)=>kb(e,n).breakAt.isNone(),H5=e=>Eo(e).map(n=>[n].concat(kb(e,n).positions)).getOr([]),iO=e=>Na(e).map(n=>g2(e,n).positions.concat(n)).getOr([]),Lf=(e,n)=>tE(L5(e,n),n),V5=(e,n)=>tE(If(e,n),n),Ai=an,Hf=(e,n)=>Math.abs(e.left-n),oE=(e,n)=>Math.abs(e.right-n),NL=e=>jr(e,"node"),lO=(e,n)=>Ca(e,(o,r)=>{const c=Math.min(Hf(o,n),oE(o,n)),u=Math.min(Hf(r,n),oE(r,n));return u===c&&NL(r)&&Ai(r.node)||u<c?r:o}),PL=e=>{const n=o=>Ft(o,r=>{const c=Pd(r);return c.node=e,c});if(qe(e))return n(e.getClientRects());if(Oe(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},z5=e=>Ua(e,PL);var h2;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(h2||(h2={}));const $L=(e,n,o,r)=>{let c=r;for(;c=bi(c,e,_d,n);)if(o(c))return},U5=(e,n,o,r,c,u)=>{let f=0;const b=[],C=A=>{let B=z5([A]);e===-1&&(B=B.reverse());for(let L=0;L<B.length;L++){const z=B[L];if(!o(z,x)){if(b.length>0&&n(z,yc(b))&&f++,z.line=f,c(z))return!0;b.push(z)}}return!1},x=yc(u.getClientRects());if(!x)return b;const O=u.getNode();return O&&(C(O),$L(e,r,C,O)),b},W5=(e,n)=>n.line>e,FL=(e,n)=>n.line===e,IL=Ee(U5,h2.Up,eo,ia),_b=Ee(U5,h2.Down,ia,eo),sE=e=>yc(e.getClientRects()),Z5=(e,n,o,r)=>{const c=Vu(n);let u,f,b,C;const x=[];let O=0;e===1?(u=c.next,f=ia,b=eo,C=de.after(r)):(u=c.prev,f=eo,b=ia,C=de.before(r));const A=sE(C);do{if(!C.isVisible())continue;const B=sE(C);if(b(B,A))continue;x.length>0&&f(B,yc(x))&&O++;const L=Pd(B);if(L.position=C,L.line=O,o(L))return x;x.push(L)}while(C=u(C));return x},uO=e=>n=>W5(e,n),p2=e=>n=>FL(e,n),vm=(e,n)=>{e.selection.setRng(n),Ar(e,e.selection.getRng())},dO=(e,n,o)=>N.some(G3(e,n,o)),j5=(e,n,o,r,c,u)=>{const f=n===Cs.Forwards,b=Vu(e.getBody()),C=Ee(D1,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const z=Jm(o);if(u(z))return fm(n,e,z,n===Cs.Backwards,!1);if(X3(e)){const F=o.cloneRange();return F.collapse(n===Cs.Backwards),N.from(F)}}const O=Ud(n,e.getBody(),o);if(x(O))return u2(e,O.getNode(!f));let A=C(O);const B=bs(o);if(A)A=Si(f,A);else return B?N.some(o):N.none();if(x(A))return fm(n,e,A.getNode(!f),f,!1);const L=C(A);return L&&x(L)&&df(A,L)?fm(n,e,L.getNode(!f),f,!1):B?dO(e,A.toRange(),!1):N.none()},G5=(e,n,o,r,c,u)=>{const f=Ud(n,e.getBody(),o),b=yc(f.getClientRects()),C=n===h2.Down,x=e.getBody();if(!b)return N.none();if(X3(e)){const V=C?de.fromRangeEnd(o):de.fromRangeStart(o);return(C?V5:Lf)(x,V).orThunk(()=>N.from(V)).map(X=>X.toRange())}const A=(C?_b:IL)(x,uO(1),f),B=ht(A,p2(1)),L=b.left,z=lO(B,L);if(z&&u(z.node)){const V=Math.abs(L-z.left),Y=Math.abs(L-z.right);return fm(n,e,z.node,V<Y,!1)}let F;if(r(f)?F=f.getNode():c(f)?F=f.getNode(!0):F=Jm(o),F){const V=Z5(n,x,uO(1),F);let Y=lO(ht(V,p2(1)),L);if(Y||(Y=yc(ht(V,p2(0))),Y))return dO(e,Y.position.toRange(),!1)}return B.length===0?mO(e,C).filter(C?c:r).map(V=>G3(e,V.toRange(),!1)):N.none()},mO=(e,n)=>{const o=e.selection.getRng(),r=n?de.fromRangeEnd(o):de.fromRangeStart(o),c=Gk(r.container(),e.getBody());if(n){const u=kb(c,r);return cu(u.positions)}else{const u=g2(c,r);return vr(u.positions)}},q5=(e,n,o)=>mO(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),rE=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},fO=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},K5=(e,n,o)=>tO(n,o).map(r=>(rE(e,r),o)),LL=(e,n,o)=>{const r=de.fromRangeStart(e);if(e.collapsed)return r;{const c=de.fromRangeEnd(e);return o?ur(n,c).getOr(c):Hr(n,r).getOr(r)}},jc=(e,n,o)=>{const r=e.getBody(),c=LL(e.selection.getRng(),r,o),u=Ee(ph,e);return RL(o,u,r,c).bind(b=>K5(e,n,b))},HL=(e,n,o)=>{const r=Ft(hs(U.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ht(r,e),u=ht(o,e);he(cp(c,u),Ee(fO,!1)),he(cp(u,c),Ee(fO,!0))},gO=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=de.fromRangeStart(e.selection.getRng());de.isTextPosition(r)&&!nI(r)&&(rE(e,Kw(o,r)),n.set(null))}},Y5=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=ht(r,e);he(c,u=>{const f=de.fromRangeStart(n.selection.getRng());Yl(e,n.getBody(),f).bind(b=>K5(n,o,b))})}},aE=(e,n,o)=>$g(e)?jc(e,n,o).isSome():!1,X5=(e,n,o)=>$g(n)?$5(e,n):!1,VL=e=>{const n=zo(null),o=Ee(ph,e);return e.on("NodeChange",r=>{$g(e)&&(HL(o,e.dom,r.parents),gO(e,n),Y5(o,e,n,r.parents))}),n},zL=Ee(X5,!0),UL=Ee(X5,!1),cE=(e,n,o)=>{if($g(e)){const r=mO(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?de.fromRangeEnd(c):de.fromRangeStart(c)});return Yl(Ee(ph,e),e.getBody(),r).exists(c=>{const u=m2(c);return tO(o,u).exists(f=>(rE(e,f),!0))})}else return!1},J5=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},WL=e=>ir(Eo(e),Na(e),(n,o)=>{const r=Si(!0,n),c=Si(!1,o);return Hr(e,r).forall(u=>u.isEqual(c))}).getOr(!0),Q5=(e,n)=>o=>tO(n,o).map(r=>()=>rE(e,r)),Ob=(e,n,o,r)=>{const c=e.getBody(),u=Ee(ph,e);e.undoManager.ignore(()=>{e.selection.setRng(J5(o,r)),e4(e),Yl(u,c,de.fromRangeStart(e.selection.getRng())).map(Tb).bind(Q5(e,n)).each(Br)}),e.nodeChanged()},ym=(e,n)=>{const o=Qi(n,e);return o||e},Ph=(e,n,o,r)=>{const c=ym(e.getBody(),r.container()),u=Ee(ph,e),f=Yl(u,c,r);return f.bind(C=>o?C.fold(Le(N.some(Tb(C))),N.none,Le(N.some(m2(C))),N.none):C.fold(N.none,Le(N.some(m2(C))),N.none,Le(N.some(Tb(C))))).map(Q5(e,n)).getOrThunk(()=>{const C=zu(o,c,r),x=C.bind(O=>Yl(u,c,O));return ir(f,x,()=>sm(u,c,r).bind(O=>WL(O)?N.some(()=>{om(e,o,U.fromDom(O))}):N.none())).getOrThunk(()=>x.bind(()=>C.map(O=>()=>{o?Ob(e,n,r,O):Ob(e,n,O,r)})))})},Ab=(e,n,o)=>{if(e.selection.isCollapsed()&&$g(e)){const r=de.fromRangeStart(e.selection.getRng());return Ph(e,n,o,r)}return N.none()},hO=e=>Yr(e)>1,iE=(e,n)=>{const o=U.fromDom(e.getBody()),r=U.fromDom(e.selection.getStart()),c=nm(r,o);return Wr(c,n).fold(Le(c),u=>c.slice(0,u))},eN=e=>Yr(e)===1,ZL=e=>iE(e,n=>Aa(n)||hO(n)),tN=e=>iE(e,Aa),pO=(e,n)=>{const o=Ee(M4,e);return Ua(n,r=>o(r)?[r.dom]:[])},nN=e=>{const n=tN(e);return pO(e,n)},jL=(e,n,o,r)=>{const c=pO(n,r);if(c.length===0)om(n,e,o);else{const u=mb(o.dom,c);n.selection.setRng(u.toRange())}},GL=(e,n)=>{const o=ht(ZL(e),eN);return cu(o).bind(r=>{const c=de.fromRangeStart(e.selection.getRng());return t4(n,c,r.dom)&&!yx(r)?N.some(()=>jL(n,e,r,o)):N.none()})},qL=(e,n)=>{const o=n.parentElement;return yo(n)&&!J(o)&&e.dom.isEmpty(o)},KL=e=>yx(U.fromDom(e)),oN=(e,n)=>{const o=e.selection.getStart(),r=qL(e,o)||KL(o)?mb(o,n):BI(e.selection.getRng(),n);e.selection.setRng(r.toRange())},sN=(e,n)=>{const o=cp(n,nN(e));o.length>0&&oN(e,o)},bO=e=>Oe(e.startContainer),qZ=e=>e.startOffset===0&&bO(e),KZ=(e,n)=>{const o=n.startContainer.parentElement;return!J(o)&&M4(e,U.fromDom(o))},YZ=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!J(n)&&!J(o)&&n.isEqualNode(o)},YL=e=>{const n=e.endContainer;return e.endOffset===(Oe(n)?n.length:n.childNodes.length)},XZ=e=>YZ(e)&&YL(e),JZ=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),XL=e=>XZ(e)||JZ(e),JL=e=>{const n=e.selection.getRng();return qZ(n)&&KZ(e,n)&&XL(n)},QZ=e=>{if(JL(e)){const n=nN(e);return N.some(()=>{e4(e),sN(e,n)})}else return N.none()},vO=(e,n)=>e.selection.isCollapsed()?GL(e,n):QZ(e),mc=e=>E4(e,n=>Us(n.dom),Aa),rN=e=>mc(U.fromDom(e.selection.getStart())),b2=e=>{const n=e.selection.getRng();return n.collapsed&&(bO(n)||e.dom.isEmpty(n.startContainer))&&!rN(e)},v2=e=>(b2(e)&&oN(e,[]),!0),lE=(e,n,o)=>Se(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),om(e,n,U.fromDom(o))}):N.none(),aN=(e,n)=>{const o=n?em:nb,r=n?Cs.Forwards:Cs.Backwards,c=Ud(r,e.getBody(),e.selection.getRng());return o(c)?lE(e,n,c.getNode(!n)):N.from(Si(n,c)).filter(u=>o(u)&&df(c,u)).bind(u=>lE(e,n,u.getNode(!n)))},yO=(e,n)=>{const o=e.selection.getNode();return ii(o)?lE(e,n,o):N.none()},CO=(e,n)=>e.selection.isCollapsed()?aN(e,n):yO(e,n),QL=e=>Ga(e,n=>ks(n.dom)||an(n.dom)).exists(n=>ks(n.dom)),uE=e=>ud(e??"").getOr(0),cN=(e,n)=>{const o=e||ne(n)?"margin":"padding",r=ss(n,"direction")==="rtl"?"-right":"-left";return o+r},eH=(e,n,o,r,c,u)=>{const f=cN(o,U.fromDom(u)),b=uE(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,b-r);e.setStyle(u,f,C?C+c:"")}else{const C=b+r+c;e.setStyle(u,f,C)}},tH=(e,n)=>Gs(n,o=>{const r=cN(Tw(e),o),c=rs(o,r).map(uE).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),dE=e=>{const n=oH(e);return!e.mode.isReadOnly()&&(n.length>1||tH(e,n))},iN=e=>Ka(e)||Yo(e),nH=e=>Ea(e).exists(iN),oH=e=>ht(Sp(e.selection.getSelectedBlocks()),n=>!iN(n)&&!nH(n)&&QL(n)),lN=(e,n)=>{var o,r;const{dom:c}=e,u=Ck(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=uE(u),C=Tw(e);he(oH(e),x=>{eH(c,n,C,b,f,x.dom)})},uN=e=>lN(e,"indent"),sH=e=>lN(e,"outdent"),dN=e=>{if(e.selection.isCollapsed()&&dE(e)){const n=e.dom,o=e.selection.getRng(),r=de.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&W_(U.fromDom(c),r))return N.some(()=>sH(e))}return N.none()},mN=(e,n,o)=>sd([dN,gm,Y3,(r,c)=>Ab(r,n,c),Z3,Gu,eO,CO,j3,vO],r=>r(e,o)).filter(r=>e.selection.isEditable()),rH=(e,n)=>{mN(e,n,!1).fold(()=>{e4(e),bh(e)},Br)},wO=(e,n)=>{mN(e,n,!0).fold(()=>ob(e),Br)},mE=(e,n)=>{e.addCommand("delete",()=>{rH(e,n)}),e.addCommand("forwardDelete",()=>{wO(e,n)})},SO=5,fN=400,gN=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),aH=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>SO||r>SO},xO=e=>{const n=gi(),o=zo(!1),r=Jp(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},fN);e.on("touchstart",c=>{gN(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),gN(c).each(u=>{n.on(f=>{aH(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},EO=(e,n)=>Tt(e,n.nodeName),cH=(e,n)=>Oe(n)?!0:qe(n)?!EO(e.getBlockElements(),n)&&!Pa(n)&&!ku(e,n):!1,iH=(e,n,o)=>no($6(U.fromDom(o),U.fromDom(n)),r=>EO(e,r.dom)),lH=(e,n)=>{if(Oe(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||EO(e,n.nextSibling)))return!0}return!1},Di=e=>e.dom.create(lr(e),tf(e)),hN=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,C,x=!1;const O=lr(e);if(!u||!qe(u))return;const A=f.nodeName.toLowerCase();if(!r.isValidChild(A,O.toLowerCase())||iH(c,f,u))return;const B=o.getRng(),{startContainer:L,startOffset:z,endContainer:F,endOffset:V}=B,Y=fh(e);let X=f.firstChild;for(;X;)if(qe(X)&&Ip(r,X),cH(r,X)){if(lH(c,X)){C=X,X=X.nextSibling,n.remove(C);continue}b||(b=Di(e),f.insertBefore(b,X),x=!0),C=X,X=X.nextSibling,b.appendChild(C)}else b=null,X=X.nextSibling;x&&Y&&(B.setStart(L,z),B.setEnd(F,V),o.setRng(B),e.nodeChanged())},TO=(e,n,o)=>{const r=U.fromDom(Di(e)),c=bg();Ko(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},ej=e=>{e.on("NodeChange",Ee(hN,e))},uH=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,tj=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},nj=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],tj(e,c,M0(e)));o.content=c}},dH=e=>{const n="contenteditable",o=" "+Re.trim(Pk(e))+" ",r=" "+Re.trim(M0(e))+" ",c=uH(o),u=uH(r),f=$k(e);f.length>0&&e.on("BeforeSetContent",b=>{nj(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let C=b.length;for(;C--;){const x=b[C];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let C=b.length;for(;C--;){const x=b[C];!c(x)&&!u(x)||(f.length>0&&x.attr("data-mce-content")?(x.name="#text",x.type=3,x.raw=!0,x.value=x.attr("data-mce-content")):x.attr(n,null))}})},fE=e=>ka(U.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),pN=(e,n)=>{n.hasAttribute("data-mce-caret")&&(yg(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},kO=(e,n)=>{const o=fE(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),pN(e,o);return}$v(o)&&(pN(e,o),e.undoManager.add())}},bN=e=>{e.on("keyup compositionstart",Ee(kO,e))},_O=an,vN=(e,n,o)=>j5(n,e,o,Tf,tm,_O),mH=(e,n,o)=>G5(n,e,o,u=>Tf(u)||gR(u),u=>tm(u)||hR(u),_O),fH=e=>{const n=e.dom.create(lr(e));return n.innerHTML='<br data-mce-bogus="1">',n},yN=(e,n,o)=>{const r=Vu(e.getBody()),c=Ee(D1,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(de.fromRangeStart(o))){const b=U.fromDom(fH(e));n===1?ri(U.fromDom(u),b):gs(U.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},gH=(e,n)=>{const o=n?Cs.Forwards:Cs.Backwards,r=e.selection.getRng();return vN(o,e,r).orThunk(()=>(yN(e,o,r),N.none()))},gE=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return mH(o,e,r).orThunk(()=>(yN(e,o,r),N.none()))},hH=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return RR(o)?!n:n},CN=(e,n)=>gH(e,hH(e.selection,n)).exists(o=>(vm(e,o),!0)),wN=(e,n)=>gE(e,n).exists(o=>(vm(e,o),!0)),hE=(e,n)=>q5(e,n,n?tm:Tf),pE=(e,n)=>Kx(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(vm(e,o),!0)),pH=e=>Rt(["figcaption"],Qn(e)),SN=(e,n)=>{const o=Ee(Cn,n);return Ga(U.fromDom(e.container()),Aa,o).filter(pH)},bH=(e,n,o)=>n?nE(e.dom,o):cO(e.dom,o),vH=(e,n)=>{const o=U.fromDom(e.getBody()),r=de.fromRangeStart(e.selection.getRng());return SN(r,o).exists(()=>{if(bH(o,n,r)){const u=TO(e,o,n?Ko:wp);return e.selection.setRng(u),!0}else return!1})},xN=(e,n)=>e.selection.isCollapsed()?vH(e,n):!1,yH=(e,n,o)=>{const r=e.selection.getRng(),c=de.fromRangeStart(r);return e.getBody().firstChild===n&&cO(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},CH=(e,n)=>{const o=e.selection.getRng(),r=de.fromRangeStart(o);return e.getBody().lastChild===n&&nE(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},wH=(e,n)=>n?N.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>CH(e,o)).getOr(!1):N.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>N.from(e.dom.getParent(o,"details")).map(r=>yH(e,r,o))).getOr(!1),bE=(e,n)=>wH(e,n),EN={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},TN=e=>Ft(e,n=>({...EN,...n})),SH=e=>Ft(e,n=>({...EN,...n})),kN=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,xH=(e,n)=>Ua(TN(e),o=>kN(o,n)?[o]:[]),EH=(e,n)=>Ua(SH(e),o=>kN(o,n)?[o]:[]),xt=(e,...n)=>()=>e.apply(null,n),y2=(e,n)=>Fo(xH(e,n),o=>o.action()),ds=(e,n)=>sd(EH(e,n),o=>o.action()),_N=(e,n)=>{const o=n?Cs.Forwards:Cs.Backwards,r=e.selection.getRng();return j5(e,o,r,em,nb,ii).exists(c=>(vm(e,c),!0))},ON=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return G5(e,o,r,em,nb,ii).exists(c=>(vm(e,c),!0))},AN=(e,n)=>q5(e,n,n?nb:em),OO=Bl.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Db={...OO,none:e=>OO.none(e)},Vf=(e,n)=>vE(e,n,Xe),vE=(e,n,o)=>Ua($s(e),r=>Ec(r,n)?o(r)?[r]:[]:vE(r,n,o)),RN=(e,n,o=we)=>{if(o(n))return N.none();if(Rt(e,Qn(n)))return N.some(n);const r=c=>Ec(c,"table")||o(c);return Fm(n,e.join(","),r)},AO=(e,n)=>RN(["td","th"],e,n),DO=e=>Vf(e,"th,td"),yE=(e,n)=>Li(e,"table",n),CE=(e,n,o,r,c=Xe)=>{const u=r===1;if(!u&&o<=0)return Db.first(e[0]);if(u&&o>=e.length-1)return Db.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?Db.middle(n,b):CE(e,n,f,r,c)}},C2=(e,n)=>yE(e,n).bind(o=>{const r=DO(o);return Wr(r,u=>Cn(e,u)).map(u=>({index:u,all:r}))}),wE=(e,n,o)=>C2(e,o).fold(()=>Db.none(e),c=>CE(c.all,e,c.index,1,n)),w2=(e,n,o)=>C2(e,o).fold(()=>Db.none(),c=>CE(c.all,e,c.index,-1,n)),S2=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),dl=(e,n)=>Ua(n,o=>{const r=S2(Pd(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),x2=(e,n,o)=>_o(e,(r,c)=>r.fold(()=>N.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return N.some(b<f?c:u)}),N.none()),RO=(e,n,o,r,c)=>{const u=hs(U.fromDom(o),"td,th,caption").map(b=>b.dom),f=ht(dl(e,u),b=>n(b,c));return x2(f,r,c).map(b=>b.cell)},MN=e=>e.bottom,TH=e=>e.top,BN=(e,n)=>e.y<n,kH=(e,n)=>e.y>n,_H=Ee(RO,MN,BN),E2=Ee(RO,TH,kH),OH=(e,n)=>vr(n.getClientRects()).bind(o=>_H(e,o.left,o.top)).bind(o=>tE(iO(o),n)),AH=(e,n)=>cu(n.getClientRects()).bind(o=>E2(e,o.left,o.top)).bind(o=>tE(H5(o),n)),DH=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),RH=e=>e.breakType===bm.Wrap&&e.positions.length===0,MH=e=>e.breakType===bm.Br&&e.positions.length===1,NN=(e,n,o)=>{const r=e(n,o);return RH(r)||!yo(o.getNode())&&MH(r)?!DH(e,n,r):r.breakAt.isNone()},BH=Ee(NN,g2),NH=Ee(NN,kb),PH=(e,n,o)=>{const r=de.fromRangeStart(n);return ff(!e,o).exists(c=>c.isEqual(r))},$H=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return $0()&&PH(n,c,o)?(fm(u,e,o,!n,!1).each(f=>{vm(e,f)}),!0):!1},FH=(e,n,o)=>OH(n,o).orThunk(()=>vr(o.getClientRects()).bind(r=>aO(L5(e,de.before(n)),r.left))).getOr(de.before(n)),IH=(e,n,o)=>AH(n,o).orThunk(()=>vr(o.getClientRects()).bind(r=>aO(If(e,de.after(n)),r.left))).getOr(de.after(n)),PN=(e,n)=>{const o=n.getNode(e);return qa(o)?N.some(o):N.none()},LH=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?ri:gs,c=TO(n,U.fromDom(o),r);vm(n,c)})},MO=(e,n,o)=>{const r=PN(!!n,o),c=n===!1;r.fold(()=>vm(e,o.toRange()),u=>ff(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>vm(e,o.toRange()),f=>LH(n,e,u)))},$N=(e,n,o,r)=>{const c=e.selection.getRng(),u=de.fromRangeStart(c),f=e.getBody();if(!n&&BH(r,u)){const b=FH(f,o,u);return MO(e,n,b),!0}else if(n&&NH(r,u)){const b=IH(f,o,u);return MO(e,n,b),!0}else return!1},BO=(e,n,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),FN=(e,n)=>BO(e,n,$H),NO=(e,n)=>BO(e,n,$N),HH=e=>{const n=Vl.exact(e,0,e,0);return O_(n)},IN=(e,n,o)=>o.fold(N.none,N.none,(r,c)=>v6(c).map(u=>HH(u)),r=>(e.execCommand("mceTableInsertRowAfter"),PO(e,n,r))),PO=(e,n,o)=>IN(e,n,wE(o,$t)),VH=(e,n,o)=>IN(e,n,w2(o,$t)),$O=(e,n)=>{const o=["table","li","dl"],r=U.fromDom(e.getBody()),c=b=>{const C=Qn(b);return Cn(b,r)||Rt(o,C)},u=e.selection.getRng(),f=U.fromDom(n?u.endContainer:u.startContainer);return AO(f,c).map(b=>(yE(b,c).each(O=>{e.model.table.clearSelectedCells(O.dom)}),e.selection.collapse(!n),(n?PO:VH)(e,c,b).each(O=>{e.selection.setRng(O)}),!0)).getOr(!1)},zH=(e,n,o)=>{const r=Ke.os.isMacOS()||Ke.os.isiOS();y2([{keyCode:Ge.RIGHT,action:xt(CN,e,!0)},{keyCode:Ge.LEFT,action:xt(CN,e,!1)},{keyCode:Ge.UP,action:xt(wN,e,!1)},{keyCode:Ge.DOWN,action:xt(wN,e,!0)},...r?[{keyCode:Ge.UP,action:xt(pE,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Ge.DOWN,action:xt(pE,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ge.RIGHT,action:xt(FN,e,!0)},{keyCode:Ge.LEFT,action:xt(FN,e,!1)},{keyCode:Ge.UP,action:xt(NO,e,!1)},{keyCode:Ge.DOWN,action:xt(NO,e,!0)},{keyCode:Ge.UP,action:xt(NO,e,!1)},{keyCode:Ge.UP,action:xt(bE,e,!1)},{keyCode:Ge.DOWN,action:xt(bE,e,!0)},{keyCode:Ge.RIGHT,action:xt(_N,e,!0)},{keyCode:Ge.LEFT,action:xt(_N,e,!1)},{keyCode:Ge.UP,action:xt(ON,e,!1)},{keyCode:Ge.DOWN,action:xt(ON,e,!0)},{keyCode:Ge.RIGHT,action:xt(aE,e,n,!0)},{keyCode:Ge.LEFT,action:xt(aE,e,n,!1)},{keyCode:Ge.RIGHT,ctrlKey:!r,altKey:r,action:xt(zL,e,n)},{keyCode:Ge.LEFT,ctrlKey:!r,altKey:r,action:xt(UL,e,n)},{keyCode:Ge.UP,action:xt(xN,e,!1)},{keyCode:Ge.DOWN,action:xt(xN,e,!0)}],o).each(c=>{o.preventDefault()})},LN=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||zH(e,n,o)})},ml=(e,n)=>({container:e,offset:n}),SE=hn.DOM,xE=e=>n=>e===n?-1:0,UH=e=>n=>e.isBlock(n)||Rt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",EE=(e,n,o)=>{if(Oe(e)&&n>=0)return N.some(ml(e,n));{const r=Nu(SE);return N.from(r.backwards(e,n,xE(e),o)).map(c=>ml(c.container,c.container.data.length))}},WH=(e,n,o)=>{if(Oe(e)&&n>=e.length)return N.some(ml(e,n));{const r=Nu(SE);return N.from(r.forwards(e,n,xE(e),o)).map(c=>ml(c.container,0))}},FO=(e,n,o)=>{if(!Oe(e))return N.none();const r=e.data;if(n>=0&&n<=r.length)return N.some(ml(e,n));{const c=Nu(SE);return N.from(c.backwards(e,n,xE(e),o)).bind(u=>{const f=u.container.data;return FO(u.container,n+f.length,o)})}},IO=(e,n,o)=>{if(!Oe(e))return N.none();const r=e.data;if(n<=r.length)return N.some(ml(e,n));{const c=Nu(SE);return N.from(c.forwards(e,n,xE(e),o)).bind(u=>IO(u.container,n-r.length,o))}},LO=(e,n,o,r,c)=>{const u=Nu(e,UH(e));return N.from(u.backwards(n,o,r,c))},ZH=e=>e.collapsed&&Oe(e.startContainer),HO=e=>Sr(e.toString().replace(/\u00A0/g," ")),HN=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,VO=(e,n)=>e.substring(n.length),jH=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(HN(u))return N.none();if(c===u&&qs(e,o,r,n))break}return N.some(r)},VN=(e,n,o,r=0)=>{if(!ZH(n))return N.none();const c={text:"",offset:0},u=(b,C,x)=>(c.text=x+c.text,c.offset+=C,jH(c.text,c.offset,o).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return LO(e,n.startContainer,n.startOffset,u,f).bind(b=>{const C=n.cloneRange();if(C.setStart(b.container,b.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return N.none();const x=HO(C);return x.lastIndexOf(o)!==0||VO(x,o).length<r?N.none():N.some({text:VO(x,o),range:C,trigger:o})})},zO=(e,n,o,r=0)=>S6(U.fromDom(n.startContainer)).fold(()=>VN(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=HO(u);return N.some({range:u,text:VO(f,o),trigger:o})}),GH=e=>e.nodeType===ig,qH=e=>e.nodeType===gd,zN=e=>{if(GH(e))return ml(e,e.data.length);{const n=e.childNodes;return n.length>0?zN(n[n.length-1]):ml(e,n.length)}},UN=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?UN(o[n],0):o.length>0&&qH(e)&&o.length===n?zN(o[o.length-1]):ml(e,n)},KH=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return LO(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!HN(u)}).isSome()},YH=e=>n=>{const o=UN(n.startContainer,n.startOffset);return!KH(e,o)},XH=(e,n,o)=>sd(o.triggers,r=>zO(e,n,r)),JH=(e,n)=>{const o=n(),r=e.selection.getRng();return XH(e.dom,r,o).bind(c=>QH(e,n,c))},QH=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",C=ht(u.lookupByTrigger(o.trigger),O=>o.text.length>=O.minChars&&O.matches.getOrThunk(()=>YH(e.dom))(o.range,b,o.text));if(C.length===0)return N.none();const x=Promise.all(Ft(C,O=>O.fetch(o.text,O.maxResults,r).then(B=>({matchText:o.text,items:B,columns:O.columns,onAction:O.onAction,highlightOn:O.highlightOn}))));return N.some({lookupData:x,context:o})};var Xl;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Xl||(Xl={}));const Rb=(e,n,o)=>e.stype===Xl.Error?n(e.serror):o(e.svalue),WN=e=>{const n=[],o=[];return he(e,r=>{Rb(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},ZN=(e,n)=>e.stype===Xl.Error?{stype:Xl.Error,serror:n(e.serror)}:e,eV=(e,n)=>e.stype===Xl.Value?{stype:Xl.Value,svalue:n(e.svalue)}:e,jN=(e,n)=>e.stype===Xl.Value?n(e.svalue):e,GN=(e,n)=>e.stype===Xl.Error?n(e.serror):e,qN=e=>({stype:Xl.Value,svalue:e}),KN=e=>({stype:Xl.Error,serror:e}),pr={fromResult:e=>e.fold(KN,qN),toResult:e=>Rb(e,zs.error,zs.value),svalue:qN,partition:WN,serror:KN,bind:jN,bindError:GN,map:eV,mapError:ZN,fold:Rb},T2=e=>Sn(e)&&yr(e).length>100?" removed due to size":JSON.stringify(e,null,2),nV=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Le("... (only showing first ten failures)")}]):e;return Ft(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},TE=(e,n)=>pr.serror([{path:e,getErrorInfo:n}]),oV=(e,n,o)=>TE(e,()=>'Could not find valid *required* value for "'+n+'" in '+T2(o)),YN=(e,n)=>TE(e,()=>'Choice schema did not contain choice key: "'+n+'"'),sV=(e,n,o)=>TE(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+T2(n)),rV=(e,n)=>TE(e,Le(n)),aV=(e,n,o,r)=>Xn(o,r).fold(()=>sV(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),cV=(e,n)=>({extract:(c,u)=>Xn(u,e).fold(()=>YN(c,e),b=>aV(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+yr(n)}),iV=(e,n)=>n,Ds=(e,n)=>sp(e)&&sp(n)?kE(e,n):n,Jl=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)Tt(c,u)&&(o[u]=e(o[u],c[u]))}return o},kE=Jl(Ds),sj=Jl(iV),XN=()=>({tag:"required",process:{}}),lV=e=>({tag:"defaultedThunk",process:e}),JN=e=>lV(Le(e)),uV=()=>({tag:"option",process:{}}),QN=(e,n)=>e.length>0?pr.svalue(kE(n,sj.apply(void 0,e))):pr.svalue(n),$h=e=>k(pr.serror,ap)(e),dV={consolidateObj:(e,n)=>{const o=pr.partition(e);return o.errors.length>0?$h(o.errors):QN(o.values,n)},consolidateArr:e=>{const n=pr.partition(e);return n.errors.length>0?$h(n.errors):pr.svalue(n.values)}},Ql=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),mV=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),eP=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},_E=e=>{const n=(r,c)=>pr.bindError(e(c),u=>rV(r,u)),o=Le("val");return{extract:n,toString:o}},fV=_E(pr.svalue),UO=(e,n,o,r)=>Xn(n,o).fold(()=>oV(e,o,n),r),WO=(e,n,o,r)=>{const c=Xn(e,n).getOrThunk(()=>o(e));return r(c)},gV=(e,n,o)=>o(Xn(e,n)),hV=(e,n,o,r)=>{const c=Xn(e,n).map(u=>u===!0?o(e):u);return r(c)},pV=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>pr.svalue(N.none()),C=>{const x=c.extract(n.concat([r]),C);return pr.map(x,N.some)});switch(e.tag){case"required":return UO(n,o,r,u);case"defaultedThunk":return WO(o,r,e.process,u);case"option":return gV(o,r,f);case"defaultedOptionThunk":return hV(o,r,e.process,f);case"mergeWithThunk":return WO(o,r,Le({}),b=>{const C=kE(e.process(o),b);return u(C)})}},tP=(e,n,o)=>{const r={},c=[];for(const u of o)eP(u,(f,b,C,x)=>{const O=pV(C,e,n,f,x);pr.fold(O,A=>{c.push(...A)},A=>{r[b]=A})},(f,b)=>{r[f]=b(n)});return c.length>0?pr.serror(c):pr.svalue(r)},OE=e=>({extract:(r,c)=>tP(r,c,e),toString:()=>`obj{
`+Ft(e,c=>eP(c,(u,f,b,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),AE=e=>({extract:(r,c)=>{const u=Ft(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return dV.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),ZO=e=>_E(n=>e(n).fold(pr.serror,pr.svalue)),jO=(e,n,o)=>{const r=n.extract([e],o);return pr.mapError(r,c=>({input:o,errors:c}))},bV=(e,n,o)=>pr.toResult(jO(e,n,o)),vV=e=>`Errors: 
`+nV(e.errors).join(`
`)+`

Input object: `+T2(e.input),nP=(e,n)=>cV(e,yn(n,OE)),yV=Le(fV),Mb=(e,n)=>_E(o=>{const r=typeof o;return e(o)?pr.svalue(o):pr.serror(`Expected type: ${n} but got: ${r}`)}),oP=Mb(ba,"number"),DE=Mb(K,"string"),sP=Mb(on,"boolean"),GO=Mb(q,"function"),Fh=Ql,rP=mV,CV=e=>ZO(n=>Rt(e,n)?zs.value(n):zs.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),aP=(e,n)=>Fh(e,e,XN(),n),cP=e=>aP(e,DE),iP=e=>aP(e,GO),lP=(e,n)=>Fh(e,e,XN(),AE(n)),k2=(e,n)=>Fh(e,e,uV(),n),_2=e=>k2(e,DE),uP=e=>k2(e,GO),wV=(e,n)=>Fh(e,e,JN(n),yV()),Bb=(e,n,o)=>Fh(e,e,JN(n),o),dP=(e,n)=>Bb(e,n,oP),RE=(e,n)=>Bb(e,n,DE),qO=(e,n,o)=>Bb(e,n,CV(o)),ME=(e,n)=>Bb(e,n,sP),KO=(e,n)=>Bb(e,n,GO),SV=(e,n,o)=>Bb(e,n,AE(o)),aj=cP("type"),cj=iP("fetch"),mP=iP("onAction"),xV=KO("onSetup",()=>vt),ij=_2("text"),EV=_2("icon"),TV=_2("tooltip"),lj=_2("label"),kV=ME("active",!1),Mo=ME("enabled",!0),BE=ME("primary",!1),Qu=e=>wV("columns",e),Nb=e=>RE("type",e),fP=OE([aj,cP("trigger"),dP("minChars",1),Qu(1),dP("maxResults",10),uP("matches"),cj,mP,SV("highlightOn",[],DE)]),_V=e=>bV("Autocompleter",fP,{trigger:e.ch,...e}),Pb=[Mo,TV,EV,ij,xV],NE=[kV].concat(Pb),gP=[KO("predicate",we),qO("scope","node",["node","editor"]),qO("position","selection",["node","selection","line"])],hP=Pb.concat([Nb("contextformbutton"),BE,mP,rP("original",ho)]),OV=NE.concat([Nb("contextformbutton"),BE,mP,rP("original",ho)]),AV=Pb.concat([Nb("contextformbutton")]),DV=NE.concat([Nb("contextformtogglebutton")]),RV=nP("type",{contextformbutton:hP,contextformtogglebutton:OV});OE([Nb("contextform"),KO("initValue",Le("")),lj,lP("commands",RV),k2("launch",nP("type",{contextformbutton:AV,contextformtogglebutton:DV}))].concat(gP));const MV=e=>{const n=e.ui.registry.getAll().popups,o=yn(n,f=>_V(f).fold(b=>{throw new Error(vV(b))},ho)),r=up(ad(o,f=>f.trigger)),c=_m(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ht(c,b=>b.trigger===f)}},pP=(e,n)=>{const o=Jp(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},BV=e=>{const n=gi(),o=zo(!1),r=n.isSet,c=()=>{r()&&(d7(e),Xt(e),o.set(!1),n.clear())},u=x=>{r()||(fo(e,x.range),n.set({trigger:x.trigger,matchLength:x.text.length}))},f=id(()=>MV(e)),b=x=>n.get().map(O=>zO(e.dom,e.selection.getRng(),O.trigger).bind(A=>QH(e,f,A,x))).getOrThunk(()=>JH(e,f)),C=x=>{b(x).fold(c,O=>{u(O.context),O.lookupData.then(A=>{n.get().map(B=>{const L=O.context;B.trigger===L.trigger&&(L.text.length-B.matchLength>=10?c():(n.set({...B,matchLength:L.text.length}),o.get()?h_(e,{lookupData:A}):(o.set(!0),g_(e,{lookupData:A}))))})})})};e.addCommand("mceAutocompleterReload",(x,O)=>{const A=Sn(O)?O.fetchOptions:{};C(A)}),e.addCommand("mceAutocompleterClose",c),pP(e,{cancelIfNecessary:c,load:C})},NV=ei().browser.isSafari(),bP=e=>yu(U.fromDom(e)),vP=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},O2=(e,n)=>N.from(e.getParent(n.container(),"details")),YO=(e,n)=>O2(e,n).isSome(),PV=(e,n)=>{const o=N.from(e.getParent(n.startContainer,"details")),r=N.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>N.from(e.select("summary",u)[0]));return N.some({startSummary:c,startDetails:o,endDetails:r})}else return N.none()},$V=(e,n)=>Eo(n).exists(o=>o.isEqual(e)),dj=(e,n)=>Na(n).exists(o=>yo(o.getNode())&&ur(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),XO=(e,n)=>n.startSummary.exists(o=>$V(e,o)),FV=(e,n)=>n.startSummary.exists(o=>dj(e,o)),IV=(e,n)=>n.startDetails.exists(o=>ur(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),LV=(e,n,o)=>o.startDetails.exists(r=>Hr(e,n).forall(c=>!r.contains(c.container()))),JO=(e,n)=>{const o=n.getNode();Bs(o)||e.selection.setCursorLocation(o,n.offset())},yP=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Eo(c):Na(c)).each(f=>JO(e,f))}else JO(e,n)},CP=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(C=>n.endDetails.forall(x=>C!==x));return(c||u)&&!(c&&u)||f},wP=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=de.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),C=O2(r,f),x=b&&r.isEmpty(b),O=J(b==null?void 0:b.previousSibling),A=J(b==null?void 0:b.nextSibling);return x&&(n?A:O)&&zu(!n,u,f).exists(z=>YO(r,z)&&!cg(C,O2(r,z)))?!0:zu(n,u,f).fold(we,B=>{const L=O2(r,B);if(YO(r,B)&&!cg(C,L)){if(n||yP(e,B,!1),b&&x){if(n&&O)return!0;if(!n&&A)return!0;yP(e,B,n),e.dom.remove(b)}return!0}else return!1})}else return!1},HV=(e,n,o,r)=>{const u=e.selection.getRng(),f=de.fromRangeStart(u),b=e.getBody();return r==="selection"?CP(u,n):o?FV(f,n)||LV(b,f,n):XO(f,n)||IV(f,n)},mj=(e,n,o)=>PV(e.dom,e.selection.getRng()).fold(()=>wP(e,n,o),r=>HV(e,r,n,o)||wP(e,n,o)),Rr=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=de.fromRangeStart(u);return Op(c)?(o==="selection"&&vP(u,c)||t4(n,f,c)?bP(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:C,anchorOffset:x,focusNode:O,focusOffset:A}=b??{};const B=()=>{Se(C)&&Se(x)&&Se(O)&&Se(A)&&(b==null||b.setBaseAndExtent(C,x,O,A))},L=()=>{C=b==null?void 0:b.anchorNode,x=b==null?void 0:b.anchorOffset,O=b==null?void 0:b.focusNode,A=b==null?void 0:b.focusOffset},z=(V,Y)=>{he(V.childNodes,X=>{Xg(X)&&Y.appendChild(X)})},F=e.dom.create("span",{"data-mce-bogus":"1"});z(c,F),c.appendChild(F),B(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&vP(r.getRng(),F)?bP(c):(e.execCommand(n?"ForwardDelete":"Delete"),L(),z(F,c),B()),e.dom.remove(F)}),!0):!1},Ih=(e,n,o)=>mj(e,n,o)||NV&&Rr(e,n,o)?N.some(vt):N.none(),SP=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:vt,inputType:o},f=Fr(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},A2=SP("input"),PE=SP("beforeinput"),xP=ei(),EP=xP.os,TP=EP.isMacOS()||EP.isiOS(),VV=xP.browser.isFirefox(),zV=(e,n,o)=>{const r=o.keyCode===Ge.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";ds([{keyCode:Ge.BACKSPACE,action:xt(dN,e)},{keyCode:Ge.BACKSPACE,action:xt(gm,e,!1)},{keyCode:Ge.DELETE,action:xt(gm,e,!0)},{keyCode:Ge.BACKSPACE,action:xt(Y3,e,!1)},{keyCode:Ge.DELETE,action:xt(Y3,e,!0)},{keyCode:Ge.BACKSPACE,action:xt(Ab,e,n,!1)},{keyCode:Ge.DELETE,action:xt(Ab,e,n,!0)},{keyCode:Ge.BACKSPACE,action:xt(Gu,e,!1)},{keyCode:Ge.DELETE,action:xt(Gu,e,!0)},{keyCode:Ge.BACKSPACE,action:xt(Ih,e,!1,u)},{keyCode:Ge.DELETE,action:xt(Ih,e,!0,u)},...TP?[{keyCode:Ge.BACKSPACE,altKey:!0,action:xt(Ih,e,!1,f(!0))},{keyCode:Ge.DELETE,altKey:!0,action:xt(Ih,e,!0,f(!0))},{keyCode:Ge.BACKSPACE,metaKey:!0,action:xt(Ih,e,!1,f(!1))}]:[{keyCode:Ge.BACKSPACE,ctrlKey:!0,action:xt(Ih,e,!1,f(!0))},{keyCode:Ge.DELETE,ctrlKey:!0,action:xt(Ih,e,!0,f(!0))}],{keyCode:Ge.BACKSPACE,action:xt(eO,e,!1)},{keyCode:Ge.DELETE,action:xt(eO,e,!0)},{keyCode:Ge.BACKSPACE,action:xt(CO,e,!1)},{keyCode:Ge.DELETE,action:xt(CO,e,!0)},{keyCode:Ge.BACKSPACE,action:xt(j3,e,!1)},{keyCode:Ge.DELETE,action:xt(j3,e,!0)},{keyCode:Ge.BACKSPACE,action:xt(Z3,e,!1)},{keyCode:Ge.DELETE,action:xt(Z3,e,!0)},{keyCode:Ge.BACKSPACE,action:xt(vO,e,!1)},{keyCode:Ge.DELETE,action:xt(vO,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),PE(e,r).isDefaultPrevented()||(b(),A2(e,r))})},eA=(e,n,o)=>y2([{keyCode:Ge.BACKSPACE,action:xt(x5,e)},{keyCode:Ge.DELETE,action:xt(x5,e)},...TP?[{keyCode:Ge.BACKSPACE,altKey:!0,action:xt(v2,e)},{keyCode:Ge.DELETE,altKey:!0,action:xt(v2,e)},...o?[{keyCode:VV?224:91,action:xt(v2,e)}]:[]]:[{keyCode:Ge.BACKSPACE,ctrlKey:!0,action:xt(v2,e)},{keyCode:Ge.DELETE,ctrlKey:!0,action:xt(v2,e)}]],n),tA=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Ge.BACKSPACE,r.isDefaultPrevented()||zV(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||eA(e,r,o),o=!1})},UV=e=>{for(;e;){if(qe(e)||Oe(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},D2=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=UV(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(In),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Fn(n,n);let f=n,b;for(;b=u.current();){if(Oe(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else yo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Ar(e,c)},$E=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},kP=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),WV=e=>kP(e).fold(Le(""),n=>n.nodeName.toUpperCase()),ZV=e=>kP(e).filter(n=>Yo(U.fromDom(n))).isSome(),_P=e=>{e.innerHTML='<br data-mce-bogus="1">'},jV=(e,n,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(C=>{const O={..._C(U.fromDom(n)),...C};r.setStyles(n,O)});const c=N.from(o.class).map(C=>C.split(/\s+/)),u=N.from(n.className).map(C=>ht(C.split(/\s+/),x=>x!==""));ir(c,u,(C,x)=>{const O=ht(x,B=>!Rt(C,B)),A=[...C,...O];r.setAttrib(n,"class",A.join(" "))});const f=["style","class"],b=oo(o,(C,x)=>!Rt(f,x));r.setAttribs(n,b)},fc=(e,n)=>{if(lr(e).toLowerCase()===n.tagName.toLowerCase()){const r=tf(e);jV(e,n,r)}},OP=(e,n,o,r,c=!0,u)=>{const f=e.dom,b=e.schema,C=lr(e),x=o?o.nodeName.toUpperCase():"";let O=n;const A=b.getTextInlineElements();let B;u||x==="TABLE"||x==="HR"?B=f.create(u||C):B=o.cloneNode(!1);let L=B;if(!c)f.setAttrib(B,"style",null),f.setAttrib(B,"class",null);else do if(A[O.nodeName]){if(Us(O)||Pa(O))continue;const z=O.cloneNode(!1);f.setAttrib(z,"id",""),B.hasChildNodes()?(z.appendChild(B.firstChild),B.appendChild(z)):(L=z,B.appendChild(z))}while((O=O.parentNode)&&O!==r);return fc(e,B),_P(L),B},GV=(e,n)=>e.dom.getParent(n,Qs),zf=(e,n,o)=>{let r=n;for(;r&&r!==e&&J(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return Qs(c);r=c}return!1},qV=(e,n,o)=>!n&&o.nodeName.toLowerCase()===lr(e)&&e.dom.isEmpty(o)&&zf(e.getBody(),o,r=>Tt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),AP=(e,n,o)=>{var r,c,u;const f=n(lr(e)),b=GV(e,o);b&&(e.dom.insertAfter(f,b),D2(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},KV=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,YV=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},DP=(e,n)=>{const o=e==null?void 0:e.parentNode;return Se(o)&&o.nodeName===n},RP=e=>Se(e)&&/^(OL|UL|LI)$/.test(e.nodeName),XV=e=>Se(e)&&/^(LI|DT|DD)$/.test(e.nodeName),JV=e=>RP(e)&&RP(e.parentNode),FE=e=>{const n=e.parentNode;return XV(n)?n:e},$b=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!qe(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},MP=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;JV(o)&&(c="LI");let C=n(c);if($b(o,r,!0)&&$b(o,r,!1))if(DP(o,"LI")){const x=FE(o);u.insertAfter(C,x),YV(o)?u.remove(x):u.remove(o)}else u.replace(C,o);else if($b(o,r,!0))DP(o,"LI")?(u.insertAfter(C,FE(o)),C.appendChild(u.doc.createTextNode(" ")),C.appendChild(o)):b.insertBefore(C,o),u.remove(r);else if($b(o,r,!1))u.insertAfter(C,FE(o)),u.remove(r);else{o=FE(o);const x=f.cloneRange();x.setStartAfter(r),x.setEndAfter(o);const O=x.extractContents();c==="LI"&&KV(O,"LI")?(C=O.firstChild,u.insertAfter(O,o)):(u.insertAfter(O,o),u.insertAfter(C,o)),u.remove(r)}D2(e,C)},IE=e=>{he(Dv(U.fromDom(e),Js),n=>{const o=n.dom;o.nodeValue=Sr(o.data)})},QV=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},e9=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),nA=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,oA=(e,n)=>Se(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",t9=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;qe(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||e9(e,u))&&e.remove(u)},LE=(e,n,o)=>Oe(n)?e?o===1&&n.data.charAt(o-1)===tr?0:o:o===n.data.length-1&&n.data.charAt(o)===tr?n.data.length:o:o,n9=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,LE(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,LE(!1,e.endContainer,e.endOffset)),n},BP=e=>{let n=e;do Oe(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},NP=(e,n,o,r,c)=>{var u,f;const b=e.dom,C=(u=$E(b,r))!==null&&u!==void 0?u:b.getRoot();let x=b.getParent(r,b.isBlock);if(!x||!oA(b,x)){if(x=x||C,!x.hasChildNodes()){const L=b.create(n);return fc(e,L),x.appendChild(L),o.setStart(L,0),o.setEnd(L,0),L}let O=r;for(;O&&O.parentNode!==x;)O=O.parentNode;let A;for(;O&&!b.isBlock(O);)A=O,O=O.previousSibling;const B=(f=A==null?void 0:A.parentElement)===null||f===void 0?void 0:f.nodeName;if(A&&B&&e.schema.isValidChild(B,n.toLowerCase())){const L=A.parentNode,z=b.create(n);for(fc(e,z),L.insertBefore(z,A),O=A;O&&!b.isBlock(O);){const F=O.nextSibling;z.appendChild(O),O=F}o.setStart(r,c),o.setEnd(r,c)}}return r},o9=(e,n)=>{n.normalize();const o=n.lastChild;(!o||qe(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},s9=(e,n)=>{const o=fk(e);return cn(n)?!1:K(o)?Rt(Re.explode(o),n.nodeName.toLowerCase()):o},$P={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,C=e.schema,x=C.getNonEmptyElements(),O=e.selection.getRng(),A=lr(e),B=U.fromDom(O.startContainer),L=gu(B,O.startOffset),z=L.exists(Te=>uo(Te)&&!$t(Te)),F=O.collapsed&&z,V=Te=>OP(e,o,Ie,Ce,T0(e),Te),Y=Te=>{const tt=LE(Te,o,r);if(Oe(o)&&(Te?tt>0:tt<o.data.length))return!1;if(o.parentNode===Ie&&f&&!Te||Te&&qe(o)&&o===Ie.firstChild)return!0;if(nA(o,"TABLE")||nA(o,"HR"))return f&&!Te||!f&&Te;const it=new Fn(o,Ie);Oe(o)&&(Te&&tt===0?it.prev():!Te&&tt===o.data.length&&it.next());let Bt;for(;Bt=it.current();){if(qe(Bt)){if(!Bt.getAttribute("data-mce-bogus")){const zt=Bt.nodeName.toLowerCase();if(x[zt]&&zt!=="br")return!1}}else if(Oe(Bt)&&!Su(Bt.data))return!1;Te?it.prev():it.next()}return!0},X=()=>{let Te;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Pe!=="HGROUP"?Te=V(A):Te=V(),s9(e,u)&&oA(b,u)&&b.isEmpty(Ie,void 0,{includeZwsp:!0})?Te=b.split(u,Ie):b.insertAfter(Te,Ie),D2(e,Te),Te};J1(b,O).each(Te=>{O.setStart(Te.startContainer,Te.startOffset),O.setEnd(Te.endContainer,Te.endOffset)}),o=O.startContainer,r=O.startOffset;const Q=!!(n&&n.shiftKey),se=!!(n&&n.ctrlKey);qe(o)&&o.hasChildNodes()&&!F&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&Oe(o)?r=o.data.length:r=0);const Ce=$E(b,o);if(!Ce||QV(e,o))return;Q||(o=NP(e,A,O,o,r));let Ie=b.getParent(o,b.isBlock)||b.getRoot();u=Se(Ie==null?void 0:Ie.parentNode)?b.getParent(Ie.parentNode,b.isBlock):null,c=Ie?Ie.nodeName.toUpperCase():"";const Pe=u?u.nodeName.toUpperCase():"";if(Pe==="LI"&&!se){const Te=u;Ie=Te,u=Te.parentNode,c=Pe}if(qe(u)&&qV(e,Q,Ie))return AP(e,V,Ie);if(/^(LI|DT|DD)$/.test(c)&&qe(u)&&b.isEmpty(Ie)){MP(e,V,u,Ie,A);return}if(!F&&(Ie===e.getBody()||!oA(b,Ie)))return;const ce=Ie.parentNode;let le;if(F)le=V(A),L.fold(()=>{Ko(B,U.fromDom(le))},Te=>{gs(Te,U.fromDom(le))}),e.selection.setCursorLocation(le,0);else if(Um(Ie))le=yg(Ie),b.isEmpty(Ie)&&_P(Ie),fc(e,le),D2(e,le);else if(Y(!1))le=X();else if(Y(!0)&&ce){le=ce.insertBefore(V(),Ie);const Te=vv(U.fromDom(O.startContainer))&&O.collapsed;D2(e,nA(Ie,"HR")||Te?le:Ie)}else{const Te=n9(O).cloneRange();Te.setEndAfter(Ie);const tt=Te.extractContents();IE(tt),BP(tt),le=tt.firstChild,b.insertAfter(tt,Ie),t9(b,x,le),o9(b,Ie),b.isEmpty(Ie)&&_P(Ie),le.normalize(),b.isEmpty(le)?(b.remove(le),X()):(fc(e,le),D2(e,le))}b.setAttrib(le,"id",""),e.dispatch("NewBlock",{newBlock:le})},fakeEventName:"insertParagraph"},HE=(e,n,o)=>{const r=new Fn(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||Oe(c)&&c.length>0)return!0;return!1},FP=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Ar(e,r)},sA=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;J1(r,c).each(L=>{c.setStart(L.startContainer,L.startOffset),c.setEnd(L.endContainer,L.endOffset)});let b=c.startOffset,C=c.startContainer;if(qe(C)&&C.hasChildNodes()){const L=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,L&&Oe(C)?b=C.data.length:b=0}let x=r.getParent(C,r.isBlock);const O=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,A=O?O.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);A==="LI"&&!B&&(x=O),Oe(C)&&b>=C.data.length&&(HE(e.schema,C,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),Yi(r,c,u),FP(e,u,f),e.undoManager.add()},rA=(e,n)=>{const o=U.fromTag("br");gs(U.fromDom(n),o),e.undoManager.add()},IP=(e,n)=>{gj(e.getBody(),n)||ri(U.fromDom(n),U.fromTag("br"));const o=U.fromTag("br");ri(U.fromDom(n),o),FP(e,o.dom,!1),e.undoManager.add()},r9=e=>yo(e.getNode()),gj=(e,n)=>r9(de.after(n))?!0:Hr(e,de.after(n)).map(o=>yo(o.getNode())).getOr(!1),Cm=e=>e&&e.nodeName==="A"&&"href"in e,a9=e=>e.fold(we,Cm,Cm,we),c9=e=>{const n=Ee(ph,e),o=de.fromRangeStart(e.selection.getRng());return Yl(n,e.getBody(),o).filter(a9)},i9=(e,n)=>{n.fold(vt,Ee(rA,e),Ee(IP,e),vt)},cA={insert:(e,n)=>{const o=c9(e);o.isSome()?o.each(Ee(i9,e)):sA(e,n)},fakeEventName:"insertLineBreak"},LP=(e,n)=>kP(e).filter(o=>n.length>0&&Ec(U.fromDom(o),n)).isSome(),HP=e=>LP(e,yw(e)),u9=e=>LP(e,Cw(e)),Gc=Bl.generate([{br:[]},{block:[]},{none:[]}]),d9=(e,n)=>u9(e),iA=e=>(n,o)=>ZV(n)===e,VE=(e,n)=>(o,r)=>WV(o)===e.toUpperCase()===n,m9=e=>{const n=$E(e.dom,e.selection.getStart());return cn(n)},Lh=e=>VE("pre",e),VP=()=>VE("summary",!0),Hh=e=>(n,o)=>Pc(n)===e,zP=(e,n)=>HP(e),R2=(e,n)=>n,f9=e=>{const n=lr(e),o=$E(e.dom,e.selection.getStart());return Se(o)&&e.schema.isValidChild(o.nodeName,n)},g9=e=>{const n=e.selection.getRng(),o=U.fromDom(n.startContainer),c=gu(o,n.startOffset).map(u=>uo(u)&&!$t(u));return n.collapsed&&c.getOr(!0)},La=(e,n)=>(o,r)=>_o(e,(u,f)=>u&&f(o,r),!0)?N.some(n):N.none(),UP=(e,n)=>D5([La([d9],Gc.none()),La([Lh(!0),m9],Gc.none()),La([VP()],Gc.br()),La([Lh(!0),Hh(!1),R2],Gc.br()),La([Lh(!0),Hh(!1)],Gc.block()),La([Lh(!0),Hh(!0),R2],Gc.block()),La([Lh(!0),Hh(!0)],Gc.br()),La([iA(!0),R2],Gc.br()),La([iA(!0)],Gc.block()),La([zP],Gc.br()),La([R2],Gc.br()),La([f9],Gc.block()),La([g9],Gc.block())],[e,!!(n&&n.shiftKey)]).getOr(Gc.none()),zE=(e,n,o)=>{n.selection.isCollapsed()||Ry(n),!(Se(o)&&PE(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Se(o)&&A2(n,e.fakeEventName))},WP=(e,n)=>{const o=()=>zE(cA,e,n),r=()=>zE($P,e,n),c=UP(e,n);switch(E0(e)){case"linebreak":c.fold(o,o,vt);break;case"block":c.fold(r,r,vt);break;case"invert":c.fold(r,o,vt);break;default:c.fold(o,r,vt);break}},lA=ei(),h9=lA.os.isiOS()&&lA.browser.isSafari(),ZP=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),U8(e.undoManager),e.undoManager.transact(()=>{WP(e,n)}))},p9=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Oe(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},b9=e=>{let n=N.none();const o=c=>{n=N.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(vt,f=>c.selection.moveToBookmark(f)),ZP(c,u),n=N.none()};e.on("keydown",c=>{c.keyCode===Ge.ENTER&&(h9&&p9(e.selection.getRng())?o(e):ZP(e,c))}),e.on("keyup",c=>{c.keyCode===Ge.ENTER&&n.each(()=>r(e,c))})},v9=(e,n,o)=>{const r=Ke.os.isMacOS()||Ke.os.isiOS();y2([{keyCode:Ge.END,action:xt(hE,e,!0)},{keyCode:Ge.HOME,action:xt(hE,e,!1)},...r?[]:[{keyCode:Ge.HOME,action:xt(pE,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ge.END,action:xt(pE,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ge.END,action:xt(AN,e,!0)},{keyCode:Ge.HOME,action:xt(AN,e,!1)},{keyCode:Ge.END,action:xt(cE,e,!0,n)},{keyCode:Ge.HOME,action:xt(cE,e,!1,n)}],o).each(c=>{o.preventDefault()})},jP=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||v9(e,n,o)})},y9=e=>{e.on("input",n=>{n.isComposing||K6(e)})},GP=ei(),C9=(e,n,o)=>{y2([{keyCode:Ge.PAGE_UP,action:xt(cE,e,!1,n)},{keyCode:Ge.PAGE_DOWN,action:xt(cE,e,!0,n)}],o)},qP=e=>e.stopImmediatePropagation(),KP=e=>e.keyCode===Ge.PAGE_UP||e.keyCode===Ge.PAGE_DOWN,YP=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",qP,!0):!o&&e.get()&&n.off("NodeChange",qP),e.set(o)},w9=(e,n)=>{if(GP.os.isMacOS())return;const o=zo(!1);e.on("keydown",r=>{KP(r)&&YP(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||C9(e,n,r),KP(r)&&o.get()&&(YP(o,e,!1),e.nodeChanged())})},Vh=(e,n)=>{const o=n.container(),r=n.offset();return Oe(o)?(o.insertData(r,e),N.some(de(o,r+e.length))):Wd(n).map(c=>{const u=U.fromText(e);return n.isAtEnd()?ri(c,u):gs(c,u),de(u.dom,e.length)})},XP=Ee(Vh,In),JP=Ee(Vh," "),QP=(e,n)=>ER(e,n)?XP(n):JP(n),S9=e=>n=>n.fold(o=>ur(e.dom,de.before(o)),o=>Eo(o),o=>Na(o),o=>Hr(e.dom,de.after(o))),x9=(e,n)=>o=>ER(e,o)?XP(n):JP(n),e$=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},t$=(e,n)=>e.isEditable(e.getParent(n,"summary")),E9=e=>{const n=de.fromRangeStart(e.selection.getRng()),o=U.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ee(ph,e),c=de.fromRangeStart(e.selection.getRng());return Yl(r,e.getBody(),c).bind(S9(o)).map(u=>()=>x9(o,n)(u).each(e$(e)))}else return N.none()},T9=e=>{const n=()=>{const o=U.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=de.fromRangeStart(e.selection.getRng());QP(o,r).each(e$(e))};return mn(Ke.browser.isFirefox()&&e.selection.isEditable()&&t$(e.dom,e.selection.getRng().startContainer),n)},hj=(e,n)=>{ds([{keyCode:Ge.SPACEBAR,action:xt(E9,e)},{keyCode:Ge.SPACEBAR,action:xt(T9,e)}],n).each(o=>{n.preventDefault(),PE(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),A2(e,"insertText",{data:" "}))})},UE=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||hj(e,n)})},k9=e=>Fk(e)?[{keyCode:Ge.TAB,action:xt($O,e,!0)},{keyCode:Ge.TAB,shiftKey:!0,action:xt($O,e,!1)}]:[],_9=(e,n)=>{y2([...k9(e)],n).each(o=>{n.preventDefault()})},O9=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||_9(e,n)})},A9=e=>{if(e.addShortcut("Meta+P","","mcePrint"),BV(e),Xu(e))return zo(null);{const n=VL(e);return bN(e),LN(e,n),tA(e,n),b9(e),UE(e),y9(e),O9(e),jP(e,n),w9(e,n),n}};class D9{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!MS(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&$1(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&$1(n)&&(n.selection.getNode().nodeName==="IMG"?wi.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!A0(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=io(r.dom.getParents(n,Xe,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const n$=jn("image"),R9=e=>{const n=e;return N.from(n[n$])},M9=(e,n)=>{const o=e;o[n$]=n},uA=jn("event"),B9=e=>{const n=e;return N.from(n[uA])},WE=e=>n=>{const o=n;o[uA]=e},N9=(e,n)=>WE(n)(e),o$=WE(0),Hn=WE(2),P9=WE(1),F9=(e=>n=>{const o=n;return N.from(o[uA]).exists(r=>r===e)})(0),dA=()=>Object.freeze({length:0,item:e=>null}),ZE=jn("mode"),s$=e=>{const n=e;return N.from(n[ZE])},jE=e=>n=>{const o=n;o[ZE]=e},mA=(e,n)=>jE(n)(e),r$=jE(0),fA=jE(2),a$=jE(1),c$=e=>n=>{const o=n;return N.from(o[ZE]).exists(r=>r===e)},Fb=c$(0),i$=c$(1),Ib=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Fb(e))if(K(o)){if(!Bs(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Fb(e)&&n.remove(o)},clear:()=>{Fb(e)&&n.clear()}}),M2=["none","copy","link","move"],I9=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],gA=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){Rt(M2,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){F9(r)&&Rt(I9,c)&&(o=c)},get items(){return Ib(r,e.items)},get files(){return i$(r)?dA():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{Fb(r)&&(M9(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>i$(r)?"":e.getData(c),setData:(c,u)=>{Fb(r)&&e.setData(c,u)},clearData:c=>{Fb(r)&&e.clearData(c)}};return r$(r),r},Lb=e=>{const n=gA(),o=s$(e);return fA(e),o$(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,R9(e).each(r=>n.setDragImage(r.image,r.x,r.y)),he(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),he(e.files,r=>n.items.add(r)),B9(e).each(r=>{N9(n,r)}),o.each(r=>{mA(e,r),mA(n,r)}),n},L9=e=>{const n=e.getData("text/html");return n===""?N.none():N.some(n)},GE=(e,n)=>e.setData("text/html",n),qE="x-tinymce/html",B2=Le(qE),hA="<!-- "+qE+" -->",H9=e=>hA+e,l$=e=>e.replace(hA,""),pA=e=>e.indexOf(hA)!==-1,V9=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),z9=(e,n)=>{let o="<"+e;const r=ad(n,(c,u)=>u+'="'+Du.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},U9=(e,n,o)=>{const r=e.split(/\n\n/),c=z9(n,o),u="</"+n+">",f=Ft(r,C=>C.split(/\n/).join("<br />")),b=C=>c+C+u;return f.length===1?f[0]:Ft(f,b).join("")},bA="%MCEPASTEBIN%",W9=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},bA);Ke.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},u$=(e,n)=>{const o=e.dom;if(vA(e)){let r;const c=n.get();for(;r=vA(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},vA=e=>e.dom.get("mcepastebin"),Z9=e=>Se(e)&&e.id==="mcepastebin",j9=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=ht(e.getBody().childNodes,Z9);he(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},d$=e=>e===bA,G9=e=>{const n=zo(null);return{create:()=>W9(e,n),remove:()=>u$(e,n),getEl:()=>vA(e),getHtml:()=>j9(e),getLastRng:n.get}},N2=(e,n)=>(Re.each(n,o=>{ru(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),q9=e=>{const n=fi(),o=vb({},n);let r="";const c=n.getVoidElements(),u=Re.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=C=>{const x=C.name,O=C;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let A=C.firstChild;if(A)do b(A);while(A=A.next)}f[x]&&O.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=N2(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},yA=e=>(e=N2(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":In],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),K9=e=>{let n=0;return()=>e+n++},Y9=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Re.hasOwn(o,n)?"image/"+o[n]:"image/"+n},X9=(e,n)=>{const o=vb({sanitize:T1(e)},e.schema);o.addNodeFilter("meta",c=>{Re.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return gh({validate:!0},e.schema).serialize(r)},m$=(e,n)=>({content:e,cancelled:n}),J9=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=kS(e,r,o);return m$(c.node.innerHTML,c.isDefaultPrevented())},Q9=(e,n,o)=>{const r=p_(e,n,o),c=X9(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?J9(e,c,o):m$(c,r.isDefaultPrevented())},f$=(e,n,o)=>Q9(e,n,o),CA=(e,n)=>(e.insertContent(n,{merge:Lw(e),paste:!0}),!0),wA=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),ez=(e,n)=>wA(n)&&no(N0(e),o=>vl(n.toLowerCase(),`.${o.toLowerCase()}`)),tz=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),nz=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),oz=(e,n,o)=>!e.selection.isCollapsed()&&wA(n)?nz(e,n,o):!1,sz=(e,n,o)=>ez(e,n)?tz(e,n,o):!1,g$=(e,n)=>{Re.each([oz,sz,CA],o=>!o(e,n,CA))},rz=(e,n,o)=>{o||!Hw(e)?CA(e,n):g$(e,n)},az=K9("mceclip"),cz=e=>{const n=gA();return GE(n,e),fA(n),n},h$=(e,n,o,r,c)=>{const u=f$(e,n,o);if(!u.cancelled){const f=u.content,b=()=>rz(e,f,r);c?PE(e,"insertFromPaste",{dataTransfer:cz(f)}).isDefaultPrevented()||(b(),A2(e,"insertFromPaste")):b()}},KE=(e,n,o,r)=>{const c=o||pA(n);h$(e,l$(n),c,!1,r)},SA=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Pp(r,Bk(e)),u=U9(c,lr(e),tf(e));h$(e,u,!1,!0,o)},p$=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},eu=(e,n)=>n in e&&e[n].length>0,xA=e=>eu(e,"text/html")||eu(e,"text/plain"),iz=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Se(o)?e.dom.encode(o[1]):void 0},b$=(e,n,o,r)=>{const c=az(),u=ww(e)&&Se(o.name),f=u?iz(e,o.name):c,b=u?o.name:void 0,C=n.create(c,o,r,f,b);return n.add(C),C},v$=(e,n)=>{G4(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,C=b.getByData(u,r),x=C??b$(e,b,f,u);KE(e,`<img src="${x.blobUri()}">`,!1,!0)})},EA=e=>e.type==="paste",lz=e=>Promise.all(Ft(e,n=>IM(n).then(o=>({file:n,uri:o})))),y$=e=>{const n=N0(e);return o=>xs(o.type,"image/")&&no(n,r=>Y9(r)===o.type)},uz=(e,n)=>{const o=n.items?Ua(Zr(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Zr(n.files):[];return ht(o.length>0?o:r,y$(e))},TA=(e,n,o)=>{const r=EA(n)?n.clipboardData:n.dataTransfer;if(x1(e)&&r){const c=uz(e,r);if(c.length>0)return n.preventDefault(),lz(c).then(u=>{o&&e.selection.setRng(o),he(u,f=>{v$(e,f)})}),!0}return!1},dz=e=>{var n,o;return Ke.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},C$=e=>Ge.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,kA=(e,n,o,r,c)=>{let u=yA(o);const f=eu(n,B2())||pA(o),b=!f&&V9(u),C=wA(u);(d$(u)||!u.length||b&&!C)&&(r=!0),(r||C)&&(eu(n,"text/plain")&&b?u=n["text/plain"]:u=q9(u)),!d$(u)&&(r?SA(e,u,c):KE(e,u,f,c))},mz=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{C$(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||dz(u))return;const f=o.get()==="text"||r;r=!1;const b=p$(u.clipboardData);!xA(b)&&TA(e,u,c())||(eu(b,"text/html")?(u.preventDefault(),kA(e,b,b["text/html"],f,!0)):eu(b,"text/plain")&&eu(b,"text/uri-list")?(u.preventDefault(),kA(e,b,b["text/plain"],f,!0)):(n.create(),wi.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),kA(e,b,C,f,!1)},0)))})},fz=e=>{const n=c=>xs(c,"webkit-fake-url"),o=c=>xs(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!x1(e)&&r(f))for(const b of c){const C=b.attr("src");K(C)&&!b.attr("data-mce-object")&&C!==Ke.transparentSrc&&(n(C)||!Nk(e)&&o(C))&&b.remove()}})},P2=(e,n,o)=>{mz(e,n,o),fz(e)},gz=(e,n)=>{n.get()==="text"?(n.set("html"),W1(e,!1)):(n.set("text"),W1(e,!0)),e.focus()},hz=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{gz(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&KE(e,r.html,r.internal,!1),r.text&&SA(e,r.text,!1)})},w$=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(B2(),n),!0}catch{return!1}else return!1},S$=(e,n,o,r)=>{w$(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},x$=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),c.setRng(C),wi.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},E$=e=>({html:H9(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),pz=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),T$=e=>!e.selection.isCollapsed()||pz(e),YE=e=>n=>{!n.isDefaultPrevented()&&T$(e)&&S$(n,E$(e),x$(e),()=>{if(Ke.browser.isChromium()||Ke.browser.isFirefox()){const o=e.selection.getRng();wi.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},k$=e=>n=>{!n.isDefaultPrevented()&&T$(e)&&S$(n,E$(e),x$(e),vt)},_$=e=>{e.on("cut",YE(e)),e.on("copy",k$(e))},O$=(e,n)=>{var o,r;return l.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},bz=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},A$=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},pj=e=>no(e.files,n=>/^image\//.test(n.type)),vz=(e,n,o,r)=>{const c=e.getParent(o,f=>ku(n,f));if(!J(e.getParent(o,"summary")))return!0;if(c&&Tt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!J(f.querySelector(c.nodeName.toLowerCase()))}else return!1},_A=e=>{e.on("input",n=>{const o=r=>J(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=ht(e.dom.select("details"),o);he(r,c=>{yo(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(bg().dom),c.prepend(u)})}})},OA=(e,n)=>{$w(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),x1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&pj(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=O$(e,o);if(cn(r))return;const c=p$(o.dataTransfer),u=eu(c,B2());if((!xA(c)||bz(c))&&TA(e,o,r))return;const f=c[B2()],b=f||c["text/html"]||c["text/plain"],C=vz(e.dom,e.schema,r.startContainer,c),x=n.get();x&&!C||b&&(o.preventDefault(),wi.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||x&&C)&&e.execCommand("Delete"),A$(e,r);const O=yA(b);c["text/html"]?KE(e,O,u,!0):SA(e,O,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{x1(e)&&!n.get()&&(o.preventDefault(),A$(e,O$(e,o))),o.type==="dragend"&&n.set(!1)}),_A(e)},XE=e=>{const n=c=>u=>{c(e,u)},o=Ak(e);q(o)&&e.on("PastePreProcess",n(o));const r=Fw(e);q(r)&&e.on("PastePostProcess",n(r))},yz=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},Cz=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,AA=e=>Re.trim(e).replace(Cz,P1).toLowerCase(),wz=(e,n,o)=>{const r=Rk(e);if(o||r==="all"||!Iw(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,C,x,O)=>{const A=u.parseStyle(u.decode(x)),B={};for(let z=0;z<c.length;z++){const F=A[c[z]];let V=F,Y=u.getStyle(f,c[z],!0);/color/.test(c[z])&&(V=AA(V),Y=AA(Y)),Y!==V&&(B[c[z]]=F)}const L=u.serializeStyle(B,"span");return L?C+' style="'+L+'"'+O:C+O})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,C)=>f+' style="'+b+'"'+C),n},DA=e=>{(Ke.browser.isChromium()||Ke.browser.isSafari())&&yz(e,wz)},D$=e=>{const n=zo(!1),o=zo(Mk(e)?"text":"html"),r=G9(e);DA(e),hz(e,o),XE(e),e.on("PreInit",()=>{_$(e),OA(e,n),P2(e,r,o)})},Sz=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},xz=e=>{e.parser.addNodeFilter("details",n=>{const o=Zw(e);he(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Hg(e);he(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},R$=e=>{Sz(e),xz(e)},Ez=yo,Tz=Oe,kz=e=>an(e.dom),_z=e=>ks(e.dom),M$=e=>n=>Cn(U.fromDom(e),n),B$=(e,n)=>Ga(U.fromDom(e),o=>_z(o)||Aa(o),M$(n)).getOr(U.fromDom(n)).dom,N$=(e,n)=>Ga(U.fromDom(e),kz,M$(n)),RA=(e,n,o)=>{const r=new Fn(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!Ez(f);f=c())Ls(f)&&(u=f);return u},Oz=(e,n)=>{const r=de.fromRangeStart(e).getNode(),c=B$(r,n),u=RA(r,c,!1),f=RA(r,c,!0),b=document.createRange();return N$(u,c).fold(()=>{Tz(u)?b.setStart(u,0):b.setStartBefore(u)},C=>b.setStartBefore(C.dom)),N$(f,c).fold(()=>{Tz(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},C=>b.setEndAfter(C.dom)),b},Az=e=>{const n=Oz(e.selection.getRng(),e.getBody());e.selection.setRng(v4(n))},Dz=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Az(e))})};var Hb;(function(e){e.Before="before",e.After="after"})(Hb||(Hb={}));const Rz=(e,n)=>Math.abs(e.left-n),P$=(e,n)=>Math.abs(e.right-n),bj=(e,n)=>e>=n.top&&e<=n.bottom,Mz=(e,n)=>e.top<n.bottom&&e.bottom>n.top,$$=(e,n)=>{const o=rk(e,n)/Math.min(e.height,n.height);return Mz(e,n)&&o>.5},Bz=(e,n)=>{const o=ht(e,r=>bj(n,r));return sk(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=br(e,f=>$$(f,r));return[c,u]})},MA=(e,n)=>({node:e.node,position:Rz(e,n)<P$(e,n)?Hb.Before:Hb.After}),Nz=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),BA=(e,n,o)=>{const r=O=>Ls(O.node)?N.some(O):qe(O.node)?BA(Zr(O.node.childNodes),n,o):N.none(),c=(O,A)=>{if(O.length>=2){const B=r(O[0]).getOr(O[0]),L=r(O[1]).getOr(O[1]);if(Math.abs(A(B,n,o)-A(L,n,o))<2){if(Oe(B.node))return N.some(B);if(Oe(L.node))return N.some(L)}}return N.none()},u=(O,A)=>{const B=lo(O,(L,z)=>A(L,n,o)-A(z,n,o));return c(B,A).orThunk(()=>sd(B,r))},[f,b]=Bz(z5(e),o),{pass:C,fail:x}=br(b,O=>O.top<o);return u(f,Nz).orThunk(()=>u(x,m0)).orThunk(()=>u(C,m0))},Pz=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>qe(x)&&x.classList.contains("mce-drag-container"),C=ht(u.dom.childNodes,Po(b));return f.fold(()=>BA(C,o,r),x=>{const O=ht(C,A=>A!==x.dom);return BA(O,o,r)}).orThunk(()=>(Cn(u,e)?N.none():mg(u)).bind(O=>c(O,N.some(u))))};return c(n,N.none())},F$=(e,n,o)=>{const r=U.fromDom(e),c=Cl(r),f=U.fromPoint(c,n,o).filter(b=>Cr(r,b)).getOr(r);return Pz(r,f,n,o)},$2=(e,n,o)=>F$(e,n,o).filter(r=>af(r.node)).map(r=>MA(r,n)),NA=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},I$=e=>e.inline?NA(e.getBody()):{left:0,top:0},$z=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Fz=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},L$=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=NA(e.getContentAreaContainer()),r=Fz(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},Iz=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Lz=(e,n)=>Iz(I$(e),$z(e),L$(e,n)),H$=e=>({target:e,srcElement:e}),PA=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...H$(o)}),Hz=(e,n,o)=>{const r=va("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:vt,stopImmediatePropagation:vt,stopPropagation:vt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...H$(n)}},Vz=(e,n)=>{const o=Lb(e);return n==="dragstart"?(o$(o),r$(o)):n==="drop"?(Hn(o),fA(o)):(P9(o),a$(o)),o},zz=(e,n,o,r)=>{const c=Vz(o,e);return Bs(r)?Hz(e,n,c):PA(e,r,n,c)},JE=32,Uz=100,QE=8,F2=16,$A=an,FA=ak($A,ks),IA=(e,n,o)=>$A(o)&&o!==n&&e.isEditable(o.parentElement),Wz=(e,n,o)=>cn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),LA=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},Zz=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},eT=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},HA=eT("left",-JE),V$=eT("left",JE),z$=eT("top",-JE),U$=eT("top",JE),jz=(e,n,o,r,c,u,f,b,C,x,O,A)=>{let B=0,L=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(B=n.pageX+o-c),n.pageY+r>u&&(L=n.pageY+r-u),e.style.width=o-B+"px",e.style.height=r-L+"px";const z=C.clientHeight,F=C.clientWidth,V=f+C.getBoundingClientRect().top,Y=b+C.getBoundingClientRect().left;O.on(X=>{X.intervalId.clear(),X.dragging&&A&&(f+QE>=z?X.intervalId.set(U$(x)):f-QE<=0?X.intervalId.set(z$(x)):b+QE>=F?X.intervalId.set(V$(x)):b-QE<=0?X.intervalId.set(HA(x)):V+F2>=window.innerHeight?X.intervalId.set(U$(window)):V-F2<=0?X.intervalId.set(z$(window)):Y+F2>=window.innerWidth?X.intervalId.set(V$(window)):Y-F2<=0&&X.intervalId.set(HA(window)))})},W$=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Gz=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);W$(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&yu(U.fromDom(o))},qz=e=>e.button===0,Z$=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),Kz=(e,n)=>o=>{if(qz(o)){const r=Fo(n.dom.getParents(o.target),FA).getOr(null);if(Se(r)&&IA(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:gA(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:LA(n,r,r.offsetWidth,r.offsetHeight),intervalId:nk(Uz)})}}},VA=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),$2(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Hb.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},I2=(e,n,o,r,c)=>{n==="dragstart"&&GE(r,e.dom.getOuterHTML(o));const u=zz(n,o,r,c);return e.dispatch(n,u)},Yz=(e,n)=>{const o=Rg((c,u)=>VA(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=I2(n,"dragstart",u.element,u.dataTransfer,c);if(Se(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,C=Z$(u,Lz(n,c));Zz(u.ghost,n.getBody()),jz(u.ghost,C,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Xz=e=>{const n=e.getSel();if(Se(n)){const r=n.getRangeAt(0).startContainer;return Oe(r)?r.parentNode:r}else return null},Jz=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(Wz(n,Xz(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();I2(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{Gz(n.dom,r.element),L9(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}I2(n,"dragend",n.getBody(),r.dataTransfer,o)}}),L2(e)},j$=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>I2(n,"dragend",r.element,r.dataTransfer),c=>I2(n,"dragend",r.element,r.dataTransfer,c))}),L2(e)},Qz=(e,n)=>o=>j$(e,n,N.some(o)),L2=e=>{e.on(n=>{n.intervalId.clear(),W$(n.ghost)}),e.clear()},eU=e=>{const n=gi(),o=hn.DOM,r=document,c=Kz(n,e),u=Yz(n,e),f=Jz(n,e),b=Qz(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",C=>{C.keyCode===Ge.ESC&&j$(n,e,N.none())})},tU=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Rt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&a2(e,"Dropped file type is not supported"))}},o=c=>{Ty(e,c.target)&&n(c)},r=()=>{const c=hn.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];he(C,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{he(C,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{wi.setEditorTimeout(e,r,0)})},nU=e=>{eU(e),Pl(e)&&tU(e)},oU=e=>{const n=Rg(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=G3(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},sU=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(ii(o)){const r=_f(e.getBody(),o),c=an(r)?r:o;e.selection.getNode()!==c&&u2(e,c).each(u=>e.selection.setRng(u))}})})},H2=an,G$=(e,n)=>_f(e.getBody(),n),rU=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=Zk(e,r,o.isBlock,()=>fh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const C=Pe=>Se(Pe)&&o.hasClass(Pe,"mce-offscreen-selection"),x=Pe=>Pe!==r&&(H2(Pe)||ii(Pe))&&o.isChildOf(Pe,r)&&o.isEditable(Pe.parentNode),O=Pe=>{Pe&&n.setRng(Pe)},A=(Pe,ce,le,Te=!0)=>e.dispatch("ShowCaret",{target:ce,direction:Pe,before:le}).isDefaultPrevented()?null:(Te&&n.scrollIntoView(ce,Pe===-1),c.show(le,ce)),B=Pe=>{Pe.hasAttribute("data-mce-caret")&&(yg(Pe),n.scrollIntoView(Pe))},L=()=>{e.on("click",ce=>{o.isEditable(ce.target)||(ce.preventDefault(),e.focus())}),e.on("blur NewBlock",se),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",ce=>{const le=ce.target,Te=G$(e,le);H2(Te)?(ce.preventDefault(),u2(e,Te).each(Q)):x(le)&&u2(e,le).each(Q)},!0),e.on("mousedown",ce=>{const le=ce.target;if(le!==r&&le.nodeName!=="HTML"&&!o.isChildOf(le,r)||!N3(e,ce.clientX,ce.clientY))return;se(),Ie();const Te=G$(e,le);H2(Te)?(ce.preventDefault(),u2(e,Te).each(Q)):$2(r,ce.clientX,ce.clientY).each(tt=>{ce.preventDefault();const it=A(1,tt.node,tt.position===Hb.Before,!1);O(it),qe(Te)?Te.focus():e.getBody().focus()})}),e.on("keypress",ce=>{Ge.modifierPressed(ce)||H2(n.getNode())&&ce.preventDefault()}),e.on("GetSelectionRange",ce=>{let le=ce.range;if(b){if(!b.parentNode){b=null;return}le=le.cloneRange(),le.selectNode(b),ce.range=le}}),e.on("SetSelectionRange",ce=>{ce.range=V(ce.range);const le=Q(ce.range,ce.forward);le&&(ce.range=le)});const Pe=ce=>qe(ce)&&ce.id==="mcepastebin";e.on("AfterSetSelectionRange",ce=>{const le=ce.range,Te=le.startContainer.parentElement;!F(le)&&!Pe(Te)&&Ie(),C(Te)||se()}),nU(e),oU(e),sU(e)},z=Pe=>Da(Pe)||Mp(Pe)||Bp(Pe),F=Pe=>z(Pe.startContainer)||z(Pe.endContainer),V=Pe=>{const ce=e.schema.getVoidElements(),le=o.createRng(),Te=Pe.startContainer,tt=Pe.startOffset,it=Pe.endContainer,Bt=Pe.endOffset;return Tt(ce,Te.nodeName.toLowerCase())?tt===0?le.setStartBefore(Te):le.setStartAfter(Te):le.setStart(Te,tt),Tt(ce,it.nodeName.toLowerCase())?Bt===0?le.setEndBefore(it):le.setEndAfter(it):le.setEnd(it,Bt),le},Y=(Pe,ce)=>{const le=U.fromDom(e.getBody()),Te=e.getDoc(),tt=ka(le,"#"+u).getOrThunk(()=>{const zt=U.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Te);return Zn(zt,"id",u),Ko(le,zt),zt}),it=o.createRng();Lm(tt),$n(tt,[U.fromText(In,Te),U.fromDom(ce),U.fromText(In,Te)]),it.setStart(tt.dom.firstChild,1),it.setEnd(tt.dom.lastChild,0),Jr(tt,{top:o.getPos(Pe,e.getBody()).y+"px"}),Qd(tt);const Bt=n.getSel();return Bt&&(Bt.removeAllRanges(),Bt.addRange(it)),it},X=Pe=>{const ce=Pe.cloneNode(!0),le=e.dispatch("ObjectSelected",{target:Pe,targetClone:ce});if(le.isDefaultPrevented())return null;const Te=Y(Pe,le.targetClone),tt=U.fromDom(Pe);return he(hs(U.fromDom(e.getBody()),`*[${f}]`),it=>{Cn(tt,it)||Lo(it,f)}),o.getAttrib(Pe,f)||Pe.setAttribute(f,"1"),b=Pe,Ie(),Te},Q=(Pe,ce)=>{if(!Pe)return null;if(Pe.collapsed){if(!F(Pe)){const it=ce?1:-1,Bt=Ud(it,r,Pe),zt=Bt.getNode(!ce);if(Se(zt)){if(af(zt))return A(it,zt,ce?!Bt.isAtEnd():!1,!1);if(na(zt)&&an(zt.nextSibling)){const xn=o.createRng();return xn.setStart(zt,0),xn.setEnd(zt,0),xn}}const un=Bt.getNode(ce);if(Se(un)){if(af(un))return A(it,un,ce?!1:!Bt.isAtEnd(),!1);if(na(un)&&an(un.previousSibling)){const xn=o.createRng();return xn.setStart(un,1),xn.setEnd(un,1),xn}}}return null}let le=Pe.startContainer,Te=Pe.startOffset;const tt=Pe.endOffset;if(Oe(le)&&Te===0&&H2(le.parentNode)&&(le=le.parentNode,Te=o.nodeIndex(le),le=le.parentNode),!qe(le))return null;if(tt===Te+1&&le===Pe.endContainer){const it=le.childNodes[Te];if(x(it))return X(it)}return null},se=()=>{b&&b.removeAttribute(f),ka(U.fromDom(e.getBody()),"#"+u).each(Tn),b=null},Ce=()=>{c.destroy(),b=null},Ie=()=>{c.hide()};return Xu(e)||L(),{showCaret:A,showBlockCaretContainer:B,hideFakeCaret:Ie,destroy:Ce}},aU=(e,n)=>{let o=n;for(let r=e.previousSibling;Oe(r);r=r.previousSibling)o+=r.data.length;return o},zA=(e,n,o,r,c)=>{if(Oe(o)&&(r<0||r>o.data.length))return[];const u=c&&Oe(o)?[aU(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},UA=(e,n,o,r,c,u,f=!1)=>{const b=zA(e,n,o,r,f),C=zA(e,n,c,u,f);return{start:b,end:C}},WA=(e,n)=>{const o=n.slice(),r=o.pop();return ba(r)?_o(o,(u,f)=>u.bind(b=>N.from(b.childNodes[f])),N.some(e)).bind(u=>Oe(u)&&(r<0||r>u.data.length)?N.none():N.some({node:u,offset:r})):N.none()},q$=(e,n)=>WA(e,n.start).bind(({node:o,offset:r})=>WA(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),cU=(e,n,o,r=!1)=>UA(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),zh=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,Oe(n.firstChild)&&Su(n.firstChild.data)),zh(e,r,o)}},Uf=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Oe(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Oe(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),zh(e,c,o),c!==u&&zh(e,u,o))},ZA=(e,n)=>N.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),jA=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:fw(r).concat(e.blockPatterns),inlinePatterns:gw(r).concat(e.inlinePatterns)}},K$=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},iU=e=>/^\s[^\s]/.test(e),Y$=(e,n,o)=>{WH(n,0,n).each(c=>{const u=c.container;IO(u,o.start.length,n).each(C=>{const x=e.createRng();x.setStart(u,0),x.setEnd(C.container,C.offset),Uf(e,x,O=>O===n)});const f=U.fromDom(u),b=ea(f);iU(b)&&vu(f,b.slice(1))})},lU=(e,n)=>{const o=e.dom,r=n.pattern,c=q$(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const C=b.get(f);return An(C)&&vr(C).exists(x=>Tt(x,"block"))};return ZA(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{Y$(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{Y$(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},X$=e=>lo(e,(n,o)=>o.start.length-n.start.length),uU=(e,n)=>{const o=X$(e),r=n.replace(In," ");return Fo(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},J$=(e,n,o,r)=>{var c;const u=e.dom,f=lr(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return uU(o.blockPatterns,b).map(C=>Re.trim(b).length===C.start.length?[]:[{pattern:C,range:UA(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},dU=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();he(n,r=>lU(e,r)),e.selection.moveToBookmark(o)},Q$=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),tT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},eF=(e,n,o)=>{const r=q$(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),C=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(Q$(e,n+"-end"),f),start:C.insertBefore(Q$(e,n+"-start"),b)}},tF=(e,n,o)=>{zh(e,e.get(n.prefix+"-end"),o),zh(e,e.get(n.prefix+"-start"),o)},GA=e=>e.start.length===0,mU=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},nF=(e,n,o,r)=>{const c=n.start;return LO(e,r.container,r.offset,mU(c),o).bind(f=>{var b,C;const x=(C=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&C!==void 0?C:-1;if(x!==-1&&f.offset>=x+c.length){const A=e.createRng();return A.setStart(f.container,f.offset-c.length),A.setEnd(f.container,f.offset),N.some(A)}else{const A=f.offset-c.length;return FO(f.container,A,o).map(B=>{const L=e.createRng();return L.setStart(B.container,B.offset),L.setEnd(f.container,f.offset),L}).filter(B=>B.toString()===c).orThunk(()=>nF(e,n,o,ml(f.container,0)))}})},fU=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),N.some(f)}return EE(o,r,c).bind(f=>nF(e,n,c,f).bind(C=>{var x;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return N.none();if(f.offset===0&&((x=C.endContainer.textContent)===null||x===void 0?void 0:x.length)===C.endOffset)return N.none()}return N.some(C)}))},oF=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,C=o.position.offset;return FO(b,C-o.pattern.end.length,n).bind(x=>{const O=UA(c,u,x.container,x.offset,b,C,r);if(GA(f))return N.some({matches:[{pattern:f,startRng:O,endRng:O}],position:x});{const A=Vb(e,o.remainingPatterns,x.container,x.offset,n,r),B=A.getOr({matches:[],position:x}),L=B.position;return fU(c,f,L.container,L.offset,n,A.isNone()).map(F=>{const V=cU(c,u,F,r);return{matches:B.matches.concat([{pattern:f,startRng:V,endRng:O}]),position:ml(F.startContainer,F.startOffset)}})}})},Vb=(e,n,o,r,c,u)=>{const f=e.dom;return EE(o,r,f.getRoot()).bind(b=>{const C=K$(f,c,o,r);for(let x=0;x<n.length;x++){const O=n[x];if(!vl(C,O.end))continue;const A=n.slice();A.splice(x,1);const B=oF(e,c,{pattern:O,remainingPatterns:A,position:b},u);if(B.isNone()&&r>0)return Vb(e,n,o,r-1,c,u);if(B.isSome())return B}return N.none()})},qA=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?he(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},sF=(e,n,o,r)=>{const c=tT(e.dom,o);Uf(e.dom,c,r),qA(e,n,c)},gU=(e,n,o,r,c)=>{const u=e.dom,f=tT(u,r),b=tT(u,o);Uf(u,b,c),Uf(u,f,c);const C={prefix:o.prefix,start:o.end,end:r.start},x=tT(u,C);qA(e,n,x)},hU=(e,n)=>{const o=jn("mce_textpattern"),r=od(n,(c,u)=>{const f=eF(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return od(r,(c,u)=>{const f=r.length-c.length-1,b=GA(u.pattern)?u.endMarker:eF(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},pU=e=>lo(e,(n,o)=>o.end.length-n.end.length),rF=(e,n)=>{const o=Gs(e,r=>no(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},KA=(e,n,o,r,c,u)=>{const f=Vb(e,c.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),b=Vb(e,pU(c.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return rF(f,b)},aF=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=hU(o,n);he(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=C=>C===f;GA(u.pattern)?sF(e,u.pattern,u.endMarker,b):gU(e,u.pattern,u.startMarker,u.endMarker,b),tF(o,u.endMarker,b),tF(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},bU=(e,n)=>{const o=e.selection.getRng();return ZA(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=jA(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=KA(e,r,o.startContainer,u,f,!0),C=J$(e,r,f,!0);return C.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(ve),aF(e,b),dU(e,C);const x=e.selection.getRng(),O=EE(x.startContainer,x.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),O.each(A=>{const B=A.container;B.data.charAt(A.offset-1)===ve&&(B.deleteData(A.offset-1,1),zh(e.dom,B.parentNode,L=>L===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},YA=(e,n)=>{const o=e.selection.getRng();ZA(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=K$(e.dom,r,o.startContainer,c),f=jA(n,r,u),b=KA(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{aF(e,b)})})},V2=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},nT=(e,n)=>V2(e,n,(o,r)=>o===r.keyCode&&!Ge.modifierPressed(r)),wm=(e,n)=>V2(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),oT=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>h1(Vw(e),R0(e)),c=()=>k1(e);e.on("keydown",f=>{if(f.keyCode===13&&!Ge.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&bU(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&YA(e,f)}};e.on("keyup",f=>{nT(o,f)&&u()}),e.on("keypress",f=>{wm(n,f)&&wi.setEditorTimeout(e,u)})},zb=e=>{oT(e)},cF=e=>{const n=Re.each,o=Ge.BACKSPACE,r=Ge.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Ke.browser,C=b.isFirefox(),x=b.isChromium()||b.isSafari(),O=Ke.deviceType.isiPhone()||Ke.deviceType.isiPad(),A=Ke.os.isMacOS()||Ke.os.isiOS(),B=(st,Be)=>{try{e.getDoc().execCommand(st,!1,String(Be))}catch{}},L=st=>st.isDefaultPrevented(),z=()=>{const st=bt=>{const jt=c.create("body"),pn=bt.cloneContents();return jt.appendChild(pn),u.serializer.serialize(jt,{format:"html"})},Be=bt=>{const jt=st(bt),pn=c.createRng();pn.selectNode(e.getBody());const Qe=st(pn);return jt===Qe},De=bt=>{const jt=U.fromDom(bt),pn=Qe=>mg(Qe).exists(Ut=>!$t(Ut));return no(hs(jt,'[contenteditable="true"]'),pn)};e.on("keydown",bt=>{const jt=bt.keyCode;if(!L(bt)&&(jt===r||jt===o)&&e.selection.isEditable()){const pn=e.selection.isCollapsed(),Qe=e.getBody();if(pn&&(!c.isEmpty(Qe)||De(Qe))||!pn&&!Be(e.selection.getRng()))return;bt.preventDefault(),e.setContent(""),Qe.firstChild&&c.isBlock(Qe.firstChild)?e.selection.setCursorLocation(Qe.firstChild,0):e.selection.setCursorLocation(Qe,0),e.nodeChanged()}})},F=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},V=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",st=>{let Be;if(st.target===e.getDoc().documentElement)if(Be=u.getRng(),e.getBody().focus(),st.type==="mousedown"){if(Da(Be.startContainer))return;u.placeCaretAt(st.clientX,st.clientY)}else u.setRng(Be)})},Y=()=>{e.on("keydown",st=>{if(!L(st)&&st.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Be=u.getNode(),De=Be.previousSibling;if(Be.nodeName==="HR"){c.remove(Be),st.preventDefault();return}De&&De.nodeName&&De.nodeName.toLowerCase()==="hr"&&(c.remove(De),st.preventDefault())}}})},X=()=>{Range.prototype.getClientRects||e.on("mousedown",st=>{if(!L(st)&&st.target.nodeName==="HTML"){const Be=e.getBody();Be.blur(),wi.setEditorTimeout(e,()=>{Be.focus()})}})},Q=()=>{const st=Ig(e);e.on("click",Be=>{const De=Be.target;/^(IMG|HR)$/.test(De.nodeName)&&c.isEditable(De.parentNode)&&(Be.preventDefault(),e.selection.select(De),e.nodeChanged()),De.nodeName==="A"&&c.hasClass(De,st)&&De.childNodes.length===0&&c.isEditable(De.parentNode)&&(Be.preventDefault(),u.select(De))})},se=()=>{const st=()=>{const De=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const bt=u.getStart();bt!==e.getBody()&&(c.setAttrib(bt,"style",null),n(De,jt=>{bt.setAttributeNode(jt.cloneNode(!0))}))}},Be=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",De=>{let bt;return!L(De)&&(De.keyCode===8||De.keyCode===46)&&Be()?(bt=st(),e.getDoc().execCommand("delete",!1),bt(),De.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",De=>{if(!L(De)&&Be()){const bt=st();wi.setEditorTimeout(e,()=>{bt()})}})},Ce=()=>{e.on("keydown",st=>{if(!L(st)&&st.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Be=u.getNode().previousSibling;if(Be&&Be.nodeName&&Be.nodeName.toLowerCase()==="table")return st.preventDefault(),!1}return!0})},Ie=()=>{e.on("keydown",st=>{if(L(st)||st.keyCode!==Ge.BACKSPACE)return;let Be=u.getRng();const De=Be.startContainer,bt=Be.startOffset,jt=c.getRoot();let pn=De;if(!(!Be.collapsed||bt!==0)){for(;pn.parentNode&&pn.parentNode.firstChild===pn&&pn.parentNode!==jt;)pn=pn.parentNode;pn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,pn),Be=c.createRng(),Be.setStart(De,0),Be.setEnd(De,0),u.setRng(Be))}})},Pe=()=>{const st=()=>{B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),O0(e)||B("enableObjectResizing",!1)};Nl(e)||e.on("BeforeExecCommand mousedown",st)},ce=()=>{const st=()=>{n(c.select("a:not([data-mce-block])"),Be=>{var De;let bt=Be.parentNode;const jt=c.getRoot();if((bt==null?void 0:bt.lastChild)===Be){for(;bt&&!c.isBlock(bt);){if(((De=bt.parentNode)===null||De===void 0?void 0:De.lastChild)!==bt||bt===jt)return;bt=bt.parentNode}c.add(bt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Be=>{(Be.type==="setcontent"||Be.command==="mceInsertLink")&&st()})},le=()=>{e.on("init",()=>{B("DefaultParagraphSeparator",lr(e))})},Te=st=>{const Be=st.getBody(),De=st.selection.getRng();return De.startContainer===De.endContainer&&De.startContainer===Be&&De.startOffset===0&&De.endOffset===Be.childNodes.length},tt=()=>{e.on("keyup focusin mouseup",st=>{!Ge.modifierPressed(st)&&!Te(e)&&u.normalize()},!0)},it=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Bt=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},zt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",st=>{let Be;st.target.nodeName==="HTML"&&(Be=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Be),e.selection.normalize(),e.nodeChanged())}))},un=()=>{A&&e.on("keydown",st=>{Ge.metaKeyPressed(st)&&!st.shiftKey&&(st.keyCode===37||st.keyCode===39)&&(st.preventDefault(),e.selection.getSel().modify("move",st.keyCode===37?"backward":"forward","lineboundary"))})},xn=()=>{e.on("click",st=>{let Be=st.target;do if(Be.tagName==="A"){st.preventDefault();return}while(Be=Be.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ko=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",st=>{st.preventDefault()})})},Go=()=>{f.addNodeFilter("br",st=>{let Be=st.length;for(;Be--;)st[Be].attr("class")==="Apple-interchange-newline"&&st[Be].remove()})},Ss=vt,Me=()=>{if(!C||e.removed)return!1;const st=e.selection.getSel();return!st||!st.rangeCount||st.rangeCount===0},je=()=>{x&&(V(),Q(),ko(),F(),O&&(Bt(),zt(),xn())),C&&(X(),Pe(),it(),un())},sn=()=>{e.on("drop",st=>{var Be;const De=(Be=st.dataTransfer)===null||Be===void 0?void 0:Be.getData("text/html");K(De)&&/^<img[^>]*>$/.test(De)&&e.dispatch("dragend",new window.DragEvent("dragend",st))})},Ht=()=>{Ie(),z(),Ke.windowsPhone||tt(),x&&(V(),Q(),le(),ko(),Ce(),Go(),O?(Bt(),zt(),xn()):F()),C&&(Y(),X(),se(),Pe(),ce(),it(),un(),Ce(),sn())};return Xu(e)?je():Ht(),{refreshContentEditable:Ss,isHidden:Me}},XA=hn.DOM,vU=(e,n)=>{const o=U.fromDom(e.getBody()),r=SC(Ii(o)),c=U.fromTag("style");Zn(c,"type","text/css"),Ko(c,U.fromText(n)),Ko(r,c),e.on("remove",()=>{Tn(c)})},iF=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,JA=e=>oo(e,n=>Bs(n)===!1),sT=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return JA({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:iF(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},z2=e=>{const n=e.options.get;return JA({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},Wf=e=>{const n=e.options.get;return{...sT(e),...z2(e),...JA({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},Uh=e=>{const n=vb(sT(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let C=b.attr(r);if(C&&!b.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=c.serializeStyle(c.parseStyle(C),b.name),C.length||(C=null),b.attr(u,C),b.attr(r,C)):r==="tabindex"?(b.attr(u,C),b.attr(r,null)):b.attr(u,e.convertURL(C,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),E1(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Ia("br",1))}}),n},lF=e=>{const n=pi(e);n&&wi.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},yU=e=>{const n=e.dom.getRoot();!e.inline&&(!$1(e)||e.selection.getStart(!0)===n)&&Eo(n).each(o=>{const r=o.getNode(),c=qa(r)?Eo(r).getOr(o):o;e.selection.setRng(c.toRange())})},CU=e=>{e.bindPendingEventDelegates(),e.initialized=!0,yf(e),e.focus(!0),yU(e),e.nodeChanged({initial:!0});const n=S1(e);q(n)&&n.call(e,e),lF(e)},uF=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,wU=(e,n,o)=>{const r=[uF(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},dF=e=>{const n=uF(e),o=Fu(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let C="";Re.each(e.contentStyles,x=>{C+=x+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(wU(e,r,o)).then(u).catch(u),b=b1(e);return b&&vU(e,b),f},SU=e=>{const n=e.getDoc(),o=e.getBody();m_(e),Iu(e)||(n.body.spellcheck=!1,XA.setAttrib(o,"spellcheck","false")),e.quirks=cF(e),hy(e);const r=of(e);r!==void 0&&(o.dir=r);const c=D0(e);c&&e.on("BeforeSetContent",u=>{Re.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},mF=e=>{Xu(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},QA=e=>{e.removed!==!0&&(mF(e),CU(e))},xU=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},fF=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(XA.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Nl(e),e._editableRoot=Mw(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&XA.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=Z7(e),e.schema=fi(z2(e)),e.dom=hn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:vk(e),referrerPolicy:nf(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=Uh(e),e.serializer=ql(Wf(e),e),e.selection=D3(e.dom,e.getWin(),e.serializer,e),e.annotator=Ll(e),e.formatter=l5(e),e.undoManager=z3(e),e._nodeChangeDispatcher=new D9(e),e._selectionOverrides=rU(e),xO(e),R$(e),dH(e),Xu(e)||(Dz(e),zb(e));const c=A9(e);mE(e,c),ej(e),Q7(e),D$(e);const u=K8(e);SU(e),u.fold(()=>{const f=xU(e);dF(e).then(()=>{QA(e),f()})},f=>{e.setProgressState(!0),dF(e).then(()=>{f().then(b=>{e.setProgressState(!1),QA(e),IB(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),QA(e),IB(e)})})})},vj=Xe,EU=(e,n,o)=>xp(e,n,vj,o),U2=hn.DOM,TU=(e,n,o,r)=>{const c=U.fromTag("iframe");return r.each(u=>Zn(c,"tabindex",u)),Pi(c,o),Pi(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),pd(c,"tox-edit-area__iframe"),c},kU=e=>{let n=p1(e)+"<html><head>";ef(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=hi(e),r=sc(e),c=e.translate(Nw(e));return Ld(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Ld(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},gF=(e,n)=>{const o=e.translate("Rich Text Area"),r=$i(U.fromDom(e.getElement()),"tabindex").bind(ud),c=TU(e.id,o,oc(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=kU(e),U2.add(n.iframeContainer,c)},_U=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,fF(e)};if(Lg(e)||Ke.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=EU(U.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},hF=(e,n)=>{gF(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=U2.isHidden(n.editorContainer)),e.getElement().style.display="none",U2.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,_U(e)},pF=hn.DOM,eD=(e,n,o)=>{const r=Bh.get(o),c=Bh.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Re.trim(o),r&&Re.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,q(u.init)&&(u.init(e,c),n.push(o))}catch(u){$7(e,o,u)}}},OU=e=>e.replace(/^\-/,""),AU=e=>{const n=[];he(y1(e),o=>{eD(e,n,OU(o))})},DU=e=>{const n=Re.trim(Sw(e)),o=e.ui.registry.getAll().icons,r={...Px.get("default").icons,...Px.get(n).icons};Ze(r,(c,u)=>{Tt(o,u)||e.ui.registry.addIcon(u,c)})},RU=e=>{const n=Xi(e);if(K(n)){const o=$f.get(n);e.theme=o(e,$f.urls[n])||{},q(e.theme.init)&&e.theme.init(e,$f.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},bF=e=>{const n=v1(e),o=Sb.get(n);e.model=o(e,Sb.urls[n])},tD=e=>{const n=e.theme.renderUI;return n?n():BU(e)},vF=e=>{const n=e.getElement(),r=Xi(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},rT=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),MU=e=>{const n=pF.create("div");return pF.insertAfter(n,e),rT(n,n)},BU=e=>{const n=e.getElement();return e.inline?rT(null):MU(n)},yj=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,K(Xi(e))?tD(e):q(Xi(e))?vF(e):BU(e)},NU=(e,n)=>{const o={show:N.from(n.show).getOr(vt),hide:N.from(n.hide).getOr(vt),isEnabled:N.from(n.isEnabled).getOr(Xe),setEnabled:r=>{e.mode.isReadOnly()||N.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},yF=async e=>{e.dispatch("ScriptsLoaded"),DU(e),RU(e),bF(e),AU(e);const n=await yj(e);NU(e,N.from(n.api).getOr({})),e.editorContainer=n.editorContainer,H7(e),e.inline?fF(e):hF(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Wh=hn.DOM,CF=e=>e.charAt(0)==="-",PU=(e,n)=>{const o=Ew(n),r=yk(n);if(!Qa.hasCode(o)&&o!=="en"){const c=Pn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{B7(n,c,o)})}},Cj=(e,n)=>{const o=Xi(e);if(K(o)&&!CF(o)&&!Tt($f.urls,o)){const r=wk(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;$f.load(o,c).catch(()=>{N7(e,c,o)})}},wj=(e,n)=>{const o=v1(e);if(o!=="plugin"&&!Tt(Sb.urls,o)){const r=Ow(e),c=K(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Sb.load(o,c).catch(()=>{P7(e,c,o)})}},wF=e=>N.from(hk(e)).filter(Pn).map(n=>({url:n,name:N.none()})),nD=(e,n,o)=>N.from(n).filter(r=>Pn(r)&&!Px.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),$U=(e,n,o)=>{const r=nD(n,"default",o),c=wF(n).orThunk(()=>nD(n,Sw(n),""));he(Ns([r,c]),u=>{e.add(u.url).catch(()=>{il(n,u.url,u.name.getOrUndefined())})})},FU=(e,n)=>{const o=(r,c)=>{Bh.load(r,c).catch(()=>{Ff(e,c,r)})};Ze(Ok(e),(r,c)=>{o(c,r),e.options.set("plugins",y1(e).concat(c))}),he(y1(e),r=>{r=Re.trim(r),r&&!Bh.urls[r]&&!CF(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},IU=e=>{const n=Xi(e);return!K(n)||Se($f.get(n))},Sj=e=>{const n=v1(e);return Se(Sb.get(n))},xj=(e,n)=>{const o=qi.ScriptLoader,r=()=>{!e.removed&&IU(e)&&Sj(e)&&yF(e)};Cj(e,n),wj(e,n),PU(o,e),$U(o,e,n),FU(e,n),o.loadQueue().then(r,r)},Ej=(e,n)=>Wv.forElement(e,{contentCssCors:Bw(n),referrerPolicy:nf(n)}),LU=e=>{const n=e.id;Qa.setCode(Ew(e));const o=()=>{Wh.unbind(window,"ready",o),e.render()};if(!Gi.Event.domLoaded){Wh.bind(window,"ready",o);return}if(!e.getElement())return;const r=U.fromDom(e.getElement()),c=lg(r);e.on("remove",()=>{au(r.dom.attributes,f=>Lo(r,f.name)),Pi(r,c)}),e.ui.styleSheetLoader=Ej(r,e),Dw(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Wh.getParent(n,"form");u&&(e.formElement=u,Hd(e)&&!kp(e.getElement())&&(Wh.insertAfter(Wh.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Wh.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Tk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=r2(e),e.notificationManager=Mh(e),Ww(e)&&e.on("GetContent",f=>{f.save&&(f.content=Wh.encode(f.content))}),kk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),_k(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),xj(e,e.suffix)},Tj=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),b_(e,n))},HU=e=>e._editableRoot,Zh=(e,n)=>({sections:Le(e),options:Le(n)}),aT=ei().deviceType,W2=aT.isPhone(),SF=aT.isTablet(),Ub=e=>{if(cn(e))return[];{const n=An(e)?e:e.split(/[ ,]/),o=Ft(n,ld);return ht(o,Pn)}},xF=(e,n)=>{const o=rd(n,(r,c)=>Rt(e,c));return Zh(o.t,o.f)},VU=(e,n,o={})=>{const r=e.sections(),c=Xn(r,n).getOr({});return Re.extend({},o,c)},oD=(e,n)=>Tt(e.sections(),n),zU=(e,n)=>oD(e,n)?e.sections()[n]:{},UU=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Xn(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Zf=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Re.extend({},e.external_plugins,r):r},WU=(e,n)=>[...Ub(e),...Ub(n)],EF=(e,n,o,r)=>e&&oD(n,"mobile")?r:o,ZU=(e,n,o,r)=>{const c=Ub(o.forced_plugins),u=Ub(r.plugins),f=zU(n,"mobile"),b=f.plugins?Ub(f.plugins):u,C=EF(e,n,u,b),x=WU(c,C);return Re.extend(r,{forced_plugins:c,plugins:x})},cT=(e,n)=>e&&oD(n,"mobile"),jU=(e,n,o,r,c)=>{var u;const f=e?{mobile:UU((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=xF(["mobile"],kE(f,c)),C=Re.extend(o,r,b.options(),cT(e,b)?VU(b,"mobile"):{},{external_plugins:Zf(r,b.options())});return ZU(e,b,r,C)},GU=(e,n)=>jU(W2||SF,W2,n,e,n),qU=(e,n)=>u7(e,n),TF=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{he("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},KU=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return no(c,u=>Se(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},YU=e=>{TF(e),KU(e)},XU=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ke.os.isMacOS()||Ke.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},sD=(e,n,o)=>{const r=U.fromDom(e.getRoot());return Oy(r,de.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Ay(r,de.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},JU=e=>{if(typeof e!="string"){const n=Re.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},QU=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?sD(r,o.getRng(),n):n},jo=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=JU(n);f3(e,{...r,content:QU(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=vn(e,c.content,r);g3(e,u,c),e.addVisual()})}},eW=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{jo(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{jo(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{jo(e,r)},mceInsertContent:(n,o,r)=>{jo(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Dk(e))}})},tW={"font-size":"size","font-family":"face"},rD=ni("font"),kF=(e,n,o)=>{const r=u=>rs(u,e).orThunk(()=>rD(u)?Xn(tW,e).bind(f=>$i(u,f)):N.none()),c=u=>Cn(U.fromDom(n),u);return Ul(U.fromDom(o),u=>r(u),c)},aD=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),nW=(e,n)=>N.from(hn.DOM.getStyle(n,e,!0)),_F=e=>(n,o)=>N.from(o).map(U.fromDom).filter(Xs).bind(r=>kF(e,n,r.dom).or(nW(e,r.dom))).getOr(""),oW=_F("font-size"),sW=k(aD,_F("font-family")),rW=e=>Eo(e.getBody()).bind(n=>{const o=n.container();return N.from(Oe(o)?o.parentNode:o)}),aW=e=>N.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),cW=(e,n)=>aW(e).orThunk(Ee(rW,e)).map(U.fromDom).filter(Xs).bind(n),cD=(e,n)=>cW(e,No(N.some,n)),jh=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=B0(e),c=Uw(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},tu=e=>{const n=e.split(/\s*,\s*/);return Ft(n,o=>o.indexOf(" ")!==-1&&!(xs(o,'"')||xs(o,"'"))?`'${o}'`:o).join(",")},iW=(e,n)=>{const o=jh(e,n);e.formatter.toggle("fontname",{value:tu(o)}),e.nodeChanged()},lW=e=>cD(e,n=>sW(e.getBody(),n.dom)).getOr(""),uW=(e,n)=>{e.formatter.toggle("fontsize",{value:jh(e,n)}),e.nodeChanged()},dW=e=>cD(e,n=>oW(e.getBody(),n.dom)).getOr(""),mW=e=>cD(e,n=>{const o=U.fromDom(e.getBody()),r=Ul(n,u=>rs(u,"line-height"),Ee(Cn,o)),c=()=>{const u=parseFloat(ss(n,"line-height")),f=parseFloat(ss(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),fW=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},gW=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{iW(e,c)},FontSize:(o,r,c)=>{uW(e,c)},LineHeight:(o,r,c)=>{fW(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(K(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},hW=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>lW(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>dW(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>mW(e))},pW=e=>{gW(e),hW(e)},kj=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},bW=e=>{e.editorCommands.addCommands({Indent:()=>{uN(e)},Outdent:()=>{sH(e)}}),e.editorCommands.addCommands({Outdent:()=>dE(e)},"state")},vW=e=>{const n=(o,r,c)=>{const u=K(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Sn(u)&&K(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},yW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},CW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},wW=e=>{yW(e),CW(e)},SW=(e,n,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return N.from(f).map(U.fromDom)},xW=(e,n)=>{const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=$E(o,u);if(!f||!f.isContentEditable)return;const b=n?gs:ri,C=lr(e);SW(e,c,f,u).each(x=>{const O=OP(e,u,x.dom,f,!1,C);b(x,U.fromDom(O)),e.selection.setCursorLocation(O,0),e.dispatch("NewBlock",{newBlock:O}),A2(e,"insertParagraph")})},EW=e=>xW(e,!0),TW=e=>xW(e,!1),kW=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{EW(e)},InsertNewBlockAfter:()=>{TW(e)}})},_W=e=>{e.editorCommands.addCommands({insertParagraph:()=>{zE($P,e)},mceInsertNewLine:(n,o,r)=>{WP(e,r)},InsertLineBreak:(n,o,r)=>{zE(cA,e)}})},OW=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>qe(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ks);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},AW=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{m6(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},DW=e=>{YU(e),XU(e),kj(e),OW(e),eW(e),vW(e),bW(e),kW(e),_W(e),wW(e),pW(e),AW(e)},RW=["toggleview"],OF=e=>Rt(RW,e.toLowerCase());class AF{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():VD(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return q(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!OF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return q(r)?r(o):!1}queryCommandValue(n){if(!OF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return q(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Ze(n,(c,u)=>{he(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Gh="data-mce-contenteditable",MW=(e,n,o)=>{fu(e,n)&&!o?bd(e,n):o&&pd(e,n)},iD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},iT=(e,n)=>{e.dom.contentEditable=n?"true":"false"},BW=e=>{he(hs(e,'*[contenteditable="true"]'),n=>{Zn(n,Gh,"true"),iT(n,!1)})},NW=e=>{he(hs(e,`*[${Gh}="true"]`),n=>{Lo(n,Gh),iT(n,!0)})},DF=e=>{N.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},PW=e=>{e.selection.setRng(e.selection.getRng())},$W=(e,n)=>{const o=U.fromDom(e.getBody());MW(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),DF(e),e.readonly=!0,iT(o,!1),BW(o)):(e.readonly=!1,e.hasEditableRoot()&&iT(o,!0),NW(o),iD(e,"StyleWithCSS",!1),iD(e,"enableInlineTableEditing",!1),iD(e,"enableObjectResizing",!1),HS(e)&&e.focus(),PW(e),e.nodeChanged())},qh=e=>e.readonly,RF=e=>{e.parser.addAttributeFilter("contenteditable",n=>{qh(e)&&he(n,o=>{o.attr(Gh,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Gh,n=>{qh(e)&&he(n,o=>{o.attr("contenteditable",o.attr(Gh))})}),e.serializer.addTempAttr(Gh)},FW=e=>{e.serializer?RF(e):e.on("PreInit",()=>{RF(e)})},IW=e=>e.type==="click",LW=["copy"],HW=e=>Rt(LW,e.type),MF=(e,n)=>Li(n,"a",r=>Cn(r,U.fromDom(e.getBody()))).bind(r=>$i(r,"href")),VW=(e,n)=>{if(IW(n)&&!Ge.metaKeyPressed(n)){const o=U.fromDom(n.target);MF(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Am(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else HW(n)&&e.dispatch(n.type,n)},zW=e=>{e.on("ShowCaret",n=>{qh(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{qh(e)&&n.preventDefault()})},UW=Re.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class lD{static isNative(n){return!!UW[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||we}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=Kp(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),c.isImmediatePropagationStopped())return c;if(C.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=we),o){const u={func:o,removed:!1};c&&Re.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const C=f[b];let x=this.bindings[C];x||(x=[],this.toggleEvent(C,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[C]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return Ze(this.bindings,(b,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const b=br(f,C=>C.func===o);f=b.fail,this.bindings[u]=f,he(b.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Ze(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Z2=e=>(e._eventDispatcher||(e._eventDispatcher=new lD({scope:e,toggleEvent:(n,o)=>{lD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),uD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Kp(e.toLowerCase(),n??{},r);const c=Z2(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return Z2(this).on(e,n,o)},off(e,n){return Z2(this).off(e,n)},once(e,n){return Z2(this).once(e,n)},hasEventListeners(e){return Z2(this).has(e)}},lT=hn.DOM;let Kh;const j2=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=cs(e);return o?(e.eventRoot||(e.eventRoot=lT.select(o)[0]),e.eventRoot):e.getBody()},_j=e=>!e.hidden&&!qh(e),dD=(e,n,o)=>{_j(e)?e.dispatch(n,o):qh(e)&&VW(e,o)},BF=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=j2(e,n);if(cs(e)){if(Kh||(Kh={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Kh&&(Ze(Kh,(c,u)=>{e.dom.unbind(j2(e,u))}),Kh=null)})),Kh[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const C=f[b].getBody();(C===u||lT.isChildOf(u,C))&&dD(f[b],n,c)}};Kh[n]=r,lT.bind(o,n,r)}else{const r=c=>{dD(e,n,c)};lT.bind(o,n,r),e.delegates[n]=r}},mD={...uD,bindPendingEventDelegates(){const e=this;Re.each(e._pendingNativeEvents,n=>{BF(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?BF(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(j2(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Ze(e.delegates,(r,c)=>{e.dom.unbind(j2(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},WW=e=>K(e)?{value:e.split(/[ ,]/),valid:!0}:Dn(e,K)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ZW=e=>{const n=(()=>{switch(e){case"array":return An;case"boolean":return on;case"function":return q;case"number":return ba;case"object":return Sn;case"string":return K;case"string[]":return WW;case"object[]":return o=>Dn(o,Sn);case"regexp":return o=>ru(o,RegExp);default:return Xe}})();return o=>fD(o,n,`The value must be a ${e}.`)},jW=e=>K(e.processor),NF=(e,n)=>{const o=wa(n.message)?"":`. ${n.message}`;return e+o},PF=e=>e.valid,fD=(e,n,o="")=>{const r=n(e);return on(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},gD=(e,n,o)=>{if(!Bs(n)){const r=fD(n,o);if(PF(r))return r.value;console.error(NF(`Invalid default value passed for the "${e}" option`,r))}},hD=(e,n)=>{const o={},r={},c=(A,B,L)=>{const z=fD(B,L);return PF(z)?(r[A]=z.value,!0):(console.warn(NF(`Invalid value passed for the ${A} option`,z)),!1)},u=(A,B)=>{const L=jW(B)?ZW(B.processor):B.processor,z=gD(A,B.default,L);o[A]={...B,default:z,processor:L},Xn(r,A).orThunk(()=>Xn(n,A)).each(V=>c(A,V,L))},f=A=>Tt(o,A);return{register:u,isRegistered:f,get:A=>Xn(r,A).orThunk(()=>Xn(o,A).map(B=>B.default)).getOrUndefined(),set:(A,B)=>{if(f(A)){const L=o[A];return L.immutable?(console.error(`"${A}" is an immutable option and cannot be updated`),!1):c(A,B,L.processor)}else return console.warn(`"${A}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:A=>{const B=f(A);return B&&delete r[A],B},isSet:A=>Tt(r,A)}},GW=["design","readonly"],pD=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&$W(e,u.editorReadOnly),n.set(r),u_(e,r)},qW=(e,n,o,r)=>{if(r!==o.get()){if(!Tt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?pD(e,o,n,r):e.on("init",()=>pD(e,o,n,r))}},KW=(e,n,o)=>{if(Rt(GW,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},YW=e=>{const n=zo("design"),o=zo({design:{activate:vt,deactivate:vt,editorReadOnly:!1},readonly:{activate:vt,deactivate:vt,editorReadOnly:!0}});return FW(e),zW(e),{isReadOnly:()=>qh(e),set:r=>qW(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(KW(o.get(),r,c))}}},bD=Re.each,vD=Re.explode,XW={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},$F=Re.makeMap("alt,ctrl,shift,meta,access"),JW=e=>e in $F,QW=e=>{const n={},o=Ke.os.isMacOS()||Ke.os.isiOS();bD(vD(e.toLowerCase(),"+"),u=>{JW(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=XW[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in $F)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class FF{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(bD(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return bD(vD(Re.trim(n)),b=>{const C=u.createShortcut(b,o,f,c);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Re.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Re.map(vD(n,">"),QW);return u[u.length-1]=Re.extend(u[u.length-1],{func:r,scope:c||this.editor}),Re.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const yD=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},C=(O,A)=>(B,L)=>{O[B.toLowerCase()]={...L,type:A}},x=(O,A)=>r[O.toLowerCase()]=A;return{addButton:C(e,"button"),addGroupToolbarButton:C(e,"grouptoolbarbutton"),addToggleButton:C(e,"togglebutton"),addMenuButton:C(e,"menubutton"),addSplitButton:C(e,"splitbutton"),addMenuItem:C(n,"menuitem"),addNestedMenuItem:C(n,"nestedmenuitem"),addToggleMenuItem:C(n,"togglemenuitem"),addAutocompleter:C(o,"autocompleter"),addContextMenu:C(c,"contextmenu"),addContextToolbar:C(u,"contexttoolbar"),addContextForm:C(u,"contextform"),addSidebar:C(f,"sidebar"),addView:C(b,"views"),addIcon:x,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},eZ=()=>{const e=yD();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Yh=hn.DOM,IF=Re.extend,tZ=Re.each;class uT{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,IF(this,mD);const c=this;this.id=n,this.hidden=!1;const u=GU(r.defaultOptions,o);this.options=hD(c,u),vw(c);const f=this.options.get;f("deprecation_warnings")&&A7(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const x=nf(c);x&&(qi.ScriptLoader._setReferrerPolicy(x),hn.DOM.styleSheetLoader._setReferrerPolicy(x));const O=Bw(c);Se(O)&&hn.DOM.styleSheetLoader._setContentCssCors(O),xo.languageLoad=f("language_load"),xo.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new jl(ef(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Dw(c),this.hasVisual=C1(c),this.shortcuts=new FF(this),this.editorCommands=new AF(this),DW(this);const A=f("cache_suffix");A&&(Ke.cacheSuffix=A.replace(/^[\?\&]+/,"")),this.ui={registry:eZ(),styleSheetLoader:void 0,show:vt,hide:vt,setEnabled:vt,isEnabled:Xe},this.mode=YW(c),r.dispatch("SetupEditor",{editor:this});const B=Ji(c);q(B)&&B.call(c,c)}render(){LU(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return fh(this)}translate(n){return Qa.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Se(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:Xe,default:o})),!c.isSet(n)&&!Bs(o)?o:c.get(n)}hasPlugin(n,o){return Rt(y1(this),n)?o?Bh.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Yh.show(n.getContainer()),Yh.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Yh.hide(n.getContainer()),Yh.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=kp(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,kp(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Yh.getParent(o.id,"form");b&&tZ(b.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Bx(this,n,o)}getContent(n){return y7(this,n)}insertContent(n,o){o&&(n=IF({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Bx(this,this.startContent,{format:"raw"}):Bx(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Yh.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Yh.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=Pw(c);return q(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||Sn(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){qU(this,n)}setEditableRoot(n){Tj(this,n)}hasEditableRoot(){return HU(this)}remove(){B3(this)}destroy(n){M7(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Xh=hn.DOM,ed=Re.each;let nZ=!1,dT,gc=[];const mT=e=>{const n=e.type;ed(Sm.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},LF=e=>{if(e!==nZ){const n=hn.DOM;e?(n.bind(window,"resize",mT),n.bind(window,"scroll",mT)):(n.unbind(window,"resize",mT),n.unbind(window,"scroll",mT)),nZ=e}},oZ=e=>{const n=gc;return gc=ht(gc,o=>e!==o),Sm.activeEditor===e&&(Sm.activeEditor=gc.length>0?gc[0]:null),Sm.focusedEditor===e&&(Sm.focusedEditor=null),n.length!==gc.length},sZ=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(oZ(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},qc=document.compatMode!=="CSS1Compat",Sm={...uD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.0",releaseDate:"2023-08-30",i18n:Qa,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=jl.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new jl(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new jl(e.baseURL),e.suffix=o,s6(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Ze(r,(c,u)=>{xo.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Re.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(O,A)=>O.inline&&A.tagName.toLowerCase()in r,u=O=>{let A=O.id;return A||(A=Xn(O,"name").filter(B=>!Xh.get(B)).getOrThunk(Xh.uniqueId),O.setAttribute("id",A)),A},f=O=>{const A=e[O];if(A)return A.apply(n,[])},b=O=>Ke.browser.isIE()||Ke.browser.isEdge()?(Hx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):qc?(Hx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):K(O.selector)?Xh.select(O.selector):Se(O.target)?[O.target]:[];let C=O=>{o=O};const x=()=>{let O=0;const A=[];let B;const L=(z,F,V)=>{const Y=new uT(z,F,n);A.push(Y),Y.on("init",()=>{++O===B.length&&C(A)}),Y.targetElm=Y.targetElm||V,Y.render()};Xh.unbind(window,"ready",x),f("onpageload"),B=ip(b(e)),Re.each(B,z=>{sZ(n.get(z.id))}),B=Re.grep(B,z=>!n.get(z.id)),B.length===0?C([]):ed(B,z=>{c(e,z)?Hx("Could not initialize inline editor on invalid inline target element",z):L(u(z),e,z)})};return Xh.bind(window,"ready",x),new Promise(O=>{o?O(o):C=A=>{O(A)}})},get(e){return arguments.length===0?gc.slice(0):K(e)?Fo(gc,n=>n.id===e).getOr(null):ba(e)&&gc[e]?gc[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&gc.push(e),LF(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),dT||(dT=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",dT))),e},createEditor(e,n){return this.add(new uT(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=gc.length-1;r>=0;r--)n.remove(gc[r]);return}if(K(e)){ed(Xh.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,J(n.get(o.id))?null:(oZ(o)&&n.dispatch("RemoveEditor",{editor:o}),gc.length===0&&window.removeEventListener("beforeunload",dT),o.remove(),LF(gc.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Sn(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new uT(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{ed(gc,e=>{e.save()})},addI18n:(e,n)=>{Qa.add(e,n)},translate:e=>Qa.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new jl(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new jl(this.baseURL)}};Sm.setup();const rZ=(()=>{const e=gi(),n=u=>({items:u,types:yr(u),getType:f=>Xn(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),HF=Math.min,Wb=Math.max,fT=Math.round,VF=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,C=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=C),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=fT(C/2)),x[1]==="c"&&(r+=fT(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=fT(f/2)),x[4]==="c"&&(r-=fT(u/2)),Zb(r,c,u,f)},aZ=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=VF(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},zF=(e,n,o)=>Zb(e.x-n,e.y-o,e.w+n*2,e.h+o*2),cZ=(e,n)=>{const o=Wb(e.x,n.x),r=Wb(e.y,n.y),c=HF(e.x+e.w,n.x+n.w),u=HF(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:Zb(o,r,c-o,u-r)},iZ=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,C=n.y+n.h,x=Wb(0,n.x-r),O=Wb(0,n.y-c),A=Wb(0,u-b),B=Wb(0,f-C);return r+=x,c+=O,o&&(u+=x,f+=O,r-=A,c-=B),u-=A,f-=B,Zb(r,c,u-r,f-c)},Zb=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),lZ={inflate:zF,relativePosition:VF,findBestRelativePosition:aZ,intersect:cZ,clamp:iZ,create:Zb,fromClientRect:e=>Zb(e.left,e.top,e.width,e.height)},uZ=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...O)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),x.apply(null,O))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},jb=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,C=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const x=new Promise((O,A)=>{const B=uZ(O,A);n[u]=B.resolve,qi.ScriptLoader.loadScript(f).then(()=>B.start(C),()=>B.reject(b))});return e[u]=x,x}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),dZ=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let G2;try{const e="__storage_test__";G2=window.localStorage,G2.setItem(e,e),G2.removeItem(e)}catch{G2=dZ()}var mZ=G2;const fZ={geom:{Rect:lZ},util:{Delay:wi,Tools:Re,VK:Ge,URI:jl,EventDispatcher:lD,Observable:uD,I18n:Qa,LocalStorage:mZ,ImageUploader:s5},dom:{EventUtils:Gi,TreeWalker:Fn,TextSeeker:Nu,DOMUtils:hn,ScriptLoader:qi,RangeUtils:l,Serializer:ql,StyleSheetLoader:Uv,ControlSelection:by,BookmarkManager:vf,Selection:D3,Event:Gi.Event},html:{Styles:qp,Entities:Du,Node:Ia,Schema:fi,DomParser:vb,Writer:H_,Serializer:gh},Env:Ke,AddOnManager:xo,Annotator:Ll,Formatter:l5,UndoManager:z3,EditorCommands:AF,WindowManager:r2,NotificationManager:Mh,EditorObservable:mD,Shortcuts:FF,Editor:uT,FocusManager:zD,EditorManager:Sm,DOM:hn.DOM,ScriptLoader:qi.ScriptLoader,PluginManager:Bh,ThemeManager:$f,ModelManager:Sb,IconManager:Px,Resource:jb,FakeClipboard:rZ,trim:Re.trim,isArray:Re.isArray,is:Re.is,toArray:Re.toArray,makeMap:Re.makeMap,each:Re.each,map:Re.map,grep:Re.grep,inArray:Re.inArray,extend:Re.extend,walk:Re.walk,resolve:Re.resolve,explode:Re.explode,_addCacheSuffix:Re._addCacheSuffix},CD=Re.extend(Sm,fZ),gT=e=>{try{ET.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(CD),gT(CD)})()})(mG);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const ET=Object.getPrototypeOf,Jb=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},TT=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Jb(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Jf=t=>s=>TT(s)===t,Qf=t=>s=>typeof s===t,nd=t=>s=>t===s,eg=(t,s)=>vc(t)&&Jb(t,s,(a,i)=>ET(a)===i),En=Jf("string"),vc=Jf("object"),rC=t=>eg(t,Object),Ri=Jf("array"),su=nd(null),hl=Qf("boolean"),Ur=nd(void 0),Mi=t=>t==null,ar=t=>!Mi(t),gt=Qf("function"),Bi=Qf("number"),ru=(t,s)=>{if(Ri(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},K=()=>{},Sn=t=>()=>t(),sp=(t,s)=>(...a)=>t(s.apply(null,a)),An=(t,s)=>a=>t(s(a)),J=t=>()=>t,on=t=>t,Bs=(t,s)=>t===s;function cn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const Se=t=>s=>!t(s),q=t=>()=>{throw new Error(t)},ba=t=>t(),Dn=J(!1),vt=J(!0);class k{constructor(s,a){this.tag=s,this.value=a}static some(s){return new k(!0,s)}static none(){return k.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?k.some(s(this.value)):k.none()}bind(s){return this.tag?s(this.value):k.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:k.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return ar(s)?k.some(s):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const No=Array.prototype.slice,Le=Array.prototype.indexOf,ho=Array.prototype.push,Ot=(t,s)=>Le.call(t,s),Ee=(t,s)=>{const a=Ot(t,s);return a===-1?k.none():k.some(a)},Po=(t,s)=>Ot(t,s)>-1,va=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},$o=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},Br=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=No.call(t,i,i+s);a.push(d)}return a},we=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},Xe=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},N=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},km=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:i).push(p)}return{pass:a,fail:i}},Wn=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},ts=(t,s,a)=>(N(t,(i,d)=>{a=s(a,i,d)}),a),Yn=(t,s,a)=>(Xe(t,(i,d)=>{a=s(a,i,d)}),a),kT=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(a(g,i))break}return k.none()},Rt=(t,s)=>kT(t,s,Dn),no=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return k.some(a)}return k.none()},Ft=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Ri(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);ho.apply(s,t[a])}return s},he=(t,s)=>Ft(we(t,s)),au=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},br=t=>{const s=No.call(t,0);return s.reverse(),s},ht=(t,s)=>Wn(t,a=>!Po(s,a)),od=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},_o=t=>[t],rp=(t,s)=>{const a=No.call(t,0);return a.sort(s),a},Fo=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),Wr=t=>Fo(t,0),ap=t=>Fo(t,t.length-1),Ua=gt(Array.from)?Array.from:t=>No.call(t),Gs=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return k.none()},io=Object.keys,cp=Object.hasOwnProperty,ms=(t,s)=>{const a=io(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];s(p,g)}},lo=(t,s)=>tg(t,(a,i)=>({k:i,v:s(a,i)})),tg=(t,s)=>{const a={};return ms(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},vr=t=>(s,a)=>{t[a]=s},cu=(t,s,a,i)=>{ms(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},Zr=(t,s)=>{const a={},i={};return cu(t,s,vr(a),vr(i)),{t:a,f:i}},sd=(t,s)=>{const a={};return cu(t,s,vr(a),K),a},ip=(t,s)=>{const a=[];return ms(t,(i,d)=>{a.push(s(i,d))}),a},yr=(t,s)=>{const a=io(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];if(s(p,g,t))return k.some(p)}return k.none()},Qb=t=>ip(t,on),Ze=(t,s)=>yn(t,s)?k.from(t[s]):k.none(),yn=(t,s)=>cp.call(t,s),Wa=(t,s)=>yn(t,s)&&t[s]!==void 0&&t[s]!==null,ya=(t,s,a=Bs)=>t.exists(i=>a(i,s)),lp=(t,s,a=Bs)=>ad(t,s,a).getOr(t.isNone()&&s.isNone()),rd=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},oo=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},ad=(t,s,a)=>t.isSome()&&s.isSome()?k.some(a(t.getOrDie(),s.getOrDie())):k.none(),_m=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):k.none(),Xn=(t,s)=>t!=null?k.some(s(t)):k.none(),Tt=(t,s)=>t?k.some(s):k.none(),jr=(t,s)=>t+s,cd=(t,s)=>t.substring(s),up=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,ev=(t,s)=>ns(t,s)?cd(t,s.length):t,Gr=(t,s)=>Ni(t,s)?t:jr(t,s),cr=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?Ur(i)?!0:d+s.length<=i:!1},ns=(t,s)=>up(t,s,0),Ni=(t,s)=>up(t,s,t.length-s.length),pl=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Ca=t=>t.length>0,Io=t=>!Ca(t),yc=t=>t.style!==void 0&&gt(t.style.getPropertyValue),id=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return bl(i.childNodes[0])},_T=(t,s)=>{const i=(s||document).createElement(t);return bl(i)},OT=(t,s)=>{const i=(s||document).createTextNode(t);return bl(i)},bl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},te={fromHtml:id,fromTag:_T,fromText:OT,fromDom:bl,fromPoint:(t,s,a)=>k.from(t.dom.elementFromPoint(s,a)).map(bl)},qr=typeof window<"u"?window:Function("return this;")(),Om=(t,s)=>{let a=s??qr;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},aC=(t,s)=>{const a=t.split(".");return Om(a,s)},tv=(t,s)=>aC(t,s),Jn=(t,s)=>{const a=tv(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},nv=Object.getPrototypeOf,AT=t=>Jn("HTMLElement",t),ng=t=>{const s=aC("ownerDocument.defaultView",t);return vc(t)&&(AT(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(nv(t).constructor.name))},Am=9,qs=11,xs=1,vl=3,Cc=t=>t.dom.nodeName.toLowerCase(),ld=t=>t.dom.nodeType,og=t=>s=>ld(s)===t,Dm=t=>Pn(t)&&ng(t.dom),Pn=og(xs),wa=og(vl),DT=og(Am),ud=og(qs),iu=t=>s=>Pn(s)&&Cc(s)===t,Za=(t,s)=>{const a=t.dom;if(a.nodeType!==xs)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Oo=t=>t.nodeType!==xs&&t.nodeType!==Am&&t.nodeType!==qs||t.childElementCount===0,RT=(t,s)=>{const a=s===void 0?document:s.dom;return Oo(a)?[]:we(a.querySelectorAll(t),te.fromDom)},cC=(t,s)=>{const a=s===void 0?document:s.dom;return Oo(a)?k.none():k.from(a.querySelector(t)).map(te.fromDom)},Bn=(t,s)=>t.dom===s.dom,ja=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},Sa=t=>te.fromDom(t.dom.ownerDocument),Ks=t=>DT(t)?t:Sa(t),mp=t=>te.fromDom(Ks(t).dom.documentElement),dd=t=>te.fromDom(Ks(t).dom.defaultView),wc=t=>k.from(t.dom.parentNode).map(te.fromDom),md=t=>wc(t),Jc=t=>k.from(t.dom.parentElement).map(te.fromDom),iC=(t,s)=>{const a=gt(s)?s:Dn;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,p=te.fromDom(g);if(d.push(p),a(p)===!0)break;i=g}return d},ov=t=>k.from(t.dom.offsetParent).map(te.fromDom),lC=t=>k.from(t.dom.nextSibling).map(te.fromDom),Qc=t=>we(t.dom.childNodes,te.fromDom),lu=(t,s)=>{const a=t.dom.childNodes;return k.from(a[s]).map(te.fromDom)},fp=t=>lu(t,0),gp=(t,s)=>({element:t,offset:s}),sv=(t,s)=>{const a=Qc(t);return a.length>0&&s<a.length?gp(a[s],0):gp(t,s)},rv=t=>ud(t)&&ar(t.dom.host),sg=gt(Element.prototype.attachShadow)&&gt(Node.prototype.getRootNode),uC=J(sg),so=sg?t=>te.fromDom(t.dom.getRootNode()):Ks,Sc=t=>rv(t)?t:te.fromDom(Ks(t).dom.body),MT=t=>av(t).isSome(),av=t=>{const s=so(t);return rv(s)?k.some(s):k.none()},ei=t=>te.fromDom(t.dom.host),BT=t=>{if(uC()&&ar(t.target)){const s=te.fromDom(t.target);if(Pn(s)&&hp(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Wr(a)}}return k.from(t.target)},hp=t=>ar(t.dom.shadowRoot),Es=t=>{const s=wa(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return av(te.fromDom(s)).fold(()=>a.body.contains(s),An(Es,ei))},Ys=()=>fd(te.fromDom(document)),fd=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return te.fromDom(s)},dC=(t,s,a)=>{if(En(a)||hl(a)||Bi(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Ke=(t,s,a)=>{dC(t.dom,s,a)},mC=(t,s)=>{const a=t.dom;ms(s,(i,d)=>{dC(a,d,i)})},po=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Kr=(t,s)=>k.from(po(t,s)),cv=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},qo=(t,s)=>{t.dom.removeAttribute(s)},NT=t=>Yn(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),rg=(t,s,a)=>{if(!En(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);yc(t)&&t.style.setProperty(s,a)},ag=(t,s)=>{yc(t)&&t.style.removeProperty(s)},Mt=(t,s,a)=>{const i=t.dom;rg(i,s,a)},xa=(t,s)=>{const a=t.dom;ms(s,(i,d)=>{rg(a,d,i)})},Re=(t,s)=>{const a=t.dom;ms(s,(i,d)=>{i.fold(()=>{ag(a,d)},g=>{rg(a,d,g)})})},bo=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Es(t)?cg(a,s):d},cg=(t,s)=>yc(t)?t.style.getPropertyValue(s):"",Ns=(t,s)=>{const a=t.dom,i=cg(a,s);return k.from(i).filter(d=>d.length>0)},ir=t=>{const s={},a=t.dom;if(yc(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},uu=(t,s,a)=>{const i=te.fromTag(t);return Mt(i,s,a),Ns(i,s).isSome()},mn=(t,s)=>{const a=t.dom;ag(a,s),ya(Kr(t,"style").map(pl),"")&&qo(t,"style")},yl=t=>t.dom.offsetWidth,Ps=(t,s)=>{const a=(y,w)=>{if(!Bi(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const E=y.dom;yc(E)&&(E.style[t]=w+"px")},i=y=>{const w=s(y);if(w<=0||w===null){const E=bo(y,t);return parseFloat(E)||0}return w},d=i,g=(y,w)=>Yn(w,(E,_)=>{const D=bo(y,_),R=D===void 0?0:parseInt(D,10);return isNaN(R)?E:E+R},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(y,w,E)=>{const _=g(y,E);return w>_?w-_:0}}},Rm=Ps("height",t=>{const s=t.dom;return Es(t)?s.getBoundingClientRect().height:s.offsetHeight}),os=t=>Rm.get(t),du=t=>Rm.getOuter(t),iv=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Rm.max(t,s,a);Mt(t,"max-height",i+"px")},lv=(t,s)=>({left:t,top:s,translate:(i,d)=>lv(t+i,s+d)}),fn=lv,uv=t=>{const s=t.getBoundingClientRect();return fn(s.left,s.top)},mu=(t,s)=>t!==void 0?t:s!==void 0?s:0,xc=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return fn(a.offsetLeft,a.offsetTop);const g=mu(i==null?void 0:i.pageYOffset,d.scrollTop),p=mu(i==null?void 0:i.pageXOffset,d.scrollLeft),y=mu(d.clientTop,a.clientTop),w=mu(d.clientLeft,a.clientLeft);return gd(t).translate(p-w,g-y)},gd=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?fn(i.offsetLeft,i.offsetTop):Es(t)?uv(s):fn(0,0)},ig=Ps("width",t=>t.dom.offsetWidth),Qn=(t,s)=>ig.set(t,s),fs=t=>ig.get(t),ti=t=>ig.getOuter(t),PT=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=ig.max(t,s,a);Mt(t,"max-width",i+"px")},uo=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Xs=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),y=p||i("(pointer:coarse)"),w=d||!g&&p&&i("(min-device-width:768px)"),E=g||p&&!w,_=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,D=!E&&!w&&!_;return{isiPad:J(d),isiPhone:J(g),isTablet:J(w),isPhone:J(E),isTouch:J(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:J(_),isDesktop:J(D)}},Js=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},fC=(t,s)=>{const a=Js(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return pp(i(1),i(2))},dv=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?ni():fC(t,a)},ni=()=>pp(0,0),pp=(t,s)=>({major:t,minor:s}),Zn={nu:pp,detect:dv,unknown:ni},Pi=(t,s)=>Gs(s.brands,a=>{const i=a.brand.toLowerCase();return Rt(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Zn.nu(parseInt(a.version,10),0)}))}),Nr=(t,s)=>{const a=String(s).toLowerCase();return Rt(t,i=>i.search(a))},$i=(t,s)=>Nr(t,s).map(a=>{const i=Zn.detect(a.versionRegexes,s);return{current:a.name,version:i}}),hd=(t,s)=>Nr(t,s).map(a=>{const i=Zn.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Lo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,oi=t=>s=>cr(s,t),lg=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>cr(t,"edge/")&&cr(t,"chrome")&&cr(t,"safari")&&cr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Lo],search:t=>cr(t,"chrome")&&!cr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>cr(t,"msie")||cr(t,"trident")},{name:"Opera",versionRegexes:[Lo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:oi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:oi("firefox")},{name:"Safari",versionRegexes:[Lo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(cr(t,"safari")||cr(t,"mobile/"))&&cr(t,"applewebkit")}],ug=[{name:"Windows",search:oi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>cr(t,"iphone")||cr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:oi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:oi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:oi("linux"),versionRegexes:[]},{name:"Solaris",search:oi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:oi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:oi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gC={browsers:J(lg),oses:J(ug)},mv="Edge",si="Chromium",dg="IE",Pr="Opera",bp="Firefox",fv="Safari",pd=()=>gv({current:void 0,version:Zn.unknown()}),gv=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(mv),isChromium:i(si),isIE:i(dg),isOpera:i(Pr),isFirefox:i(bp),isSafari:i(fv)}},bd={unknown:pd,nu:gv,edge:J(mv),chromium:J(si),ie:J(dg),opera:J(Pr),firefox:J(bp),safari:J(fv)},hC="Windows",fu="iOS",pC="Android",bC="Linux",vC="macOS",Mm="Solaris",yC="FreeBSD",U="ChromeOS",Bm=()=>Ec({current:void 0,version:Zn.unknown()}),Ec=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(hC),isiOS:i(fu),isAndroid:i(pC),isMacOS:i(vC),isLinux:i(bC),isSolaris:i(Mm),isFreeBSD:i(yC),isChromeOS:i(U)}},vp={unknown:Bm,nu:Ec,windows:J(hC),ios:J(fu),android:J(pC),linux:J(bC),macos:J(vC),solaris:J(Mm),freebsd:J(yC),chromeos:J(U)},$T={detect:(t,s,a)=>{const i=gC.browsers(),d=gC.oses(),g=s.bind(w=>Pi(i,w)).orThunk(()=>$i(i,t)).fold(bd.unknown,bd.nu),p=hd(d,t).fold(vp.unknown,vp.nu),y=Xs(p,g,t,a);return{browser:g,os:p,deviceType:y}}},Cn=t=>window.matchMedia(t).matches;let Cr=uo(()=>$T.detect(navigator.userAgent,k.from(navigator.userAgentData),Cn));const Fi=()=>Cr(),Cl=(t,s,a,i,d,g,p)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:p}),hv=t=>{const s=te.fromDom(BT(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=sp(i,a);return Cl(s,t.clientX,t.clientY,a,i,d,t)},Nm=(t,s)=>a=>{t(a)&&s(hv(a))},Ea=(t,s,a,i,d)=>{const g=Nm(a,i);return t.dom.addEventListener(s,g,d),{unbind:cn(CC,t,s,g,d)}},mg=(t,s,a,i)=>Ea(t,s,a,i,!1),pv=(t,s,a,i)=>Ea(t,s,a,i,!0),CC=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},Tc=(t,s)=>{wc(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},fg=(t,s)=>{lC(t).fold(()=>{wc(t).each(d=>{Ta(d,s)})},i=>{Tc(i,s)})},bv=(t,s)=>{fp(t).fold(()=>{Ta(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Ta=(t,s)=>{t.dom.appendChild(s.dom)},$s=(t,s,a)=>{lu(t,a).fold(()=>{Ta(t,s)},i=>{Tc(i,s)})},gu=(t,s)=>{Xe(s,a=>{Ta(t,a)})},Pm=t=>{t.dom.textContent="",Xe(Qc(t),s=>{kc(s)})},kc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Yr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return fn(a,i)},vv=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},wC=t=>{const s=t===void 0?window:t;return Fi().browser.isFirefox()?k.none():k.from(s.visualViewport)},gg=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),yv=t=>{const s=t===void 0?window:t,a=s.document,i=Yr(te.fromDom(a));return wC(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return gg(i.left,i.top,g,p)},d=>gg(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},yp=()=>te.fromDom(document),Ii=(t,s)=>t.view(s).fold(J([]),i=>{const d=t.owner(i),g=Ii(t,d);return[i].concat(g)}),SC=(t,s)=>{const a=s.owner(t),i=Ii(s,a);return k.some(i)};var FT=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?k.none():k.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(te.fromDom)},owner:t=>Sa(t)});const hg=t=>{const s=yp(),a=Yr(s);return SC(t,FT).fold(cn(xc,t),d=>{const g=gd(t),p=ts(d,(y,w)=>{const E=gd(w);return{left:y.left+E.left,top:y.top+E.top}},{left:0,top:0});return fn(p.left+g.left+a.left,p.top+g.top+a.top)})},xC=(t,s,a)=>({point:t,width:s,height:a}),$m=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),mo=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),vo=t=>{const s=xc(t),a=ti(t),i=du(t);return mo(s.left,s.top,a,i)},Ga=t=>{const s=hg(t),a=ti(t),i=du(t);return mo(s.left,s.top,a,i)},Cv=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,y=g-i;return mo(a,i,p,y)},IT=(t,s)=>Yn(s,(a,i)=>Cv(a,i),t),wr=()=>yv(window);var Fm=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ka=t=>{const s=g=>g(t),a=J(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:vt,isError:Dn,map:g=>$t.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>k.some(t)};return d},Li=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Dn,isError:vt,map:s,mapError:i=>$t.error(i(t)),bind:s,exists:Dn,forall:vt,getOr:on,or:on,getOrThunk:ba,orThunk:ba,getOrDie:q(String(t)),each:K,toOptional:k.none};return a},$t={value:ka,error:Li,fromOption:(t,s)=>t.fold(()=>Li(s),ka)};var Xr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Xr||(Xr={}));const hu=(t,s,a)=>t.stype===Xr.Error?s(t.serror):a(t.svalue),Im=t=>{const s=[],a=[];return Xe(t,i=>{hu(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},TC=(t,s)=>t.stype===Xr.Error?{stype:Xr.Error,serror:s(t.serror)}:t,kC=(t,s)=>t.stype===Xr.Value?{stype:Xr.Value,svalue:s(t.svalue)}:t,Jr=(t,s)=>t.stype===Xr.Value?s(t.svalue):t,ss=(t,s)=>t.stype===Xr.Error?s(t.serror):t,_a=t=>({stype:Xr.Value,svalue:t}),rs=t=>({stype:Xr.Error,serror:t}),Ho={fromResult:t=>t.fold(rs,_a),toResult:t=>hu(t,$t.error,$t.value),svalue:_a,partition:Im,serror:rs,bind:Jr,bindError:ss,map:kC,mapError:TC,fold:hu},gs=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),ri=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),wp=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Ko=(t,s)=>s,wv=(t,s)=>rC(t)&&rC(s)?$n(t,s):s,OC=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)yn(d,g)&&(a[g]=t(a[g],d[g]))}return a},$n=OC(wv),Lm=OC(Ko),Tn=()=>({tag:"required",process:{}}),ai=t=>({tag:"defaultedThunk",process:t}),Sv=t=>ai(J(t)),Sp=()=>({tag:"option",process:{}}),qt=t=>({tag:"mergeWithThunk",process:t}),Hm=t=>qt(J(t)),AC=(t,s)=>t.length>0?Ho.svalue($n(s,Lm.apply(void 0,t))):Ho.svalue(s),xv=t=>sp(Ho.serror,Ft)(t),DC={consolidateObj:(t,s)=>{const a=Ho.partition(t);return a.errors.length>0?xv(a.errors):AC(a.values,s)},consolidateArr:t=>{const s=Ho.partition(t);return s.errors.length>0?xv(s.errors):Ho.svalue(s.values)}},xp=t=>vc(t)&&io(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ev=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):t;return we(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},vd=(t,s)=>Ho.serror([{path:t,getErrorInfo:s}]),Vm=(t,s,a)=>vd(t,()=>'Could not find valid *required* value for "'+s+'" in '+xp(a)),RC=(t,s)=>vd(t,()=>'Choice schema did not contain choice key: "'+s+'"'),_c=(t,s,a)=>vd(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+xp(s)),HT=(t,s)=>vd(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),zm=(t,s)=>vd(t,J(s)),Oc=t=>{const s=(i,d)=>Ho.bindError(t(d),g=>zm(i,g)),a=J("val");return{extract:s,toString:a}},Tv=Oc(Ho.svalue),kv=(t,s,a,i)=>Ze(s,a).fold(()=>Vm(t,a,s),i),_v=(t,s,a,i)=>{const d=Ze(t,s).getOrThunk(()=>a(t));return i(d)},Ov=(t,s,a)=>a(Ze(t,s)),Av=(t,s,a,i)=>{const d=Ze(t,s).map(g=>g===!0?a(t):g);return i(d)},MC=(t,s,a,i,d)=>{const g=y=>d.extract(s.concat([i]),y),p=y=>y.fold(()=>Ho.svalue(k.none()),w=>{const E=d.extract(s.concat([i]),w);return Ho.map(E,k.some)});switch(t.tag){case"required":return kv(s,a,i,g);case"defaultedThunk":return _v(a,i,t.process,g);case"option":return Ov(a,i,p);case"defaultedOptionThunk":return Av(a,i,t.process,p);case"mergeWithThunk":return _v(a,i,J({}),y=>{const w=$n(t.process(a),y);return g(w)})}},Dv=(t,s,a)=>{const i={},d=[];for(const g of a)wp(g,(p,y,w,E)=>{const _=MC(w,t,s,p,E);Ho.fold(_,D=>{d.push(...D)},D=>{i[y]=D})},(p,y)=>{i[p]=y(s)});return d.length>0?Ho.serror(d):Ho.svalue(i)},hs=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),BC=t=>io(sd(t,ar)),Fn=t=>{const s=ct(t),a=ts(t,(d,g)=>wp(g,p=>$n(d,{[p]:!0}),J(d)),{});return{extract:(d,g)=>{const p=hl(g)?[]:BC(g),y=Wn(p,w=>!Wa(a,w));return y.length===0?s.extract(d,g):HT(d,y)},toString:s.toString}},ct=t=>({extract:(i,d)=>Dv(i,d,t),toString:()=>`obj{
`+we(t,d=>wp(d,(g,p,y,w)=>g+" -> "+w.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),ci=t=>({extract:(i,d)=>{const g=we(d,(p,y)=>t.extract(i.concat(["["+y+"]"]),p));return DC.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),qe=(t,s)=>{const a=s!==void 0?s:on;return{extract:(g,p)=>{const y=[];for(const w of t){const E=w.extract(g,p);if(E.stype===Xr.Value)return{stype:Xr.Value,svalue:a(E.svalue)};y.push(E)}return DC.consolidateArr(y)},toString:()=>"oneOf("+we(t,g=>g.toString()).join(", ")+")"}},Ep=(t,s)=>{const a=(g,p)=>ci(Oc(t)).extract(g,p);return{extract:(g,p)=>{const y=io(p),w=a(g,y);return Ho.bind(w,E=>{const _=we(E,D=>gs(D,D,Tn(),s));return ct(_).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},Hi=(t,s)=>{const a=uo(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},pu=sp(ci,ct),Qr=J(Tv),Tp=(t,s)=>Oc(a=>{const i=typeof a;return t(a)?Ho.svalue(a):Ho.serror(`Expected type: ${s} but got: ${i}`)}),Vi=Tp(Bi,"number"),Ts=Tp(En,"string"),qa=Tp(hl,"boolean"),pg=Tp(gt,"function"),kp=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>kp(t[s]));default:return!1}},Oe=Oc(t=>kp(t)?Ho.svalue(t):Ho.serror("Expected value to be acceptable for sending via postMessage")),NC=(t,s,a,i)=>Ze(a,i).fold(()=>_c(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),yd=(t,s)=>({extract:(d,g)=>Ze(g,t).fold(()=>RC(d,t),y=>NC(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+io(s)}),wl=()=>ci(Tv),Ac=t=>Oc(s=>t(s).fold(Ho.serror,Ho.svalue)),_p=(t,s)=>Ep(a=>Ho.fromResult(t(a)),s),yo=(t,s,a)=>{const i=s.extract([t],a);return Ho.mapError(i,d=>({input:a,errors:d}))},ro=(t,s,a)=>Ho.toResult(yo(t,s,a)),ks=t=>t.fold(s=>{throw new Error(zi(s))},on),an=(t,s,a)=>ks(ro(t,s,a)),zi=t=>`Errors: 
`+Ev(t.errors).join(`
`)+`

Input object: `+xp(t.input),Fs=(t,s)=>yd(t,lo(s,ct)),ii=(t,s)=>Hi(t,s),Is=gs,Qs=ri,Op=t=>Ac(s=>Po(t,s)?$t.value(s):$t.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),ve=t=>Is(t,t,Tn(),Qr()),In=(t,s)=>Is(t,t,Tn(),s),Rv=t=>In(t,Vi),Vo=t=>In(t,Ts),bu=(t,s)=>Is(t,t,Tn(),Op(s)),Mv=t=>In(t,qa),ea=t=>In(t,pg),PC=(t,s)=>Is(t,t,Sp(),Oc(a=>Ho.serror("The field: "+t+" is forbidden. "+s))),vu=(t,s)=>Is(t,t,Tn(),ct(s)),$C=(t,s)=>Is(t,t,Tn(),pu(s)),Oa=(t,s)=>Is(t,t,Tn(),ci(s)),gn=t=>Is(t,t,Sp(),Qr()),Ui=(t,s)=>Is(t,t,Sp(),s),Cd=t=>Ui(t,Vi),er=t=>Ui(t,Ts),Bv=(t,s)=>Ui(t,Op(s)),wd=t=>Ui(t,pg),FC=(t,s)=>Ui(t,ci(s)),as=(t,s)=>Ui(t,ct(s)),Aa=(t,s)=>Ui(t,Fn(s)),ne=(t,s)=>Is(t,t,Sv(s),Qr()),$r=(t,s,a)=>Is(t,t,Sv(s),a),Dc=(t,s)=>$r(t,s,Vi),li=(t,s)=>$r(t,s,Ts),Ka=(t,s,a)=>$r(t,s,Op(a)),Yo=(t,s)=>$r(t,s,qa),ps=(t,s)=>$r(t,s,pg),Ap=(t,s)=>$r(t,s,Oe),ta=(t,s,a)=>$r(t,s,ci(a)),Nv=(t,s,a)=>$r(t,s,ct(a)),pt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Rc={generate:t=>{if(!Ri(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return Xe(t,(i,d)=>{const g=io(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],y=i[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ri(y))throw new Error("case arguments must be an array");s.push(p),a[p]=(...w)=>{const E=w.length;if(E!==y.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+y.length+" ("+y+"), got "+E);return{fold:(...D)=>{if(D.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+D.length);return D[d].apply(null,w)},match:D=>{const R=io(D);if(s.length!==R.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+R.join(","));if(!au(s,I=>Po(R,I)))throw new Error("Not all branches were specified when using match. Specified: "+R.join(", ")+`
Required: `+s.join(", "));return D[p].apply(null,w)},log:D=>{console.log(D,{constructors:s,constructor:p,params:w})}}}}),a}};Rc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const bg=t=>{const s=[],a=[];return Xe(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},yu=(t,s)=>{const a={};return ms(t,(i,d)=>{Po(s,d)||(a[d]=i)}),a},VT=(t,s)=>({[t]:s}),tr=t=>{const s={};return Xe(t,a=>{s[a.key]=a.value}),s},Pv=(t,s)=>yu(t,s),Sr=(t,s)=>VT(t,s),Cu=t=>tr(t),Sd=(t,s)=>t.length===0?$t.value(s):$t.value($n(s,Lm.apply(void 0,t))),Um=t=>$t.error(Ft(t)),na=(t,s)=>{const a=bg(t);return a.errors.length>0?Um(a.errors):Sd(a.values,s)},Da=t=>gt(t)?t:Dn,$v=(t,s,a)=>{let i=t.dom;const d=Da(a);for(;i.parentNode;){i=i.parentNode;const g=te.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return k.none()},Dp=(t,s,a)=>{const i=s(t),d=Da(a);return i.orThunk(()=>d(t)?k.none():$v(t,s,d))},vg=(t,s)=>Bn(t.element,s.event.target),Rp={can:vt,abort:Dn,run:K},xd=t=>{if(!Wa(t,"can")&&!Wa(t,"abort")&&!Wa(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Rp,...t}},Mp=(t,s)=>(...a)=>Yn(t,(i,d)=>i&&s(d).apply(void 0,a),!0),Bp=(t,s)=>(...a)=>Yn(t,(i,d)=>i||s(d).apply(void 0,a),!1),Fv=t=>gt(t)?{can:vt,abort:Dn,run:t}:t,yg=t=>{const s=Mp(t,d=>d.can),a=Bp(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{Xe(t,g=>{g.run.apply(void 0,d)})}}},bs=J,ui=bs("touchstart"),Cg=bs("touchmove"),Ed=bs("touchend"),IC=bs("touchcancel"),Ya=bs("mousedown"),Td=bs("mousemove"),Np=bs("mouseout"),Iv=bs("mouseup"),Ls=bs("mouseover"),oa=bs("focusin"),wg=bs("focusout"),Mc=bs("keydown"),zT=bs("keyup"),kd=bs("input"),_d=bs("change"),wu=bs("click"),Su=bs("transitioncancel"),Wm=bs("transitionend"),Lv=bs("transitionstart"),Hv=bs("selectstart"),Co=t=>J("alloy."+t),Pp={tap:Co("tap")},di=Co("focus"),xu=Co("blur.post"),Od=Co("paste.post"),Wi=Co("receive"),sa=Co("execute"),Sg=Co("focus.item"),xg=Pp.tap,UT=Co("longpress"),wo=Co("sandbox.close"),Ad=Co("typeahead.cancel"),Eu=Co("system.init"),$p=Co("system.touchmove"),Eg=Co("system.touchend"),Sl=Co("system.scroll"),mi=Co("system.resize"),Xa=Co("system.attached"),Dd=Co("system.detached"),Tu=Co("system.dismissRequested"),Fp=Co("system.repositionRequested"),Ip=Co("focusmanager.shifted"),Vv=Co("slotcontainer.visibility"),Zm=Co("system.external.element.scroll"),Lp=Co("change.tab"),Hp=Co("dismiss.tab"),ku=Co("highlight"),zv=Co("dehighlight"),rn=(t,s)=>{Tg(t,t.element,s,{})},lt=(t,s,a)=>{Tg(t,t.element,s,a)},_u=t=>{rn(t,sa())},Vp=(t,s,a)=>{Tg(t,s,a,{})},Tg=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},WT=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},Uv=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},Ln=t=>Cu(t),Wv=(t,s)=>({key:t,value:xd({abort:s})}),zp=(t,s)=>({key:t,value:xd({can:s})}),Zv=t=>({key:t,value:xd({run:(s,a)=>{a.event.prevent()}})}),be=(t,s)=>({key:t,value:xd({run:s})}),Up=(t,s,a)=>({key:t,value:xd({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),ZT=t=>s=>be(t,s),Wp=t=>s=>({key:t,value:xd({run:(a,i)=>{vg(a,i)&&s(a,i)}})}),jT=(t,s)=>be(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{Uv(d,d.element,t,i)})}),Ou=(t,s,a)=>{const i=s.partUids[a];return jT(t,i)},jv=(t,s)=>be(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Dp(d.target,y=>a.getSystem().getByDom(y).toOptional(),Dn).getOr(a));s(a,g,i)}),Zi=t=>be(t,(s,a)=>{a.cut()}),Zp=t=>be(t,(s,a)=>{a.stop()}),Rd=(t,s)=>Wp(t)(s),Vn=Wp(Xa()),ji=Wp(Dd()),xl=Wp(Eu()),Bc=ZT(sa()),Gv=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Qc(te.fromDom(i))},jp=t=>t.dom.innerHTML,El=(t,s)=>{const i=Sa(t).dom,d=te.fromDom(i.createDocumentFragment()),g=Gv(s,i);gu(d,g),Pm(t),Ta(t,d)},LC=t=>{const s=te.fromTag("div"),a=te.fromDom(t.dom.cloneNode(!0));return Ta(s,a),jp(s)},GT=(t,s)=>te.fromDom(t.dom.cloneNode(s)),qv=t=>GT(t,!1),Kv=t=>{if(rv(t))return"#shadow-root";{const s=qv(t);return LC(s)}},Au=t=>Kv(t),RD=(t,s,a)=>Bn(s,t.element)&&!Bn(s,a),Du=Ln([zp(di(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return RD(t,i,d)?(console.warn(di()+` did not get interpreted by the desired target. 
Originator: `+Au(i)+`
Target: `+Au(d)+`
Check the `+di()+" event handlers"),!1):!0})]);var vs=Object.freeze({__proto__:null,events:Du});let Yv=0;const Je=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return Yv++,t+"_"+i+Yv+String(a)},Xv=J("alloy-id-"),qT=J("data-alloy-id"),Jv=Xv(),HC=qT(),KT=(t,s)=>{const a=Je(Jv+t);return Tl(s,a),a},Tl=(t,s)=>{Object.defineProperty(t.dom,HC,{value:s,writable:!0})},Ru=t=>{const s=Pn(t)?t.dom[HC]:null;return k.from(s)},kl=t=>Je(t),kg=on,Ra=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Au(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:J("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Dn}},Gp=Ra(),VC=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:jm(p.slice(0,1).concat(p.slice(3)))}),t},jm=t=>we(t,s=>Ni(s,"/*")?s.substring(0,s.length-2):s),Ja=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:jm(g)}),t},Qv=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:jm(g.slice(1))}),t},fi=Je("alloy-premade"),qp=t=>(Object.defineProperty(t.element.dom,fi,{value:t.uid,writable:!0}),Sr(fi,t)),YT=t=>yn(t.dom,fi),zC=t=>Ze(t,fi),Mu=t=>Qv((s,...a)=>t(s.getApis(),s,...a),t),Nc={init:()=>Fr({readState:J("No State required")})},Fr=t=>t,Kp=(t,s)=>{const a=we(s,d=>as(d.name(),[ve("config"),ne("state",Nc)])),i=ro("component.behaviours",ct(a),t.behaviours).fold(d=>{throw new Error(zi(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},on);return{list:s,data:lo(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return J(g)})}},XT=t=>t.list,JT=t=>t.data,Yp=(t,s)=>{const a={};return ms(t,(i,d)=>{ms(i,(g,p)=>{const y=Ze(a,p).getOr([]);a[p]=y.concat([s(d,g)])})}),a},ra=t=>({classes:Ur(t.classes)?[]:t.classes,attributes:Ur(t.attributes)?{}:t.attributes,styles:Ur(t.styles)?{}:t.styles}),Xp=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Gm=(t,s,a,i)=>{const d={...s};Xe(a,_=>{d[_.name()]=_.exhibit(t,i)});const g=Yp(d,(_,D)=>({name:_,modification:D})),p=_=>ts(_,(D,R)=>({...R.modification,...D}),{}),y=ts(g.classes,(_,D)=>D.modification.concat(_),[]),w=p(g.attributes),E=p(g.styles);return ra({classes:y,attributes:w,styles:E})},UC=(t,s,a,i)=>{try{const d=rp(a,(g,p)=>{const y=g[s],w=p[s],E=i.indexOf(y),_=i.indexOf(w);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(i,null,2));if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));return E<_?-1:_<E?1:0});return $t.value(d)}catch(d){return $t.error([d])}},Gi=(t,s)=>({handler:t,purpose:s}),e0=(t,s)=>({cHandler:t,purpose:s}),WC=(t,s)=>e0(cn.apply(void 0,[t.handler].concat(s)),t.purpose),Md=t=>t.cHandler,t0=(t,s)=>({name:t,handler:s}),Bu=(t,s)=>{const a={};return Xe(t,i=>{a[i.name()]=i.handlers(s)}),a},_g=(t,s,a)=>{const i={...a,...Bu(s,t)};return Yp(i,t0)},qm=(t,s,a,i)=>{const d=_g(t,a,i);return QT(d,s)},n0=t=>{const s=Fv(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},o0=(t,s)=>$t.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(we(s,a=>a.name),null,2)]),ZC=(t,s,a)=>{const i=s[a];return i?UC("Event: "+a,"name",t,i).map(d=>{const g=we(d,p=>p.handler);return yg(g)}):o0(a,t)},QT=(t,s)=>{const a=ip(t,(i,d)=>(i.length===1?$t.value(i[0].handler):ZC(i,s,d)).map(p=>{const y=n0(p),w=i.length>1?Wn(s[d],E=>va(i,_=>_.name===E)).join(" > "):i[0].name;return Sr(d,Gi(y,w))}));return na(a,{})},hn="alloy.base.behaviour",s0=ct([Is("dom","dom",Tn(),ct([ve("tag"),ne("styles",{}),ne("classes",[]),ne("attributes",{}),gn("value"),gn("innerHtml")])),ve("components"),ve("uid"),ne("events",{}),ne("apis",{}),Is("eventOrder","eventOrder",Hm({[sa()]:["disabling",hn,"toggling","typeaheadevents"],[di()]:[hn,"focusing","keying"],[Eu()]:[hn,"disabling","toggling","representing"],[kd()]:[hn,"representing","streaming","invalidating"],[Dd()]:[hn,"representing","item-events","tooltipping"],[Ya()]:["focusing",hn,"item-type-events"],[ui()]:["focusing",hn,"item-type-events"],[Ls()]:["item-type-events","tooltipping"],[Wi()]:["receiving","reflecting","tooltipping"]}),Qr()),gn("domModification")]),jC=t=>ro("custom.definition",s0,t),GC=t=>({...t.dom,uid:t.uid,domChildren:we(t.components,s=>s.element)}),Og=t=>t.domModification.fold(()=>ra({}),ra),ek=t=>t.events,qi=(t,s)=>{const a=po(t,s);return a===void 0||a===""?[]:a.split(" ")},zo=(t,s,a)=>{const d=qi(t,s).concat([a]);return Ke(t,s,d.join(" ")),!0},Ag=(t,s,a)=>{const i=Wn(qi(t,s),d=>d!==a);return i.length>0?Ke(t,s,i.join(" ")):qo(t,s),!1},Km=t=>t.dom.classList!==void 0,qC=t=>qi(t,"class"),Dg=(t,s)=>zo(t,"class",s),r0=(t,s)=>Ag(t,"class",s),So=(t,s)=>{Km(t)?t.dom.classList.add(s):Dg(t,s)},MD=t=>{(Km(t)?t.dom.classList:qC(t)).length===0&&qo(t,"class")},ao=(t,s)=>{Km(t)?t.dom.classList.remove(s):r0(t,s),MD(t)},aa=(t,s)=>Km(t)&&t.dom.classList.contains(s),_l=(t,s)=>{Xe(s,a=>{So(t,a)})},xr=(t,s)=>{Xe(s,a=>{ao(t,a)})},tk=(t,s)=>au(s,a=>aa(t,a)),a0=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},Qa=t=>Km(t)?a0(t):qC(t),xo=t=>t.dom.value,Ao=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},nk=(t,s,a)=>lu(t,s).map(d=>{if(a.exists(p=>!Bn(p,d))){const p=a.map(Cc).getOr("span"),y=te.fromTag(p);return Tc(d,y),y}else return d}),gi=(t,s,a)=>{a.fold(()=>Ta(t,s),i=>{Bn(i,s)||(Tc(i,s),kc(i))})},Rg=(t,s,a)=>{const i=we(s,a),d=Qc(t);return Xe(d.slice(i.length),kc),i},Jp=(t,s,a,i)=>{const d=lu(t,s),g=i(a,d),p=nk(t,s,d);return gi(t,g.element,p),g},ec=(t,s,a)=>Rg(t,s,(i,d)=>Jp(t,d,i,a)),ca=(t,s)=>Rg(t,s,(a,i)=>{const d=lu(t,i);return gi(t,a,d),a}),Bd=(t,s)=>{const a=io(t),i=io(s),d=ht(i,a),g=Zr(t,(p,y)=>!yn(s,y)||p!==s[y]).t;return{toRemove:d,toSet:g}},Ym=(t,s)=>{const{class:a,style:i,...d}=NT(s),{toSet:g,toRemove:p}=Bd(t.attributes,d),y=()=>{Xe(p,ue=>qo(s,ue)),mC(s,g)},w=ir(s),{toSet:E,toRemove:_}=Bd(t.styles,w),D=()=>{Xe(_,ue=>mn(s,ue)),xa(s,E)},R=Qa(s),P=ht(R,t.classes),I=ht(t.classes,R),Z=()=>{_l(s,I),xr(s,P)},ie=ue=>{El(s,ue)},G=()=>{const ue=t.domChildren;ca(s,ue)},j=()=>{const ue=s,oe=t.value.getOrUndefined();oe!==xo(ue)&&Ao(ue,oe??"")};return y(),Z(),D(),t.innerHtml.fold(G,ie),j(),s},Mg=t=>{const s=te.fromTag(t.tag);mC(s,t.attributes),_l(s,t.classes),xa(s,t.styles),t.innerHtml.each(i=>El(s,i));const a=t.domChildren;return gu(s,a),t.value.each(i=>{Ao(s,i)}),s},Bg=(t,s)=>{try{const a=Ym(t,s);return k.some(a)}catch{return k.none()}},KC=t=>t.innerHtml.isSome()&&t.domChildren.length>0,c0=(t,s)=>{const a=d=>Cc(d)===t.tag&&!KC(t)&&!YT(d),i=s.filter(a).bind(d=>Bg(t,d)).getOrThunk(()=>Mg(t));return Tl(i,t.uid),i},ok=t=>{const s=Ze(t,"behaviours").getOr({});return he(io(s),a=>{const i=s[a];return ar(i)?[i.me]:[]})},YC=(t,s)=>Kp(t,s),XC=t=>{const s=ok(t);return YC(t,s)},i0=(t,s,a)=>{const i=GC(t),d=Og(t),g={"alloy.base.modification":d},p=s.length>0?Gm(a,g,s,i):d;return Xp(i,p)},JC=(t,s,a)=>{const i={"alloy.base.behaviour":ek(t)};return qm(a,t.eventOrder,s,i).getOrDie()},BD=(t,s)=>{const a=()=>ue,i=pt(Gp),d=ks(jC(t)),g=XC(t),p=XT(g),y=JT(g),w=i0(d,p,y),E=c0(w,s),_=JC(d,p,y),D=pt(d.components),R=oe=>{i.set(oe)},P=()=>{i.set(Ra(a))},I=()=>{const oe=Qc(E),ke=he(oe,xe=>i.get().getByDom(xe).fold(()=>[],_o));D.set(ke)},Z=oe=>{const ke=y;return(gt(ke[oe.name()])?ke[oe.name()]:()=>{throw new Error("Could not find "+oe.name()+" in "+JSON.stringify(t,null,2))})()},ie=oe=>gt(y[oe.name()]),G=()=>d.apis,j=oe=>y[oe]().map(ke=>ke.state.readState()).getOr("not enabled"),ue={uid:t.uid,getSystem:i.get,config:Z,hasConfigured:ie,spec:t,readState:j,getApis:G,connect:R,disconnect:P,element:E,syncComponents:I,components:D.get,events:_};return ue},Qp=(t,s)=>{const a=Ze(t,"components").getOr([]);return s.fold(()=>we(a,Hs),i=>we(a,(d,g)=>Ol(d,lu(i,g))))},QC=(t,s)=>{const{events:a,...i}=kg(t),d=Qp(i,s),g={...i,events:{...vs,...a},components:d};return $t.value(BD(g,s))},jn=t=>{const s=te.fromText(t);return l0({element:s})},l0=t=>{const s=an("external.component",Fn([ve("element"),gn("uid")]),t),a=pt(Ra()),i=y=>{a.set(y)},d=()=>{a.set(Ra(()=>p))},g=s.uid.getOrThunk(()=>kl("external"));Tl(s.element,g);const p={uid:g,getSystem:a.get,config:k.none,hasConfigured:Dn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:J("No state"),syncComponents:K,components:J([]),events:{}};return qp(p)},u0=kl,ew=t=>yn(t,"uid"),Ol=(t,s)=>zC(t).getOrThunk(()=>{const a=ew(t)?t:{uid:u0(""),...t};return QC(a,s).getOrDie()}),Hs=t=>Ol(t,k.none()),Er=qp;var tw=(t,s,a,i,d)=>t(a,i)?k.some(a):gt(d)&&d(a)?k.none():s(a,i,d);const d0=(t,s,a)=>{let i=t.dom;const d=gt(a)?a:Dn;for(;i.parentNode;){i=i.parentNode;const g=te.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},Nu=(t,s,a)=>tw((d,g)=>g(d),d0,t,s,a),Nd=(t,s)=>{const a=d=>s(te.fromDom(d));return Rt(t.dom.childNodes,a).map(te.fromDom)},Pd=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=te.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const p=a(i.childNodes[d]);if(p.isSome())return p}return k.none()};return a(t.dom)},e1=(t,s,a)=>Nu(t,s,a).isSome(),Al=(t,s,a)=>d0(t,i=>Za(i,s),a),t1=(t,s)=>Nd(t,a=>Za(a,s)),eo=(t,s)=>cC(s,t),ia=(t,s,a)=>tw((d,g)=>Za(d,g),Al,t,s,a),Xm="aria-controls",sk=t=>Nu(t,a=>{if(!Pn(a))return!1;const i=po(a,"id");return i!==void 0&&i.indexOf(Xm)>-1}).bind(a=>{const i=po(a,"id"),d=so(a);return eo(d,`[${Xm}="${i}"]`)}),m0=()=>{const t=Je(Xm);return{id:t,link:i=>{Ke(i,Xm,t)},unlink:i=>{qo(i,Xm)}}},rk=(t,s)=>sk(s).exists(a=>$d(t,a)),$d=(t,s)=>e1(s,a=>Bn(a,t.element),Dn)||rk(t,s),Jm="unknown";var tc;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(tc||(tc={}));const f0=pt({}),nw=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();Po(["mousemove","mouseover","mouseout",Eu()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:we(a,g=>Po(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Au(g.target)+")":g.outcome)})}}},ow=(t,s,a)=>{switch(Ze(f0.get(),t).orThunk(()=>{const d=io(f0.get());return Gs(d,g=>t.indexOf(g)>-1?k.some(f0.get()[g]):k.none())}).getOr(tc.NORMAL)){case tc.NORMAL:return a(rw());case tc.LOGGING:{const d=nw(t,s),g=a(d);return d.write(),g}case tc.STOP:return!0}},ak=["alloy/data/Fields","alloy/debugging/Debugging"],sw=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Rt(s,a=>a.indexOf("alloy")>0&&!va(ak,i=>a.indexOf(i)>-1)).getOr(Jm)}else return Jm},n1={logEventCut:K,logEventStopped:K,logNoParent:K,logEventNoHandlers:K,logEventResponse:K,write:K},o1=(t,s,a)=>ow(t,s,a),rw=J(n1),g0=J([ve("menu"),ve("selectedMenu")]),Fd=J([ve("item"),ve("selectedItem")]);J(ct(Fd().concat(g0())));const aw=J(ct(Fd())),s1=vu("initSize",[ve("numColumns"),ve("numRows")]),Dl=()=>In("markers",aw()),r1=()=>vu("markers",[ve("backgroundMenu")].concat(g0()).concat(Fd())),la=t=>vu("markers",we(t,ve)),Qm=(t,s,a)=>(sw(),Is(s,s,a,Ac(i=>$t.value((...d)=>i.apply(void 0,d))))),Yt=t=>Qm("onHandler",t,Sv(K)),Tr=t=>Qm("onKeyboardHandler",t,Sv(k.none)),Rl=t=>Qm("onHandler",t,Tn()),h0=t=>Qm("onKeyboardHandler",t,Tn()),zn=(t,s)=>Qs(t,J(s)),p0=t=>Qs(t,on),Ml=J(s1),Do=(t,s,a,i,d,g,p,y=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:y}),Ki=Rc.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),de=(t,s,a,i,d,g,p,y,w)=>t.fold(s,a,i,d,g,p,y,w),a1=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),ck=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),c1=Ki.southeast,Yi=Ki.southwest,Ma=Ki.northeast,Ng=Ki.northwest,i1=Ki.south,b0=Ki.north,l1=Ki.east,cw=Ki.west,Pu=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},nc=(t,s,a)=>Math.min(Math.max(t,s),a),Ir=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Vs=(t,s)=>od(["left","right","top","bottom"],a=>Ze(s,a).map(i=>Ir(t,i))),iw=(t,s,a)=>{const i=(w,E)=>s[w].map(_=>{const D=w==="top"||w==="bottom",R=D?a.top:a.left,I=(w==="left"||w==="top"?Math.max:Math.min)(_,E)+R;return D?nc(I,t.y,t.bottom):nc(I,t.x,t.right)}).getOr(E),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),y=i("bottom",t.bottom);return mo(d,g,p-d,y-g)},$u="layout",lw=t=>t.x,Pg=(t,s)=>t.x+t.width/2-s.width/2,Id=(t,s)=>t.x+t.width-s.width,v0=(t,s)=>t.y-s.height,u1=t=>t.y+t.height,uw=(t,s)=>t.y+t.height/2-s.height/2,d1=t=>t.x+t.width,y0=(t,s)=>t.x-s.width,Xo=(t,s,a)=>Do(lw(t),u1(t),a.southeast(),c1(),"southeast",Vs(t,{left:1,top:3}),$u),_s=(t,s,a)=>Do(Id(t,s),u1(t),a.southwest(),Yi(),"southwest",Vs(t,{right:0,top:3}),$u),Lr=(t,s,a)=>Do(lw(t),v0(t,s),a.northeast(),Ma(),"northeast",Vs(t,{left:1,bottom:2}),$u),Gn=(t,s,a)=>Do(Id(t,s),v0(t,s),a.northwest(),Ng(),"northwest",Vs(t,{right:0,bottom:2}),$u),Os=(t,s,a)=>Do(Pg(t,s),v0(t,s),a.north(),b0(),"north",Vs(t,{bottom:2}),$u),ys=(t,s,a)=>Do(Pg(t,s),u1(t),a.south(),i1(),"south",Vs(t,{top:3}),$u),m1=(t,s,a)=>Do(d1(t),uw(t,s),a.east(),l1(),"east",Vs(t,{left:0}),$u),f1=(t,s,a)=>Do(y0(t,s),uw(t,s),a.west(),cw(),"west",Vs(t,{right:1}),$u),dw=()=>[Xo,_s,Lr,Gn,ys,Os,m1,f1],g1=()=>[_s,Xo,Gn,Lr,ys,Os,m1,f1],C0=()=>[Lr,Gn,Xo,_s,Os,ys],w0=()=>[Gn,Lr,_s,Xo,Os,ys],mw=()=>[Xo,_s,Lr,Gn,ys,Os],zs=()=>[_s,Xo,Gn,Lr,ys,Os],ND=(t,s)=>s.universal?t:Wn(t,a=>Po(s.channels,a));var ik=Object.freeze({__proto__:null,events:t=>Ln([be(Wi(),(s,a)=>{const i=t.channels,d=io(i),g=a,p=ND(d,g);Xe(p,y=>{const w=i[y],E=w.schema,_=an("channel["+y+`] data
Receiver: `+Au(s.element),E,g.data);w.onReceive(s,_)})})])}),lk=[In("channels",_p($t.value,Fn([Rl("onReceive"),ne("schema",Qr())])))];const uk=(t,s,a)=>Bc(i=>{a(i,t,s)}),S0=(t,s,a)=>xl((i,d)=>{a(i,t,s)}),fw=(t,s,a,i,d,g)=>{const p=Fn(t),y=as(s,[Aa("config",t)]);return pw(p,y,s,a,i,d,g)},gw=(t,s,a,i,d,g)=>{const p=t,y=as(s,[Ui("config",t)]);return pw(p,y,s,a,i,d,g)},h1=(t,s,a)=>VC((d,...g)=>{const p=[d].concat(g);return d.config({name:J(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},y=>{const w=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,y.config,y.state].concat(w))})},a,s),hw=t=>({key:t,value:void 0}),pw=(t,s,a,i,d,g,p)=>{const y=D=>Wa(D,a)?D[a]():k.none(),w=lo(d,(D,R)=>h1(a,D,R)),_={...lo(g,(D,R)=>Ja(D,R)),...w,revoke:cn(hw,a),config:D=>{const R=an(a+"-config",t,D);return{key:a,value:{config:R,me:_,configAsRaw:uo(()=>an(a+"-config",t,D)),initialConfig:D,state:p}}},schema:J(s),exhibit:(D,R)=>ad(y(D),Ze(i,"exhibit"),(P,I)=>I(R,P.config,P.state)).getOrThunk(()=>ra({})),name:J(a),handlers:D=>y(D).map(R=>Ze(i,"events").getOr(()=>({}))(R.config,R.state)).getOr({})};return _},Ae=t=>Cu(t),dk=Fn([ve("fields"),ve("name"),ne("active",{}),ne("apis",{}),ne("state",Nc),ne("extra",{})]),As=t=>{const s=an("Creating behaviour: "+t.name,dk,t);return fw(s.fields,s.name,s.active,s.apis,s.extra,s.state)},mk=Fn([ve("branchKey"),ve("branches"),ve("name"),ne("active",{}),ne("apis",{}),ne("state",Nc),ne("extra",{})]),x0=t=>{const s=an("Creating behaviour: "+t.name,mk,t);return gw(Fs(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Ye=J(void 0),nr=As({fields:lk,name:"receiving",active:ik});var vw=Object.freeze({__proto__:null,exhibit:(t,s)=>ra({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const oc=t=>t.dom.focus(),p1=t=>t.dom.blur(),ef=t=>{const s=so(t).dom;return t.dom===s.activeElement},hi=(t=yp())=>k.from(t.dom.activeElement).map(te.fromDom),sc=t=>hi(so(t)).filter(s=>t.dom.contains(s.dom)),Ld=(t,s)=>{const a=so(s),i=hi(a).bind(g=>{const p=y=>Bn(g,y);return p(s)?k.some(s):Pd(s,p)}),d=t(s);return i.each(g=>{hi(a).filter(p=>Bn(p,g)).fold(()=>{oc(g)},K)}),d},Pc=(t,s,a,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},lr=t=>({...t,position:k.some(t.position)}),tf=(t,s)=>{Re(t,lr(s))},E0=Rc.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),yw=(t,s,a,i,d,g)=>{const p=s.rect,y=p.x-a,w=p.y-i,E=p.width,_=p.height,D=d-(y+E),R=g-(w+_),P=k.some(y),I=k.some(w),Z=k.some(D),ie=k.some(R),G=k.none();return de(s.direction,()=>Pc(t,P,I,G,G),()=>Pc(t,G,I,Z,G),()=>Pc(t,P,G,G,ie),()=>Pc(t,G,G,Z,ie),()=>Pc(t,P,I,G,G),()=>Pc(t,P,G,G,ie),()=>Pc(t,P,I,G,G),()=>Pc(t,G,I,Z,G))},Cw=(t,s)=>t.fold(()=>{const a=s.rect;return Pc("absolute",k.some(a.x),k.some(a.y),k.none(),k.none())},(a,i,d,g)=>yw("absolute",s,a,i,d,g),(a,i,d,g)=>yw("fixed",s,a,i,d,g)),T0=(t,s)=>{const a=cn(hg,s),i=t.fold(a,a,()=>{const p=Yr();return hg(s).translate(-p.left,-p.top)}),d=ti(s),g=du(s);return mo(i.left,i.top,d,g)},fk=(t,s)=>s.fold(()=>t.fold(wr,wr,mo),a=>t.fold(J(a),J(a),()=>{const i=k0(t,a.x,a.y);return mo(i.left,i.top,a.width,a.height)})),k0=(t,s,a)=>{const i=fn(s,a),d=()=>{const g=Yr();return i.translate(-g.left,-g.top)};return t.fold(J(i),J(i),d)},ww=(t,s,a,i)=>t.fold(s,a,i);E0.none;const gk=E0.relative,Sw=E0.fixed,hk=(t,s)=>({anchorBox:t,origin:s}),pk=(t,s)=>hk(t,s),_0="data-alloy-placement",bk=(t,s)=>{Ke(t,_0,s)},xw=t=>Kr(t,_0),vk=t=>qo(t,_0),nf=Rc.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Ew=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y,right:w,bottom:E,width:_,height:D}=t,R=p>=a&&p<=d,P=y>=i&&y<=g,I=R&&P,Z=w<=d&&w>=a,ie=E<=g&&E>=i,G=Z&&ie,j=Math.min(_,p>=a?d-p:w-a),ue=Math.min(D,y>=i?g-y:E-i);return{originInBounds:I,sizeInBounds:G,visibleW:j,visibleH:ue}},yk=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y,width:w,height:E}=t,_=Math.max(a,d-w),D=Math.max(i,g-E),R=nc(p,a,_),P=nc(y,i,D),I=Math.min(R+w,d)-R,Z=Math.min(P+E,g)-P;return mo(R,P,I,Z)},Tw=(t,s,a)=>{const i=J(s.bottom-a.y),d=J(a.bottom-s.y),g=a1(t,d,d,i),p=J(s.right-a.x),y=J(a.right-s.x);return{maxWidth:ck(t,y,y,p),maxHeight:g}},Ck=(t,s,a,i)=>{const d=t.bubble,g=d.offset,p=iw(i,t.restriction,g),y=t.x+g.left,w=t.y+g.top,E=mo(y,w,s,a),{originInBounds:_,sizeInBounds:D,visibleW:R,visibleH:P}=Ew(E,p),I=_&&D,Z=I?E:yk(E,p),ie=Z.width>0&&Z.height>0,{maxWidth:G,maxHeight:j}=Tw(t.direction,Z,i),ue={rect:Z,maxHeight:j,maxWidth:G,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return I||t.alwaysFit?nf.fit(ue):nf.nofit(ue,R,P,ie)},kw=(t,s,a,i,d,g)=>{const p=i.width,y=i.height,w=(_,D,R,P,I)=>{const Z=_(a,i,d,t,g),ie=Ck(Z,p,y,g);return ie.fold(J(ie),(G,j,ue,oe)=>(I===oe?ue>P||j>R:!I&&oe)?ie:nf.nofit(D,R,P,I))};return Yn(s,(_,D)=>{const R=cn(w,D);return _.fold(J(_),R)},nf.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:c1(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(on,on)},b1=t=>{const s=pt(k.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{a(),s.set(k.some(y))}}},Fu=()=>b1(t=>t.destroy()),of=()=>b1(t=>t.unbind()),Un=()=>{const t=b1(K);return{...t,on:a=>t.get().each(a)}},O0=vt,kr=(t,s,a)=>mg(t,s,O0,a),sf=(t,s,a)=>pv(t,s,O0,a),cs=hv,_w=["top","bottom","right","left"],Xi="data-alloy-transition-timer",wk=(t,s)=>tk(t,s.classes),v1=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),Ow=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return yr(s,(i,d)=>{const g=t[d].map(a),p=i.map(a);return!lp(g,p)}).isSome()},$g=t=>{const s=g=>{const y=bo(t,g).split(/\s*,\s*/);return Wn(y,Ca)},a=g=>{if(En(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return Ni(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return Yn(d,(g,p,y)=>{const w=a(i[y])+a(p);return Math.max(g,w)},0)},Sk=(t,s)=>{const a=of(),i=of();let d;const g=E=>{var _;const D=(_=E.raw.pseudoElement)!==null&&_!==void 0?_:"";return Bn(E.target,t)&&Io(D)&&Po(_w,E.raw.propertyName)},p=E=>{if(Mi(E)||g(E)){a.clear(),i.clear();const _=E==null?void 0:E.raw.type;(Mi(_)||_===Wm())&&(clearTimeout(d),qo(t,Xi),xr(t,s.classes))}},y=kr(t,Lv(),E=>{g(E)&&(y.unbind(),a.set(kr(t,Wm(),p)),i.set(kr(t,Su(),p)))}),w=$g(t);requestAnimationFrame(()=>{d=setTimeout(p,w+17),Ke(t,Xi,d)})},xk=(t,s)=>{_l(t,s.classes),Kr(t,Xi).each(a=>{clearTimeout(parseInt(a,10)),qo(t,Xi)}),Sk(t,s)},Ek=(t,s,a,i,d,g)=>{const p=v1(i,d,g);if(p||wk(t,i)){Mt(t,"position",a.position);const y=T0(s,t),w=Cw(s,{...d,rect:y}),E=od(_w,_=>w[_]);Ow(a,E)&&(Re(t,E),p&&xk(t,i),yl(t))}else xr(t,i.classes)},Fg=t=>({width:ti(t),height:du(t)}),Aw=(t,s,a,i)=>{mn(s,"max-height"),mn(s,"max-width");const d=Fg(s);return kw(s,i.preference,t,d,a,i.bounds)},Dw=(t,s)=>{const a=s.classes;xr(t,a.off),_l(t,a.on)},Hd=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},Tk=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},kk=(t,s,a)=>{const i=Cw(a.origin,s);a.transition.each(d=>{Ek(t,a.origin,i,d,s,a.lastPlacement)}),tf(t,i)},_k=(t,s)=>{bk(t,s.placement)},Rw=(t,s)=>{iv(t,Math.floor(s))},A0=J((t,s)=>{Rw(t,s),xa(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Nl=J((t,s)=>{Rw(t,s)}),Mw=(t,s,a)=>t[s]===void 0?a:t[s],Bw=(t,s,a,i,d,g,p,y)=>{const w=Mw(p,"maxHeightFunction",A0()),E=Mw(p,"maxWidthFunction",K),_=t.anchorBox,D=t.origin,R={bounds:fk(D,g),origin:D,preference:i,maxHeightFunction:w,maxWidthFunction:E,lastPlacement:d,transition:y};return y1(_,s,a,R)},y1=(t,s,a,i)=>{const d=Aw(t,s,a,i);return kk(s,d,i),_k(s,d),Dw(s,d),Hd(s,d,i),Tk(s,d,i),{layout:d.layout,placement:d.placement}},Ok=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Pl=(t,s,a,i=1)=>{const d=t*i,g=s*i,p=w=>Ze(a,w).getOr([]),y=(w,E,_)=>{const D=ht(Ok,_);return{offset:fn(w,E),classesOn:he(_,p),classesOff:he(D,p)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},C1=()=>Pl(0,0,{}),w1=on,Ig=(t,s)=>a=>Nw(a)==="rtl"?s:t,Nw=t=>bo(t,"direction")==="rtl"?"rtl":"ltr";var Ji;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Ji||(Ji={}));const S1="data-alloy-vertical-dir",Pw=t=>e1(t,s=>Pn(s)&&po(s,"data-alloy-vertical-dir")===Ji.BottomToTop),pi=()=>as("layouts",[ve("onLtr"),ve("onRtl"),gn("onBottomLtr"),gn("onBottomRtl")]),Iu=(t,s,a,i,d,g,p)=>{const y=p.map(Pw).getOr(!1),w=s.layouts.map(P=>P.onLtr(t)),E=s.layouts.map(P=>P.onRtl(t)),_=y?s.layouts.bind(P=>P.onBottomLtr.map(I=>I(t))).or(w).getOr(d):w.getOr(a),D=y?s.layouts.bind(P=>P.onBottomRtl.map(I=>I(t))).or(E).getOr(g):E.getOr(i);return Ig(_,D)(t)},D0=(t,s,a)=>{const i=s.hotspot,d=T0(a,i.element),g=Iu(t.element,s,mw(),zs(),C0(),w0(),k.some(s.hotspot.element));return k.some(w1({anchorBox:d,bubble:s.bubble.getOr(C1()),overrides:s.overrides,layouts:g}))};var $w=[ve("hotspot"),gn("bubble"),ne("overrides",{}),pi(),zn("placement",D0)];const x1=(t,s,a)=>{const i=k0(a,s.x,s.y),d=mo(i.left,i.top,s.width,s.height),g=Iu(t.element,s,dw(),g1(),dw(),g1(),k.none());return k.some(w1({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Ak=[ve("x"),ve("y"),ne("height",0),ne("width",0),ne("bubble",C1()),ne("overrides",{}),pi(),zn("placement",x1)];const Fw=Rc.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Dk=t=>t.fold(on,(s,a,i)=>s.translate(-a,-i)),Rk=t=>t.fold(on,on),Iw=t=>Yn(t,(s,a)=>s.translate(a.left,a.top),fn(0,0)),Lw=t=>{const s=we(t,Dk);return Iw(s)},Hw=t=>{const s=we(t,Rk);return Iw(s)},Mk=Fw.screen,Bk=Fw.absolute,Nk=(t,s,a)=>{const i=dd(a.root).dom,d=g=>{const p=Sa(g),y=Sa(t.element);return Bn(p,y)};return k.from(i.frameElement).map(te.fromDom).filter(d).map(xc)},Vw=(t,s,a)=>{const i=Sa(t.element),d=Yr(i),g=Nk(t,s,a).getOr(d);return Bk(g,d.left,d.top)},R0=(t,s,a,i)=>{const d=Mk(fn(t,s));return k.some(xC(d,a,i))},M0=(t,s,a,i,d)=>t.map(g=>{const p=[s,g.point],y=ww(i,()=>Hw(p),()=>Hw(p),()=>Lw(p)),w=$m(y.left,y.top,g.width,g.height),E=a.showAbove?C0():mw(),_=a.showAbove?w0():zs(),D=Iu(d,a,E,_,E,_,k.none());return w1({anchorBox:w,bubble:a.bubble.getOr(C1()),overrides:a.overrides,layouts:D})}),Pk=(t,s,a)=>{const i=Vw(t,a,s);return s.node.filter(Es).bind(d=>{const g=d.dom.getBoundingClientRect(),p=R0(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return M0(p,i,s,a,y)})};var $k=[ve("node"),ve("root"),gn("bubble"),pi(),ne("overrides",{}),ne("showAbove",!1),zn("placement",Pk)];const E1="\uFEFF",zw=" ",Lg={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},k1=Rc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),B0=(t,s,a,i)=>t.fold(s,a,i),Uw=t=>t.fold(on,on,on),Ww=k1.before,N0=k1.on,Fk=k1.after,Zw={before:Ww,on:N0,after:Fk,cata:B0,getStart:Uw},Hg=Rc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ik=t=>Hg.exact(t.start,t.soffset,t.finish,t.foffset),_1=t=>t.match({domRange:s=>te.fromDom(s.startContainer),relative:(s,a)=>Zw.getStart(s),exact:(s,a,i,d)=>s}),jw=Hg.domRange,Gw=Hg.relative,qw=Hg.exact,O1=t=>{const s=_1(t);return dd(s)},Lk=Lg.create,Vg={domRange:jw,relative:Gw,exact:qw,exactFromRange:Ik,getWin:O1,range:Lk},Hk=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},Vk=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},Kw=(t,s,a)=>{const i=t.document.createRange();return Hk(i,s),Vk(i,a),i},Jo=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},zk=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),rf=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?k.some(a).map(zk):k.none()},Uk=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(zk):k.none()},zg=Rc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),P0=(t,s,a)=>s(te.fromDom(a.startContainer),a.startOffset,te.fromDom(a.endContainer),a.endOffset),Wk=(t,s)=>s.match({domRange:a=>({ltr:J(a),rtl:k.none}),relative:(a,i)=>({ltr:uo(()=>Kw(t,a,i)),rtl:uo(()=>k.some(Kw(t,i,a)))}),exact:(a,i,d,g)=>({ltr:uo(()=>Jo(t,a,i,d,g)),rtl:uo(()=>k.some(Jo(t,d,g,a,i)))})}),Zk=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>zg.rtl(te.fromDom(d.endContainer),d.endOffset,te.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>P0(t,zg.ltr,a)):P0(t,zg.ltr,a)},$0=(t,s)=>{const a=Wk(t,s);return Zk(t,a)},Lu=(t,s)=>$0(t,s).match({ltr:(i,d,g,p)=>{const y=t.document.createRange();return y.setStart(i.dom,d),y.setEnd(g.dom,p),y},rtl:(i,d,g,p)=>{const y=t.document.createRange();return y.setStart(g.dom,p),y.setEnd(i.dom,d),y}});zg.ltr,zg.rtl;const af=(t,s,a)=>Wn(iC(t,a),s),_r=(t,s)=>RT(s,t),Vd=(t,s,a,i)=>{const g=Sa(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},Yw=(t,s,a,i)=>{const d=Vd(t,s,a,i),g=Bn(t,a)&&s===i;return d.collapsed&&!g},Xw=t=>k.from(t.getSelection()),F0=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return k.some(Lg.create(te.fromDom(s.startContainer),s.startOffset,te.fromDom(a.endContainer),a.endOffset))}else return k.none()},I0=t=>{if(t.anchorNode===null||t.focusNode===null)return F0(t);{const s=te.fromDom(t.anchorNode),a=te.fromDom(t.focusNode);return Yw(s,t.anchorOffset,a,t.focusOffset)?k.some(Lg.create(s,t.anchorOffset,a,t.focusOffset)):F0(t)}},L0=t=>Xw(t).filter(s=>s.rangeCount>0).bind(I0),jk=(t,s)=>{const a=Lu(t,s);return rf(a)},Ug=(t,s)=>{const a=Lu(t,s);return Uk(a)},Hu=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:a,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(wa,"text"),Wg=t=>Hu.get(t),bi=(t,s)=>({element:t,offset:s}),Gk=(t,s)=>{const a=Qc(t);if(a.length===0)return bi(t,s);if(s<a.length)return bi(a[s],0);{const i=a[a.length-1],d=wa(i)?Wg(i).length:Qc(i).length;return bi(i,d)}},Qi=(t,s)=>wa(t)?bi(t,s):Gk(t,s),$c=t=>t.foffset!==void 0,cf=(t,s)=>s.getSelection.getOrThunk(()=>()=>L0(t))().map(i=>{if($c(i)){const d=Qi(i.start,i.soffset),g=Qi(i.finish,i.foffset);return Vg.range(d.element,d.offset,g.element,g.offset)}else return i}),H0=(t,s,a)=>{const i=dd(s.root).dom,d=Vw(t,a,s),g=cf(i,s).bind(w=>{if($c(w))return Ug(i,Vg.exactFromRange(w)).orThunk(()=>{const _=te.fromText(E1);Tc(w.start,_);const D=jk(i,Vg.exact(_,0,_,1));return kc(_),D}).bind(_=>R0(_.left,_.top,_.width,_.height));{const E=lo(w,D=>D.dom.getBoundingClientRect()),_={left:Math.min(E.firstCell.left,E.lastCell.left),right:Math.max(E.firstCell.right,E.lastCell.right),top:Math.min(E.firstCell.top,E.lastCell.top),bottom:Math.max(E.firstCell.bottom,E.lastCell.bottom)};return R0(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),y=cf(i,s).bind(w=>$c(w)?Pn(w.start)?k.some(w.start):Jc(w.start):k.some(w.firstCell)).getOr(t.element);return M0(g,d,s,a,y)};var lf=[gn("getSelection"),ve("root"),gn("bubble"),pi(),ne("overrides",{}),ne("showAbove",!1),zn("placement",H0)];const $l="link-layout",uf=t=>t.x+t.width,zd=(t,s)=>t.x-s.width,V0=(t,s)=>t.y-s.height+t.height,Jw=t=>t.y,Ud=(t,s,a)=>Do(uf(t),Jw(t),a.southeast(),c1(),"southeast",Vs(t,{left:0,top:2}),$l),Wd=(t,s,a)=>Do(zd(t,s),Jw(t),a.southwest(),Yi(),"southwest",Vs(t,{right:1,top:2}),$l),Qw=(t,s,a)=>Do(uf(t),V0(t,s),a.northeast(),Ma(),"northeast",Vs(t,{left:0,bottom:3}),$l),D1=(t,s,a)=>Do(zd(t,s),V0(t,s),a.northwest(),Ng(),"northwest",Vs(t,{right:1,bottom:3}),$l),df=()=>[Ud,Wd,Qw,D1],Cs=()=>[Wd,Ud,D1,Qw],qk=(t,s,a)=>{const i=T0(a,s.item.element),d=Iu(t.element,s,df(),Cs(),df(),Cs(),k.none());return k.some(w1({anchorBox:i,bubble:C1(),overrides:s.overrides,layouts:d}))};var vi=[ve("item"),pi(),ne("overrides",{}),zn("placement",qk)],z0=Fs("type",{selection:lf,node:$k,hotspot:$w,submenu:vi,makeshift:Ak});const mf=[Oa("classes",Ts),Ka("mode","all",["all","layout","placement"])],Zd=[ne("useFixed",Dn),gn("getBounds")],U0=[In("anchor",z0),as("transition",mf)],R1=()=>{const t=document.documentElement;return Sw(0,0,t.clientWidth,t.clientHeight)},Kk=t=>{const s=xc(t.element),a=t.element.dom.getBoundingClientRect();return gk(s.left,s.top,a.width,a.height)},eS=(t,s,a,i,d,g)=>{const p=pk(s.anchorBox,t);return Bw(p,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},Zg=(t,s,a,i,d)=>{const g=k.none();tS(t,s,a,i,d,g)},tS=(t,s,a,i,d,g)=>{const p=an("placement.info",ct(U0),d),y=p.anchor,w=i.element,E=a.get(i.uid);Ld(()=>{Mt(w,"position","fixed");const _=Ns(w,"visibility");Mt(w,"visibility","hidden");const D=s.useFixed()?R1():Kk(t);y.placement(t,y,D).each(R=>{const P=g.orThunk(()=>s.getBounds.map(ba)),I=eS(D,R,P,i,E,p.transition);a.set(i.uid,I)}),_.fold(()=>{mn(w,"visibility")},R=>{Mt(w,"visibility",R)}),Ns(w,"left").isNone()&&Ns(w,"top").isNone()&&Ns(w,"right").isNone()&&Ns(w,"bottom").isNone()&&ya(Ns(w,"position"),"fixed")&&mn(w,"position")},w)};var PD=Object.freeze({__proto__:null,position:Zg,positionWithinBounds:tS,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;Xe(["position","left","right","top","bottom"],g=>mn(d,g)),vk(d),a.clear(i.uid)}}),oS=Object.freeze({__proto__:null,init:()=>{let t={};return Fr({readState:()=>t,clear:d=>{ar(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Ze(t,d)})}});const or=As({fields:Zd,name:"positioning",active:vw,apis:PD,state:oS}),M1=t=>t.getSystem().isConnected(),jd=t=>{rn(t,Dd());const s=t.components();Xe(s,jd)},Gd=t=>{const s=t.components();Xe(s,Gd),rn(t,Xa())},Ba=(t,s)=>{t.getSystem().addToWorld(s),Es(t.element)&&Gd(s)},zu=t=>{jd(t),t.getSystem().removeFromWorld(t)},W0=(t,s)=>{Ta(t.element,s.element)},ff=t=>{Xe(t.components(),s=>kc(s.element)),Pm(t.element),t.syncComponents()},Hr=(t,s,a)=>{const i=t.components();ff(t);const d=a(s),g=ht(i,d);Xe(g,p=>{jd(p),t.getSystem().removeFromWorld(p)}),Xe(d,p=>{M1(p)?W0(t,p):(t.getSystem().addToWorld(p),W0(t,p),Es(t.element)&&Gd(p))}),t.syncComponents()},ur=(t,s,a)=>{const i=t.components(),d=he(s,y=>zC(y).toArray());Xe(i,y=>{Po(d,y)||zu(y)});const g=a(s),p=ht(i,g);Xe(p,y=>{M1(y)&&zu(y)}),Xe(g,y=>{M1(y)||Ba(t,y)}),t.syncComponents()},Eo=(t,s)=>{Na(t,s,Ta)},Na=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Es(t.element)&&Gd(s),t.syncComponents()},B1=t=>{jd(t),kc(t.element),t.getSystem().removeFromWorld(t)},Us=t=>{const s=wc(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());B1(t),s.each(a=>{a.syncComponents()})},Uu=t=>{const s=t.components();Xe(s,B1),Pm(t.element),t.syncComponents()},gf=(t,s)=>{Z0(t,s,Ta)},Gg=(t,s)=>{Z0(t,s,fg)},Z0=(t,s,a)=>{a(t,s.element);const i=Qc(s.element);Xe(i,d=>{s.getByDom(d).each(Gd)})},j0=t=>{const s=Qc(t.element);Xe(s,a=>{t.getByDom(a).each(jd)}),kc(t.element)},Fl=(t,s,a,i)=>{a.get().each(p=>{Uu(t)});const d=s.getAttachPoint(t);Eo(d,t);const g=t.getSystem().build(i);return Eo(t,g),a.set(g),g},qg=(t,s,a,i)=>{const d=Fl(t,s,a,i);return s.onOpen(t,d),d},yi=(t,s,a,i)=>a.get().map(()=>Fl(t,s,a,i)),Yk=(t,s,a,i,d)=>{K0(t,s),qg(t,s,a,i),d(),cS(t,s)},G0=(t,s,a)=>{a.get().each(i=>{Uu(t),Us(t),s.onClose(t,i),a.clear()})},sS=(t,s,a)=>a.isOpen(),$D=(t,s,a,i)=>sS(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),rS=(t,s,a)=>a.get(),aS=(t,s,a,i)=>{Ns(t.element,s).fold(()=>{qo(t.element,a)},d=>{Ke(t.element,a,d)}),Mt(t.element,s,i)},q0=(t,s,a)=>{Kr(t.element,a).fold(()=>mn(t.element,s),i=>Mt(t.element,s,i))},K0=(t,s,a)=>{const i=s.getAttachPoint(t);Mt(t.element,"position",or.getMode(i)),aS(t,"visibility",s.cloakVisibilityAttr,"hidden")},Y0=t=>va(["top","left","right","bottom"],s=>Ns(t,s).isSome()),cS=(t,s,a)=>{Y0(t.element)||mn(t.element,"position"),q0(t,"visibility",s.cloakVisibilityAttr)};var iS=Object.freeze({__proto__:null,cloak:K0,decloak:cS,open:qg,openWhileCloaked:Yk,close:G0,isOpen:sS,isPartOf:$D,getState:rS,setContent:yi}),Xk=Object.freeze({__proto__:null,events:(t,s)=>Ln([be(wo(),(a,i)=>{G0(a,t,s)})])}),Jk=[Yt("onOpen"),Yt("onClose"),ve("isPartOf"),ve("getAttachPoint"),ne("cloakVisibilityAttr","data-precloak-visibility")],Qk=Object.freeze({__proto__:null,init:()=>{const t=Un(),s=J("not-implemented");return Fr({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Zt=As({fields:Jk,name:"sandboxing",active:Xk,apis:iS,state:Qk}),rc=J("dismiss.popups"),Wu=J("reposition.popups"),X0=J("mouse.released"),uS=Fn([ne("isExtraPart",Dn),as("fireEventInstead",[ne("event",Tu())])]),hf=t=>{const s=an("Dismissal",uS,t);return{[rc()]:{schema:Fn([ve("target")]),onReceive:(a,i)=>{Zt.isOpen(a)&&(Zt.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>Zt.close(a),g=>rn(a,g.event)))}}}},e_=Fn([as("fireEventInstead",[ne("event",Fp())]),ea("doReposition")]),J0=t=>{const s=an("Reposition",e_,t);return{[Wu()]:{onReceive:a=>{Zt.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>rn(a,i.event))}}}},N1=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Kg=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var ey=Object.freeze({__proto__:null,onLoad:N1,onUnload:Kg,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),dS=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Vn((i,d)=>{N1(i,t,s)}),ji((i,d)=>{Kg(i,t,s)})]:[S0(t,s,N1)];return Ln(a)}});const ty=()=>{const t=pt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Fr({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},pf=()=>Fr({readState:K}),Yg=()=>{const t=pt({}),s=pt({});return Fr({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>Ze(t.get(),p).orThunk(()=>Ze(s.get(),p)),update:p=>{const y=t.get(),w=s.get(),E={},_={};Xe(p,D=>{E[D.value]=D,Ze(D,"meta").each(R=>{Ze(R,"text").each(P=>{_[P]=D})})}),t.set({...y,...E}),s.set({...w,..._})},clear:()=>{t.set({}),s.set({})}})};var el=Object.freeze({__proto__:null,memory:ty,dataset:Yg,manual:pf,init:t=>t.store.manager.state(t)});const mS=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},n_=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},fS=(t,s,a)=>{s.store.initialValue.each(d=>{mS(t,s,a,d)})},ny=(t,s,a)=>{a.clear()};var bf=[gn("initialValue"),ve("getFallbackEntry"),ve("getDataKey"),ve("setValue"),zn("manager",{setValue:mS,getValue:n_,onLoad:fS,onUnload:ny,state:Yg})];const oy=(t,s,a)=>s.store.getValue(t),$1=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},sy=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var gS=[ve("getValue"),ne("setValue",K),gn("initialValue"),zn("manager",{setValue:$1,getValue:oy,onLoad:sy,onUnload:K,state:Nc.init})];const Xg=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},ry=(t,s,a)=>a.get(),o_=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},Fc=(t,s,a)=>{a.clear()};var hS=[gn("initialValue"),zn("manager",{setValue:Xg,getValue:ry,onLoad:o_,onUnload:Fc,state:ty})],s_=[$r("store",{mode:"memory"},Fs("mode",{memory:hS,manual:gS,dataset:bf})),Yt("onSetValue"),ne("resetOnDom",!1)];const We=As({fields:s_,name:"representing",active:dS,apis:ey,extra:{setValueFrom:(t,s)=>{const a=We.getValue(s);We.setValue(t,a)}},state:el}),Qo=(t,s)=>Nv(t,{},we(s,a=>PC(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Qs("dump",on)])),Ic=t=>t.dump,is=(t,s)=>({...Ae(s),...t.dump}),Lc={field:Qo,augment:is,get:Ic},pS="placeholder",Jg=Rc.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ac=t=>yn(t,"uiType"),F1=(t,s,a,i)=>t.exists(d=>d!==a.owner)?Jg.single(!0,J(a)):Ze(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+io(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),Qg=(t,s,a,i)=>ac(a)&&a.uiType===pS?F1(t,s,a,i):Jg.single(!1,J(a)),eh=(t,s,a,i)=>Qg(t,s,a,i).fold((g,p)=>{const y=ac(a)?p(s,a.config,a.validated):p(s),w=Ze(y,"components").getOr([]),E=he(w,_=>eh(t,s,_,i));return[{...y,components:E}]},(g,p)=>{if(ac(a)){const y=p(s,a.config,a.validated);return a.validated.preprocess.getOr(on)(y)}else return p(s)}),ay=(t,s,a,i)=>he(a,d=>eh(t,s,d,i)),th=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,y)=>p,(p,y)=>p);return{name:J(t),required:g,used:i,replace:d}},I1=(t,s,a,i)=>{const d=lo(i,(p,y)=>th(y,p)),g=ay(t,s,a,d);return ms(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},cy=Jg.single,r_=Jg.multiple,Hc=J(pS),L1=Rc.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),nh=ne("factory",{sketch:on}),ua=ne("schema",[]),Uo=ve("name"),iy=Is("pname","pname",ai(t=>"<alloy."+Je(t.name)+">"),Qr()),oh=Qs("schema",()=>[gn("preprocess")]),$a=ne("defaults",J({})),sh=ne("overrides",J({})),ly=ct([nh,ua,Uo,iy,$a,sh]),uy=ct([nh,ua,Uo,$a,sh]),a_=ct([nh,ua,Uo,iy,$a,sh]),bS=ct([nh,oh,Uo,ve("unit"),iy,$a,sh]),rh=t=>t.fold(k.some,k.none,k.some,k.some),vS=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},c_=t=>t.fold(on,on,on,on),ju=(t,s)=>a=>{const i=an("Converting part type",s,a);return t(i)},Ws=ju(L1.required,ly),cc=ju(L1.external,uy),Fa=ju(L1.optional,a_),da=ju(L1.group,bS),H1=J("entirety");var qd=Object.freeze({__proto__:null,required:Ws,external:cc,optional:Fa,group:da,asNamedPart:rh,name:vS,asCommon:c_,original:H1});const Il=(t,s,a,i)=>$n(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),i_=(t,s,a)=>{const i={},d={};return Xe(a,g=>{g.fold(p=>{i[p.pname]=cy(!0,(y,w,E)=>p.factory.sketch(Il(y,p,w,E)))},p=>{const y=s.parts[p.name];d[p.name]=J(p.factory.sketch(Il(s,p,y[H1()]),y))},p=>{i[p.pname]=cy(!1,(y,w,E)=>p.factory.sketch(Il(y,p,w,E)))},p=>{i[p.pname]=r_(!0,(y,w,E)=>{const _=y[p.name];return we(_,D=>p.factory.sketch($n(p.defaults(y,D,E),D,p.overrides(y,D))))})})}),{internals:J(i),externals:J(d)}},dy=(t,s)=>{const a={};return Xe(s,i=>{rh(i).each(d=>{const g=l_(t,d.pname);a[d.name]=p=>{const y=an("Part: "+d.name+" in "+t,ct(d.schema),p);return{...g,config:p,validated:y}}})}),a},l_=(t,s)=>({uiType:Hc(),owner:t,name:s}),yS=(t,s,a)=>({uiType:Hc(),owner:t,name:s,config:a,validated:{}}),CS=t=>he(t,s=>s.fold(k.none,k.some,k.none,k.none).map(a=>vu(a.name,a.schema.concat([p0(H1())]))).toArray()),wS=t=>we(t,vS),V1=(t,s,a)=>i_(t,s,a),my=(t,s,a)=>I1(k.some(t),s,s.components,a),Rn=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Ll=(t,s,a)=>Rn(t,s,a).getOrDie("Could not find part: "+a),vf=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return Xe(a,p=>{i[p]=J(g.getByUid(d[p]))}),i},fy=(t,s)=>{const a=t.getSystem();return lo(s.partUids,(i,d)=>J(a.getByUid(i)))},SS=t=>io(t.partUids),gy=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return Xe(a,p=>{i[p]=J(g.getByUid(d[p]).getOrDie())}),i},xS=(t,s)=>{const a=wS(s);return Cu(we(a,i=>({key:i,value:t+"-"+i})))},z1=t=>Is("partUids","partUids",qt(s=>xS(s.uid,t)),Qr());var u_=Object.freeze({__proto__:null,generate:dy,generateOne:yS,schemas:CS,names:wS,substitutes:V1,components:my,defaultUids:xS,defaultUidsSchema:z1,getAllParts:fy,getAllPartNames:SS,getPart:Rn,getPartOrDie:Ll,getParts:vf,getPartsOrDie:gy});const d_=(t,s)=>(t.length>0?[vu("parts",t)]:[]).concat([ve("uid"),ne("dom",{}),ne("components",[]),p0("originalSpec"),ne("debug.sketcher",{})]).concat(s),ES=(t,s,a,i,d)=>{const g=d_(i,d);return an(t+" [SpecSchema]",Fn(g.concat(s)),a)},m_=(t,s,a,i)=>{const d=Cf(i),g=ES(t,s,d,[],[]);return a(g,d)},hy=(t,s,a,i,d)=>{const g=Cf(d),p=CS(a),y=z1(a),w=ES(t,s,g,p,[y]),E=V1(t,w,a),_=my(t,w,E.internals());return i(w,_,g,E.externals())},yf=t=>yn(t,"uid"),Cf=t=>yf(t)?t:{...t,uid:kl("uid")},U1=t=>t.uid!==void 0,TS=Fn([ve("name"),ve("factory"),ve("configFields"),ne("apis",{}),ne("extraApis",{})]),ic=Fn([ve("name"),ve("factory"),ve("configFields"),ve("partFields"),ne("apis",{}),ne("extraApis",{})]),Zs=t=>{const s=an("Sketcher for "+t.name,TS,t),a=g=>m_(s.name,s.configFields,s.factory,g),i=lo(s.apis,Mu),d=lo(s.extraApis,(g,p)=>Ja(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},sr=t=>{const s=an("Sketcher for "+t.name,ic,t),a=p=>hy(s.name,s.configFields,s.partFields,s.factory,p),i=dy(s.name,s.partFields),d=lo(s.apis,Mu),g=lo(s.extraApis,(p,y)=>Ja(p,y));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},tl=t=>iu("input")(t)&&po(t,"type")!=="radio"||iu("textarea")(t);var g_=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const h_=[ve("find")],Xt=As({fields:h_,name:"composing",apis:g_}),p_=["input","button","textarea","select"],kS=(t,s,a)=>{(s.disabled()?ah:py)(t,s)},W1=(t,s)=>s.useNative===!0&&Po(p_,Cc(t.element)),b_=t=>cv(t.element,"disabled"),Ge=t=>{Ke(t.element,"disabled","disabled")},Kd=t=>{qo(t.element,"disabled")},v_=t=>po(t.element,"aria-disabled")==="true",_S=t=>{Ke(t.element,"aria-disabled","true")},Z1=t=>{Ke(t.element,"aria-disabled","false")},ah=(t,s,a)=>{s.disableClass.each(d=>{So(t.element,d)}),(W1(t,s)?Ge:_S)(t),s.onDisabled(t)},py=(t,s,a)=>{s.disableClass.each(d=>{ao(t.element,d)}),(W1(t,s)?Kd:Z1)(t),s.onEnabled(t)},by=(t,s)=>W1(t,s)?b_(t):v_(t);var ID=Object.freeze({__proto__:null,enable:py,disable:ah,isDisabled:by,onLoad:kS,set:(t,s,a,i)=>{(i?ah:py)(t,s)}}),j1=Object.freeze({__proto__:null,exhibit:(t,s)=>ra({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Ln([Wv(sa(),(a,i)=>by(a,t)),S0(t,s,kS)])}),C_=[ps("disabled",Dn),ne("useNative",!0),gn("disableClass"),Yt("onDisabled"),Yt("onEnabled")];const yt=As({fields:C_,name:"disabling",active:j1,apis:ID}),w_=(t,s,a,i)=>{const d=_r(t.element,"."+s.highlightClass);Xe(d,g=>{va(i,y=>Bn(y.element,g))||(ao(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),rn(y,zv())}))})},S_=(t,s,a)=>w_(t,s,a,[]),LD=(t,s,a,i)=>{ih(t,s,a,i)&&(ao(i.element,s.highlightClass),s.onDehighlight(t,i),rn(i,zv()))},ch=(t,s,a,i)=>{w_(t,s,a,[i]),ih(t,s,a,i)||(So(i.element,s.highlightClass),s.onHighlight(t,i),rn(i,ku()))},G1=(t,s,a)=>{yy(t,s).each(i=>{ch(t,s,a,i)})},x_=(t,s,a)=>{Cy(t,s).each(i=>{ch(t,s,a,i)})},E_=(t,s,a,i)=>{DS(t,s,a,i).fold(d=>{throw d},d=>{ch(t,s,a,d)})},T_=(t,s,a,i)=>{const d=wy(t,s);Rt(d,i).each(p=>{ch(t,s,a,p)})},ih=(t,s,a,i)=>aa(i.element,s.highlightClass),vy=(t,s,a)=>eo(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),DS=(t,s,a,i)=>{const d=_r(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>$t.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},yy=(t,s,a)=>eo(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Cy=(t,s,a)=>{const i=_r(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},RS=(t,s,a,i)=>{const d=_r(t.element,"."+s.itemClass);return no(d,p=>aa(p,s.highlightClass)).bind(p=>{const y=Pu(p,i,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},Hl=(t,s,a)=>RS(t,s,a,-1),wf=(t,s,a)=>RS(t,s,a,1),wy=(t,s,a)=>{const i=_r(t.element,"."+s.itemClass);return rd(we(i,d=>t.getSystem().getByDom(d).toOptional()))};var k_=Object.freeze({__proto__:null,dehighlightAll:S_,dehighlight:LD,highlight:ch,highlightFirst:G1,highlightLast:x_,highlightAt:E_,highlightBy:T_,isHighlighted:ih,getHighlighted:vy,getFirst:yy,getLast:Cy,getPrevious:Hl,getNext:wf,getCandidates:wy}),__=[ve("highlightClass"),ve("itemClass"),Yt("onHighlight"),Yt("onDehighlight")];const ln=As({fields:__,name:"highlighting",apis:k_}),Sy=[8],nl=[9],ol=[13],Vl=[27],dr=[32],q1=[37],Sf=[38],K1=[39],Yd=[40],O_=(t,s,a)=>{const i=br(t.slice(0,s)),d=br(t.slice(s+1));return Rt(i.concat(d),a)},HD=(t,s,a)=>{const i=br(t.slice(0,s));return Rt(i,a)},A_=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return Rt(d.concat(i),a)},MS=(t,s,a)=>{const i=t.slice(s+1);return Rt(i,a)},Jt=t=>s=>{const a=s.raw;return Po(t,a.which)},Vc=t=>s=>au(t,a=>a(s)),xf=t=>t.raw.shiftKey===!0,D_=t=>t.raw.ctrlKey===!0,Xd=Se(xf),en=(t,s)=>({matches:t,classification:s}),R_=(t,s)=>Rt(t,i=>i.matches(s)).map(i=>i.classification),Y1=(t,s,a)=>{s.exists(d=>a.exists(g=>Bn(g,d)))||lt(t,Ip(),{prevFocus:s,newFocus:a})},X1=()=>{const t=a=>sc(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);Y1(a,d,g)}}},J1=()=>{const t=a=>ln.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(K,p=>{ln.highlight(a,p)});const g=t(a);Y1(a,d,g)}}};var zl;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(zl||(zl={}));const sl=(t,s,a,i,d)=>{const g=()=>t.concat([ne("focusManager",X1()),$r("focusInside","onFocus",Ac(E=>Po(["onFocus","onEnterOrSpace","onApi"],E)?$t.value(E):$t.error("Invalid value for focusInside"))),zn("handler",w),zn("state",s),zn("sendFocusIn",d)]),p=(E,_,D,R,P)=>{const I=D(E,_,R,P);return R_(I,_.event).bind(Z=>Z(E,_,R,P))},w={schema:g,processKey:p,toEvents:(E,_)=>{const D=E.focusInside!==zl.OnFocusMode?k.none():d(E).map(I=>be(di(),(Z,ie)=>{I(Z,E,_),ie.stop()})),R=(I,Z)=>{const ie=Jt(dr.concat(ol))(Z.event);E.focusInside===zl.OnEnterOrSpaceMode&&ie&&vg(I,Z)&&d(E).each(G=>{G(I,E,_),Z.stop()})},P=[be(Mc(),(I,Z)=>{p(I,Z,a,E,_).fold(()=>{R(I,Z)},ie=>{Z.stop()})}),be(zT(),(I,Z)=>{p(I,Z,i,E,_).each(ie=>{Z.stop()})})];return Ln(D.toArray().concat(P))}};return w},l=t=>{const s=[gn("onEscape"),gn("onEnter"),ne("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ne("firstTabstop",0),ne("useTabstopAt",vt),gn("visibilitySelector")].concat([t]),a=(G,j)=>{const ue=G.visibilitySelector.bind(oe=>ia(j,oe)).getOr(j);return os(ue)>0},i=(G,j)=>{const ue=_r(G.element,j.selector),oe=Wn(ue,ke=>a(j,ke));return k.from(oe[j.firstTabstop])},d=(G,j)=>j.focusManager.get(G).bind(ue=>ia(ue,j.selector)),g=(G,j)=>a(G,j)&&G.useTabstopAt(j),p=(G,j,ue)=>{i(G,j).each(oe=>{j.focusManager.set(G,oe)})},y=(G,j,ue,oe,ke)=>ke(j,ue,xe=>g(oe,xe)).fold(()=>oe.cyclic?k.some(!0):k.none(),xe=>(oe.focusManager.set(G,xe),k.some(!0))),w=(G,j,ue,oe)=>{const ke=_r(G.element,ue.selector);return d(G,ue).bind(xe=>no(ke,cn(Bn,xe)).bind(Ue=>y(G,ke,Ue,ue,oe)))},E=(G,j,ue)=>{const oe=ue.cyclic?O_:HD;return w(G,j,ue,oe)},_=(G,j,ue)=>{const oe=ue.cyclic?A_:MS;return w(G,j,ue,oe)},D=G=>md(G).bind(fp).exists(j=>Bn(j,G)),R=(G,j,ue)=>d(G,ue).filter(oe=>!ue.useTabstopAt(oe)).bind(oe=>(D(oe)?E:_)(G,j,ue)),P=(G,j,ue)=>ue.onEnter.bind(oe=>oe(G,j)),I=(G,j,ue)=>ue.onEscape.bind(oe=>oe(G,j)),Z=J([en(Vc([xf,Jt(nl)]),E),en(Jt(nl),_),en(Vc([Xd,Jt(ol)]),P)]),ie=J([en(Jt(Vl),I),en(Jt(nl),R)]);return sl(s,Nc.init,Z,ie,()=>k.some(p))};var m=l(Qs("cyclic",Dn)),h=l(Qs("cyclic",vt));const v=(t,s,a)=>(Vp(t,a,sa()),k.some(!0)),S=(t,s,a)=>tl(a)&&Jt(dr)(s.event)?k.none():v(t,s,a),T=(t,s)=>k.some(!0),M=[ne("execute",S),ne("useSpace",!1),ne("useEnter",!0),ne("useControlEnter",!1),ne("useDown",!1)],$=(t,s,a)=>a.execute(t,s,t.element),H=(t,s,a,i)=>{const d=a.useSpace&&!tl(t.element)?dr:[],g=a.useEnter?ol:[],p=a.useDown?Yd:[],y=d.concat(g).concat(p);return[en(Jt(y),$)].concat(a.useControlEnter?[en(Vc([D_,Jt(ol)]),$)]:[])},W=(t,s,a,i)=>a.useSpace&&!tl(t.element)?[en(Jt(dr),T)]:[];var ee=sl(M,Nc.init,H,W,()=>k.none());const ye=()=>{const t=Un();return Fr({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var He=Object.freeze({__proto__:null,flatgrid:ye,init:t=>t.state(t)});const pe=t=>(s,a,i,d)=>{const g=t(s.element);return wt(g,s,a,i,d)},Ve=(t,s)=>{const a=Ig(t,s);return pe(a)},ge=(t,s)=>{const a=Ig(s,t);return pe(a)},et=t=>(s,a,i,d)=>wt(t,s,a,i,d),wt=(t,s,a,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),It=et,qn=et,Wo=et,Ro=t=>t.offsetWidth<=0&&t.offsetHeight<=0,mr=t=>!Ro(t.dom),Jd=(t,s)=>no(t,s).map(a=>({index:a,candidates:t})),lh=(t,s,a)=>{const i=p=>Bn(p,s),d=_r(t,a),g=Wn(d,mr);return Jd(g,i)},Q1=(t,s)=>no(t,a=>Bn(s,a)),eb=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(p=>{const y=p.row*a+p.column;return y>=0&&y<t.length?k.some(t[y]):k.none()})},kn=(t,s,a,i,d)=>eb(t,s,i,(g,p)=>{const w=g===a-1?t.length-g*i:i,E=Pu(p,d,0,w-1);return k.some({row:g,column:E})}),fr=(t,s,a,i,d)=>eb(t,s,i,(g,p)=>{const y=Pu(g,d,0,a-1),E=y===a-1?t.length-y*i:i,_=nc(p,0,E-1);return k.some({row:y,column:_})}),Or=(t,s,a,i)=>kn(t,s,a,i,1),zc=(t,s,a,i)=>kn(t,s,a,i,-1),Ar=(t,s,a,i)=>fr(t,s,a,i,-1),Qd=(t,s,a,i)=>fr(t,s,a,i,1),gr=[ve("selector"),ne("execute",S),Tr("onEscape"),ne("captureTab",!1),Ml()],uh=(t,s,a)=>{eo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},dh=(t,s)=>s.focusManager.get(t).bind(a=>ia(a,s.selector)),Ci=(t,s,a,i)=>dh(t,a).bind(d=>a.execute(t,s,d)),ws=t=>(s,a,i,d)=>lh(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),xy=(t,s,a)=>a.captureTab?k.some(!0):k.none(),BS=(t,s,a)=>a.onEscape(t,s),NS=ws(zc),PS=ws(Or),M_=ws(Ar),Ey=ws(Qd),B_=J([en(Jt(q1),Ve(NS,PS)),en(Jt(K1),ge(NS,PS)),en(Jt(Sf),It(M_)),en(Jt(Yd),qn(Ey)),en(Vc([xf,Jt(nl)]),xy),en(Vc([Xd,Jt(nl)]),xy),en(Jt(dr.concat(ol)),Ci)]),mh=J([en(Jt(Vl),BS),en(Jt(dr),T)]);var N_=sl(gr,ye,B_,mh,()=>k.some(uh));const $S=(t,s,a,i,d)=>{const g=y=>Cc(y)==="button"&&po(y,"disabled")==="disabled",p=(y,w,E)=>d(y,w,i,0,E.length-1,E[w],_=>g(E[_])?p(y,_,E):k.from(E[_]));return lh(t,a,s).bind(y=>{const w=y.index,E=y.candidates;return p(w,w,E)})},VD=(t,s,a,i)=>$S(t,s,a,i,(d,g,p,y,w,E,_)=>{const D=nc(g+p,y,w);return D===d?k.from(E):_(D)}),P_=(t,s,a,i)=>$S(t,s,a,i,(d,g,p,y,w,E,_)=>{const D=Pu(g,p,y,w);return D===d?k.none():_(D)}),zD=[ve("selector"),ne("getInitial",k.none),ne("execute",S),Tr("onEscape"),ne("executeOnMove",!1),ne("allowVertical",!0),ne("allowHorizontal",!0),ne("cycles",!0)],e6=(t,s)=>s.focusManager.get(t).bind(a=>ia(a,s.selector)),$_=(t,s,a)=>e6(t,a).bind(i=>a.execute(t,s,i)),wi=(t,s,a)=>{s.getInitial(t).orThunk(()=>eo(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},UD=(t,s,a)=>(a.cycles?P_:VD)(t,a.selector,s,-1),WD=(t,s,a)=>(a.cycles?P_:VD)(t,a.selector,s,1),ZD=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?$_(s,a,i):k.some(!0)),t6=(t,s,a)=>a.onEscape(t,s),n6=(t,s,a,i)=>{const d=[...a.allowHorizontal?q1:[]].concat(a.allowVertical?Sf:[]),g=[...a.allowHorizontal?K1:[]].concat(a.allowVertical?Yd:[]);return[en(Jt(d),ZD(Ve(UD,WD))),en(Jt(g),ZD(ge(UD,WD))),en(Jt(ol),$_),en(Jt(dr),$_)]},tb=J([en(Jt(dr),T),en(Jt(Vl),t6)]);var F_=sl(zD,Nc.init,n6,tb,()=>k.some(wi));const FS=(t,s,a)=>k.from(t[s]).bind(i=>k.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),IS=(t,s,a,i)=>{const g=t[s].length,p=Pu(a,i,0,g-1);return FS(t,s,p)},Ty=(t,s,a,i)=>{const d=Pu(a,i,0,t.length-1),g=t[d].length,p=nc(s,0,g-1);return FS(t,d,p)},LS=(t,s,a,i)=>{const g=t[s].length,p=nc(a+i,0,g-1);return FS(t,s,p)},jD=(t,s,a,i)=>{const d=nc(a+i,0,t.length-1),g=t[d].length,p=nc(s,0,g-1);return FS(t,d,p)},o6=(t,s,a)=>IS(t,s,a,1),s6=(t,s,a)=>IS(t,s,a,-1),r6=(t,s,a)=>Ty(t,a,s,-1),a6=(t,s,a)=>Ty(t,a,s,1),c6=(t,s,a)=>LS(t,s,a,-1),GD=(t,s,a)=>LS(t,s,a,1),I_=(t,s,a)=>jD(t,a,s,-1),i6=(t,s,a)=>jD(t,a,s,1),l6=[vu("selectors",[ve("row"),ve("cell")]),ne("cycles",!0),ne("previousSelector",k.none),ne("execute",S)],u6=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return eo(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},d6=(t,s,a)=>sc(t.element).bind(i=>a.execute(t,s,i)),fh=(t,s)=>we(t,a=>_r(a,s.selectors.cell)),HS=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return ia(i,d.selectors.row).bind(p=>{const y=_r(p,d.selectors.cell);return Q1(y,i).bind(w=>{const E=_r(a,d.selectors.row);return Q1(E,p).bind(_=>{const D=fh(E,d);return g(D,_,w).map(R=>R.cell)})})})},qD=HS(s6,c6),VS=HS(o6,GD),m6=HS(r6,I_),KD=HS(a6,i6),YD=J([en(Jt(q1),Ve(qD,VS)),en(Jt(K1),ge(qD,VS)),en(Jt(Sf),It(m6)),en(Jt(Yd),qn(KD)),en(Jt(dr.concat(ol)),d6)]),XD=J([en(Jt(dr),T)]);var JD=sl(l6,Nc.init,YD,XD,()=>k.some(u6));const f6=[ve("selector"),ne("execute",S),ne("moveOnTab",!1)],QD=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),g6=(t,s,a)=>{eo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},zS=(t,s,a)=>P_(t,a.selector,s,-1),eR=(t,s,a)=>P_(t,a.selector,s,1),h6=(t,s,a,i)=>a.moveOnTab?Wo(zS)(t,s,a,i):k.none(),p6=(t,s,a,i)=>a.moveOnTab?Wo(eR)(t,s,a,i):k.none(),b6=J([en(Jt(Sf),Wo(zS)),en(Jt(Yd),Wo(eR)),en(Vc([xf,Jt(nl)]),h6),en(Vc([Xd,Jt(nl)]),p6),en(Jt(ol),QD),en(Jt(dr),QD)]),tR=J([en(Jt(dr),T)]);var v6=sl(f6,Nc.init,b6,tR,()=>k.some(g6));const y6=[Tr("onSpace"),Tr("onEnter"),Tr("onShiftEnter"),Tr("onLeft"),Tr("onRight"),Tr("onTab"),Tr("onShiftTab"),Tr("onUp"),Tr("onDown"),Tr("onEscape"),ne("stopSpaceKeyup",!1),gn("focusIn")],C6=(t,s,a)=>[en(Jt(dr),a.onSpace),en(Vc([Xd,Jt(ol)]),a.onEnter),en(Vc([xf,Jt(ol)]),a.onShiftEnter),en(Vc([xf,Jt(nl)]),a.onShiftTab),en(Vc([Xd,Jt(nl)]),a.onTab),en(Jt(Sf),a.onUp),en(Jt(Yd),a.onDown),en(Jt(q1),a.onLeft),en(Jt(K1),a.onRight),en(Jt(dr),a.onSpace)],nR=(t,s,a)=>[...a.stopSpaceKeyup?[en(Jt(dr),T)]:[],en(Jt(Vl),a.onEscape)];var w6=sl(y6,Nc.init,C6,nR,t=>t.focusIn);const S6=m.schema(),oR=h.schema(),x6=F_.schema(),E6=N_.schema(),US=JD.schema(),T6=ee.schema(),sR=v6.schema(),Ia=w6.schema();var k6=Object.freeze({__proto__:null,acyclic:S6,cyclic:oR,flow:x6,flatgrid:E6,matrix:US,execution:T6,menu:sR,special:Ia});const rR=t=>Wa(t,"setGridSize"),ut=x0({branchKey:"mode",branches:k6,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{rR(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:He}),aR=(t,s)=>{Ld(()=>{Hr(t,s,()=>we(s,t.getSystem().build))},t.element)},L_=(t,s)=>{Ld(()=>{ur(t,s,()=>ec(t.element,s,t.getSystem().buildOrPatch))},t.element)},_6=(t,s,a,i)=>{zu(s);const d=Jp(t.element,a,i,t.getSystem().buildOrPatch);Ba(t,d),t.syncComponents()},WS=(t,s,a)=>{const i=t.getSystem().build(a);Na(t,i,s)},cR=(t,s,a,i)=>{Us(s),WS(t,(d,g)=>$s(d,g,a),i)},O6=(t,s,a,i)=>(s.reuseDom?L_:aR)(t,i),A6=(t,s,a,i)=>{WS(t,Ta,i)},D6=(t,s,a,i)=>{WS(t,bv,i)},R6=(t,s,a,i)=>{const d=ky(t);Rt(d,p=>Bn(i.element,p.element)).each(Us)},ky=(t,s)=>t.components(),H_=(t,s,a,i,d)=>{const g=ky(t);return k.from(g[i]).map(p=>(d.fold(()=>Us(p),y=>{(s.reuseDom?_6:cR)(t,p,i,y)}),p))};var iR=Object.freeze({__proto__:null,append:A6,prepend:D6,remove:R6,replaceAt:H_,replaceBy:(t,s,a,i,d)=>{const g=ky(t);return no(g,i).bind(p=>H_(t,s,a,p,d))},set:O6,contents:ky});const kt=As({fields:[Yo("reuseDom",!0)],name:"replacing",apis:iR}),V_=(t,s)=>{const a=Ln(s);return As({fields:[ve("enabled")],name:t,active:{events:J(a)}})},Nt=(t,s)=>{const a=V_(t,s);return{key:t,value:{config:{},me:a,configAsRaw:J({}),initialConfig:{},state:Nc}}},lR=(t,s)=>{s.ignore||(oc(t.element),s.onFocus(t))};var uR=Object.freeze({__proto__:null,focus:lR,blur:(t,s)=>{s.ignore||p1(t.element)},isFocused:t=>ef(t.element)}),M6=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return ra(a)},events:t=>Ln([be(di(),(s,a)=>{lR(s,t),a.stop()})].concat(t.stopMousedown?[be(Ya(),(s,a)=>{a.event.prevent()})]:[]))}),Ef=[Yt("onFocus"),ne("stopMousedown",!1),ne("ignore",!1)];const Ct=As({fields:Ef,name:"focusing",active:M6,apis:uR}),fR=t=>({init:()=>{const a=pt(t);return{get:()=>a.get(),set:y=>a.set(y),clear:()=>a.set(t),readState:()=>a.get()}}}),B6=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},N6=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?So(t.element,i):ao(t.element,i)})},em=(t,s,a,i)=>{const d=a.get();a.set(i),N6(t,s,a),B6(t,s,a),d!==i&&s.onToggled(t,i)},nb=(t,s,a)=>{em(t,s,a,!a.get())},gR=(t,s,a)=>{em(t,s,a,!0)},hR=(t,s,a)=>{em(t,s,a,!1)},Tf=(t,s,a)=>a.get(),tm=(t,s,a)=>{em(t,s,a,s.selected)};var P6=Object.freeze({__proto__:null,onLoad:tm,toggle:nb,isOn:Tf,on:gR,off:hR,set:em}),nm=Object.freeze({__proto__:null,exhibit:()=>ra({}),events:(t,s)=>{const a=uk(t,s,nb),i=S0(t,s,tm);return Ln(Ft([t.toggleOnExecute?[a]:[],[i]]))}});const z_=(t,s,a)=>{Ke(t.element,"aria-pressed",a),s.syncWithExpanded&&U_(t,s,a)},pR=(t,s,a)=>{Ke(t.element,"aria-selected",a)},bR=(t,s,a)=>{Ke(t.element,"aria-checked",a)},U_=(t,s,a)=>{Ke(t.element,"aria-expanded",a)};var W_=[ne("selected",!1),gn("toggleClass"),ne("toggleOnExecute",!0),Yt("onToggled"),$r("aria",{mode:"none"},Fs("mode",{pressed:[ne("syncWithExpanded",!1),zn("update",z_)],checked:[zn("update",bR)],expanded:[zn("update",U_)],selected:[zn("update",pR)],none:[zn("update",K)]}))];const Lt=As({fields:W_,name:"toggling",active:nm,apis:P6,state:fR(!1)}),vR=()=>{const t=(s,a)=>{a.stop(),_u(s)};return[be(wu(),t),be(xg(),t),Zi(ui()),Zi(Ya())]},ZS=t=>{const s=a=>Bc((i,d)=>{a(i),d.stop()});return Ln(Ft([t.map(s).toArray(),vR()]))},yR="alloy.item-hover",_y="alloy.item-focus",jS="alloy.item-toggled",GS=t=>{(sc(t.element).isNone()||Ct.isFocused(t))&&(Ct.isFocused(t)||Ct.focus(t),lt(t,yR,{item:t}))},CR=t=>{lt(t,_y,{item:t})},F6=(t,s)=>{lt(t,jS,{item:t,state:s})},Z_=J(yR),wR=J(_y),SR=J(jS),xR=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),I6=t=>({aria:{mode:"checked"},...sd(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{gt(t.onToggled)&&t.onToggled(s,a),F6(s,a)}}),j_=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:xR(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Lc.augment(t.itemBehaviours,[t.toggling.fold(Lt.revoke,s=>Lt.config(I6(s))),Ct.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{CR(s)}}),ut.config({mode:"execution"}),We.config({store:{mode:"memory",initialValue:t.data}}),Nt("item-type-events",[...vR(),be(Ls(),GS),be(Sg(),Ct.focus)])]),components:t.components,eventOrder:t.eventOrder}),L6=[ve("data"),ve("components"),ve("dom"),ne("hasSubmenu",!1),gn("toggling"),Lc.field("itemBehaviours",[Lt,Ct,ut,We]),ne("ignoreFocus",!1),ne("domModification",{}),zn("builder",j_),ne("eventOrder",{})],H6=t=>({dom:t.dom,components:t.components,events:Ln([Zp(Sg())])}),V6=[ve("dom"),ve("components"),zn("builder",H6)],G_=J("item-widget"),qS=J([Ws({name:"widget",overrides:t=>({behaviours:Ae([We.config({store:{mode:"manual",getValue:s=>t.data,setValue:K}})])})})]),z6=t=>{const s=V1(G_(),t,qS()),a=my(G_(),t,s.internals()),i=g=>Rn(g,t,"widget").map(p=>(ut.focusIn(p),p)),d=(g,p)=>tl(p.event.target)?k.none():(()=>(t.autofocus&&p.setSource(g.element),k.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Ln([Bc((g,p)=>{i(g).each(y=>{p.stop()})}),be(Ls(),GS),be(Sg(),(g,p)=>{t.autofocus?i(g):Ct.focus(g)})]),behaviours:Lc.augment(t.widgetBehaviours,[We.config({store:{mode:"memory",initialValue:t.data}}),Ct.config({ignore:t.ignoreFocus,onFocus:g=>{CR(g)}}),ut.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:Ye(),onLeft:d,onRight:d,onEscape:(g,p)=>!Ct.isFocused(g)&&!t.autofocus?(Ct.focus(g),k.some(!0)):(t.autofocus&&p.setSource(g.element),k.none())})])}},U6=[ve("uid"),ve("data"),ve("components"),ve("dom"),ne("autofocus",!1),ne("ignoreFocus",!1),Lc.field("widgetBehaviours",[We,Ct,ut]),ne("domModification",{}),z1(qS()),zn("builder",z6)],ER=Fs("type",{widget:U6,item:L6,separator:V6}),Oy=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),W6=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),Ay=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),q_=J([da({factory:{sketch:t=>{const s=an("menu.spec item",ER,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>yn(s,"uid")?s:{...s,uid:kl("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),TR=J([ve("value"),ve("items"),ve("dom"),ve("components"),ne("eventOrder",{}),Qo("menuBehaviours",[ln,We,Xt,ut]),$r("movement",{mode:"menu",moveOnTab:!0},Fs("mode",{grid:[Ml(),zn("config",Oy)],matrix:[zn("config",W6),ve("rowSelector"),ne("previousSelector",k.none)],menu:[ne("moveOnTab",!0),zn("config",Ay)]})),Dl(),ne("fakeFocus",!1),ne("focusManager",X1()),Yt("onHighlight"),Yt("onDehighlight")]),K_=J("alloy.menu-focus"),Z6=(t,s)=>{const a=_r(t.element,'[role="menuitemradio"][aria-checked="true"]');Xe(a,i=>{Bn(i,s.element)||t.getSystem().getByDom(i).each(d=>{Lt.off(d)})})},j6=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:is(t.menuBehaviours,[ln.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),We.config({store:{mode:"memory",initialValue:t.value}}),Xt.config({find:k.some}),ut.config(t.movement.config(t,t.movement))]),events:Ln([be(wR(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(y=>{ln.highlight(d,y),g.stop(),lt(d,K_(),{menu:d,item:y})})}),be(Z_(),(d,g)=>{const p=g.event.item;ln.highlight(d,p)}),be(SR(),(d,g)=>{const{item:p,state:y}=g.event;y&&po(p.element,"role")==="menuitemradio"&&Z6(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),kf=sr({name:"Menu",configFields:TR(),partFields:q_(),factory:j6}),G6=t=>tg(t,(s,a)=>({k:s,v:a})),Y_=(t,s,a,i)=>Ze(a,i).bind(d=>Ze(t,d).bind(g=>{const p=Y_(t,s,a,g);return k.some([g].concat(p))})).getOr([]),q6=(t,s)=>{const a={};ms(t,(p,y)=>{Xe(p,w=>{a[w]=y})});const i=s,d=G6(s),g=lo(d,(p,y)=>[y].concat(Y_(a,i,d,y)));return lo(a,p=>Ze(g,p).getOr([p]))},K6=()=>{const t=pt({}),s=pt({}),a=pt({}),i=Un(),d=pt({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},p=()=>i.get().isNone(),y=(ke,xe)=>{s.set({...s.get(),[ke]:{type:"prepared",menu:xe}})},w=(ke,xe,$e,Ue)=>{i.set(ke),t.set($e),s.set(xe),d.set(Ue);const Wt=q6(Ue,$e);a.set(Wt)},E=ke=>yr(t.get(),(xe,$e)=>xe===ke),_=(ke,xe,$e)=>Z(ke).bind(Ue=>E(ke).bind(Wt=>xe(Wt).map(rt=>({triggeredMenu:Ue,triggeringItem:rt,triggeringPath:$e})))),D=(ke,xe)=>{const $e=Wn(G(ke).toArray(),Ue=>Z(Ue).isSome());return Ze(a.get(),ke).bind(Ue=>{const Wt=br($e.concat(Ue)),rt=he(Wt,(Dt,Et)=>_(Dt,xe,Wt.slice(0,Et+1)).fold(()=>ya(i.get(),Dt)?[]:[k.none()],nn=>[k.some(nn)]));return oo(rt)})},R=ke=>Ze(t.get(),ke).map(xe=>{const $e=Ze(a.get(),ke).getOr([]);return[xe].concat($e)}),P=ke=>Ze(a.get(),ke).bind(xe=>xe.length>1?k.some(xe.slice(1)):k.none()),I=ke=>Ze(a.get(),ke),Z=ke=>ie(ke).bind(X_),ie=ke=>Ze(s.get(),ke),G=ke=>Ze(t.get(),ke);return{setMenuBuilt:y,setContents:w,expand:R,refresh:I,collapse:P,lookupMenu:ie,lookupItem:G,otherMenus:ke=>{const xe=d.get();return ht(io(xe),ke)},getPrimary:()=>i.get().bind(Z),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:D}},X_=t=>t.type==="prepared"?k.some(t.menu):k.none(),Dy={init:K6,extractPreparedMenu:X_},KS=Je("tiered-menu-item-highlight"),YS=Je("tiered-menu-item-dehighlight");var ma;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ma||(ma={}));const Y6=(t,s)=>{const a=Un(),i=(Fe,nt,St)=>lo(St,(Gt,ft)=>{const _t=()=>kf.sketch({...Gt,value:ft,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Mn,dn)=>{lt(Mn,KS,{menuComp:Mn,itemComp:dn})},onDehighlight:(Mn,dn)=>{lt(Mn,YS,{menuComp:Mn,itemComp:dn})},focusManager:t.fakeFocus?J1():X1()});return ft===nt?{type:"prepared",menu:Fe.getSystem().build(_t())}:{type:"notbuilt",nbMenu:_t}}),d=Dy.init(),g=Fe=>{const nt=i(Fe,t.data.primary,t.data.menus),St=w();return d.setContents(t.data.primary,nt,t.data.expansions,St),d.getPrimary()},p=Fe=>We.getValue(Fe).value,y=(Fe,nt,St)=>Gs(nt,Gt=>{if(!Gt.getSystem().isConnected())return k.none();const ft=ln.getCandidates(Gt);return Rt(ft,_t=>p(_t)===St)}),w=Fe=>lo(t.data.menus,(nt,St)=>he(nt.items,Gt=>Gt.type==="separator"?[]:[Gt.data.value])),E=ln.highlight,_=(Fe,nt)=>{E(Fe,nt),ln.getHighlighted(nt).orThunk(()=>ln.getFirst(nt)).each(St=>{t.fakeFocus?ln.highlight(nt,St):Vp(Fe,St.element,Sg())})},D=(Fe,nt)=>rd(we(nt,St=>Fe.lookupMenu(St).bind(Gt=>Gt.type==="prepared"?k.some(Gt.menu):k.none()))),R=(Fe,nt,St)=>{const Gt=D(nt,nt.otherMenus(St));Xe(Gt,ft=>{xr(ft.element,[t.markers.backgroundMenu]),t.stayInDom||kt.remove(Fe,ft)})},P=Fe=>a.get().getOrThunk(()=>{const nt={},St=_r(Fe.element,`.${t.markers.item}`),Gt=Wn(St,ft=>po(ft,"aria-haspopup")==="true");return Xe(Gt,ft=>{Fe.getSystem().getByDom(ft).each(_t=>{const Mn=p(_t);nt[Mn]=_t})}),a.set(nt),nt}),I=(Fe,nt)=>{const St=P(Fe);ms(St,(Gt,ft)=>{const _t=Po(nt,ft);Ke(Gt.element,"aria-expanded",_t)})},Z=(Fe,nt,St)=>k.from(St[0]).bind(Gt=>nt.lookupMenu(Gt).bind(ft=>{if(ft.type==="notbuilt")return k.none();{const _t=ft.menu,Mn=D(nt,St.slice(1));return Xe(Mn,dn=>{So(dn.element,t.markers.backgroundMenu)}),Es(_t.element)||kt.append(Fe,Er(_t)),xr(_t.element,[t.markers.backgroundMenu]),_(Fe,_t),R(Fe,nt,St),k.some(_t)}}));let ie;(function(Fe){Fe[Fe.HighlightSubmenu=0]="HighlightSubmenu",Fe[Fe.HighlightParent=1]="HighlightParent"})(ie||(ie={}));const G=(Fe,nt,St)=>{if(St.type==="notbuilt"){const Gt=Fe.getSystem().build(St.nbMenu());return d.setMenuBuilt(nt,Gt),Gt}else return St.menu},j=(Fe,nt,St=ie.HighlightSubmenu)=>{if(nt.hasConfigured(yt)&&yt.isDisabled(nt))return k.some(nt);{const Gt=p(nt);return d.expand(Gt).bind(ft=>(I(Fe,ft),k.from(ft[0]).bind(_t=>d.lookupMenu(_t).bind(Mn=>{const dn=G(Fe,_t,Mn);return Es(dn.element)||kt.append(Fe,Er(dn)),t.onOpenSubmenu(Fe,nt,dn,br(ft)),St===ie.HighlightSubmenu?(ln.highlightFirst(dn),Z(Fe,d,ft)):(ln.dehighlightAll(dn),k.some(nt))}))))}},ue=(Fe,nt)=>{const St=p(nt);return d.collapse(St).bind(Gt=>(I(Fe,Gt),Z(Fe,d,Gt).map(ft=>(t.onCollapseMenu(Fe,nt,ft),ft))))},oe=(Fe,nt)=>{const St=p(nt);return d.refresh(St).bind(Gt=>(I(Fe,Gt),Z(Fe,d,Gt)))},ke=(Fe,nt)=>tl(nt.element)?k.none():j(Fe,nt,ie.HighlightSubmenu),xe=(Fe,nt)=>tl(nt.element)?k.none():ue(Fe,nt),$e=(Fe,nt)=>ue(Fe,nt).orThunk(()=>t.onEscape(Fe,nt).map(()=>Fe)),Ue=Fe=>(nt,St)=>ia(St.getSource(),`.${t.markers.item}`).bind(Gt=>nt.getSystem().getByDom(Gt).toOptional().bind(ft=>Fe(nt,ft).map(vt))),Wt=Ln([be(K_(),(Fe,nt)=>{const St=nt.event.item;d.lookupItem(p(St)).each(()=>{const Gt=nt.event.menu;ln.highlight(Fe,Gt);const ft=p(nt.event.item);d.refresh(ft).each(_t=>R(Fe,d,_t))})}),Bc((Fe,nt)=>{const St=nt.event.target;Fe.getSystem().getByDom(St).each(Gt=>{p(Gt).indexOf("collapse-item")===0&&ue(Fe,Gt),j(Fe,Gt,ie.HighlightSubmenu).fold(()=>{t.onExecute(Fe,Gt)},K)})}),Vn((Fe,nt)=>{g(Fe).each(St=>{kt.append(Fe,Er(St)),t.onOpenMenu(Fe,St),t.highlightOnOpen===ma.HighlightMenuAndItem?_(Fe,St):t.highlightOnOpen===ma.HighlightJustMenu&&E(Fe,St)})}),be(KS,(Fe,nt)=>{t.onHighlightItem(Fe,nt.event.menuComp,nt.event.itemComp)}),be(YS,(Fe,nt)=>{t.onDehighlightItem(Fe,nt.event.menuComp,nt.event.itemComp)}),...t.navigateOnHover?[be(Z_(),(Fe,nt)=>{const St=nt.event.item;oe(Fe,St),j(Fe,St,ie.HighlightParent),t.onHover(Fe,St)})]:[]]),rt=Fe=>ln.getHighlighted(Fe).bind(ln.getHighlighted),Dt=Fe=>{rt(Fe).each(nt=>{ue(Fe,nt)})},Et=Fe=>{d.getPrimary().each(nt=>{_(Fe,nt)})},nn=Fe=>k.from(Fe.components()[0]).filter(nt=>po(nt.element,"role")==="menu"),Qt={collapseMenu:Dt,highlightPrimary:Et,repositionMenus:Fe=>{d.getPrimary().bind(St=>rt(Fe).bind(Gt=>{const ft=p(Gt),_t=Qb(d.getMenus()),Mn=rd(we(_t,Dy.extractPreparedMenu));return d.getTriggeringPath(ft,dn=>y(Fe,Mn,dn))}).map(Gt=>({primary:St,triggeringPath:Gt}))).fold(()=>{nn(Fe).each(St=>{t.onRepositionMenu(Fe,St,[])})},({primary:St,triggeringPath:Gt})=>{t.onRepositionMenu(Fe,St,Gt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:is(t.tmenuBehaviours,[ut.config({mode:"special",onRight:Ue(ke),onLeft:Ue(xe),onEscape:Ue($e),focusIn:(Fe,nt)=>{d.getPrimary().each(St=>{Vp(Fe,St.element,Sg())})}}),ln.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Xt.config({find:Fe=>ln.getHighlighted(Fe)}),kt.config({})]),eventOrder:t.eventOrder,apis:Qt,events:Wt}},X6=J("collapse-item"),J6=(t,s,a)=>({primary:t,menus:s,expansions:a}),kR=(t,s)=>({primary:t,menus:Sr(t,s),expansions:{}}),_R=t=>({value:Je(X6()),meta:{text:t}}),hh=Zs({name:"TieredMenu",configFields:[h0("onExecute"),h0("onEscape"),Rl("onOpenMenu"),Rl("onOpenSubmenu"),Yt("onRepositionMenu"),Yt("onCollapseMenu"),ne("highlightOnOpen",ma.HighlightMenuAndItem),vu("data",[ve("primary"),ve("menus"),ve("expansions")]),ne("fakeFocus",!1),Yt("onHighlightItem"),Yt("onDehighlightItem"),Yt("onHover"),r1(),ve("dom"),ne("navigateOnHover",!0),ne("stayInDom",!1),Qo("tmenuBehaviours",[ut,ln,Xt,kt]),ne("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:Y6,extraApis:{tieredData:J6,singleData:kR,collapseItem:_R}}),Q6=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>mw(),onRtl:()=>zs()}}:{},y=E=>E.length===2,w=E=>y(E)?p:{};return hh.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Zt.close(s),t.onEscape.map(E=>E(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(E,_)=>{or.positionWithinBounds(g().getOrDie(),_,a,d())},onOpenSubmenu:(E,_,D,R)=>{const P=g().getOrDie();or.position(P,D,{anchor:{type:"submenu",item:_,...w(R)}})},onRepositionMenu:(E,_,D)=>{const R=g().getOrDie();or.positionWithinBounds(R,_,a,d()),Xe(D,P=>{const I=w(P.triggeringPath);or.position(R,P.triggeredMenu,{anchor:{type:"submenu",item:P.triggeringItem,...I}})})}})},eI=(t,s)=>{const a=(R,P)=>t.getRelated(R).exists(Z=>$d(Z,P)),i=(R,P)=>{Zt.setContent(R,P)},d=(R,P,I)=>{const Z=k.none;g(R,P,I,Z)},g=(R,P,I,Z)=>{const ie=t.lazySink(R).getOrDie();Zt.openWhileCloaked(R,P,()=>or.positionWithinBounds(ie,R,I,Z())),We.setValue(R,k.some({mode:"position",config:I,getBounds:Z}))},p=(R,P,I)=>{y(R,P,I,k.none)},y=(R,P,I,Z)=>{const ie=Q6(t,R,P,I,Z);Zt.open(R,ie),We.setValue(R,k.some({mode:"menu",menu:ie}))},w=R=>{Zt.isOpen(R)&&(We.setValue(R,k.none()),Zt.close(R))},E=R=>Zt.getState(R),_=R=>{Zt.isOpen(R)&&We.getValue(R).each(P=>{switch(P.mode){case"menu":Zt.getState(R).each(hh.repositionMenus);break;case"position":const I=t.lazySink(R).getOrDie();or.positionWithinBounds(I,R,P.config,P.getBounds());break}})},D={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:y,hide:w,getContent:E,reposition:_,isOpen:Zt.isOpen};return{uid:t.uid,dom:t.dom,behaviours:is(t.inlineBehaviours,[Zt.config({isPartOf:(R,P,I)=>$d(P,I)||a(R,I),getAttachPoint:R=>t.lazySink(R).getOrDie(),onOpen:R=>{t.onShow(R)},onClose:R=>{t.onHide(R)}}),We.config({store:{mode:"memory",initialValue:k.none()}}),nr.config({channels:{...hf({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(R=>({fireEventInstead:{event:R.event}})).getOr({})}),...J0({...t.fireRepositionEventInstead.map(R=>({fireEventInstead:{event:R.event}})).getOr({}),doReposition:_})}})]),eventOrder:t.eventOrder,apis:D}},co=Zs({name:"InlineView",configFields:[ve("lazySink"),Yt("onShow"),Yt("onHide"),wd("onEscape"),Qo("inlineBehaviours",[Zt,We,nr]),as("fireDismissalEventInstead",[ne("event",Tu())]),as("fireRepositionEventInstead",[ne("event",Fp())]),ne("getRelated",k.none),ne("isExtraPart",Dn),ne("eventOrder",k.none)],factory:eI,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var XS=tinymce.util.Tools.resolve("tinymce.util.Delay");const js=Zs({name:"Button",factory:t=>{const s=ZS(t.action),a=t.dom.tag,i=g=>Ze(t.dom,"attributes").bind(p=>Ze(p,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),p=i("role").map(y=>({role:y})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Lc.augment(t.buttonBehaviours,[Ct.config({}),ut.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[ne("uid",void 0),ve("dom"),ne("components",[]),Lc.field("buttonBehaviours",[Ct,ut]),gn("action"),gn("role"),ne("eventOrder",{})]}),bn=t=>{const s=U1(t)&&Wa(t,"uid")?t.uid:kl("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var Uc=tinymce.util.Tools.resolve("tinymce.util.I18n");const tI={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},OR="temporary-placeholder",J_=t=>()=>Ze(t,OR).getOr("!not found!"),om=(t,s)=>{const a=t.toLowerCase();if(Uc.isRtl()){const i=Gr(a,"-rtl");return yn(s,i)?i:a}else return a},AR=(t,s)=>Ze(s,om(t,s)),DR=(t,s)=>{const a=s();return AR(t,a).getOrThunk(J_(a))},ph=(t,s,a)=>{const i=s();return AR(t,i).or(a).getOrThunk(J_(i))},RR=t=>Uc.isRtl()?yn(tI,t):!1,Q_=()=>Nt("add-focusable",[Vn(t=>{t1(t.element,"svg").each(s=>Ke(s,"focusable","false"))})]),sm=(t,s,a,i)=>{var d,g;const p=RR(s)?["tox-icon--flip"]:[],y=Ze(a,om(s,a)).or(i).getOrThunk(J_(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:y},behaviours:Ae([...(g=t.behaviours)!==null&&g!==void 0?g:[],Q_()])}},rl=(t,s,a,i=k.none())=>sm(s,t,a(),i),nI=(t,s,a)=>{const i=a(),d=Rt(t,g=>yn(i,om(g,i)));return sm(s,d.getOr(OR),i,k.none())},Si={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},JS=Zs({name:"Notification",factory:t=>{const s=bn({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:Ae([kt.config({})])}),a=P=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${P}%`}}}),i=P=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${P}%`}}),d=bn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},i(0)],behaviours:Ae([kt.config({})])}),y={updateProgress:(P,I)=>{P.getSystem().isConnected()&&d.getOpt(P).each(Z=>{kt.set(Z,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(I)]},i(I)])})},updateText:(P,I)=>{if(P.getSystem().isConnected()){const Z=s.get(P);kt.set(Z,[jn(I)])}}},w=Ft([t.icon.toArray(),t.level.toArray(),t.level.bind(P=>k.from(Si[P])).toArray()]),E=bn(js.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[rl("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:P=>{t.onAction(P)}})),_=nI(w,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),D={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:Ae([kt.config({})])},R=[_,D];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(P=>["tox-notification","tox-notification--in",`tox-notification--${P}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Ae([Ct.config({}),Nt("notification-events",[be(oa(),P=>{E.getOpt(P).each(Ct.focus)})])]),components:R.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[E.asSpec()]:[]),apis:y}},configFields:[gn("level"),ve("progress"),gn("icon"),ve("onAction"),ve("text"),ve("iconProvider"),ve("translationProvider"),Yo("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var MR=(t,s,a)=>{const i=s.backstage.shared,d=()=>{const w=vo(te.fromDom(t.getContentAreaContainer())),E=wr(),_=nc(E.x,w.x,w.right),D=nc(E.y,w.y,w.bottom),R=Math.max(w.right,E.right),P=Math.max(w.bottom,E.bottom);return k.some(mo(_,D,R-_,P-D))};return{open:(w,E)=>{const _=()=>{E(),co.hide(R)},D=Hs(JS.sketch({text:w.text,level:Po(["success","error","warning","warn","info"],w.type)?w.type:void 0,progress:w.progressBar===!0,icon:w.icon,closeButton:w.closeButton,onAction:_,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),R=Hs(co.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(R),Bi(w.timeout)&&w.timeout>0&&XS.setEditorTimeout(t,()=>{_()},w.timeout);const I={close:_,reposition:()=>{const Z=Er(D),ie={maxHeightFunction:Nl()},G=t.notificationManager.getNotifications();if(G[0]===I){const j={...i.anchors.banner(),overrides:ie};co.showWithinBounds(R,Z,{anchor:j},d)}else Ee(G,I).each(j=>{const ue=G[j-1].getEl(),oe={type:"node",root:Ys(),node:k.some(te.fromDom(ue)),overrides:ie,layouts:{onRtl:()=>[ys],onLtr:()=>[ys]}};co.showWithinBounds(R,Z,{anchor:oe},d)})},text:Z=>{JS.updateText(D,Z)},settings:w,getEl:()=>D.element.dom,progressBar:{value:Z=>{JS.updateProgress(D,Z)}}};return I},close:w=>{w.close()},getArgs:w=>w.settings}},Ry=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),e4=tinymce.util.Tools.resolve("tinymce.EditorManager"),ob=tinymce.util.Tools.resolve("tinymce.Env"),xi;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(xi||(xi={}));var My;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(My||(My={}));const _n=t=>s=>s.options.get(t),bh=t=>s=>k.from(t(s)),t4=t=>{const s=ob.deviceType.isPhone(),a=ob.deviceType.isTablet()||s,i=t.options.register,d=p=>En(p)||p===!1,g=p=>En(p)||Bi(p);i("skin",{processor:p=>En(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:Ry.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>En(p)||hl(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>hl(p)||En(p)||Ri(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),$o(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:My.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||hl(p),default:!ob.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")})},n4=_n("readonly"),QS=_n("height"),o4=_n("width"),By=bh(_n("min_width")),s4=bh(_n("min_height")),sb=bh(_n("max_width")),r4=bh(_n("max_height")),rb=bh(_n("style_formats")),Ny=_n("style_formats_merge"),a4=_n("style_formats_autohide"),c4=_n("content_langs"),BR=_n("removed_menuitems"),ab=_n("toolbar_mode"),NR=_n("toolbar_groups"),i4=_n("toolbar_location"),l4=_n("fixed_toolbar_container"),PR=_n("fixed_toolbar_container_target"),u4=_n("toolbar_persist"),ex=_n("toolbar_sticky_offset"),$R=_n("menubar"),Py=_n("toolbar"),FR=_n("file_picker_callback"),IR=_n("file_picker_validator_handler"),LR=_n("font_size_input_default_unit"),d4=_n("file_picker_types"),HR=_n("typeahead_urls"),VR=_n("anchor_top"),tx=_n("anchor_bottom"),m4=_n("draggable_modal"),f4=_n("statusbar"),zR=_n("elementpath"),$y=_n("branding"),UR=_n("resize"),WR=_n("paste_as_text"),ZR=_n("sidebar_show"),jR=_n("promotion"),GR=_n("help_accessibility"),nx=t=>t.options.get("skin")===!1,cb=t=>t.options.get("menubar")!==!1,qR=t=>{const s=t.options.get("skin_url");if(nx(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return e4.baseURL+"/skins/ui/"+a}},Fy=t=>t.options.get("line_height_formats").split(" "),ox=t=>{const s=Py(t),a=En(s),i=Ri(s)&&s.length>0;return!Iy(t)&&(i||a||s===!0)},g4=t=>{const s=$o(9,i=>t.options.get("toolbar"+(i+1))),a=Wn(s,En);return Tt(a.length>0,a)},Iy=t=>g4(t).fold(()=>{const s=Py(t);return ru(s,En)&&s.length>0},vt),h4=t=>i4(t)===My.bottom,KR=t=>{var s;if(!t.inline)return k.none();const a=(s=l4(t))!==null&&s!==void 0?s:"";if(a.length>0)return eo(Ys(),a);const i=PR(t);return ar(i)?k.some(te.fromDom(i)):k.none()},ib=t=>t.inline&&KR(t).isSome(),sx=t=>KR(t).getOrThunk(()=>Sc(so(te.fromDom(t.getElement())))),p4=t=>t.inline&&!cb(t)&&!ox(t)&&!Iy(t),Ly=t=>(t.options.get("toolbar_sticky")||t.inline)&&!ib(t)&&!p4(t),Gu=t=>!ib(t)&&t.options.get("ui_mode")==="split",_f=t=>{const s=t.options.get("menu");return lo(s,a=>({...a,items:a.items}))};var sI=Object.freeze({__proto__:null,get ToolbarMode(){return xi},get ToolbarLocation(){return My},register:t4,getSkinUrl:qR,isReadOnly:n4,isSkinDisabled:nx,getHeightOption:QS,getWidthOption:o4,getMinWidthOption:By,getMinHeightOption:s4,getMaxWidthOption:sb,getMaxHeightOption:r4,getUserStyleFormats:rb,shouldMergeStyleFormats:Ny,shouldAutoHideStyleFormats:a4,getLineHeightFormats:Fy,getContentLanguages:c4,getRemovedMenuItems:BR,isMenubarEnabled:cb,isMultipleToolbars:Iy,isToolbarEnabled:ox,isToolbarPersist:u4,getMultipleToolbarsOption:g4,getUiContainer:sx,useFixedContainer:ib,isSplitUiMode:Gu,getToolbarMode:ab,isDraggableModal:m4,isDistractionFree:p4,isStickyToolbar:Ly,getStickyToolbarOffset:ex,getToolbarLocation:i4,isToolbarLocationBottom:h4,getToolbarGroups:NR,getMenus:_f,getMenubar:$R,getToolbar:Py,getFilePickerCallback:FR,getFilePickerTypes:d4,useTypeaheadUrls:HR,getAnchorTop:VR,getAnchorBottom:tx,getFilePickerValidatorHandler:IR,getFontSizeInputDefaultUnit:LR,useStatusBar:f4,useElementPath:zR,promotionEnabled:jR,useBranding:$y,getResize:UR,getPasteAsText:WR,getSidebarShow:ZR,useHelpAccessibility:GR});const YR="[data-mce-autocompleter]",rx=t=>ia(t,YR),rI=t=>eo(t,YR),cI={setup:(t,s)=>{const a=(d,g)=>{lt(d,Mc(),{raw:g})},i=()=>t.getMenu().bind(ln.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(_u),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(ln.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&rx(te.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var ax;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(ax||(ax={}));var al=ax;const Hy="tox-menu-nav__js",cx="tox-collection__item",ix="tox-swatch",iI={normal:Hy,color:ix},lb="tox-collection__item--enabled",lI="tox-collection__group-heading",XR="tox-collection__item-icon",Vy="tox-collection__item-label",b4="tox-collection__item-accessory",JR="tox-collection__item-caret",QR="tox-collection__item-checkmark",zy="tox-collection__item--active",eM="tox-collection__item-container",v4="tox-collection__item-container--column",tM="tox-collection__item-container--row",uI="tox-collection__item-container--align-right",dI="tox-collection__item-container--align-left",mI="tox-collection__item-container--valign-top",fI="tox-collection__item-container--valign-middle",gI="tox-collection__item-container--valign-bottom",nM=t=>Ze(iI,t).getOr(Hy),hI=t=>t==="color"?"tox-swatches":"tox-menu",y4=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:hI(t),tieredMenu:"tox-tiered-menu"}),vh=t=>{const s=y4(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:nM(t)}},pI=(t,s,a)=>{const i=y4(a);return{tag:"div",classes:Ft([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},bI=[kf.parts.items({})],ub=(t,s,a)=>{const i=y4(a);return{dom:{tag:"div",classes:Ft([[i.tieredMenu]])},markers:vh(a)}},oM=J([gn("data"),ne("inputAttributes",{}),ne("inputStyles",{}),ne("tag","input"),ne("inputClasses",[]),Yt("onSetValue"),ne("styles",{}),ne("eventOrder",{}),Qo("inputBehaviours",[We,Ct]),ne("selectOnFocus",!0)]),sM=t=>Ae([Ct.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=xo(a);a.dom.setSelectionRange(0,i.length)}:K})]),vI=t=>({...sM(t),...is(t.inputBehaviours,[We.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>xo(s.element),setValue:(s,a)=>{xo(s.element)!==a&&Ao(s.element,a)}},onSetValue:t.onSetValue})])}),C4=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),yI=(t,s)=>({uid:t.uid,dom:C4(t),components:[],behaviours:vI(t),eventOrder:t.eventOrder}),yh=Zs({name:"Input",configFields:oM(),factory:yI}),rM=Je("refetch-trigger-event"),aM=Je("redirect-menu-item-interaction"),cM="tox-menu__searcher",lx=t=>eo(t.element,`.${cM}`).bind(s=>t.getSystem().getByDom(s).toOptional()),ux=lx,CI=(t,s)=>{We.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},iM=t=>{const s=We.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},wI=(t,s)=>{Kr(s.element,"id").each(a=>Ke(t.element,"aria-activedescendant",a))},SI=t=>{const s=(d,g)=>(g.cut(),k.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return lt(d,aM,p),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[cx]},components:[yh.sketch({inputClasses:[cM,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ae([Nt(i,[be(kd(),d=>{rn(d,rM)}),be(Mc(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),ut.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,ut.name()]}})]}},dx="tox-collection--results__js",lM=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Je("aria-item-search-result-id"),"aria-selected":"false"}}}:t},w4=(t,s)=>a=>{const i=Br(a,s);return we(i,d=>({dom:t,components:d}))},xI=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[kf.parts.items({preprocess:t!=="auto"?w4({tag:"div",classes:["tox-swatches__row"]},t):on})]}]}),EI=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[kf.parts.items({preprocess:w4({tag:"div",classes:["tox-collection__group"]},t)})]}),uM=(t,s)=>{const a=[];let i=[];return Xe(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(yn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),we(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},S4=(t,s,a)=>kf.parts.items({preprocess:i=>{const d=we(i,a);return t!=="auto"&&t>1?w4({tag:"div",classes:["tox-collection__group"]},t)(d):uM(d,(g,p)=>s[p].type==="separator")}}),dM=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[S4(t,s,on)]}),mx=(t,s,a=!0)=>{const i=Je("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",dx].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[S4(t,s,lM)]}},TI=(t,s,a)=>{const i=Je("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[SI({i18n:Uc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],dx],attributes:{id:i}},components:[S4(t,s,lM)]}]}},x4=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[kf.parts.items({preprocess:a=>uM(a,(i,d)=>t[d].type==="separator")})]}),fx=t=>va(t,s=>"icon"in s&&s.icon!==void 0),rm=t=>(console.error(zi(t)),console.log(t),k.none()),kI=(t,s,a,i,d)=>{const g=x4(a);return{value:t,dom:g.dom,components:g.components,items:a}},E4=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?dM(i,a):d.searchMode.searchMode==="search-with-field"?TI(i,a,d.searchMode):mx(i,a);if(d.menuType==="color"){const p=xI(i);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const p=dM(i,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=EI(i);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:pI(s,i,d.menuType),components:bI,items:a}},Zo=Vo("type"),gx=Vo("name"),T4=Vo("label"),Ul=Vo("text"),hx=Vo("title"),k4=Vo("icon"),Ch=Vo("value"),px=ea("fetch"),mM=ea("getSubmenuItems"),lc=ea("onAction"),_4=ea("onItemAction"),wh=ps("onSetup",()=>K),_I=er("name"),Of=er("text"),Ei=er("icon"),am=er("tooltip"),O4=er("label"),OI=er("shortcut"),fM=wd("select"),Uy=Yo("active",!1),A4=Yo("borderless",!1),cl=Yo("enabled",!0),db=Yo("primary",!1),bx=t=>ne("columns",t),D4=ne("meta",{}),vx=ps("onAction",K),Af=t=>li("type",t),R4=t=>Is("name","name",ai(()=>Je(`${t}-name`)),Ts),AI=t=>Is("value","value",ai(()=>Je(`${t}-value`)),Qr()),gM=ct([Zo,Of]),DI=t=>ro("separatormenuitem",gM,t),RI=ct([Af("autocompleteitem"),Uy,cl,D4,Ch,Of,Ei]),MI=t=>ro("Autocompleter.Separator",gM,t),hM=t=>ro("Autocompleter.Item",RI,t),mb=[cl,am,Ei,Of,wh],BI=ct([Zo,lc].concat(mb)),M4=t=>ro("toolbarbutton",BI,t),yx=[Uy].concat(mb),Wy=ct(yx.concat([Zo,lc])),B4=t=>ro("ToggleButton",Wy,t),pM=[ps("predicate",Dn),Ka("scope","node",["node","editor"]),Ka("position","selection",["node","selection","line"])],NI=mb.concat([Af("contextformbutton"),db,lc,Qs("original",on)]),bM=yx.concat([Af("contextformbutton"),db,lc,Qs("original",on)]),PI=mb.concat([Af("contextformbutton")]),$I=yx.concat([Af("contextformtogglebutton")]),vM=Fs("type",{contextformbutton:NI,contextformtogglebutton:bM}),yM=ct([Af("contextform"),ps("initValue",J("")),O4,Oa("commands",vM),Ui("launch",Fs("type",{contextformbutton:PI,contextformtogglebutton:$I}))].concat(pM)),CM=t=>ro("ContextForm",yM,t),wM=ct([Af("contexttoolbar"),Vo("items")].concat(pM)),FI=t=>ro("ContextToolbar",wM,t),II=[Zo,Vo("src"),er("alt"),ta("classes",[],Ts)],SM=ct(II),N4=[Zo,Ul,_I,ta("classes",["tox-collection__item-label"],Ts)],P4=ct(N4),$4=hs(()=>yd("type",{cardimage:SM,cardtext:P4,cardcontainer:xM})),xM=ct([Zo,li("direction","horizontal"),li("align","left"),li("valign","middle"),Oa("items",$4)]),Sh=[cl,Of,OI,AI("menuitem"),D4],LI=ct([Zo,O4,Oa("items",$4),wh,vx].concat(Sh)),F4=t=>ro("cardmenuitem",LI,t),HI=ct([Zo,Uy,Ei].concat(Sh)),EM=t=>ro("choicemenuitem",HI,t),I4=[Zo,Vo("fancytype"),vx],xh=[ne("initData",{})].concat(I4),VI=[wd("select"),Nv("initData",{},[Yo("allowCustomColors",!0),li("storageKey","default"),FC("colors",Qr())])].concat(I4),L4=Fs("fancytype",{inserttable:xh,colorswatch:VI}),Cx=t=>ro("fancymenuitem",L4,t),zI=ct([Zo,wh,vx,Ei].concat(Sh)),TM=t=>ro("menuitem",zI,t),kM=ct([Zo,mM,wh,Ei].concat(Sh)),_M=t=>ro("nestedmenuitem",kM,t),H4=ct([Zo,Ei,Uy,wh,lc].concat(Sh)),OM=t=>ro("togglemenuitem",H4,t),V4=(t,s,a)=>{const i=_r(t.element,"."+a);if(i.length>0){const d=no(i,g=>{const p=g.dom.getBoundingClientRect().top,y=i[0].dom.getBoundingClientRect().top;return Math.abs(p-y)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},z4=(t,s)=>Ae([Nt(t,s)]),fb={namedEvents:z4,unnamedEvents:t=>z4(Je("unnamed-events"),t)},U4=Je("tooltip.exclusive"),Zy=Je("tooltip.show"),gb=Je("tooltip.hide"),AM=(t,s,a)=>{t.getSystem().broadcastOn([U4],{})};var WI=Object.freeze({__proto__:null,hideAllExclusive:AM,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&kt.set(d,i)})}}),DM=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Us(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){AM(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Ln(t.mode==="normal"?[be(Ls(),y=>{rn(d,Zy)}),be(Np(),y=>{rn(d,gb)})]:[]),behaviours:Ae([kt.config({})])});s.setTooltip(p),Eo(g,p),t.onShow(d,p),or.position(g,p,{anchor:t.anchor(d)})}};return Ln(Ft([[be(Zy,d=>{s.resetTimer(()=>{i(d)},t.delay)}),be(gb,d=>{s.resetTimer(()=>{a(d)},t.delay)}),be(Wi(),(d,g)=>{const p=g;p.universal||Po(p.channels,U4)&&a(d)}),ji(d=>{a(d)})],t.mode==="normal"?[be(oa(),d=>{rn(d,Zy)}),be(xu(),d=>{rn(d,gb)}),be(Ls(),d=>{rn(d,Zy)}),be(Np(),d=>{rn(d,gb)})]:[be(ku(),(d,g)=>{rn(d,Zy)}),be(zv(),d=>{rn(d,gb)})]]))}}),jy=[ve("lazySink"),ve("tooltipDom"),ne("exclusive",!0),ne("tooltipComponents",[]),ne("delay",300),Ka("mode","normal",["normal","follow-highlight"]),ne("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:J([ys,Os,Xo,Lr,_s,Gn]),onRtl:J([ys,Os,Xo,Lr,_s,Gn])}})),Yt("onHide"),Yt("onShow")],jI=Object.freeze({__proto__:null,init:()=>{const t=Un(),s=Un(),a=()=>{t.on(clearTimeout)},i=(g,p)=>{a(),t.set(setTimeout(g,p))},d=J("not-implemented");return Fr({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const RM=As({fields:jy,name:"tooltipping",active:DM,state:jI,apis:WI}),GI=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),MM="silver.readonly",qI=ct([Mv("readonly")]),Eh=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&Xe(d,g=>{g.broadcastOn([rc()],{target:i})}),Xe(d,g=>{g.broadcastOn([MM],{readonly:s})})},BM=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&Eh(s,!0)}),t.on("SwitchMode",()=>Eh(s,t.mode.isReadOnly())),n4(t)&&t.mode.set("readonly")},ls=()=>nr.config({channels:{[MM]:{schema:qI,onReceive:(t,s)=>{yt.set(t,s.readonly)}}}}),Ti={item:t=>yt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>yt.config({disabled:t}),splitButton:t=>yt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>yt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Gy=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},cm=(t,s)=>Vn(a=>{Gy(t,a)(d=>{const g=t.onSetup(d);gt(g)&&s.set(g)})}),im=(t,s)=>ji(a=>Gy(t,a)(s.get())),XI=(t,s)=>Bc((a,i)=>{Gy(t,a)(t.onAction),!t.triggersSubmenu&&s===al.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&rn(a,wo()),i.stop())}),JI={[sa()]:["disabling","alloy.base.behaviour","toggling","item-events"]},hb=rd,pb=(t,s,a,i)=>{const d=pt(K);return{type:"item",dom:s.dom,components:hb(s.optComponents),data:t.data,eventOrder:JI,hasSubmenu:t.triggersSubmenu,itemBehaviours:Ae([Nt("item-events",[XI(t,a),cm(t,d),im(t,d)]),Ti.item(()=>!t.enabled||i.isDisabled()),ls(),kt.config({})].concat(t.itemBehaviours))}},Th=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),W4=t=>{const s=ob.os.isMacOS()||ob.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=we(g,y=>{const w=y.toLowerCase().trim();return yn(d,w)?d[w]:y});return s?p.join(""):p.join("+")},Z4=(t,s,a=[XR])=>rl(t,{tag:"div",classes:a},s),NM=t=>({dom:{tag:"div",classes:[Vy]},components:[jn(Uc.translate(t))]}),PM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),QI=(t,s)=>({dom:{tag:"div",classes:[Vy]},components:[{dom:{tag:t.tag,styles:t.styles},components:[jn(Uc.translate(s))]}]}),e8=t=>({dom:{tag:"div",classes:[b4]},components:[jn(W4(t))]}),j4=t=>Z4("checkmark",t,[QR]),t8=t=>Z4("chevron-right",t,[JR]),n8=t=>Z4("chevron-down",t,[JR]),G4=(t,s)=>{const a=t.direction==="vertical"?v4:tM,i=t.align==="left"?dI:uI;return{dom:{tag:"div",classes:[eM,a,i,(()=>{switch(t.valign){case"top":return mI;case"middle":return fI;case"bottom":return gI}})()]},components:s}},$M=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),o8=(t,s,a)=>{const i="custom",d="remove",g=t.ariaLabel,p=t.value,y=t.iconContent.map(E=>ph(E,s.icons,a));return{dom:(()=>{const E=ix,_=y.getOr(""),R={tag:"div",attributes:g.map(P=>({title:s.translate(P)})).getOr({}),classes:[E]};return p===i?{...R,tag:"button",classes:[...R.classes,"tox-swatches__picker-btn"],innerHtml:_}:p===d?{...R,classes:[...R.classes,"tox-swatch--remove"],innerHtml:_}:ar(p)?{...R,attributes:{...R.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:_}:R})(),optComponents:[]}},FM=t=>{const s=t.map(a=>({attributes:{title:Uc.translate(a),id:Je("menu-item")}})).getOr({});return{tag:"div",classes:[Hy,cx],...s}},IM=(t,s,a,i)=>{const d={tag:"div",classes:[XR]},g=R=>rl(R,d,s.icons,i),p=()=>k.some({dom:d}),y=a?t.iconContent.map(g).orThunk(p):k.none(),w=t.checkMark,E=k.from(t.meta).fold(()=>NM,R=>yn(R,"style")?cn(QI,R.style):NM),_=t.htmlContent.fold(()=>t.textContent.map(E),R=>k.some(PM(R,[Vy])));return{dom:FM(t.ariaLabel),optComponents:[y,_,t.shortcutContent.map(e8),w,t.caret]}},qy=(t,s,a,i=k.none())=>t.presets==="color"?o8(t,s,i):IM(t,s,a,i),LM=(t,s)=>Ze(t,"tooltipWorker").map(a=>[RM.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:Nl}}),mode:"follow-highlight",onShow:(i,d)=>{a(g=>{RM.setComponents(i,[l0({element:te.fromDom(g)})])})}})]).getOr([]),HM=t=>Ry.DOM.encode(t),q4=(t,s)=>{const a=Uc.translate(t),i=HM(a);if(s.length>0){const d=new RegExp(GI(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},VM=(t,s,a,i,d,g,p,y=!0)=>{const w=qy({presets:i,textContent:k.none(),htmlContent:a?t.text.map(E=>q4(E,s)):k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},p.providers,y,t.icon);return pb({data:Th(t),enabled:t.enabled,getApi:J({}),onAction:E=>d(t.value,t.meta),onSetup:J(K),triggersSubmenu:!1,itemBehaviours:LM(t.meta,p)},w,g,p.providers)},zM=(t,s)=>we(t,a=>{switch(a.type){case"cardcontainer":return G4(a,zM(a.items,s));case"cardimage":return $M(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>Po(s.cardText.highlightOn,g))?k.from(s.cardText.matchText).getOr(""):"";return PM(q4(a.text,d),a.classes)}}),s8=(t,s,a,i)=>{const d=p=>({isEnabled:()=>!yt.isDisabled(p),setEnabled:y=>{yt.set(p,!y),Xe(_r(p.element,"*"),w=>{p.getSystem().getByDom(w).each(E=>{E.hasConfigured(yt)&&yt.set(E,!y)})})}}),g={dom:FM(t.label),optComponents:[k.some({dom:{tag:"div",classes:[eM,tM]},components:zM(t.items,i)})]};return pb({data:Th({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,a.providers)},r8=(t,s,a,i,d,g,p,y=!0)=>{const w=_=>({setActive:D=>{Lt.set(_,D)},isActive:()=>Lt.isOn(_),isEnabled:()=>!yt.isDisabled(_),setEnabled:D=>yt.set(_,!D)}),E=qy({presets:a,textContent:s?t.text:k.none(),htmlContent:k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(j4(p.icons)):k.none(),caret:k.none(),value:t.value},p,y);return $n(pb({data:Th(t),enabled:t.enabled,getApi:w,onAction:_=>i(t.value),onSetup:_=>(_.setActive(d),K),triggersSubmenu:!1,itemBehaviours:[]},E,g,p),{toggling:{toggleClass:lb,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},UM=dy(G_(),qS()),WM=t=>({value:Ky(t)}),Df=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,wx=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ZM=t=>Df.test(t)||wx.test(t),Ky=t=>ev(t,"#").toUpperCase(),Wl=t=>ZM(t)?k.some({value:Ky(t)}):k.none(),a8=t=>({value:t.value.replace(Df,(a,i,d,g)=>i+i+d+d+g+g)}),c8=t=>{const s=a8(t),a=wx.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},K4=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},kh=t=>{const s=K4(t.red)+K4(t.green)+K4(t.blue);return WM(s)},jM=Math.min,GM=Math.max,Yy=Math.round,i8=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,l8=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Rf=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),fa=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},Zl=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=GM(0,jM(g,1)),p=GM(0,jM(p,1)),g===0)return s=a=i=Yy(255*p),Rf(s,a,i,1);const y=d/60,w=p*g,E=w*(1-Math.abs(y%2-1)),_=p-w;switch(Math.floor(y)){case 0:s=w,a=E,i=0;break;case 1:s=E,a=w,i=0;break;case 2:s=0,a=w,i=E;break;case 3:s=0,a=E,i=w;break;case 4:s=E,a=0,i=w;break;case 5:s=w,a=0,i=E;break;default:s=a=i=0}return s=Yy(255*(s+_)),a=Yy(255*(a+_)),i=Yy(255*(i+_)),Rf(s,a,i,1)},Xy=t=>{const s=c8(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Rf(a,i,d,1)},Y4=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),y=parseFloat(i);return Rf(d,g,p,y)},bb=t=>{if(t==="transparent")return k.some(Rf(0,0,0,0));const s=i8.exec(t);if(s!==null)return k.some(Y4(s[1],s[2],s[3],"1"));const a=l8.exec(t);return a!==null?k.some(Y4(a[1],a[2],a[3],a[4])):k.none()},Sx=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,qM=Rf(255,0,0,1),u8=t=>{t.dispatch("SkinLoaded")},Jy=(t,s)=>{t.dispatch("SkinLoadError",s)},xx=t=>{t.dispatch("ResizeEditor")},X4=(t,s)=>{t.dispatch("ResizeContent",s)},Mf=(t,s)=>{t.dispatch("ScrollContent",s)},KM=(t,s)=>{t.dispatch("TextColorChange",s)},d8=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},uc=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),J4=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},ki=(t,s)=>()=>{t(),s()},Vr=t=>Ku(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),Nn=(t,s)=>a=>{const i=of(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},qu=(t,s)=>a=>{const i=Vr(t)(a),d=Nn(t,s)(a);return()=>{i(),d()}},Ku=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},Q4=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},ga=(t,s)=>()=>t.execCommand(s);var lm=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const YM={},e3=(t,s=10)=>{const a=lm.getItem(t),i=En(a)?JSON.parse(a):[],g=(E=>s-E.length<0?E.slice(0,s):E)(i),p=E=>{Ee(g,E).each(y),g.unshift(E),g.length>s&&g.pop(),lm.setItem(t,JSON.stringify(g))},y=E=>{g.splice(E,1)};return{add:p,state:()=>g.slice(0)}},XM=t=>Ze(YM,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=lm.getItem(s);if(Mi(a)){const d=lm.getItem("tinymce-custom-colors");lm.setItem(s,ar(d)?d:"[]")}const i=e3(s,10);return YM[t]=i,i}),JM=t=>we(XM(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),t3=(t,s)=>{XM(t).add(s)},_h=(t,s,a)=>({hue:t,saturation:s,value:a}),Ex=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,y=Math.min(d,Math.min(g,p)),w=Math.max(d,Math.max(g,p));if(y===w)return i=y,_h(0,0,i*100);const E=d===y?g-p:p===y?d-g:p-d;return s=d===y?3:p===y?1:5,s=60*(s-E/(w-y)),a=(w-y)/w,i=w,_h(Math.round(s),Math.round(a*100),Math.round(i*100))},Tx=t=>Ex(Xy(t)),QM=t=>kh(Zl(t)),m8=t=>Wl(t).orThunk(()=>bb(t).map(kh)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],y=i[3];return kh(Rf(d,g,p,y))}),n3="forecolor",o3="hilitecolor",f8=5,g8=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+m8(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Yu=t=>s=>s.options.get(t),s3="#000000",h8=t=>{const s=t.options.register,a=d=>ru(d,En)?{value:g8(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=d=>Bi(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:i,default:kx(t)}),s("color_cols_foreground",{processor:i,default:eB(t,n3)}),s("color_cols_background",{processor:i,default:eB(t,o3)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:s3}),s("color_default_background",{processor:"string",default:s3})},r3=(t,s)=>s===n3&&t.options.isSet("color_map_foreground")?Yu("color_map_foreground")(t):s===o3&&t.options.isSet("color_map_background")?Yu("color_map_background")(t):Yu("color_map")(t),kx=(t,s="default")=>Math.max(f8,Math.ceil(Math.sqrt(r3(t,s).length))),eB=(t,s)=>{const a=Yu("color_cols")(t),i=kx(t,s);return a===kx(t)?i:a},a3=(t,s="default")=>Math.round((()=>s===n3?Yu("color_cols_foreground")(t):s===o3?Yu("color_cols_background")(t):Yu("color_cols")(t))()),tB=Yu("custom_colors"),p8=Yu("color_default_foreground"),b8=Yu("color_default_background"),v8="rgba(0, 0, 0, 0)",y8=t=>bb(t).exists(s=>s.alpha!==0),C8=t=>Dp(t,s=>{if(Pn(s)){const a=bo(s,"background-color");return Tt(y8(a),a)}else return k.none()}).getOr(v8),c3=(t,s)=>{const a=te.fromDom(t.selection.getStart()),i=s==="hilitecolor"?C8(a):bo(a,"color");return bb(i).map(d=>"#"+kh(d).value)},jl=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},w8=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},i3=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{jl(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{w8(t,s)})},l3=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},_x=(t,s,a,i)=>{a==="custom"?rB(t)(g=>{g.each(p=>{t3(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},c3(t,s).getOr(s3)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},u3=(t,s,a)=>t.concat(JM(s).concat(l3(a))),d3=(t,s,a)=>i=>{i(u3(t,s,a))},Ox=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},nB=(t,s)=>a=>{const i=c3(t,s);return ya(i,a.toUpperCase())},oB=(t,s,a,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:nB(t,a),columns:a3(t,a),fetch:d3(r3(t,a),a,tB(t)),onAction:g=>{_x(t,a,d.get(),K)},onItemAction:(g,p)=>{_x(t,a,p,y=>{d.set(y),KM(t,{name:s,color:y})})},onSetup:g=>{Ox(g,s,d.get());const p=y=>{y.name===s&&Ox(g,y.name,y.color)};return t.on("TextColorChange",p),ki(Vr(t)(g),()=>{t.off("TextColorChange",p)})}})},sB=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(Ox(g,s,d.get()),Vr(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:nB(t,a),initData:{storageKey:a},onAction:g=>{_x(t,a,g.value,p=>{d.set(p),KM(t,{name:s,color:p})})}}]})},rB=t=>(s,a)=>{let i=!1;const d=y=>{const E=y.getData().colorpicker;i?(s(k.from(E)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},g=(y,w)=>{w.name==="hex-valid"&&(i=w.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:K,onCancel:()=>{s(k.none())}})},aB=t=>{i3(t);const s=p8(t),a=b8(t),i=pt(s),d=pt(a);oB(t,"forecolor","forecolor","Text color",i),oB(t,"backcolor","hilitecolor","Background color",d),sB(t,"forecolor","forecolor","Text color",i),sB(t,"backcolor","hilitecolor","Background color",d)},Ax=(t,s,a,i,d,g,p,y)=>{const w=fx(s),_=cB(s,a,i,d!=="color"?"normal":"color",g,p,y);return E4(t,w,_,i,{menuType:d})},cB=(t,s,a,i,d,g,p)=>rd(we(t,y=>y.type==="choiceitem"?EM(y).fold(rm,w=>k.some(r8(w,a===1,i,s,g(w.value),d,p,fx(t)))):k.none())),Dx=(t,s)=>{const a=vh(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?eo(d.element,"[aria-checked=true]"):k.none()}},S8=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${ix}`:`.${cx}`}},x8=(t,s)=>{const a=vb(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...Ax(Je("menu-value"),a,y=>{t.onAction({value:y})},i,d,al.CLOSE_ON_EXECUTE,t.select.getOr(Dn),s.shared.providers),markers:vh(d),movement:Dx(i,d)};return{type:"widget",data:{value:Je("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[UM.widget(kf.sketch(p))]}},vb=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>u3(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(l3(a)))},iB=Je("cell-over"),m3=Je("cell-execute"),lB=t=>(s,a)=>t.shared.providers.translate(`${a} columns, ${s} rows`),uB=(t,s,a)=>{const i=p=>lt(p,iB,{row:t,col:s}),d=p=>lt(p,m3,{row:t,col:s}),g=(p,y)=>{y.stop(),d(p)};return Hs({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Ae([Nt("insert-table-picker-cell",[be(Ls(),Ct.focus),be(sa(),d),be(wu(),g),be(xg(),g)]),Lt.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ct.config({onFocus:i})])})},f3=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++){const y=t(d+1,p+1);g.push(uB(d,p,y))}i.push(g)}return i},g3=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)Lt.set(t[g][p],g<=s&&p<=a)},h3=t=>he(t,s=>we(s,Er)),p3=(t,s)=>jn(`${s}x${t}`),dB={inserttable:(t,s)=>{const d=lB(s),g=f3(d,10,10),p=p3(0,0),y=bn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[p],behaviours:Ae([kt.config({})])});return{type:"widget",data:{value:Je("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[UM.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:h3(g).concat(y.asSpec()),behaviours:Ae([Nt("insert-table-picker",[Vn(w=>{kt.set(y.get(w),[p])}),jv(iB,(w,E,_)=>{const{row:D,col:R}=_.event;g3(g,D,R,10,10),kt.set(y.get(w),[p3(D+1,R+1)])}),jv(m3,(w,E,_)=>{const{row:D,col:R}=_.event;t.onAction({numRows:D+1,numColumns:R+1}),rn(w,wo())})]),ut.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:x8},E8=(t,s)=>Ze(dB,t.fancytype).map(a=>a(t,s)),T8=(t,s,a,i=!0,d=!1)=>{const g=d?n8(a.icons):t8(a.icons),p=w=>({isEnabled:()=>!yt.isDisabled(w),setEnabled:E=>yt.set(w,!E),setIconFill:(E,_)=>{eo(w.element,`svg path[class="${E}"], rect[class="${E}"]`).each(D=>{Ke(D,"fill",_)})}}),y=qy({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return pb({data:Th(t),getApi:p,enabled:t.enabled,onAction:K,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,a)},k8=(t,s,a,i=!0)=>{const d=p=>({isEnabled:()=>!yt.isDisabled(p),setEnabled:y=>yt.set(p,!y)}),g=qy({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return pb({data:Th(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},mB=t=>({type:"separator",dom:{tag:"div",classes:[cx,lI]},components:t.text.map(jn).toArray()}),fB=(t,s,a,i=!0)=>{const d=p=>({setActive:y=>{Lt.set(p,y)},isActive:()=>Lt.isOn(p),isEnabled:()=>!yt.isDisabled(p),setEnabled:y=>yt.set(p,!y)}),g=qy({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,checkMark:k.some(j4(a.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return $n(pb({data:Th(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:lb,toggleOnExecute:!1,selected:t.active}})},gB=VM,hB=mB,_8=k8,O8=T8,A8=fB,D8=E8,R8=s8;var M8=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),B8=[In("others",_p($t.value,Qr()))],pB=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(io(g.others).length===0)throw new Error("Cannot find any known coupled components");return Ze(t,p)},a=(g,p,y)=>s(p,y).getOrThunk(()=>{const E=Ze(p.others,y).getOrDie("No information found for coupled component: "+y)(g),_=g.getSystem().build(E);return t[y]=_,_}),i=(g,p,y)=>s(p,y).orThunk(()=>(Ze(p.others,y).getOrDie("No information found for coupled component: "+y),k.none())),d=J({});return Fr({readState:d,getExisting:i,getOrCreate:a})}});const To=As({fields:B8,name:"coupling",apis:M8,state:pB}),b3=t=>{let s=k.none(),a=[];const i=E=>b3(_=>{d(D=>{_(E(D))})}),d=E=>{p()?w(E):a.push(E)},g=E=>{p()||(s=k.some(E),y(a),a=[])},p=()=>s.isSome(),y=E=>{Xe(E,w)},w=E=>{s.each(_=>{setTimeout(()=>{E(_)},0)})};return t(g),{get:d,map:i,isReady:p}},N8={nu:b3,pure:t=>b3(s=>{s(t)})},P8=t=>{setTimeout(()=>{throw t},0)},um=t=>{const s=w=>{t().then(w,P8)};return{map:w=>um(()=>t().then(w)),bind:w=>um(()=>t().then(E=>w(E).toPromise())),anonBind:w=>um(()=>t().then(()=>w.toPromise())),toLazy:()=>N8.nu(s),toCached:()=>{let w=null;return um(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},hr={nu:t=>um(()=>new Promise(t)),pure:t=>um(()=>Promise.resolve(t))},bB=J("sink"),vB=J(Fa({name:bB(),overrides:J({dom:{tag:"div"},behaviours:Ae([or.config({useFixed:vt})]),events:Ln([Zi(Mc()),Zi(Ya()),Zi(wu())])})})),yB=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},F8=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},v3=(t,s,a,i,d,g,p)=>{const y=F8(t,s,i),w=SB(i,t);return y.map(E=>E.bind(_=>k.from(hh.sketch({...g.menu(),uid:kl(""),data:_,highlightOnOpen:p,onOpenMenu:(D,R)=>{const P=w().getOrDie();or.position(P,R,{anchor:a}),Zt.decloak(d)},onOpenSubmenu:(D,R,P)=>{const I=w().getOrDie();or.position(I,P,{anchor:{type:"submenu",item:R}}),Zt.decloak(d)},onRepositionMenu:(D,R,P)=>{const I=w().getOrDie();or.position(I,R,{anchor:a}),Xe(P,Z=>{or.position(I,Z.triggeredMenu,{anchor:{type:"submenu",item:Z.triggeringItem}})})},onEscape:()=>(Ct.focus(i),Zt.close(d),k.some(!0))}))))},Qy=(t,s,a,i,d,g,p)=>{const y=yB(t,a);return v3(t,s,y,a,i,d,p).map(E=>(E.fold(()=>{Zt.isOpen(i)&&Zt.close(i)},_=>{Zt.cloak(i),Zt.open(i,_),g(i)}),i))},CB=(t,s,a,i,d,g,p)=>(Zt.close(i),hr.pure(i)),y3=(t,s,a,i,d,g)=>{const p=To.getCoupled(a,"sandbox");return(Zt.isOpen(p)?CB:Qy)(t,s,a,p,i,d,g)},wB=(t,s,a)=>{const i=Xt.getCurrent(s).getOr(s),d=fs(t.element);a?Mt(i.element,"min-width",d+"px"):Qn(i.element,d)},SB=(t,s)=>t.getSystem().getByUid(s.uid+"-"+bB()).map(a=>()=>$t.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>$t.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),xB=t=>{Zt.getState(t).each(s=>{hh.repositionMenus(s)})},C3=(t,s,a)=>{const i=m0(),d=(y,w)=>{const E=yB(t,s);i.link(s.element),t.matchWidth&&wB(E.hotspot,w,t.useMinWidth),t.onOpen(E,y,w),a!==void 0&&a.onOpen!==void 0&&a.onOpen(y,w)},g=(y,w)=>{i.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(y,w)},p=SB(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:Lc.augment(t.sandboxBehaviours,[We.config({store:{mode:"memory",initialValue:s}}),Zt.config({onOpen:d,onClose:g,isPartOf:(y,w,E)=>$d(w,E)||$d(s,E),getAttachPoint:()=>p().getOrDie()}),Xt.config({find:y=>Zt.getState(y).bind(w=>Xt.getCurrent(w))}),nr.config({channels:{...hf({isExtraPart:Dn}),...J0({doReposition:xB})}})])}},EB=t=>{const s=To.getCoupled(t,"sandbox");xB(s)},w3=()=>[ne("sandboxClasses",[]),Lc.field("sandboxBehaviours",[Xt,nr,Zt,We])],I8=J([ve("dom"),ve("fetch"),Yt("onOpen"),Tr("onExecute"),ne("getHotspot",k.some),ne("getAnchorOverrides",J({})),pi(),Qo("dropdownBehaviours",[Lt,To,ut,Ct]),ve("toggleClass"),ne("eventOrder",{}),gn("lazySink"),ne("matchWidth",!1),ne("useMinWidth",!1),gn("role")].concat(w3())),L8=J([cc({schema:[r1(),ne("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),vB()]),H8=(t,s,a,i)=>{const d=_=>Ze(t.dom,"attributes").bind(D=>Ze(D,_)),g=_=>{Zt.getState(_).each(D=>{hh.highlightPrimary(D)})},p=(_,D,R)=>y3(t,on,_,i,D,R),y=_=>{p(_,g,ma.HighlightMenuAndItem).get(K)},w={expand:_=>{Lt.isOn(_)||p(_,K,ma.HighlightNone).get(K)},open:_=>{Lt.isOn(_)||p(_,K,ma.HighlightMenuAndItem).get(K)},refetch:_=>To.getExistingCoupled(_,"sandbox").fold(()=>p(_,K,ma.HighlightMenuAndItem).map(K),R=>Qy(t,on,_,R,i,K,ma.HighlightMenuAndItem).map(K)),isOpen:Lt.isOn,close:_=>{Lt.isOn(_)&&p(_,K,ma.HighlightMenuAndItem).get(K)},repositionMenus:_=>{Lt.isOn(_)&&EB(_)}},E=(_,D)=>(_u(_),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:is(t.dropdownBehaviours,[Lt.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),To.config({others:{sandbox:_=>C3(t,_,{onOpen:()=>Lt.on(_),onClose:()=>Lt.off(_)})}}),ut.config({mode:"special",onSpace:E,onEnter:E,onDown:(_,D)=>{if(_i.isOpen(_)){const R=To.getCoupled(_,"sandbox");g(R)}else _i.open(_);return k.some(!0)},onEscape:(_,D)=>_i.isOpen(_)?(_i.close(_),k.some(!0)):k.none()}),Ct.config({})]),events:ZS(k.some(y)),eventOrder:{...t.eventOrder,[sa()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),_=>({role:_})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},_i=sr({name:"Dropdown",configFields:I8(),partFields:L8(),factory:H8,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),V8=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},Rx=t=>{const s=We.getValue(t),a=lx(t).map(iM);_i.refetch(s).get(()=>{const i=To.getCoupled(s,"sandbox");a.each(d=>lx(i).each(g=>CI(g,d)))})},S3=(t,s)=>{x3(t).each(a=>{WT(t,a.element,s.event.eventType,s.event.interactionEvent)})},x3=t=>Zt.getState(t).bind(ln.getHighlighted).bind(ln.getHighlighted),TB=t=>aa(t.element,dx)?k.some(t.element):eo(t.element,"."+dx),kB=(t,s,a)=>{ux(t).each(i=>{wI(i,a),TB(s).each(g=>{Kr(g,"id").each(p=>Ke(i.element,"aria-controls",p))})}),Ke(a.element,"aria-selected","true")},z8=(t,s,a)=>{Ke(a.element,"aria-selected","false")},E3=t=>{ux(t).each(s=>Ct.focus(s))},T3=t=>To.getExistingCoupled(t,"sandbox").bind(lx).map(iM).map(a=>a.fetchPattern).getOr("");var Oh;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Oh||(Oh={}));const _B=(t,s,a,i,d)=>{const g=a.shared.providers,p=y=>d?{...y,shortcut:k.none(),icon:y.text.isSome()?k.none():y.icon}:y;switch(t.type){case"menuitem":return TM(t).fold(rm,y=>k.some(_8(p(y),s,g,i)));case"nestedmenuitem":return _M(t).fold(rm,y=>k.some(O8(p(y),s,g,i,d)));case"togglemenuitem":return OM(t).fold(rm,y=>k.some(A8(p(y),s,g,i)));case"separator":return DI(t).fold(rm,y=>k.some(hB(y)));case"fancymenuitem":return Cx(t).fold(rm,y=>D8(y,a));default:return console.error("Unknown item in general menu",t),k.none()}},U8=(t,s,a,i,d,g,p)=>{const y=i===1,w=!y||fx(t);return rd(we(t,E=>{switch(E.type){case"separator":return MI(E).fold(rm,_=>k.some(hB(_)));case"cardmenuitem":return F4(E).fold(rm,_=>k.some(R8({..._,onAction:D=>{_.onAction(D),a(_.value,_.meta)}},d,g,{itemBehaviours:LM(_.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return hM(E).fold(rm,_=>k.some(gB(_,s,y,"normal",a,d,g,w)))}}))},OB=(t,s,a,i,d,g)=>{const p=fx(s),y=rd(we(s,_=>{const D=P=>d?!yn(P,"text"):p,R=P=>_B(P,a,i,D(P),d);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?R({..._,enabled:!1}):R(_)})),w=V8(g);return(d?kI:E4)(t,p,y,1,w)},k3=t=>hh.singleData(t.value,t),W8=(t,s,a,i)=>{const d=Dx(s,i),g=vh(i);return{data:k3({...t,movement:d,menuBehaviours:fb.unnamedEvents(s!=="auto"?[]:[Vn((p,y)=>{V4(p,4,g.item).each(({numColumns:w,numRows:E})=>{ut.setGridSize(p,E,w)})})])}),menu:{markers:vh(i),fakeFocus:a===Oh.ContentFocus}}},Z8=(t,s)=>rx(te.fromDom(s.startContainer)).map(a=>{const i=t.createRng();return i.selectNode(a.dom),i}),j8={register:(t,s)=>{const a=pt(!1),i=pt(!1),d=Hs(co.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ae([Nt("dismissAutocompleter",[be(Tu(),()=>E())])]),lazySink:s.getSink})),g=()=>co.isOpen(d),p=i.get,y=()=>{g()&&co.hide(d)},w=()=>co.getContent(d).bind(I=>Fo(I.components(),0)),E=()=>t.execCommand("mceAutocompleterClose"),_=I=>{const Z=Gs(I,ie=>k.from(ie.columns)).getOr(1);return he(I,ie=>{const G=ie.items;return U8(G,ie.matchText,(j,ue)=>{const oe=t.selection.getRng();Z8(t.dom,oe).each(ke=>{const xe={hide:()=>E(),reload:$e=>{y(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:$e})}};a.set(!0),ie.onAction(xe,ke,j,ue),a.set(!1)})},Z,al.BUBBLE_TO_SANDBOX,s,ie.highlightOn)})},D=(I,Z)=>{rI(te.fromDom(t.getBody())).each(ie=>{const G=Gs(I,j=>k.from(j.columns)).getOr(1);co.showMenuAt(d,{anchor:{type:"node",root:te.fromDom(t.getBody()),node:k.from(ie)}},W8(E4("autocompleter-value",!0,Z,G,{menuType:"normal"}),G,Oh.ContentFocus,"normal"))}),w().each(ln.highlightFirst)},R=I=>{const Z=_(I);Z.length>0?D(I,Z):y()};t.on("AutocompleterStart",({lookupData:I})=>{i.set(!0),a.set(!1),R(I)}),t.on("AutocompleterUpdate",({lookupData:I})=>R(I)),t.on("AutocompleterEnd",()=>{y(),i.set(!1),a.set(!1)});const P={cancelIfNecessary:E,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:w};cI.setup(P,t)}},G8=["visible","hidden","clip"],AB=t=>pl(t).length>0&&!Po(G8,t),DB=t=>{if(Dm(t)){const s=bo(t,"overflow-x"),a=bo(t,"overflow-y");return AB(s)||AB(a)}else return!1},q8=t=>{const s=af(t,DB),a=s.length===0?av(t).map(ei).map(i=>af(i,DB)).getOr([]):s;return Wr(a).map(i=>({element:i,others:a.slice(1)}))},Ah=(t,s)=>Gu(t)?q8(s):k.none(),yb=t=>{const s=[...we(t.others,vo),wr()];return IT(vo(t.element),s)},Cb=(t,s,a)=>ia(t,s,a).isSome(),RB=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},MB=5,Xu=400,BB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},K8=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>MB||i>MB},_3=t=>{const s=Un(),a=pt(!1),i=RB(E=>{t.triggerEvent(UT(),E),a.set(!0)},Xu),d=E=>(BB(E).each(_=>{i.cancel();const D={x:_.clientX,y:_.clientY,target:E.target};i.schedule(E),a.set(!1),s.set(D)}),k.none()),g=E=>(i.cancel(),BB(E).each(_=>{s.on(D=>{K8(_,D)&&s.clear()})}),k.none()),p=E=>{i.cancel();const _=D=>Bn(D.target,E.target);return s.get().filter(_).map(D=>a.get()?(E.prevent(),!1):t.triggerEvent(xg(),E))},y=Cu([{key:ui(),value:d},{key:Cg(),value:g},{key:Ed(),value:p}]);return{fireIfReady:(E,_)=>Ze(y,_).bind(D=>D(E))}},us=t=>t.raw.which===Sy[0]&&!Po(["input","textarea"],Cc(t.target))&&!Cb(t.target,'[contenteditable="true"]'),Y8=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=_3(a),g=we(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),P=>kr(t,P,I=>{d.fireIfReady(I,P).each(ie=>{ie&&I.kill()}),a.triggerEvent(P,I)&&I.kill()})),p=Un(),y=kr(t,"paste",P=>{d.fireIfReady(P,"paste").each(Z=>{Z&&P.kill()}),a.triggerEvent("paste",P)&&P.kill(),p.set(setTimeout(()=>{a.triggerEvent(Od(),P)},0))}),w=kr(t,"keydown",P=>{a.triggerEvent("keydown",P)?P.kill():a.stopBackspace&&us(P)&&P.prevent()}),E=kr(t,"focusin",P=>{a.triggerEvent("focusin",P)&&P.kill()}),_=Un(),D=kr(t,"focusout",P=>{a.triggerEvent("focusout",P)&&P.kill(),_.set(setTimeout(()=>{a.triggerEvent(xu(),P)},0))});return{unbind:()=>{Xe(g,P=>{P.unbind()}),w.unbind(),E.unbind(),D.unbind(),y.unbind(),p.on(clearTimeout),_.on(clearTimeout)}}},NB=(t,s)=>{const a=Ze(t,"target").getOr(s);return pt(a)},X8=(t,s)=>{const a=pt(!1),i=pt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},J8=t=>{const s=pt(!1);return{stop:()=>{s.set(!0)},cut:K,isStopped:s.get,isCut:Dn,event:t,setSource:q("Cannot set source of a broadcasted event"),getSource:q("Cannot get source of a broadcasted event")}},e2=Rc.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),PB=(t,s,a,i,d,g)=>{const p=t(s,i),y=X8(a,d);return p.fold(()=>(g.logEventNoHandlers(s,i),e2.complete()),w=>{const E=w.descHandler;return Md(E)(y),y.isStopped()?(g.logEventStopped(s,w.element,E.purpose),e2.stopped()):y.isCut()?(g.logEventCut(s,w.element,E.purpose),e2.complete()):wc(w.element).fold(()=>(g.logNoParent(s,w.element,E.purpose),e2.complete()),D=>(g.logEventResponse(s,w.element,E.purpose),e2.resume(D)))})},$B=(t,s,a,i,d,g)=>PB(t,s,a,i,d,g).fold(vt,p=>$B(t,s,a,p,d,g),Dn),Q8=(t,s,a,i,d)=>{const g=NB(a,i);return PB(t,s,a,i,g,d)},e7=(t,s,a)=>{const i=J8(s);return Xe(t,d=>{const g=d.descHandler;Md(g)(i)}),i.isStopped()},t7=(t,s,a,i)=>FB(t,s,a,a.target,i),FB=(t,s,a,i,d)=>{const g=NB(a,i);return $B(t,s,a,i,g,d)},n7=(t,s)=>({element:t,descHandler:s}),o7=(t,s)=>({id:t,descHandler:s}),s7=()=>{const t={},s=(p,y,w)=>{ms(w,(E,_)=>{const D=t[_]!==void 0?t[_]:{};D[y]=WC(E,p),t[_]=D})},a=(p,y)=>Ru(y).bind(w=>Ze(p,w)).map(w=>n7(y,w));return{registerId:s,unregisterId:p=>{ms(t,(y,w)=>{yn(y,p)&&delete y[p]})},filterByType:p=>Ze(t,p).map(y=>ip(y,(w,E)=>o7(E,w))).getOr([]),find:(p,y,w)=>Ze(t,y).bind(E=>Dp(w,_=>a(E,_),p))}},r7=()=>{const t=s7(),s={},a=E=>{const _=E.element;return Ru(_).getOrThunk(()=>KT("uid-",E.element))},i=(E,_)=>{const D=s[_];if(D===E)g(E);else throw new Error('The tagId "'+_+'" is already used by: '+Au(D.element)+`
Cannot use it for: `+Au(E.element)+`
The conflicting element is`+(Es(D.element)?" ":" not ")+"already in the DOM")},d=E=>{const _=a(E);Wa(s,_)&&i(E,_);const D=[E];t.registerId(D,_,E.events),s[_]=E},g=E=>{Ru(E.element).each(_=>{delete s[_],t.unregisterId(_)})};return{find:(E,_,D)=>t.find(E,_,D),filter:E=>t.filterByType(E),register:d,unregister:g,getById:E=>Ze(s,E)}},Gl=Zs({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Ic(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ne("components",[]),Qo("containerBehaviours",[]),ne("events",{}),ne("domModification",{}),ne("eventOrder",{})]}),O3=t=>{const s=G=>wc(t.element).fold(vt,j=>Bn(G,j)),a=r7(),i=(G,j)=>a.find(s,G,j),d=Y8(t.element,{triggerEvent:(G,j)=>o1(G,j.target,ue=>t7(i,G,j,ue))}),g={debugInfo:J("real"),triggerEvent:(G,j,ue)=>{o1(G,j,oe=>FB(i,G,ue,j,oe))},triggerFocus:(G,j)=>{Ru(G).fold(()=>{oc(G)},ue=>{o1(di(),G,oe=>(Q8(i,di(),{originator:j,kill:K,prevent:K,target:G},G,oe),!1))})},triggerEscape:(G,j)=>{g.triggerEvent("keydown",G.element,j.event)},getByUid:G=>Z(G),getByDom:G=>ie(G),build:Hs,buildOrPatch:Ol,addToGui:G=>{w(G)},removeFromGui:G=>{E(G)},addToWorld:G=>{p(G)},removeFromWorld:G=>{y(G)},broadcast:G=>{R(G)},broadcastOn:(G,j)=>{P(G,j)},broadcastEvent:(G,j)=>{I(G,j)},isConnected:vt},p=G=>{G.connect(g),wa(G.element)||(a.register(G),Xe(G.components(),p),g.triggerEvent(Eu(),G.element,{target:G.element}))},y=G=>{wa(G.element)||(Xe(G.components(),y),a.unregister(G)),G.disconnect()},w=G=>{Eo(t,G)},E=G=>{Us(G)},_=()=>{d.unbind(),kc(t.element)},D=G=>{const j=a.filter(Wi());Xe(j,ue=>{const oe=ue.descHandler;Md(oe)(G)})},R=G=>{D({universal:!0,data:G})},P=(G,j)=>{D({universal:!1,channels:G,data:j})},I=(G,j)=>{const ue=a.filter(G);return e7(ue,j)},Z=G=>a.getById(G).fold(()=>$t.error(new Error('Could not find component with uid: "'+G+'" in system.')),$t.value),ie=G=>{const j=Ru(G).getOr("not found");return Z(j)};return p(t),{root:t,element:t.element,destroy:_,add:w,remove:E,getByUid:Z,getByDom:ie,addToWorld:p,removeFromWorld:y,broadcast:R,broadcastOn:P,broadcastEvent:I}},a7=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:we(t.items,s.interpreter)}),c7=J([ne("prefix","form-field"),Qo("fieldBehaviours",[Xt,We])]),i7=J([Fa({schema:[ve("dom")],name:"label"}),Fa({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ve("text")],name:"aria-descriptor"}),Ws({factory:{sketch:t=>{const s=Pv(t,["factory"]);return t.factory.sketch(s)}},schema:[ve("factory")],name:"field"})]),l7=(t,s,a,i)=>{const d=is(t.fieldBehaviours,[Xt.config({find:y=>Rn(y,t,"field")}),We.config({store:{mode:"manual",getValue:y=>Xt.getCurrent(y).bind(We.getValue),setValue:(y,w)=>{Xt.getCurrent(y).each(E=>{We.setValue(E,w)})}}})]),g=Ln([Vn((y,w)=>{const E=vf(y,t,["label","field","aria-descriptor"]);E.field().each(_=>{const D=Je(t.prefix);E.label().each(R=>{Ke(R.element,"for",D),Ke(_.element,"id",D)}),E["aria-descriptor"]().each(R=>{const P=Je(t.prefix);Ke(R.element,"id",P),Ke(_.element,"aria-describedby",P)})})})]),p={getField:y=>Rn(y,t,"field"),getLabel:y=>Rn(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},vn=sr({name:"FormField",configFields:c7(),partFields:i7(),factory:l7,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var u7=Object.freeze({__proto__:null,exhibit:(t,s)=>ra({attributes:Cu([{key:s.tabAttr,value:"true"}])})}),IB=[ne("tabAttr","data-alloy-tabstop")];const fo=As({fields:IB,name:"tabstopping",active:u7});var d7=tinymce.util.Tools.resolve("tinymce.html.Entities");const t2=(t,s,a,i)=>{const d=m7(t,s,a,i);return vn.sketch(d)},LB=(t,s)=>t2(t,s,[],[]),m7=(t,s,a,i)=>({dom:HB(a),components:t.toArray().concat([s]),fieldBehaviours:Ae(i)}),f7=()=>HB([]),HB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),dm=(t,s)=>vn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[jn(s.translate(t))]}),dc=Je("form-component-change"),n2=Je("form-close"),Bf=Je("form-cancel"),Ju=Je("form-action"),wb=Je("form-submit"),A3=Je("form-block"),Mx=Je("form-unblock"),VB=Je("form-tabchange"),D3=Je("form-resize"),g7=(t,s,a)=>{const i=t.label.map(D=>dm(D,s)),d=D=>(R,P)=>{ia(P.event.target,"[data-collection-item-value]").each(I=>{D(R,P,I,po(I,"data-collection-item-value"))})},g=(D,R)=>{const P=we(R,ie=>{const G=Uc.translate(ie.text),j=t.columns===1?`<div class="tox-collection__item-label">${G}</div>`:"",ue=`<div class="tox-collection__item-icon">${ie.icon}</div>`,oe={_:" "," - ":" ","-":" "},ke=G.replace(/\_| \- |\-/g,$e=>oe[$e]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${d7.encodeAllRaw(ie.value)}" title="${ke}" aria-label="${ke}">${ue}${j}</div>`}),I=t.columns!=="auto"&&t.columns>1?Br(P,t.columns):[P],Z=we(I,ie=>`<div class="tox-collection__group">${ie.join("")}</div>`);El(D.element,Z.join(""))},p=d((D,R,P,I)=>{R.stop(),s.isDisabled()||lt(D,Ju,{name:t.name,value:I})}),y=[be(Ls(),d((D,R,P)=>{oc(P)})),be(wu(),p),be(xg(),p),be(oa(),d((D,R,P)=>{eo(D.element,"."+zy).each(I=>{ao(I,zy)}),So(P,zy)})),be(wg(),d(D=>{eo(D.element,"."+zy).each(R=>{ao(R,zy)})})),Bc(d((D,R,P,I)=>{lt(D,Ju,{name:t.name,value:I})}))],w=(D,R)=>we(_r(D.element,".tox-collection__item"),R),E=vn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:on},behaviours:Ae([yt.config({disabled:s.isDisabled,onDisabled:D=>{w(D,R=>{So(R,"tox-collection__item--state-disabled"),Ke(R,"aria-disabled",!0)})},onEnabled:D=>{w(D,R=>{ao(R,"tox-collection__item--state-disabled"),qo(R,"aria-disabled")})}}),ls(),kt.config({}),We.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(D,R)=>{g(D,R),t.columns==="auto"&&V4(D,5,"tox-collection__item").each(({numRows:P,numColumns:I})=>{ut.setGridSize(D,P,I)}),rn(D,D3)}}),fo.config({}),ut.config(S8(t.columns,"normal")),Nt("collection-events",y)]),eventOrder:{[sa()]:["disabling","alloy.base.behaviour","collection-events"]}});return t2(i,E,["tox-form__group--collection"],[])},h7=["input","textarea"],zB=t=>{const s=Cc(t);return Po(h7,s)},UB=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ao(a,s.invalidClass),s.notify.each(i=>{zB(t.element)&&Ke(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{El(d,i.validHtml)}),i.onValid(t)})},WB=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);So(d,s.invalidClass),s.notify.each(g=>{zB(t.element)&&Ke(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{El(p,i)}),g.onInvalid(t,i)})},ZB=(t,s,a)=>s.validator.fold(()=>hr.pure($t.value(!0)),i=>i.validate(t)),R3=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),ZB(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(WB(t,s,a,d),$t.error(d)),d=>(UB(t,s),$t.value(d))):$t.error("No longer in system")));var p7=Object.freeze({__proto__:null,markValid:UB,markInvalid:WB,query:ZB,run:R3,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return aa(a,s.invalidClass)}}),b7=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Ln([be(a.onEvent,i=>{R3(i,t,s).get(on)})].concat(a.validateOnLoad?[Vn(i=>{R3(i,t,s).get(K)})]:[]))).getOr({})}),v7=[ve("invalidClass"),ne("getRoot",k.none),as("notify",[ne("aria","alert"),ne("getContainer",k.none),ne("validHtml",""),Yt("onValid"),Yt("onInvalid"),Yt("onValidate")]),as("validator",[ve("validate"),ne("onEvent","input"),ne("validateOnLoad",!0)])];const ql=As({fields:v7,name:"invalidating",active:b7,apis:p7,extra:{validation:t=>s=>{const a=We.getValue(s);return hr.pure(t(a))}}});var y7=Object.freeze({__proto__:null,events:()=>Ln([Wv(Hv(),vt)]),exhibit:()=>ra({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const o2=As({fields:[],name:"unselecting",active:y7}),C7=(t,s)=>_i.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Ae([Ti.button(s.providers.isDisabled),ls(),o2.config({}),fo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>hr.nu(i=>t.fetch(i)).map(i=>k.from(k3($n(Ax(Je("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,al.CLOSE_ON_EXECUTE,Dn,s.providers),{movement:Dx(t.columns,t.presets)})))),parts:{menu:ub(!1,1,t.presets)}}),Bx=Je("color-input-change"),jB=Je("color-swatch-change"),GB=Je("color-picker-cancel"),w7=(t,s,a,i)=>{const d=vn.parts.field({factory:yh,inputClasses:["tox-textfield"],data:i,onSetValue:E=>ql.run(E).get(K),inputBehaviours:Ae([yt.config({disabled:s.providers.isDisabled}),ls(),fo.config({}),ql.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>Jc(E.element),notify:{onValid:E=>{const _=We.getValue(E);lt(E,Bx,{color:_})}},validator:{validateOnLoad:!1,validate:E=>{const _=We.getValue(E);if(_.length===0)return hr.pure($t.value(!0));{const D=te.fromTag("span");Mt(D,"background-color",_);const R=Ns(D,"background-color").fold(()=>$t.error("blah"),P=>$t.value(_));return hr.pure(R)}}}})]),selectOnFocus:!1}),g=t.label.map(E=>dm(E,s.providers)),p=(E,_)=>{lt(E,jB,{value:_})},y=(E,_)=>{w.getOpt(E).each(D=>{_==="custom"?a.colorPicker(R=>{R.fold(()=>rn(D,GB),P=>{p(D,P),t3(t.storageKey,P)})},"#ffffff"):_==="remove"?p(D,""):p(D,_)})},w=bn(C7({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[_s,Xo,ys],onLtr:()=>[Xo,_s,ys]},components:[],fetch:d3(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:y},s));return vn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:Ae([Nt("form-field-events",[be(Bx,(E,_)=>{w.getOpt(E).each(D=>{Mt(D.element,"background-color",_.event.color)}),lt(E,dc,{name:t.name})}),be(jB,(E,_)=>{vn.getField(E).each(D=>{We.setValue(D,_.event.value),Xt.getCurrent(E).each(Ct.focus)})}),be(GB,(E,_)=>{vn.getField(E).each(D=>{Xt.getCurrent(E).each(Ct.focus)})})])])})},qB=Fa({schema:[ve("dom")],name:"label"}),mm=t=>Fa({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Ln([Up(ui(),(d,g,p)=>i(d,p),[s]),Up(Ya(),(d,g,p)=>i(d,p),[s]),Up(Td(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),S7=mm("top-left"),x7=mm("top"),KB=mm("top-right"),E7=mm("right"),T7=mm("bottom-right"),k7=mm("bottom"),_7=mm("bottom-left"),O7=mm("left"),A7=Ws({name:"thumb",defaults:J({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Ln([Ou(ui(),t,"spectrum"),Ou(Cg(),t,"spectrum"),Ou(Ed(),t,"spectrum"),Ou(Ya(),t,"spectrum"),Ou(Td(),t,"spectrum"),Ou(Iv(),t,"spectrum")])})}),Nx=Ws({schema:[Qs("mouseIsDown",()=>pt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:Ae([ut.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),Ct.config({})]),events:Ln([be(ui(),i),be(Cg(),i),be(Ya(),i),be(Td(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var D7=[qB,O7,E7,x7,k7,S7,KB,_7,T7,A7,Nx];const s2=J("slider.change.value"),R7=t=>t.type.indexOf("touch")!==-1,B3=t=>{const s=t.event.raw;if(R7(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?k.some(a.touches[0]).map(i=>fn(i.clientX,i.clientY)):k.none()}else{const a=s;return a.clientX!==void 0?k.some(a).map(i=>fn(i.clientX,i.clientY)):k.none()}},M7="top",WZ="right",Px="bottom",Sb="left",Nf=t=>t.model.minX,Pf=t=>t.model.minY,$x=t=>t.model.minX-1,Fx=t=>t.model.minY-1,Dh=t=>t.model.maxX,Rh=t=>t.model.maxY,Ix=t=>t.model.maxX+1,Lx=t=>t.model.maxY+1,YB=(t,s,a)=>s(t)-a(t),N3=t=>YB(t,Dh,Nf),P3=t=>YB(t,Rh,Pf),XB=t=>N3(t)/2,JB=t=>P3(t)/2,Mh=t=>t.stepSize,Bh=t=>t.snapToGrid,$f=t=>t.snapStart,QB=t=>t.rounded,r2=(t,s)=>t[s+"-edge"]!==void 0,$3=t=>r2(t,Sb),a2=t=>r2(t,WZ),e5=t=>r2(t,M7),xb=t=>r2(t,Px),Oi=t=>t.model.value.get(),Ff=(t,s)=>({x:t,y:s}),il=(t,s)=>{lt(t,s2(),{value:s})},B7=(t,s)=>{il(t,Ff($x(s),Fx(s)))},N7=(t,s)=>{il(t,Fx(s))},P7=(t,s)=>{il(t,Ff(XB(s),Fx(s)))},$7=(t,s)=>{il(t,Ff(Ix(s),Fx(s)))},Hx=(t,s)=>{il(t,Ix(s))},F7=(t,s)=>{il(t,Ff(Ix(s),JB(s)))},I7=(t,s)=>{il(t,Ff(Ix(s),Lx(s)))},L7=(t,s)=>{il(t,Lx(s))},t5=(t,s)=>{il(t,Ff(XB(s),Lx(s)))},H7=(t,s)=>{il(t,Ff($x(s),Lx(s)))},V7=(t,s)=>{il(t,$x(s))},z7=(t,s)=>{il(t,Ff($x(s),JB(s)))},Vx=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),F3=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),n5=(t,s,a)=>Math.max(s,Math.min(a,t)),U7=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return n5(s+p,s-1,a+1)},g=>{const p=(t-g)%i,y=Math.round(p/i),w=Math.floor((t-g)/i),E=Math.floor((a-g)/i),_=Math.min(E,w+y),D=g+_*i;return Math.max(g,D)}),W7=(t,s,a)=>Math.min(a,Math.max(t,s))-s,o5=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:p,snapStart:y,rounded:w,hasMinEdge:E,hasMaxEdge:_,minBound:D,maxBound:R,screenRange:P}=t,I=E?s-1:s,Z=_?a+1:a;if(d<D)return I;if(d>R)return Z;{const ie=W7(d,D,R),G=n5(ie/P*i+s,I,Z);return p&&G>=s&&G<=a?U7(G,s,a,g,y):w?Math.round(G):G}},I3=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:y,maxOffset:w,centerMinEdge:E,centerMaxEdge:_}=t;return d<s?g?0:E:d>a?p?y:_:(d-s)/i*w},zx="top",s5="right",r5="bottom",L3="left",Z7="width",j7="height",Kl=t=>t.element.dom.getBoundingClientRect(),ha=(t,s)=>t[s],Ux=t=>{const s=Kl(t);return ha(s,L3)},a5=t=>{const s=Kl(t);return ha(s,s5)},Wx=t=>{const s=Kl(t);return ha(s,zx)},c2=t=>{const s=Kl(t);return ha(s,r5)},Wc=t=>{const s=Kl(t);return ha(s,Z7)},Zx=t=>{const s=Kl(t);return ha(s,j7)},H3=(t,s,a)=>(t+s)/2-a,c5=(t,s)=>{const a=Kl(t),i=Kl(s),d=ha(a,L3),g=ha(a,s5),p=ha(i,L3);return H3(d,g,p)},i5=(t,s)=>{const a=Kl(t),i=Kl(s),d=ha(a,zx),g=ha(a,r5),p=ha(i,zx);return H3(d,g,p)},jx=(t,s)=>{lt(t,s2(),{value:s})},V3=(t,s,a)=>{const i={min:Nf(s),max:Dh(s),range:N3(s),value:a,step:Mh(s),snap:Bh(s),snapStart:$f(s),rounded:QB(s),hasMinEdge:$3(s),hasMaxEdge:a2(s),minBound:Ux(t),maxBound:a5(t),screenRange:Wc(t)};return o5(i)},l5=(t,s,a)=>{const i=V3(t,s,a);return jx(t,i),i},u5=(t,s)=>{const a=Nf(s);jx(t,a)},G7=(t,s)=>{const a=Dh(s);jx(t,a)},q7=(t,s,a)=>{const d=(t>0?F3:Vx)(Oi(a),Nf(a),Dh(a),Mh(a));return jx(s,d),k.some(d)},z3=t=>(s,a)=>q7(t,s,a).map(vt),K7=t=>B3(t).map(a=>a.left),d5=(t,s,a,i,d)=>{const p=Wc(t),y=i.bind(_=>k.some(c5(_,t))).getOr(0),w=d.bind(_=>k.some(c5(_,t))).getOr(p),E={min:Nf(s),max:Dh(s),range:N3(s),value:a,hasMinEdge:$3(s),hasMaxEdge:a2(s),minBound:Ux(t),minOffset:0,maxBound:a5(t),maxOffset:p,centerMinEdge:y,centerMaxEdge:w};return I3(E)},Gx=(t,s,a,i,d,g)=>{const p=d5(s,g,a,i,d);return Ux(s)-Ux(t)+p},m5=(t,s,a,i)=>{const d=Oi(a),g=Gx(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),p=fs(s.element)/2;Mt(s.element,"left",g-p+"px")},Y7=z3(-1),X7=z3(1),J7=k.none,Q7=k.none,eL={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(Hx),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(V7)};var tL=Object.freeze({__proto__:null,setValueFrom:l5,setToMin:u5,setToMax:G7,findValueOfOffset:V3,getValueFromEvent:K7,findPositionOfValue:Gx,setPositionFromValue:m5,onLeft:Y7,onRight:X7,onUp:J7,onDown:Q7,edgeActions:eL});const Eb=(t,s)=>{lt(t,s2(),{value:s})},U3=(t,s,a)=>{const i={min:Pf(s),max:Rh(s),range:P3(s),value:a,step:Mh(s),snap:Bh(s),snapStart:$f(s),rounded:QB(s),hasMinEdge:e5(s),hasMaxEdge:xb(s),minBound:Wx(t),maxBound:c2(t),screenRange:Zx(t)};return o5(i)},f5=(t,s,a)=>{const i=U3(t,s,a);return Eb(t,i),i},nL=(t,s)=>{const a=Pf(s);Eb(t,a)},oL=(t,s)=>{const a=Rh(s);Eb(t,a)},sL=(t,s,a)=>{const d=(t>0?F3:Vx)(Oi(a),Pf(a),Rh(a),Mh(a));return Eb(s,d),k.some(d)},g5=t=>(s,a)=>sL(t,s,a).map(vt),rL=t=>B3(t).map(a=>a.top),aL=(t,s,a,i,d)=>{const p=Zx(t),y=i.bind(_=>k.some(i5(_,t))).getOr(0),w=d.bind(_=>k.some(i5(_,t))).getOr(p),E={min:Pf(s),max:Rh(s),range:P3(s),value:a,hasMinEdge:e5(s),hasMaxEdge:xb(s),minBound:Wx(t),minOffset:0,maxBound:c2(t),maxOffset:p,centerMinEdge:y,centerMaxEdge:w};return I3(E)},W3=(t,s,a,i,d,g)=>{const p=aL(s,g,a,i,d);return Wx(s)-Wx(t)+p},h5=(t,s,a,i)=>{const d=Oi(a),g=W3(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),p=os(s.element)/2;Mt(s.element,"top",g-p+"px")},p5=k.none,cL=k.none,iL=g5(-1),lL=g5(1),uL={"top-left":k.none(),top:k.some(N7),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(L7),"bottom-left":k.none(),left:k.none()};var dL=Object.freeze({__proto__:null,setValueFrom:f5,setToMin:nL,setToMax:oL,findValueOfOffset:U3,getValueFromEvent:rL,findPositionOfValue:W3,setPositionFromValue:h5,onLeft:p5,onRight:cL,onUp:iL,onDown:lL,edgeActions:uL});const i2=(t,s)=>{lt(t,s2(),{value:s})},l2=(t,s)=>({x:t,y:s}),b5=(t,s,a)=>{const i=V3(t,s,a.left),d=U3(t,s,a.top),g=l2(i,d);return i2(t,g),g},Z3=(t,s,a,i)=>{const d=t>0?F3:Vx,g=s?Oi(i).x:d(Oi(i).x,Nf(i),Dh(i),Mh(i)),p=s?d(Oi(i).y,Pf(i),Rh(i),Mh(i)):Oi(i).y;return i2(a,l2(g,p)),k.some(g)},qx=(t,s)=>(a,i)=>Z3(t,s,a,i).map(vt),v5=(t,s)=>{const a=Nf(s),i=Pf(s);i2(t,l2(a,i))},mL=(t,s)=>{const a=Dh(s),i=Rh(s);i2(t,l2(a,i))},fL=t=>B3(t),gL=(t,s,a,i)=>{const d=Oi(a),g=Gx(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),p=W3(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),y=fs(s.element)/2,w=os(s.element)/2;Mt(s.element,"left",g-y+"px"),Mt(s.element,"top",p-w+"px")},hL=qx(-1,!1),j3=qx(1,!1),fm=qx(-1,!0),pL=qx(1,!0),u2={"top-left":k.some(B7),top:k.some(P7),"top-right":k.some($7),right:k.some(F7),"bottom-right":k.some(I7),bottom:k.some(t5),"bottom-left":k.some(H7),left:k.some(z7)};var bL=Object.freeze({__proto__:null,setValueFrom:b5,setToMin:v5,setToMax:mL,getValueFromEvent:fL,setPositionFromValue:gL,onLeft:hL,onRight:j3,onUp:fm,onDown:pL,edgeActions:u2});const G3=[ne("stepSize",1),ne("onChange",K),ne("onChoose",K),ne("onInit",K),ne("onDragStart",K),ne("onDragEnd",K),ne("snapToGrid",!1),ne("rounded",!0),gn("snapStart"),In("model",Fs("mode",{x:[ne("minX",0),ne("maxX",100),Qs("value",t=>pt(t.mode.minX)),ve("getInitialValue"),zn("manager",tL)],y:[ne("minY",0),ne("maxY",100),Qs("value",t=>pt(t.mode.minY)),ve("getInitialValue"),zn("manager",dL)],xy:[ne("minX",0),ne("maxX",100),ne("minY",0),ne("maxY",100),Qs("value",t=>pt({x:t.mode.minX,y:t.mode.minY})),ve("getInitialValue"),zn("manager",bL)]})),Qo("sliderBehaviours",[ut,We]),Qs("mouseIsDown",()=>pt(!1))],ll=sr({name:"Slider",configFields:G3,partFields:D7,factory:(t,s,a,i)=>{const d=oe=>Ll(oe,t,"thumb"),g=oe=>Ll(oe,t,"spectrum"),p=oe=>Rn(oe,t,"left-edge"),y=oe=>Rn(oe,t,"right-edge"),w=oe=>Rn(oe,t,"top-edge"),E=oe=>Rn(oe,t,"bottom-edge"),_=t.model,D=_.manager,R=(oe,ke)=>{D.setPositionFromValue(oe,ke,t,{getLeftEdge:p,getRightEdge:y,getTopEdge:w,getBottomEdge:E,getSpectrum:g})},P=(oe,ke)=>{_.value.set(ke);const xe=d(oe);R(oe,xe)},I=(oe,ke)=>{P(oe,ke);const xe=d(oe);return t.onChange(oe,xe,ke),k.some(!0)},Z=oe=>{D.setToMin(oe,t)},ie=oe=>{D.setToMax(oe,t)},G=oe=>{const ke=()=>{Rn(oe,t,"thumb").each($e=>{const Ue=_.value.get();t.onChoose(oe,$e,Ue)})},xe=t.mouseIsDown.get();t.mouseIsDown.set(!1),xe&&ke()},j=(oe,ke)=>{ke.stop(),t.mouseIsDown.set(!0),t.onDragStart(oe,d(oe))},ue=(oe,ke)=>{ke.stop(),t.onDragEnd(oe,d(oe)),G(oe)};return{uid:t.uid,dom:t.dom,components:s,behaviours:is(t.sliderBehaviours,[ut.config({mode:"special",focusIn:oe=>Rn(oe,t,"spectrum").map(ut.focusIn).map(vt)}),We.config({store:{mode:"manual",getValue:oe=>_.value.get(),setValue:P}}),nr.config({channels:{[X0()]:{onReceive:G}}})]),events:Ln([be(s2(),(oe,ke)=>{I(oe,ke.event.value)}),Vn((oe,ke)=>{const xe=_.getInitialValue();_.value.set(xe);const $e=d(oe);R(oe,$e);const Ue=g(oe);t.onInit(oe,$e,Ue,_.value.get())}),be(ui(),j),be(Ed(),ue),be(Ya(),j),be(Iv(),ue)]),apis:{resetToMin:Z,resetToMax:ie,setValue:P,refresh:R},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),q3=Je("rgb-hex-update"),K3=Je("slider-update"),y5=Je("palette-update"),Y3=(t,s)=>{const a=ll.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=ll.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return ll.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:J(0)},components:[a,i],sliderBehaviours:Ae([Ct.config({})]),onChange:(d,g,p)=>{lt(d,K3,{value:p})}})},Kx="form",X3=[Qo("formBehaviours",[We])],C5=t=>"<alloy.field."+t+">",Zc=t=>{const s=(()=>{const g=[];return{field:(y,w)=>(g.push(y),yS(Kx,C5(y),w)),record:J(g)}})(),a=t(s),i=s.record(),d=we(i,g=>Ws({name:g,pname:C5(g)}));return hy(Kx,X3,d,yL,a)},vL=(t,s)=>t.fold(()=>$t.error(s),$t.value),yL=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:is(t.formBehaviours,[We.config({store:{mode:"manual",getValue:a=>{const i=fy(a,t);return lo(i,(d,g)=>d().bind(p=>{const y=Xt.getCurrent(p);return vL(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Au(p.element)))}).map(We.getValue))},setValue:(a,i)=>{ms(i,(d,g)=>{Rn(a,t,g).each(p=>{Xt.getCurrent(p).each(y=>{We.setValue(y,d)})})})}}})]),apis:{getField:(a,i)=>Rn(a,t,i).bind(Xt.getCurrent)}}),Nh={getField:Mu((t,s,a)=>t.getField(s,a)),sketch:Zc},J3=Je("valid-input"),w5=Je("invalid-input"),S5=Je("validating-input"),Q3="colorcustom.rgb.",CL=(t,s,a,i)=>{const d=(R,P)=>ql.config({invalidClass:s("invalid"),notify:{onValidate:I=>{lt(I,S5,{type:R})},onValid:I=>{lt(I,J3,{type:R,value:We.getValue(I)})},onInvalid:I=>{lt(I,w5,{type:R,value:We.getValue(I)})}},validator:{validate:I=>{const Z=We.getValue(I),ie=P(Z)?$t.value(!0):$t.error(t("aria.input.invalid"));return hr.pure(ie)},validateOnLoad:!1}}),g=(R,P,I,Z,ie)=>{const G=t(Q3+"range"),j=vn.parts.label({dom:{tag:"label",attributes:{"aria-label":Z}},components:[jn(I)]}),ue=vn.parts.field({data:ie,factory:yh,inputAttributes:{type:"text",...P==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Ae([d(P,R),fo.config({})]),onSetValue:$e=>{ql.isInvalid($e)&&ql.run($e).get(K)}}),oe=[j,ue],ke=P!=="hex"?[vn.parts["aria-descriptor"]({text:G})]:[],xe=oe.concat(ke);return{dom:{tag:"div",attributes:{role:"presentation"}},components:xe}},p=(R,P)=>{const I=kh(P);return Nh.getField(R,"hex").each(Z=>{Ct.isFocused(Z)||We.setValue(R,{hex:I.value})}),I},y=(R,P)=>{const I=P.red,Z=P.green,ie=P.blue;We.setValue(R,{red:I,green:Z,blue:ie})},w=bn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),E=(R,P)=>{w.getOpt(R).each(I=>{Mt(I.element,"background-color","#"+P.value)})};return Zs({factory:()=>{const R={red:pt(k.some(255)),green:pt(k.some(255)),blue:pt(k.some(255)),hex:pt(k.some("ffffff"))},P=(Et,nn)=>{const mt=Xy(nn);y(Et,mt),G(mt)},I=Et=>R[Et].get(),Z=(Et,nn)=>{R[Et].set(nn)},ie=()=>I("red").bind(Et=>I("green").bind(nn=>I("blue").map(mt=>Rf(Et,nn,mt,1)))),G=Et=>{const nn=Et.red,mt=Et.green,Qt=Et.blue;Z("red",k.some(nn)),Z("green",k.some(mt)),Z("blue",k.some(Qt))},j=(Et,nn)=>{const mt=nn.event;mt.type!=="hex"?Z(mt.type,k.none()):i(Et)},ue=(Et,nn)=>{a(Et);const mt=WM(nn);Z("hex",k.some(mt.value));const Qt=Xy(mt);y(Et,Qt),G(Qt),lt(Et,q3,{hex:mt}),E(Et,mt)},oe=(Et,nn,mt)=>{const Qt=parseInt(mt,10);Z(nn,k.some(Qt)),ie().each(Fe=>{const nt=p(Et,Fe);lt(Et,q3,{hex:nt}),E(Et,nt)})},ke=Et=>Et.type==="hex",xe=(Et,nn)=>{const mt=nn.event;ke(mt)?ue(Et,mt.value):oe(Et,mt.type,mt.value)},$e=Et=>({label:t(Q3+Et+".label"),description:t(Q3+Et+".description")}),Ue=$e("red"),Wt=$e("green"),rt=$e("blue"),Dt=$e("hex");return $n(Nh.sketch(Et=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Et.field("red",vn.sketch(g(fa,"red",Ue.label,Ue.description,255))),Et.field("green",vn.sketch(g(fa,"green",Wt.label,Wt.description,255))),Et.field("blue",vn.sketch(g(fa,"blue",rt.label,rt.description,255))),Et.field("hex",vn.sketch(g(ZM,"hex",Dt.label,Dt.description,"ffffff"))),w.asSpec()],formBehaviours:Ae([ql.config({invalidClass:s("form-invalid")}),Nt("rgb-form-events",[be(J3,xe),be(w5,j),be(S5,j)])])})),{apis:{updateHex:(Et,nn)=>{We.setValue(Et,{hex:nn.value}),P(Et,nn),E(Et,nn)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(R,P,I)=>{R.updateHex(P,I)}},extraApis:{}})},wL=(t,s)=>{const a=ll.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=ll.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(E,_)=>{const{width:D,height:R}=E,P=E.getContext("2d");if(P===null)return;P.fillStyle=_,P.fillRect(0,0,D,R);const I=P.createLinearGradient(0,0,D,0);I.addColorStop(0,"rgba(255,255,255,1)"),I.addColorStop(1,"rgba(255,255,255,0)"),P.fillStyle=I,P.fillRect(0,0,D,R);const Z=P.createLinearGradient(0,0,0,R);Z.addColorStop(0,"rgba(0,0,0,0)"),Z.addColorStop(1,"rgba(0,0,0,1)"),P.fillStyle=Z,P.fillRect(0,0,D,R)},g=(E,_)=>{const D=E.components()[0].element.dom,R=_h(_,100,100),P=Zl(R);d(D,Sx(P))},p=(E,_)=>{const D=Ex(Xy(_));ll.setValue(E,{x:D.saturation,y:100-D.value})};return Zs({factory:E=>{const _=J({x:0,y:0}),D=(I,Z,ie)=>{lt(I,y5,{value:ie})},R=(I,Z,ie,G)=>{d(ie.element.dom,Sx(qM))},P=Ae([Xt.config({find:k.some}),Ct.config({})]);return ll.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:_},rounded:!1,components:[a,i],onChange:D,onInit:R,sliderBehaviours:P})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(E,_,D)=>{g(_,D)},setThumb:(E,_,D)=>{p(_,D)}},extraApis:{}})},SL=(t,s)=>{const a=d=>{const g=CL(t,s,d.onValidHex,d.onInvalidHex),p=wL(t,s),y=xe=>(100-xe)/100*360,w=xe=>100-xe/360*100,E={paletteRgba:pt(qM),paletteHue:pt(0)},_=bn(Y3(t,s)),D=bn(p.sketch({})),R=bn(g.sketch({})),P=(xe,$e,Ue)=>{D.getOpt(xe).each(Wt=>{p.setHue(Wt,Ue)})},I=(xe,$e)=>{R.getOpt(xe).each(Ue=>{g.updateHex(Ue,$e)})},Z=(xe,$e,Ue)=>{_.getOpt(xe).each(Wt=>{ll.setValue(Wt,w(Ue))})},ie=(xe,$e)=>{D.getOpt(xe).each(Ue=>{p.setThumb(Ue,$e)})},G=(xe,$e)=>{const Ue=Xy(xe);E.paletteRgba.set(Ue),E.paletteHue.set($e)},j=(xe,$e,Ue,Wt)=>{G($e,Ue),Xe(Wt,rt=>{rt(xe,$e,Ue)})},ue=()=>{const xe=[I];return($e,Ue)=>{const Wt=Ue.event.value,rt=E.paletteHue.get(),Dt=_h(rt,Wt.x,100-Wt.y),Et=QM(Dt);j($e,Et,rt,xe)}},oe=()=>{const xe=[P,I];return($e,Ue)=>{const Wt=y(Ue.event.value),rt=E.paletteRgba.get(),Dt=Ex(rt),Et=_h(Wt,Dt.saturation,Dt.value),nn=QM(Et);j($e,nn,Wt,xe)}},ke=()=>{const xe=[P,Z,ie];return($e,Ue)=>{const Wt=Ue.event.hex,rt=Tx(Wt);j($e,Wt,rt.hue,xe)}};return{uid:d.uid,dom:d.dom,components:[D.asSpec(),_.asSpec(),R.asSpec()],behaviours:Ae([Nt("colour-picker-events",[be(q3,ke()),be(y5,ue()),be(K3,oe())]),Xt.config({find:xe=>R.getOpt(xe)}),ut.config({mode:"acyclic"})])}};return Zs({name:"ColourPicker",configFields:[ve("dom"),ne("onValidHex",K),ne("onInvalidHex",K)],factory:a})},ul={self:()=>Xt.config({find:k.some}),memento:t=>Xt.config({find:t.getOpt}),childAt:t=>Xt.config({find:s=>lu(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},EL=ct([ne("preprocess",on),ne("postprocess",on)]),x5=(t,s)=>{const a=an("RepresentingConfigs.memento processors",EL,s);return We.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=We.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),p=t.get(i);We.setValue(p,g)}}})},gm=(t,s,a)=>We.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),E5=(t,s,a)=>gm(t,i=>s(i.element),(i,d)=>a(i.element,d)),eO=t=>E5(t,jp,El),hm=t=>We.config({store:{mode:"memory",initialValue:t}}),T5={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},k5=t=>s=>t.translate(T5[s]),_5=(t,s,a)=>{const i=w=>"tox-"+w,d=SL(k5(s),i),g=w=>{lt(w,Ju,{name:"hex-valid",value:!0})},p=w=>{lt(w,Ju,{name:"hex-valid",value:!1})},y=bn(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[y.asSpec()],behaviours:Ae([gm(a,w=>{const E=y.get(w);return Xt.getCurrent(E).bind(R=>We.getValue(R).hex).map(R=>"#"+ev(R,"#")).getOr("")},(w,E)=>{const _=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,D=k.from(_.exec(E)).bind(I=>Fo(I,1)),R=y.get(w);Xt.getCurrent(R).fold(()=>{console.log("Can not find form")},I=>{We.setValue(I,{hex:D.getOr("")}),Nh.getField(I,"hex").each(Z=>{rn(Z,kd())})})}),ul.self()])}};var TL=tinymce.util.Tools.resolve("tinymce.Resource");const kL=t=>yn(t,"init"),Yx=t=>{const s=Un(),a=bn({dom:{tag:t.tag}}),i=Un();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ae([Nt("custom-editor-events",[Vn(d=>{a.getOpt(d).each(g=>{(kL(t)?t.init(g.element.dom):TL.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{i.on(y=>{p.setValue(y)}),i.clear(),s.set(p)})})})]),gm(k.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),p=>p.setValue(g))}),ul.self()]),components:[a.asSpec()]}};var pm=tinymce.util.Tools.resolve("tinymce.util.Tools");const _L=(t,s)=>{const a=pm.explode(s.getOption("images_file_types")),i=d=>va(a,g=>Ni(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Wn(Ua(t),i)},O5=(t,s,a)=>{const i=(R,P)=>{P.stop()},d=R=>(P,I)=>{Xe(R,Z=>{Z(P,I)})},g=(R,P)=>{var I;if(!yt.isDisabled(R)){const Z=P.event.raw;y(R,(I=Z.dataTransfer)===null||I===void 0?void 0:I.files)}},p=(R,P)=>{const I=P.event.raw.target;y(R,I.files)},y=(R,P)=>{P&&(We.setValue(R,_L(P,s)),lt(R,dc,{name:t.name}))},w=bn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ae([Nt("input-file-events",[Zi(wu()),Zi(xg())])])}),E=R=>({uid:R.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ae([hm(a.getOr([])),ul.self(),yt.config({}),Lt.config({toggleClass:"dragenter",toggleOnExecute:!1}),Nt("dropzone-events",[be("dragenter",d([i,Lt.toggle])),be("dragleave",d([i,Lt.toggle])),be("dragover",i),be("drop",d([i,g])),be(_d(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[jn(s.translate("Drop an image here"))]},js.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[jn(s.translate("Browse for an image")),w.asSpec()],action:P=>{w.get(P).element.dom.click()},buttonBehaviours:Ae([fo.config({}),Ti.button(s.isDisabled),ls()])})]}]}),_=t.label.map(R=>dm(R,s)),D=vn.parts.field({factory:{sketch:E}});return t2(_,D,["tox-form__group--stretched"],[])},A5=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:we(t.items,s.interpreter)}),tO=(t,s)=>{let a=null,i=null;return{cancel:()=>{su(a)||(clearTimeout(a),a=null,i=null)},throttle:(...p)=>{i=p,su(a)&&(a=setTimeout(()=>{const y=i;a=null,i=null,t.apply(null,y)},s))}}},D5=(t,s)=>{let a=null;return{cancel:()=>{su(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{su(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},Dr=(t,s)=>{let a=null;const i=()=>{su(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},Xx=Je("alloy-fake-before-tabstop"),nO=Je("alloy-fake-after-tabstop"),R5=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Ae([Ct.config({ignore:!0}),fo.config({})])}),oO=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[R5([Xx]),s,R5([nO])],behaviours:Ae([ul.childAt(1)])}),M5=(t,s)=>{lt(t,Mc(),{raw:{which:9,shiftKey:s}})},OL=(t,s)=>{const a=s.element;aa(a,Xx)?M5(t,!0):aa(a,nO)&&M5(t,!1)},d2=t=>Cb(t,["."+Xx,"."+nO].join(","),Dn),Jx=Je("update-dialog"),Yl=Je("update-title"),Qx=Je("update-body"),sO=Je("update-footer"),m2=Je("body-send-message"),Tb=Je("dialog-focus-shifted"),rO=Fi().browser,f2=rO.isSafari(),AL=rO.isFirefox(),B5=f2||AL,DL=rO.isChromium(),RL=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,N5=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),P5=(t,s)=>{const a=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!DL&&!f2||ar(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},$5=(t,s,a)=>{const i=t.dom;k.from(i.contentDocument).fold(a,d=>{let g=0;const p=P5(d,s).map(w=>(g=w.scrollTop,w)).forall(RL),y=()=>{const w=i.contentWindow;ar(w)&&(p?N5(w,"bottom"):!p&&B5&&g!==0&&N5(w,g))};f2&&i.addEventListener("load",y,{once:!0}),d.open(),d.write(s),d.close(),f2||y()})},eE=Tt(B5,f2?500:200).map(t=>tO($5,t)),ML=(t,s)=>{const a=pt(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,p=()=>Ke(g,"srcdoc",d);s?eE.fold(J($5),y=>y.throttle)(g,d,p):p()}a.set(d)}}},BL=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],p={...t.label.map(D=>({title:D})).getOr({}),...a.map(D=>({srcdoc:D})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},y=ML(a,t.streamContent),w=t.label.map(D=>dm(D,s)),E=D=>oO(k.from(g),{uid:D.uid,dom:{tag:"iframe",attributes:p,classes:[i,...d]},behaviours:Ae([fo.config({}),Ct.config({}),gm(a,y.getValue,y.setValue),nr.config({channels:{[Tb]:{onReceive:(R,P)=>{P.newFocus.each(I=>{Jc(R.element).each(Z=>{(Bn(R.element,I)?So:ao)(Z,"tox-navobj-bordered-focus")})})}}}})])}),_=vn.parts.field({factory:{sketch:E}});return t2(w,_,["tox-form__group--stretched"],[])},F5=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[kr(t,"load",i),kr(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>Xe(d,p=>p.unbind());t.dom.complete&&i()}),I5=(t,s,a,i,d)=>{const g=a*d,p=i*d,y=Math.max(0,t/2-g/2),w=Math.max(0,s/2-p/2);return{left:y.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},aO=(t,s,a)=>{const i=fs(t),d=os(t);return Math.min(i/s,d/a,1)},tE=(t,s)=>{const a=pt(s.getOr({url:""})),i=bn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=bn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(w,E)=>{const _={url:E.url};E.zoom.each(R=>_.zoom=R),E.cachedWidth.each(R=>_.cachedWidth=R),E.cachedHeight.each(R=>_.cachedHeight=R),a.set(_);const D=()=>{const{cachedWidth:R,cachedHeight:P,zoom:I}=_;if(!Ur(R)&&!Ur(P)){if(Ur(I)){const ie=aO(w.element,R,P);_.zoom=ie}const Z=I5(fs(w.element),os(w.element),R,P,_.zoom);d.getOpt(w).each(ie=>{xa(ie.element,Z)})}};i.getOpt(w).each(R=>{const P=R.element;E.url!==po(P,"src")&&(Ke(P,"src",E.url),ao(w.element,"tox-imagepreview__loaded")),D(),F5(P).then(I=>{w.getSystem().isConnected()&&(So(w.element,"tox-imagepreview__loaded"),_.cachedWidth=I.dom.naturalWidth,_.cachedHeight=I.dom.naturalHeight,D())})})},p={};t.height.each(w=>p.height=w);const y=s.map(w=>({url:w.url,zoom:k.from(w.zoom),cachedWidth:k.from(w.cachedWidth),cachedHeight:k.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Ae([ul.self(),gm(y,()=>a.get(),g)])}},g2=(t,s)=>{const a="tox-label",i=t.align==="center"?[`${a}--center`]:[],d=t.align==="end"?[`${a}--end`]:[],g={dom:{tag:"label",classes:[a,...i,...d]},components:[jn(s.providers.translate(t.label))]},p=we(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[g,...p],behaviours:Ae([ul.self(),kt.config({}),eO(k.none()),ut.config({mode:"acyclic"})])}},kb=Je("toolbar.button.execute"),L5=t=>Bc((s,a)=>{Gy(t,s)(i=>{lt(s,kb,{buttonApi:i}),t.onAction(i)})}),If=Je("common-button-display-events"),cO={[sa()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Xa()]:["toolbar-button-events",If],[Ya()]:["focusing","alloy.base.behaviour",If]},nE=t=>Mt(t.element,"width",bo(t.element,"width")),H5=(t,s,a)=>rl(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),iO=(t,s)=>H5(t,s,[]),Lf=(t,s)=>H5(t,s,[kt.config({})]),V5=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[jn(a.translate(t))],behaviours:Ae([kt.config({})])}),Ai=Je("update-menu-text"),Hf=Je("update-menu-icon"),oE=(t,s,a)=>{const i=pt(K),d=t.text.map(R=>bn(V5(R,s,a.providers))),g=t.icon.map(R=>bn(Lf(R,a.providers.icons))),p=(R,P)=>{const I=We.getValue(R);return Ct.focus(I),lt(I,"keydown",{raw:P.event.raw}),_i.close(I),k.some(!0)},y=t.role.fold(()=>({}),R=>({role:R})),w=t.tooltip.fold(()=>({}),R=>{const P=a.providers.translate(R);return{title:P,"aria-label":P}}),E=rl("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),_=Je("common-button-display-events");return bn(_i.sketch({...t.uid?{uid:t.uid}:{},...y,dom:{tag:"button",classes:[s,`${s}--select`].concat(we(t.classes,R=>`${s}--${R}`)),attributes:{...w}},components:hb([g.map(R=>R.asSpec()),d.map(R=>R.asSpec()),k.some(E)]),matchWidth:!0,useMinWidth:!0,onOpen:(R,P,I)=>{t.searchable&&E3(I)},dropdownBehaviours:Ae([...t.dropdownBehaviours,Ti.button(()=>t.disabled||a.providers.isDisabled()),ls(),o2.config({}),kt.config({}),Nt("dropdown-events",[cm(t,i),im(t,i)]),Nt(_,[Vn((R,P)=>nE(R))]),Nt("menubutton-update-display-text",[be(Ai,(R,P)=>{d.bind(I=>I.getOpt(R)).each(I=>{kt.set(I,[jn(a.providers.translate(P.event.text))])})}),be(Hf,(R,P)=>{g.bind(I=>I.getOpt(R)).each(I=>{kt.set(I,[Lf(P.event.icon,a.providers.icons)])})})])]),eventOrder:$n(cO,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Xa()]:["toolbar-button-events","dropdown-events",_]}),sandboxBehaviours:Ae([ut.config({mode:"special",onLeft:p,onRight:p}),Nt("dropdown-sandbox-events",[be(rM,(R,P)=>{Rx(R),P.stop()}),be(aM,(R,P)=>{S3(R,P),P.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...ub(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:kB,onCollapseMenu:(R,P,I)=>{ln.getHighlighted(I).each(Z=>{kB(R,I,Z)})},onDehighlightItem:z8}},getAnchorOverrides:()=>({maxHeightFunction:(R,P)=>{A0()(R,P-10)}}),fetch:R=>hr.nu(cn(t.fetch,R))})).asSpec()},NL=t=>En(t),lO=t=>t.type==="separator",PL=t=>yn(t,"getSubmenuItems"),z5={type:"separator"},h2=(t,s)=>{const a=Yn(t,(i,d)=>NL(d)?d===""?i:d==="|"?i.length>0&&!lO(i[i.length-1])?i.concat([z5]):i:yn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&lO(a[a.length-1])&&a.pop(),a},$L=(t,s)=>{const a=t.getSubmenuItems(),i=W5(a,s),d=$n(i.menus,{[t.value]:i.items}),g=$n(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},U5=t=>{const s=Ze(t,"value").getOrThunk(()=>Je("generated-menu-item"));return $n({value:s},t)},W5=(t,s)=>{const a=h2(En(t)?t.split(" "):t,s);return ts(a,(i,d)=>{if(PL(d)){const g=U5(d),p=$L(g,s);return{menus:$n(i.menus,p.menus),items:[p.item,...i.items],expansions:$n(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},FL=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),IL=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),_b=(t,s,a,i)=>{const d=Je("primary-menu"),g=W5(t,a.shared.providers.menuItems());if(g.items.length===0)return k.none();const p=FL(i),y=OB(d,g.items,s,a,i.isHorizontalMenu,p),w=IL(i),E=lo(g.menus,(D,R)=>OB(R,D,s,a,!1,w)),_=$n(E,Sr(d,y));return k.from(hh.tieredData(d,_,g.expansions))},sE=t=>!yn(t,"items"),Z5="data-value",uO=(t,s,a,i)=>we(a,d=>sE(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{We.setValue(t,d.value),lt(t,dc,{name:s}),Ct.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>uO(t,s,d.items,i)}),p2=(t,s)=>Gs(t,a=>sE(a)?Tt(a.value===s,a):p2(a.items,s)),vm=(t,s,a)=>{const i=s.shared.providers,d=a.bind(w=>p2(t.items,w)).orThunk(()=>Wr(t.items).filter(sE)),g=t.label.map(w=>dm(w,i)),p=vn.parts.field({dom:{},factory:{sketch:w=>oE({uid:w.uid,text:d.map(E=>E.text),icon:k.none(),tooltip:t.label,role:k.none(),fetch:(E,_)=>{const D=uO(E,t.name,t.items,We.getValue(E));_(_b(D,al.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:J(K),getApi:J({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[fo.config({}),gm(d.map(E=>E.value),E=>po(E.element,Z5),(E,_)=>{p2(t.items,_).each(D=>{Ke(E.element,Z5,D.value),lt(E,Ai,{text:D.text})})})]},"tox-listbox",s.shared)}}),y={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return vn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ft([g.toArray(),[y]]),fieldBehaviours:Ae([yt.config({disabled:J(!t.enabled),onDisabled:w=>{vn.getField(w).each(yt.disable)},onEnabled:w=>{vn.getField(w).each(yt.enable)}})])})},dO=(t,s)=>({dom:{tag:"div",classes:t.classes},components:we(t.items,s.shared.interpreter)}),j5=(t,s)=>{const a=we(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Sr("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:is(t.selectBehaviours,[Ct.config({}),We.config({store:{mode:"manual",getValue:d=>xo(d.element),setValue:(d,g)=>{const p=Wr(t.options);Rt(t.options,w=>w.value===g).isSome()?Ao(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(w=>Ao(d.element,w.value))},...i}})])}},G5=Zs({name:"HtmlSelect",configFields:[ve("options"),Qo("selectBehaviours",[Ct,We]),ne("selectClasses",[]),ne("selectAttributes",{}),gn("data")],factory:j5}),mO=(t,s,a)=>{const i=we(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>dm(w,s)),g=vn.parts.field({dom:{},...a.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:i,factory:G5,selectBehaviours:Ae([yt.config({disabled:()=>!t.enabled||s.isDisabled()}),fo.config({}),Nt("selectbox-change",[be(_d(),(w,E)=>{lt(w,dc,{name:t.name})})])])}),p=t.size>1?k.none():k.some(rl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:Ft([[g],p.toArray()])};return vn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ft([d.toArray(),[y]]),fieldBehaviours:Ae([yt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{vn.getField(w).each(yt.disable)},onEnabled:w=>{vn.getField(w).each(yt.enable)}}),ls()])})},q5=J([ne("field1Name","field1"),ne("field2Name","field2"),Rl("onLockedChange"),la(["lockClass"]),ne("locked",!1),Lc.field("coupledFieldBehaviours",[Xt,We])]),rE=(t,s,a)=>Rn(t,s,a).bind(Xt.getCurrent),fO=(t,s)=>Ws({factory:vn,name:t,overrides:a=>({fieldBehaviours:Ae([Nt("coupled-input-behaviour",[be(kd(),i=>{rE(i,a,s).each(d=>{Rn(i,a,"lock").each(g=>{Lt.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),K5=J([fO("field1","field2"),fO("field2","field1"),Ws({factory:js,schema:[ve("dom")],name:"lock",overrides:t=>({buttonBehaviours:Ae([Lt.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),LL=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Lc.augment(t.coupledFieldBehaviours,[Xt.config({find:k.some}),We.config({store:{mode:"manual",getValue:d=>{const g=gy(d,t,["field1","field2"]);return{[t.field1Name]:We.getValue(g.field1()),[t.field2Name]:We.getValue(g.field2())}},setValue:(d,g)=>{const p=gy(d,t,["field1","field2"]);Wa(g,t.field1Name)&&We.setValue(p.field1(),g[t.field1Name]),Wa(g,t.field2Name)&&We.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Rn(d,t,"field1"),getField2:d=>Rn(d,t,"field2"),getLock:d=>Rn(d,t,"lock")}}),jc=sr({name:"FormCoupledInputs",configFields:q5(),partFields:K5(),factory:LL,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),HL=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},gO=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return $t.value({value:i,unit:d})}else return $t.error(t)},Y5=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>yn(a,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?k.some(t.value):k.some(t.value/a[t.unit]*a[s]):k.none()},aE=t=>k.none(),X5=(t,s)=>a=>Y5(a,s).map(i=>({value:i*t,unit:s})),VL=(t,s)=>{const a=gO(t).toOptional(),i=gO(s).toOptional();return ad(a,i,(d,g)=>Y5(d,g.unit).map(p=>g.value/p).map(p=>X5(p,g.unit)).getOr(aE)).getOr(aE)},zL=(t,s)=>{let a=aE;const i=Je("ratio-event"),d=D=>rl(D,{tag:"span",classes:["tox-icon","tox-lock-icon__"+D]},s.icons),g=jc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:Ae([yt.config({disabled:()=>!t.enabled||s.isDisabled()}),ls(),fo.config({})])}),p=D=>({dom:{tag:"div",classes:["tox-form__group"]},components:D}),y=D=>vn.parts.field({factory:yh,inputClasses:["tox-textfield"],inputBehaviours:Ae([yt.config({disabled:()=>!t.enabled||s.isDisabled()}),ls(),fo.config({}),Nt("size-input-events",[be(oa(),(R,P)=>{lt(R,i,{isField1:D})}),be(_d(),(R,P)=>{lt(R,dc,{name:t.name})})])]),selectOnFocus:!1}),w=D=>({dom:{tag:"label",classes:["tox-label"]},components:[jn(s.translate(D))]}),E=jc.parts.field1(p([vn.parts.label(w("Width")),y(!0)])),_=jc.parts.field2(p([vn.parts.label(w("Height")),y(!1)]));return jc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[E,_,p([w(zw),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(D,R,P)=>{gO(We.getValue(D)).each(I=>{a(I).each(Z=>{We.setValue(R,HL(Z))})})},coupledFieldBehaviours:Ae([yt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:D=>{jc.getField1(D).bind(vn.getField).each(yt.disable),jc.getField2(D).bind(vn.getField).each(yt.disable),jc.getLock(D).each(yt.disable)},onEnabled:D=>{jc.getField1(D).bind(vn.getField).each(yt.enable),jc.getField2(D).bind(vn.getField).each(yt.enable),jc.getLock(D).each(yt.enable)}}),ls(),Nt("size-input-events2",[be(i,(D,R)=>{const P=R.event.isField1,I=P?jc.getField1(D):jc.getField2(D),Z=P?jc.getField2(D):jc.getField1(D),ie=I.map(We.getValue).getOr(""),G=Z.map(We.getValue).getOr("");a=VL(ie,G)})])])})},UL=(t,s,a)=>{const i=ll.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[jn(s.translate(t.label))]}),d=ll.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=ll.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return ll.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:J(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Ae([ul.self(),Ct.config({})]),onChoose:(p,y,w)=>{lt(p,dc,{name:t.name,value:w})}})},cE=(t,s)=>{const a=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),i=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:we(y,a)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:we(y,d)}),p=y=>({dom:{tag:"tbody"},components:we(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:Ae([fo.config({}),Ct.config({})])}},J5=(t,s)=>{const a=t.label.map(P=>dm(P,s)),i=[yt.config({disabled:()=>t.disabled||s.isDisabled()}),ls(),ut.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:P=>(rn(P,wb),k.some(!0))}),Nt("textfield-change",[be(kd(),(P,I)=>{lt(P,dc,{name:t.name})}),be(Od(),(P,I)=>{lt(P,dc,{name:t.name})})]),fo.config({})],d=t.validation.map(P=>ql.config({getRoot:I=>Jc(I.element),invalidClass:"tox-invalid",validator:{validate:I=>{const Z=We.getValue(I),ie=P.validator(Z);return hr.pure(ie===!0?$t.value(Z):$t.error(ie))},validateOnLoad:P.validateOnLoad}})).toArray(),g=t.placeholder.fold(J({}),P=>({placeholder:s.translate(P)})),p=t.inputMode.fold(J({}),P=>({inputmode:P})),y={...g,...p},w=vn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(P=>({data:P})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:Ae(Ft([i,d])),selectOnFocus:!1,factory:yh}),E=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),R=[yt.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:P=>{vn.getField(P).each(yt.disable)},onEnabled:P=>{vn.getField(P).each(yt.enable)}}),ls()];return t2(a,E,D,R)},WL=(t,s,a)=>J5({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:a},s),Q5=(t,s,a)=>J5({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:a},s),Ob=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),ym=t=>t.dimension.property,Ph=(t,s)=>t.dimension.getDimension(s),Ab=(t,s)=>{const a=Ob(t,s);xr(a,[s.shrinkingClass,s.growingClass])},hO=(t,s)=>{ao(t.element,s.openClass),So(t.element,s.closedClass),Mt(t.element,ym(s),"0px"),yl(t.element)},iE=(t,s)=>{ao(t.element,s.closedClass),So(t.element,s.openClass),mn(t.element,ym(s))},eN=(t,s,a,i)=>{a.setCollapsed(),Mt(t.element,ym(s),Ph(s,t.element)),Ab(t,s),hO(t,s),s.onStartShrink(t),s.onShrunk(t)},ZL=(t,s,a,i)=>{const d=i.getOrThunk(()=>Ph(s,t.element));a.setCollapsed(),Mt(t.element,ym(s),d),yl(t.element);const g=Ob(t,s);ao(g,s.growingClass),So(g,s.shrinkingClass),hO(t,s),s.onStartShrink(t)},tN=(t,s,a)=>{const i=Ph(s,t.element);(i==="0px"?eN:ZL)(t,s,a,k.some(i))},pO=(t,s,a)=>{const i=Ob(t,s),d=aa(i,s.shrinkingClass),g=Ph(s,t.element);iE(t,s);const p=Ph(s,t.element);(d?()=>{Mt(t.element,ym(s),g),yl(t.element)}:()=>{hO(t,s)})(),ao(i,s.shrinkingClass),So(i,s.growingClass),iE(t,s),Mt(t.element,ym(s),p),a.setExpanded(),s.onStartGrow(t)},nN=(t,s,a)=>{if(a.isExpanded()){mn(t.element,ym(s));const i=Ph(s,t.element);Mt(t.element,ym(s),i)}},jL=(t,s,a)=>{a.isExpanded()||pO(t,s,a)},GL=(t,s,a)=>{a.isExpanded()&&tN(t,s,a)},qL=(t,s,a)=>{a.isExpanded()&&eN(t,s,a)},KL=(t,s,a)=>a.isExpanded(),oN=(t,s,a)=>a.isCollapsed(),sN=(t,s,a)=>{const i=Ob(t,s);return aa(i,s.growingClass)===!0},bO=(t,s,a)=>{const i=Ob(t,s);return aa(i,s.shrinkingClass)===!0};var YL=Object.freeze({__proto__:null,refresh:nN,grow:jL,shrink:GL,immediateShrink:qL,hasGrown:KL,hasShrunk:oN,isGrowing:sN,isShrinking:bO,isTransitioning:(t,s,a)=>sN(t,s)||bO(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?tN:pO)(t,s,a)},disableTransitions:Ab,immediateGrow:(t,s,a)=>{a.isExpanded()||(iE(t,s),Mt(t.element,ym(s),Ph(s,t.element)),Ab(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),XL=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return ra(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Sr(s.dimension.property,"0px")})},events:(t,s)=>Ln([Rd(Wm(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(Ab(a,t),s.isExpanded()&&mn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),JL=[ve("closedClass"),ve("openClass"),ve("shrinkingClass"),ve("growingClass"),gn("getAnimationRoot"),Yt("onShrunk"),Yt("onStartShrink"),Yt("onGrown"),Yt("onStartGrow"),ne("expanded",!1),In("dimension",Fs("property",{width:[zn("property","width"),zn("getDimension",t=>fs(t)+"px")],height:[zn("property","height"),zn("getDimension",t=>os(t)+"px")]}))],vO=Object.freeze({__proto__:null,init:t=>{const s=pt(t.expanded),a=()=>"expanded: "+s.get();return Fr({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:cn(s.set,!1),setExpanded:cn(s.set,!0),readState:a})}});const mc=As({fields:JL,name:"sliding",active:XL,apis:YL,state:vO}),rN=t=>({isEnabled:()=>!yt.isDisabled(t),setEnabled:s=>yt.set(t,!s),setActive:s=>{const a=t.element;s?(So(a,"tox-tbtn--enabled"),Ke(a,"aria-pressed",!0)):(ao(a,"tox-tbtn--enabled"),qo(a,"aria-pressed"))},isActive:()=>aa(t.element,"tox-tbtn--enabled"),setText:s=>{lt(t,Ai,{text:s})},setIcon:s=>lt(t,Hf,{icon:s})}),b2=(t,s,a,i,d=!0)=>oE({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(g,p)=>{const y={pattern:t.search.isSome()?T3(g):""};t.fetch(w=>{p(_b(w,al.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},y,rN(g))},onSetup:t.onSetup,getApi:rN,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[fo.config({})]:[]]},s,a.shared),v2=(t,s,a)=>{const i=g=>p=>{const y=!p.isActive();p.setActive(y),g.storage.set(y),a.shared.getSink().each(w=>{s().getOpt(w).each(E=>{oc(E.element),lt(E,Ju,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(we(t,p=>{const y=p.text.fold(()=>({}),w=>({text:w}));return{type:p.type,active:!1,...y,onAction:i(p),onSetup:d(p)}}))}},lE=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[jn(t)]}),aN=Je("leaf-label-event-id"),yO=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const p=t.menu.map(w=>b2(w,"tox-mbtn",g,k.none(),a)),y=[lE(t.title)];return p.each(w=>y.push(w)),js.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Mc()]:[aN,"keying"]},buttonBehaviours:Ae([...a?[fo.config({})]:[],Lt.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),nr.config({channels:{[`update-active-item-${i}`]:{onReceive:(w,E)=>{(E.value===t.id?Lt.on:Lt.off)(w)}}}}),Nt(aN,[Vn((w,E)=>{d.each(_=>{(_===t.id?Lt.on:Lt.off)(w)})}),be(Mc(),(w,E)=>{const _=E.event.raw.code==="ArrowLeft",D=E.event.raw.code==="ArrowRight";_?(Al(w.element,".tox-tree--directory").each(R=>{w.getSystem().getByDom(R).each(P=>{t1(R,".tox-tree--directory__label").each(I=>{P.getSystem().getByDom(I).each(Ct.focus)})})}),E.stop()):D&&E.stop()})])])})},CO=(t,s,a)=>rl(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),QL=(t,s)=>CO(t,s,[]),uE=Je("directory-label-event-id"),cN=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(y=>b2(y,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[QL("chevron-right",i.shared.providers.icons)]},lE(t.title)];d.each(y=>{g.push(y)});const p=y=>{Al(y.element,".tox-tree--directory").each(w=>{y.getSystem().getByDom(w).each(E=>{const _=!Lt.isOn(E);Lt.toggle(E),lt(y,"expand-tree-node",{expanded:_,node:t.id})})})};return js.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Mc()]:[uE,"keying"]},buttonBehaviours:Ae([...s?[fo.config({})]:[],Nt(uE,[be(Mc(),(y,w)=>{const E=w.event.raw.code==="ArrowRight",_=w.event.raw.code==="ArrowLeft";E&&a&&w.stop(),(E||_)&&Al(y.element,".tox-tree--directory").each(D=>{y.getSystem().getByDom(D).each(R=>{!Lt.isOn(R)&&E||Lt.isOn(R)&&_?(p(y),w.stop()):_&&!Lt.isOn(R)&&(Al(R.element,".tox-tree--directory").each(P=>{t1(P,".tox-tree--directory__label").each(I=>{R.getSystem().getByDom(I).each(Ct.focus)})}),w.stop())})})})])])})},eH=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(y=>y.type==="leaf"?yO({leaf:y,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:p}):dE({directory:y,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:p})),behaviours:Ae([mc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),kt.config({})])}),tH=Je("directory-event-id"),dE=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:p})=>{const{children:y}=t,w=pt(g),E=D=>y.map(R=>R.type==="leaf"?yO({leaf:R,selectedId:p,onLeafAction:s,visible:D,treeId:i,backstage:d}):dE({directory:R,expandedIds:w.get(),selectedId:p,onLeafAction:s,labelTabstopping:D,treeId:i,backstage:d})),_=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[cN({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),eH({children:y,expandedIds:g,selectedId:p,onLeafAction:s,visible:_,treeId:i,backstage:d})],behaviours:Ae([Nt(tH,[Vn((D,R)=>{Lt.set(D,_)}),be("expand-tree-node",(D,R)=>{const{expanded:P,node:I}=R.event;w.set(P?[...w.get(),I]:w.get().filter(Z=>Z!==I))})]),Lt.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(D,R)=>{const P=D.components()[1],I=E(R);R?mc.grow(P):mc.shrink(P),kt.set(P,I)}})])}},iN=Je("tree-event-id"),nH=(t,s)=>{const a=t.onLeafAction.getOr(K),i=t.onToggleExpand.getOr(K),d=t.defaultExpandedIds,g=pt(d),p=pt(t.defaultSelectedId),y=Je("tree-id"),w=(E,_)=>t.items.map(D=>D.type==="leaf"?yO({leaf:D,selectedId:E,onLeafAction:a,visible:!0,treeId:y,backstage:s}):dE({directory:D,selectedId:E,onLeafAction:a,expandedIds:_,labelTabstopping:!0,treeId:y,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(p.get(),g.get()),behaviours:Ae([ut.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Nt(iN,[be("expand-tree-node",(E,_)=>{const{expanded:D,node:R}=_.event;g.set(D?[...g.get(),R]:g.get().filter(P=>P!==R)),i(g.get(),{expanded:D,node:R})})]),nr.config({channels:{[`update-active-item-${y}`]:{onReceive:(E,_)=>{p.set(k.some(_.value)),kt.set(E,w(k.some(_.value),g.get()))}}}}),kt.config({})])}};var lN=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Ln([be(t.event,i),ji(()=>s.cancel())].concat(t.cancelEvent.map(d=>[be(d,()=>s.cancel())]).getOr([])))}});const uN=t=>{const s=pt(null);return Fr({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var dN=Object.freeze({__proto__:null,throttle:uN,init:t=>t.stream.streams.state(t)});const mN=(t,s)=>{const a=t.stream,i=Dr(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var rH=[In("stream",Fs("mode",{throttle:[ve("delay"),ne("stopEvent",!0),zn("streams",{setup:mN,state:uN})]})),ne("event","input"),gn("cancelEvent"),Rl("onStream")];const wO=As({fields:rH,name:"streaming",active:lN,state:dN}),mE=(t,s,a)=>{const i=We.getValue(a);We.setValue(s,i),fN(s)},SO=(t,s)=>{const a=t.element,i=xo(a),d=a.dom;po(a,"type")!=="number"&&s(d,i)},fN=t=>{SO(t,(s,a)=>s.setSelectionRange(a.length,a.length))},gN=(t,s)=>{SO(t,(a,i)=>a.setSelectionRange(s,i.length))},aH=(t,s,a)=>{if(t.selectsOver){const i=We.getValue(s),d=t.getDisplayText(i),g=We.getValue(a);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{mE(t,s,a),gN(s,d.length)}):k.none()}else return k.none()},xO=J("alloy.typeahead.itemexecute"),EO=(t,s,a,i)=>{const d=(D,R,P)=>{t.previewing.set(!1);const I=To.getCoupled(D,"sandbox");if(Zt.isOpen(I))Xt.getCurrent(I).each(Z=>{ln.getHighlighted(Z).fold(()=>{P(Z)},()=>{Uv(I,Z.element,"keydown",R)})});else{const Z=ie=>{Xt.getCurrent(ie).each(P)};Qy(t,p(D),D,I,i,Z,ma.HighlightMenuAndItem).get(K)}},g=sM(t),p=D=>R=>R.map(P=>{const I=Qb(P.menus),Z=he(I,G=>Wn(G.items,j=>j.type==="item"));return We.getState(D).update(we(Z,G=>G.data)),P}),y=D=>Xt.getCurrent(D),w="typeaheadevents",E=[Ct.config({}),We.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:D=>xo(D.element),getFallbackEntry:D=>({value:D,meta:{}}),setValue:(D,R)=>{Ao(D.element,t.model.getDisplayText(R))},...t.initialData.map(D=>Sr("initialValue",D)).getOr({})}}),wO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(D,R)=>{const P=To.getCoupled(D,"sandbox");if(Ct.isFocused(D)&&xo(D.element).length>=t.minChars){const Z=y(P).bind(G=>ln.getHighlighted(G).map(We.getValue));t.previewing.set(!0);const ie=G=>{y(P).each(j=>{Z.fold(()=>{t.model.selectsOver&&ln.highlightFirst(j)},ue=>{ln.highlightBy(j,oe=>We.getValue(oe).value===ue.value),ln.getHighlighted(j).orThunk(()=>(ln.highlightFirst(j),k.none()))})})};Qy(t,p(D),D,P,i,ie,ma.HighlightJustMenu).get(K)}},cancelEvent:Ad()}),ut.config({mode:"special",onDown:(D,R)=>(d(D,R,ln.highlightFirst),k.some(!0)),onEscape:D=>{const R=To.getCoupled(D,"sandbox");return Zt.isOpen(R)?(Zt.close(R),k.some(!0)):k.none()},onUp:(D,R)=>(d(D,R,ln.highlightLast),k.some(!0)),onEnter:D=>{const R=To.getCoupled(D,"sandbox"),P=Zt.isOpen(R);if(P&&!t.previewing.get())return y(R).bind(I=>ln.getHighlighted(I)).map(I=>(lt(D,xO(),{item:I}),!0));{const I=We.getValue(D);return rn(D,Ad()),t.onExecute(R,D,I),P&&Zt.close(R),k.some(!0)}}}),Lt.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),To.config({others:{sandbox:D=>C3(t,D,{onOpen:()=>Lt.on(D),onClose:()=>{t.lazyTypeaheadComp.get().each(R=>qo(R.element,"aria-activedescendant")),Lt.off(D)}})}}),Nt(w,[Vn(D=>{t.lazyTypeaheadComp.set(k.some(D))}),ji(D=>{t.lazyTypeaheadComp.set(k.none())}),Bc(D=>{const R=K;y3(t,p(D),D,i,R,ma.HighlightMenuAndItem).get(K)}),be(xO(),(D,R)=>{const P=To.getCoupled(D,"sandbox");mE(t.model,D,R.event.item),rn(D,Ad()),t.onItemExecute(D,P,R.event.item,We.getValue(D)),Zt.close(P),fN(D)})].concat(t.dismissOnBlur?[be(xu(),D=>{const R=To.getCoupled(D,"sandbox");sc(R.element).isNone()&&Zt.close(R)})]:[]))],_={[Dd()]:[We.name(),wO.name(),w],...t.eventOrder};return{uid:t.uid,dom:C4($n(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...is(t.typeaheadBehaviours,E)},eventOrder:_}},cH=J([gn("lazySink"),ve("fetch"),ne("minChars",5),ne("responseTime",1e3),Yt("onOpen"),ne("getHotspot",k.some),ne("getAnchorOverrides",J({})),ne("layouts",k.none()),ne("eventOrder",{}),Nv("model",{},[ne("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ne("selectsOver",!0),ne("populateFromBrowse",!0)]),Yt("onSetValue"),Tr("onExecute"),Yt("onItemExecute"),ne("inputClasses",[]),ne("inputAttributes",{}),ne("inputStyles",{}),ne("matchWidth",!0),ne("useMinWidth",!1),ne("dismissOnBlur",!0),la(["openClass"]),gn("initialData"),Qo("typeaheadBehaviours",[Ct,We,wO,ut,Lt,To]),Qs("lazyTypeaheadComp",()=>pt(k.none)),Qs("previewing",()=>pt(!0))].concat(oM()).concat(w3())),iH=J([cc({schema:[r1()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{aH(t.model,d,i).fold(()=>{t.model.selectsOver?(ln.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&mE(t.model,d,i),Kr(i.element,"id").each(g=>Ke(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(lt(i,xO(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&mE(t.model,i,a)})}})})]),lH=sr({name:"Typeahead",configFields:cH(),partFields:iH(),factory:EO}),Di=t=>({...t,toCached:()=>Di(t.toCached()),bindFuture:w=>Di(t.bind(E=>E.fold(_=>hr.pure($t.error(_)),_=>w(_)))),bindResult:w=>Di(t.map(E=>E.bind(w))),mapResult:w=>Di(t.map(E=>E.map(w))),mapError:w=>Di(t.map(E=>E.mapError(w))),foldResult:(w,E)=>t.map(_=>_.fold(w,E)),withTimeout:(w,E)=>Di(hr.nu(_=>{let D=!1;const R=setTimeout(()=>{D=!0,_($t.error(E()))},w);t.get(P=>{D||(clearTimeout(R),_(P))})}))}),hN=t=>Di(hr.nu(t)),TO=t=>Di(hr.pure($t.value(t))),dH={nu:hN,wrap:Di,pure:TO,value:TO,error:t=>Di(hr.pure($t.error(t))),fromResult:t=>Di(hr.pure(t)),fromFuture:t=>Di(t.map($t.value)),fromPromise:t=>hN(s=>{t.then(a=>{s($t.value(a))},a=>{s($t.error(a))})})},fE=(t,s,a=[],i,d,g)=>{const p=s.fold(()=>({}),E=>({action:E})),y={buttonBehaviours:Ae([Ti.button(()=>!t.enabled||g.isDisabled()),ls(),fo.config({}),Nt("button press",[Zv("click"),Zv("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},w=$n(y,{dom:i});return $n(w,{components:d})},pN=(t,s,a,i=[])=>{const d=t.tooltip.map(w=>({"aria-label":a.translate(w),title:a.translate(w)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(w=>iO(w,a.icons)),y=hb([p]);return fE(t,s,i,g,y,a)},kO=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},bN=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(R=>iO(R,a.icons)),y=[p.getOrThunk(()=>jn(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),D={tag:"button",classes:[...kO(w),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return fE(t,s,i,D,y,a)},_O=(t,s,a,i=[],d=[])=>{const g=bN(t,k.some(s),a,i,d);return js.sketch(g)},vN=(t,s)=>a=>{s==="custom"?lt(a,Ju,{name:t,value:{}}):s==="submit"?rn(a,wb):s==="cancel"?rn(a,Bf):console.error("Unknown button type: ",s)},mH=(t,s)=>s==="menu",fH=(t,s)=>s==="custom"||s==="cancel"||s==="submit",yN=(t,s)=>s==="togglebutton",gH=(t,s)=>{var a,i;const d=t.icon.map(j=>Lf(j,s.icons)).map(bn),g=j=>{lt(j,Ju,{name:t.name,value:{setIcon:ue=>{d.map(oe=>oe.getOpt(j).each(ke=>{kt.set(ke,[Lf(ue,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),y={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:p==="primary",tooltip:k.from(t.tooltip),enabled:(i=t.enabled)!==null&&i!==void 0?i:!1,borderless:!1},w=y.tooltip.map(j=>({"aria-label":s.translate(j),title:s.translate(j)})).getOr({}),E=kO(p??"secondary"),_=t.icon.isSome()&&t.text.isSome(),D={tag:"button",classes:[...E.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],..._?["tox-button--icon-and-text"]:[]],attributes:w},R=[],P=s.translate(t.text.getOr("")),I=jn(P),ie=[...hb([d.map(j=>j.asSpec())]),...t.text.isSome()?[I]:[]],G=fE(y,k.some(g),R,D,ie,s);return js.sketch(G)},gE=(t,s,a)=>{if(mH(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:k.none(),onSetup:y=>(y.setEnabled(t.enabled),K),fetch:v2(d.items,i,a)},p=bn(b2(g,"tox-tbtn",a,k.none()));return p.asSpec()}else if(fH(t,s)){const i=vN(t.name,s),d={...t,borderless:!1};return _O(d,i,a.shared.providers,[])}else{if(yN(t,s))return gH(t,a.shared.providers);throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},hH=(t,s)=>{const a=vN(t.name,"custom");return LB(k.none(),vn.parts.field({factory:js,...bN(t,k.some(a),s,[hm(""),ul.self()])}))},CN={type:"separator"},wN=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:K}),hE=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:K}),pE=t=>we(t,wN),pH=(t,s)=>Wn(s,a=>a.type===t),SN=(t,s)=>pE(pH(t,s)),bH=t=>SN("header",t.targets),vH=t=>SN("anchor",t.targets),xN=t=>k.from(t.anchorTop).map(s=>hE("<top>",s)).toArray(),yH=t=>k.from(t.anchorBottom).map(s=>hE("<bottom>",s)).toArray(),CH=t=>we(t,s=>hE(s,s)),wH=t=>Yn(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(CN,a),[]),bE=(t,s)=>{const a=t.toLowerCase();return Wn(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return cr(g.toLowerCase(),a)||cr(p.toLowerCase(),a)})},EN=(t,s,a)=>{var i,d;const g=We.getValue(s),p=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],w=>{const E=bE(p,CH(a.getHistory(t)));return t==="file"?wH([E,bE(p,bH(w)),bE(p,Ft([xN(w),vH(w),yH(w)]))]):E})},TN=Je("aria-invalid"),SH=(t,s,a,i)=>{const d=s.shared.providers,g=j=>{const ue=We.getValue(j);a.addToHistory(ue.value,t.filetype)},p={...i.map(j=>({initialData:j})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":TN,type:"url"},minChars:0,responseTime:0,fetch:j=>{const ue=EN(t.filetype,j,a),oe=_b(ue,al.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return hr.pure(oe)},getHotspot:j=>I.getOpt(j),onSetValue:(j,ue)=>{j.hasConfigured(ql)&&ql.run(j).get(K)},typeaheadBehaviours:Ae([...a.getValidationHandler().map(j=>ql.config({getRoot:ue=>Jc(ue.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ue,oe)=>{_.getOpt(ue).each(ke=>{Ke(ke.element,"title",d.translate(oe))})}},validator:{validate:ue=>{const oe=We.getValue(ue);return dH.nu(ke=>{j({type:t.filetype,url:oe.value},xe=>{if(xe.status==="invalid"){const $e=$t.error(xe.message);ke($e)}else{const $e=$t.value(xe.message);ke($e)}})})},validateOnLoad:!1}})).toArray(),yt.config({disabled:()=>!t.enabled||d.isDisabled()}),fo.config({}),Nt("urlinput-events",[be(kd(),j=>{const ue=xo(j.element),oe=ue.trim();oe!==ue&&Ao(j.element,oe),t.filetype==="file"&&lt(j,dc,{name:t.name})}),be(_d(),j=>{lt(j,dc,{name:t.name}),g(j)}),be(Od(),j=>{lt(j,dc,{name:t.name}),g(j)})])]),eventOrder:{[kd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:j=>j.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:ub(!1,1,"normal")},onExecute:(j,ue,oe)=>{lt(ue,wb,{})},onItemExecute:(j,ue,oe,ke)=>{g(j),lt(j,dc,{name:t.name})}},y=vn.parts.field({...p,factory:lH}),w=t.label.map(j=>dm(j,d)),_=bn(((j,ue,oe=j,ke=j)=>rl(oe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+j],attributes:{title:d.translate(ke),"aria-live":"polite",...ue.fold(()=>({}),xe=>({id:xe}))}},d.icons))("invalid",k.some(TN),"warning")),D=bn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),R=a.getUrlPicker(t.filetype),P=Je("browser.url.event"),I=bn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,D.asSpec()],behaviours:Ae([yt.config({disabled:()=>!t.enabled||d.isDisabled()})])}),Z=bn(_O({name:t.name,icon:k.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},j=>rn(j,P),d,[],["tox-browse-url"])),ie=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ft([[I.asSpec()],R.map(()=>Z.asSpec()).toArray()])}),G=j=>{Xt.getCurrent(j).each(ue=>{const oe=We.getValue(ue),ke={fieldname:t.name,...oe};R.each(xe=>{xe(ke).get($e=>{We.setValue(ue,$e),lt(j,dc,{name:t.name})})})})};return vn.sketch({dom:f7(),components:w.toArray().concat([ie()]),fieldBehaviours:Ae([yt.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:j=>{vn.getField(j).each(yt.disable),Z.getOpt(j).each(yt.disable)},onEnabled:j=>{vn.getField(j).each(yt.enable),Z.getOpt(j).each(yt.enable)}}),ls(),Nt("url-input-events",[be(P,G)])])})},kN=(t,s)=>{const a=DR(t.icon,s.icons);return Gl.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[js.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>lt(i,Ju,{name:"alert-banner",value:t.url}),buttonBehaviours:Ae([Q_()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},xH=(t,s)=>{t.dom.checked=s},EH=t=>t.dom.checked,xt=(t,s,a)=>{const i=w=>(w.element.dom.click(),k.some(!0)),d=vn.parts.field({factory:{sketch:on},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ae([ul.self(),yt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{Jc(w.element).each(E=>So(E,"tox-checkbox--disabled"))},onEnabled:w=>{Jc(w.element).each(E=>ao(E,"tox-checkbox--disabled"))}}),fo.config({}),Ct.config({}),E5(a,EH,xH),ut.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Nt("checkbox-events",[be(_d(),(w,E)=>{lt(w,dc,{name:t.name})})])])}),g=vn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[jn(s.translate(t.label))],behaviours:Ae([o2.config({})])}),p=w=>rl(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),y=bn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return vn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:Ae([yt.config({disabled:()=>!t.enabled||s.isDisabled()}),ls()])})},y2=t=>t.presets==="presentation"?Gl.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Gl.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Ae([fo.config({}),Ct.config({})])}),ds=t=>(s,a,i,d)=>Ze(a,"name").fold(()=>t(a,d,k.none()),g=>s.field(g,t(a,d,Ze(i,g)))),_N=t=>(s,a,i,d)=>{const g=$n(a,{source:"dynamic"});return ds(t)(s,g,i,d)},ON={bar:ds((t,s)=>a7(t,s.shared)),collection:ds((t,s,a)=>g7(t,s.shared.providers,a)),alertbanner:ds((t,s)=>kN(t,s.shared.providers)),input:ds((t,s,a)=>WL(t,s.shared.providers,a)),textarea:ds((t,s,a)=>Q5(t,s.shared.providers,a)),label:ds((t,s)=>g2(t,s.shared)),iframe:_N((t,s,a)=>BL(t,s.shared.providers,a)),button:ds((t,s)=>hH(t,s.shared.providers)),checkbox:ds((t,s,a)=>xt(t,s.shared.providers,a)),colorinput:ds((t,s,a)=>w7(t,s.shared,s.colorinput,a)),colorpicker:ds((t,s,a)=>_5(t,s.shared.providers,a)),dropzone:ds((t,s,a)=>O5(t,s.shared.providers,a)),grid:ds((t,s)=>A5(t,s.shared)),listbox:ds((t,s,a)=>vm(t,s,a)),selectbox:ds((t,s,a)=>mO(t,s.shared.providers,a)),sizeinput:ds((t,s)=>zL(t,s.shared.providers)),slider:ds((t,s,a)=>UL(t,s.shared.providers,a)),urlinput:ds((t,s,a)=>SH(t,s,s.urlinput,a)),customeditor:ds(Yx),htmlpanel:ds(y2),imagepreview:ds((t,s,a)=>tE(t,a)),table:ds((t,s)=>cE(t,s.shared.providers)),tree:ds((t,s)=>nH(t,s)),panel:ds((t,s)=>dO(t,s))},AN={field:(t,s)=>s,record:J([])},OO=(t,s,a,i)=>{const d=$n(i,{shared:{interpreter:g=>DN(t,g,a,d)}});return DN(t,s,a,d)},DN=(t,s,a,i)=>Ze(ON,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),Db=(t,s,a)=>DN(AN,t,s,a),Vf="layout-inset",vE=t=>t.x,RN=(t,s)=>t.x+t.width/2-s.width/2,AO=(t,s)=>t.x+t.width-s.width,DO=t=>t.y,yE=(t,s)=>t.y+t.height-s.height,CE=(t,s)=>t.y+t.height/2-s.height/2,C2=(t,s,a)=>Do(AO(t,s),yE(t,s),a.insetSouthwest(),Ng(),"southwest",Vs(t,{right:0,bottom:3}),Vf),wE=(t,s,a)=>Do(vE(t),yE(t,s),a.insetSoutheast(),Ma(),"southeast",Vs(t,{left:1,bottom:3}),Vf),w2=(t,s,a)=>Do(AO(t,s),DO(t),a.insetNorthwest(),Yi(),"northwest",Vs(t,{right:0,top:2}),Vf),S2=(t,s,a)=>Do(vE(t),DO(t),a.insetNortheast(),c1(),"northeast",Vs(t,{left:1,top:2}),Vf),dl=(t,s,a)=>Do(RN(t,s),DO(t),a.insetNorth(),i1(),"north",Vs(t,{top:2}),Vf),x2=(t,s,a)=>Do(RN(t,s),yE(t,s),a.insetSouth(),b0(),"south",Vs(t,{bottom:3}),Vf),RO=(t,s,a)=>Do(AO(t,s),CE(t,s),a.insetEast(),cw(),"east",Vs(t,{right:0}),Vf),MN=(t,s,a)=>Do(vE(t),CE(t,s),a.insetWest(),l1(),"west",Vs(t,{left:1}),Vf),TH=t=>{switch(t){case"north":return dl;case"northeast":return S2;case"northwest":return w2;case"south":return x2;case"southeast":return wE;case"southwest":return C2;case"east":return RO;case"west":return MN}},BN=(t,s,a,i,d)=>xw(i).map(TH).getOr(dl)(t,s,a,i,d),kH=t=>{switch(t){case"north":return x2;case"northeast":return wE;case"northwest":return C2;case"south":return dl;case"southeast":return S2;case"southwest":return w2;case"east":return MN;case"west":return RO}},_H=(t,s,a,i,d)=>xw(i).map(kH).getOr(dl)(t,s,a,i,d),E2={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},OH=(t,s,a)=>{const d={maxHeightFunction:Nl()},g=()=>({type:"node",root:Sc(so(t())),node:k.from(t()),bubble:Pl(12,12,E2),layouts:{onRtl:()=>[S2],onLtr:()=>[w2]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:Pl(-12,12,E2),layouts:{onRtl:()=>[Xo,_s,ys],onLtr:()=>[_s,Xo,ys]},overrides:d});return()=>a()?g():p()},AH=(t,s,a,i)=>{const g={maxHeightFunction:Nl()},p=()=>({type:"node",root:Sc(so(s())),node:k.from(s()),bubble:Pl(12,12,E2),layouts:{onRtl:()=>[dl],onLtr:()=>[dl]},overrides:g}),y=()=>t?{type:"node",root:Sc(so(s())),node:k.from(s()),bubble:Pl(0,-du(s()),E2),layouts:{onRtl:()=>[Os],onLtr:()=>[Os]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:Pl(0,0,E2),layouts:{onRtl:()=>[Os],onLtr:()=>[Os]},overrides:g};return()=>i()?p():y()},DH=(t,s,a)=>{const i=()=>({type:"node",root:Sc(so(t())),node:k.from(t()),layouts:{onRtl:()=>[dl],onLtr:()=>[dl]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[ys],onLtr:()=>[ys]}});return()=>a()?i():d()},RH=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],p={firstCell:te.fromDom(d),lastCell:te.fromDom(g)};return k.some(p)}return k.some(Vg.range(te.fromDom(a.startContainer),a.startOffset,te.fromDom(a.endContainer),a.endOffset))}}),MH=t=>s=>({type:"node",root:t(),node:s}),NN=(t,s,a,i)=>{const d=ib(t),g=()=>te.fromDom(t.getBody()),p=()=>te.fromDom(t.getContentAreaContainer()),y=()=>d||!i();return{inlineDialog:OH(p,s,y),inlineBottomDialog:AH(t.inline,p,a,y),banner:DH(p,s,y),cursor:RH(t,g),node:MH(g)}},BH=t=>(s,a)=>{rB(t)(s,a)},NH=t=>()=>tB(t),PH=t=>s=>r3(t,s),$H=t=>s=>a3(t,s),FH=t=>({colorPicker:BH(t),hasCustomColors:NH(t),getColors:PH(t),getColorCols:$H(t)}),IH=t=>()=>m4(t),PN=t=>({isDraggableModal:IH(t)}),LH=t=>{const s=pt(h4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},MO=t=>Wa(t,"items"),$N=t=>Wa(t,"format"),BO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],FN=t=>yn(t,"items"),NO=t=>yn(t,"block"),HH=t=>yn(t,"inline"),IN=t=>yn(t,"selector"),PO=t=>Yn(t,(s,a)=>{if(FN(a)){const i=PO(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(HH(a)||NO(a)||IN(a)){const d=`custom-${En(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),VH=(t,s)=>{const a=PO(s),i=d=>{Xe(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},$O=t=>rb(t).map(s=>{const a=VH(t,s);return Ny(t)?BO.concat(a):a}).getOr(BO),zH=t=>{const s=io(t);return s.length===1&&Po(s,"title")},LN=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),ml=(t,s,a,i)=>{const d=w=>LN(w,a,i),g=w=>{const E=y(w.items);return{...w,type:"submenu",getStyleItems:J(E)}},p=w=>{const E=En(w.name)?w.name:Je(w.title),_=`custom-${E}`,D={...w,type:"formatter",format:_,isSelected:a(_),getStylePreview:i(_)};return t.formatter.register(E,D),D},y=w=>we(w,E=>MO(E)?g(E):$N(E)?d(E):zH(E)?{...E,type:"separator"}:p(E));return y(s)},SE=t=>{const s=y=>()=>t.formatter.match(y),a=y=>()=>{const w=t.formatter.get(y);return w!==void 0?k.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):k.none()},i=pt([]),d=pt([]),g=pt(!1);return t.on("PreInit",y=>{const w=$O(t),E=ml(t,w,s,a);i.set(E)}),t.on("addStyleModifications",y=>{const w=ml(t,y.items,s,a);d.set(w),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:i.get(),w=d.get();return y.concat(w)}}},xE=t=>ar(t)&&t.nodeType===1,UH=pm.trim,EE=t=>s=>!!(xE(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),WH=EE("true"),FO=EE("false"),IO=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),LO=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return WH(s)}return!1},ZH=(t,s)=>we(_r(te.fromDom(s),t),a=>a.dom),HO=t=>t.innerText||t.textContent,HN=t=>t.id?t.id:Je("h"),VO=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,jH=t=>VO(t)&&zO(t),VN=t=>t&&/^(H[1-6])$/.test(t.nodeName),zO=t=>LO(t)&&!FO(t),GH=t=>VN(t)&&zO(t),qH=t=>VN(t)?parseInt(t.nodeName.substr(1),10):0,zN=t=>{var s;const a=HN(t),i=()=>{t.id=a};return IO("header",(s=HO(t))!==null&&s!==void 0?s:"","#"+a,qH(t),i)},UN=t=>{const s=t.id||t.name,a=HO(t);return IO("anchor",a||"#"+s,"#"+s,0,K)},KH=t=>we(Wn(t,GH),zN),YH=t=>we(Wn(t,jH),UN),XH=t=>ZH("h1,h2,h3,h4,h5,h6,a:not([href])",t),JH=t=>UH(t.title).length>0,Xl={find:t=>{const s=XH(t);return Wn(KH(s).concat(YH(s)),JH)}},Rb="tinymce-url-history",WN=5,ZN=t=>En(t)&&/^https?/.test(t),eV=t=>Ri(t)&&t.length<=WN&&au(t,ZN),jN=t=>vc(t)&&yr(t,s=>!eV(s)).isNone(),GN=()=>{const t=lm.getItem(Rb);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Rb+" was not valid JSON",a),{};throw a}return jN(s)?s:(console.log("Local storage "+Rb+" was not valid format",s),{})},qN=t=>{if(!jN(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));lm.setItem(Rb,JSON.stringify(t))},KN=t=>{const s=GN();return Ze(s,t).getOr([])},oj=(t,s)=>{if(!ZN(t))return;const a=GN(),i=Ze(a,s).getOr([]),d=Wn(i,g=>g!==t);a[s]=[t].concat(d).slice(0,WN),qN(a)},tV=t=>!!t,pr=t=>lo(pm.makeMap(t,/[, ]/),tV),T2=t=>k.from(FR(t)),nV=t=>{const s=k.from(d4(t)).filter(tV).map(pr);return T2(t).fold(Dn,a=>s.fold(vt,i=>io(i).length>0?i:!1))},TE=(t,s)=>{const a=nV(t);return hl(a)?a?T2(t):k.none():a[s]?T2(t):k.none()},oV=(t,s)=>TE(t,s).map(a=>i=>hr.nu(d=>{const g=(y,w)=>{if(!En(y))throw new Error("Expected value to be string");if(w!==void 0&&!vc(w))throw new Error("Expected meta to be a object");d({value:y,meta:w})},p={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};a.call(t,g,i.value,p)})),YN=t=>k.from(t).filter(En).getOrUndefined(),sV=t=>HR(t)?k.some({targets:Xl.find(t.getBody()),anchorTop:YN(VR(t)),anchorBottom:YN(tx(t))}):k.none(),rV=t=>k.from(IR(t)),aV=t=>({getHistory:KN,addToHistory:oj,getLinkInformation:()=>sV(t),getValidationHandler:()=>rV(t),getUrlPicker:s=>oV(t,s)}),cV=(t,s,a,i)=>{const d=pt(!1),g=LH(s),p={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Uc.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},y=aV(s),w=SE(s),E=FH(s),_=PN(s),D=()=>d.get(),R=ie=>d.set(ie),P={shared:{providers:p,anchors:NN(s,a,i,g.isPositionedAtTop),header:g},urlinput:y,styles:w,colorinput:E,dialog:_,isContextMenuOpen:D,setContextMenuState:R},I={...P,shared:{...P.shared,interpreter:ie=>Db(ie,{},I),getSink:t.popup}},Z={...P,shared:{...P.shared,interpreter:ie=>Db(ie,{},Z),getSink:t.dialog}};return{popup:I,dialog:Z}},iV=(t,s,a)=>{const i=(xe,$e)=>{Xe([s,...a],Ue=>{Ue.broadcastEvent(xe,$e)})},d=(xe,$e)=>{Xe([s,...a],Ue=>{Ue.broadcastOn([xe],$e)})},g=xe=>d(rc(),{target:xe.target}),p=yp(),y=kr(p,"touchstart",g),w=kr(p,"touchmove",xe=>i($p(),xe)),E=kr(p,"touchend",xe=>i(Eg(),xe)),_=kr(p,"mousedown",g),D=kr(p,"mouseup",xe=>{xe.raw.button===0&&d(X0(),{target:xe.target})}),R=xe=>d(rc(),{target:te.fromDom(xe.target)}),P=xe=>{xe.button===0&&d(X0(),{target:te.fromDom(xe.target)})},I=()=>{Xe(t.editorManager.get(),xe=>{t!==xe&&xe.dispatch("DismissPopups",{relatedTarget:t})})},Z=xe=>i(Sl(),cs(xe)),ie=xe=>{d(Wu(),{}),i(mi(),cs(xe))},G=so(te.fromDom(t.getElement())),j=sf(G,"scroll",xe=>{requestAnimationFrame(()=>{const $e=t.getContainer();if($e!=null){const Wt=Ah(t,s.element).map(rt=>[rt.element,...rt.others]).getOr([]);va(Wt,rt=>Bn(rt,xe.target))&&(t.dispatch("ElementScroll",{target:xe.target.dom}),i(Zm(),xe))}})}),ue=()=>d(Wu(),{}),oe=xe=>{xe.state&&d(rc(),{target:te.fromDom(t.getContainer())})},ke=xe=>{d(rc(),{target:te.fromDom(xe.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",R),t.on("tap",R),t.on("mouseup",P),t.on("mousedown",I),t.on("ScrollWindow",Z),t.on("ResizeWindow",ie),t.on("ResizeEditor",ue),t.on("AfterProgressState",oe),t.on("DismissPopups",ke)}),t.on("remove",()=>{t.off("click",R),t.off("tap",R),t.off("mouseup",P),t.off("mousedown",I),t.off("ScrollWindow",Z),t.off("ResizeWindow",ie),t.off("ResizeEditor",ue),t.off("AfterProgressState",oe),t.off("DismissPopups",ke),_.unbind(),y.unbind(),w.unbind(),E.unbind(),D.unbind(),j.unbind()}),t.on("detach",()=>{Xe([s,...a],j0),Xe([s,...a],xe=>xe.destroy())})},Ds=u_,Jl=qd,kE=J([ne("shell",!1),ve("makeItem"),ne("setupItem",K),Lc.field("listBehaviours",[kt])]),XN=Fa({name:"items",overrides:()=>({behaviours:Ae([kt.config({})])})}),lV=J([XN]),JN=J("CustomList"),uV=(t,s,a,i)=>{const d=(y,w)=>{p(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const _=kt.contents(E),D=w.length,R=D-_.length,P=R>0?$o(R,()=>t.makeItem()):[],I=_.slice(D);Xe(I,ie=>kt.remove(E,ie)),Xe(P,ie=>kt.append(E,ie));const Z=kt.contents(E);Xe(Z,(ie,G)=>{t.setupItem(y,ie,w[G],G)})})},g=t.shell?{behaviours:[kt.config({})],components:[]}:{behaviours:[],components:s},p=y=>t.shell?k.some(y):Rn(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:is(t.listBehaviours,g.behaviours),apis:{setItems:d}}},QN=sr({name:JN(),configFields:kE(),partFields:lV(),factory:uV,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),$h=J([ve("dom"),ne("shell",!0),Qo("toolbarBehaviours",[kt])]),rj=J([Fa({name:"groups",overrides:()=>({behaviours:Ae([kt.config({})])})})]),dV=(t,s,a,i)=>{const d=(y,w)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{kt.set(E,w)})},g=y=>t.shell?k.some(y):Rn(y,t,"groups"),p=t.shell?{behaviours:[kt.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:is(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d,refresh:K},domModification:{attributes:{role:"group"}}}},Ql=sr({name:"Toolbar",configFields:$h(),partFields:rj(),factory:dV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),mV=K,eP=Dn,_E=J([]);var fV=Object.freeze({__proto__:null,setup:mV,isDocked:eP,getBehaviours:_E});const UO=t=>(ya(Ns(t,"position"),"fixed")?k.none():ov(t)).orThunk(()=>{const i=te.fromTag("span");return wc(t).bind(d=>{Ta(d,i);const g=ov(i);return kc(i),g})}),WO=t=>UO(t).map(xc).getOrThunk(()=>fn(0,0)),gV=(t,s)=>{const a=t.element;So(a,s.transitionClass),ao(a,s.fadeOutClass),So(a,s.fadeInClass),s.onShow(t)},hV=(t,s)=>{const a=t.element;So(a,s.transitionClass),ao(a,s.fadeInClass),So(a,s.fadeOutClass),s.onHide(t)},pV=(t,s)=>t.y<s.bottom&&t.bottom>s.y,tP=(t,s)=>t.y>=s.y,OE=(t,s)=>t.bottom<=s.bottom,AE=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),ZO=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),jO=t=>t.box.x-t.win.x,bV=(t,s,a)=>{const i=s.win,d=s.box,g=jO(s);return Gs(t,p=>{switch(p){case"bottom":return OE(d,a.bounds)?k.none():k.some(ZO(i,g,a));case"top":return tP(d,a.bounds)?k.none():k.some(AE(i,g,a));default:return k.none()}}).getOr({location:"no-dock"})},vV=(t,s,a)=>au(t,i=>{switch(i){case"bottom":return OE(s,a.bounds);case"top":return tP(s,a.bounds)}}),nP=(t,s)=>{const a=s.optScrollEnv.fold(J(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return fn(t.bounds.x,a)},yV=(t,s)=>{const a=s.optScrollEnv.fold(J(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return fn(t.x,a)},Mb=(t,s,a)=>a.getInitialPos().map(i=>{const d=nP(i,s);return{box:mo(d.left,d.top,fs(t),os(t)),location:i.location}}),oP=(t,s,a,i,d)=>{const g=yV(s,a),p=mo(g.left,g.top,s.width,s.height);i.setInitialPos({style:ir(t),position:bo(t,"position")||"static",bounds:p,location:d.location})},DE=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>oP(t,s,a,i,d),()=>K)},sP=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const g=UO(t).getOr(Ys()),p=vo(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return k.some({morph:"absolute",positionCss:Pc("absolute",Ze(i.style,"left").map(w=>s.x-p.x),Ze(i.style,"top").map(w=>s.y-p.y+y),Ze(i.style,"right").map(w=>p.right-s.right),Ze(i.style,"bottom").map(w=>p.bottom-s.bottom))});default:return k.none()}}),GO=(t,s,a)=>Mb(t,s,a).filter(({box:i})=>vV(a.getModes(),i,s)).bind(({box:i})=>sP(t,i,a)),Fh=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:Pc("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:Pc("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},rP=(t,s,a)=>{const i=vo(t),d=wr(),g=bV(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(oP(t,i,s,a,g),Fh(g)):k.none()},CV=(t,s,a)=>GO(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Mb(t,s,a)).bind(({box:i,location:d})=>{const g=wr(),p=jO({win:g,box:i}),y=d==="top"?AE(g,p,s):ZO(g,p,s);return Fh(y)})),aP=(t,s,a)=>{const i=t.element;return ya(Ns(i,"position"),"fixed")?CV(i,s,a):rP(i,s,a)},cP=(t,s,a)=>{const i=t.element;return Mb(i,s,a).bind(({box:d})=>sP(i,d,a))},iP=(t,s,a,i)=>{const d=vo(t),g=wr(),p=jO({win:g,box:d}),y=i(g,p,s);return y.location==="bottom"||y.location==="top"?(DE(t,d,s,a,y),Fh(y)):k.none()},lP=(t,s,a)=>{a.setDocked(!1),Xe(["left","right","top","bottom","position"],i=>mn(t.element,i)),s.onUndocked(t)},k2=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),tf(t.element,i),(d?s.onDocked:s.onUndocked)(t)},_2=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const y=pV(p,i.bounds);y!==a.isVisible()&&(a.setVisible(y),d&&!y?(_l(t.element,[g.fadeOutClass]),g.onHide(t)):(y?gV:hV)(t,g))})})},uP=(t,s,a,i,d)=>{_2(t,s,a,i,!0),k2(t,s,a,d.positionCss)},wV=(t,s,a,i,d)=>{switch(d.morph){case"static":return lP(t,s,a);case"absolute":return k2(t,s,a,d.positionCss);case"fixed":return uP(t,s,a,i,d)}},Bb=(t,s,a)=>{const i=s.lazyViewport(t);_2(t,s,a,i),aP(t,i,a).each(d=>{wV(t,s,a,i,d)})},dP=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);cP(t,d,a).each(g=>{switch(g.morph){case"static":{lP(t,s,a);break}case"absolute":{k2(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{xr(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),RE(t,s,a)},RE=(t,s,a)=>{t.getSystem().isConnected()&&Bb(t,s,a)},qO=(t,s,a)=>{a.isDocked()&&dP(t,s,a)},ME=t=>(s,a,i)=>{const d=a.lazyViewport(s);iP(s.element,d,i,t).each(p=>{uP(s,a,i,d,p)})},KO=ME(AE),SV=ME(ZO);var xV=Object.freeze({__proto__:null,refresh:RE,reset:qO,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:KO,forceDockToBottom:SV}),EV=Object.freeze({__proto__:null,events:(t,s)=>Ln([Rd(Wm(),(a,i)=>{t.contextual.each(d=>{aa(a.element,d.transitionClass)&&(xr(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),be(Sl(),(a,i)=>{RE(a,t,s)}),be(Zm(),(a,i)=>{RE(a,t,s)}),be(mi(),(a,i)=>{qO(a,t,s)})])}),TV=[as("contextual",[Vo("fadeInClass"),Vo("fadeOutClass"),Vo("transitionClass"),ea("lazyContext"),Yt("onShow"),Yt("onShown"),Yt("onHide"),Yt("onHidden")]),ps("lazyViewport",()=>({bounds:wr(),optScrollEnv:k.none()})),ta("modes",["top","bottom"],Ts),Yt("onDocked"),Yt("onUndocked")],kV=Object.freeze({__proto__:null,init:t=>{const s=pt(!1),a=pt(!0),i=Un(),d=pt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Fr({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Mo=As({fields:TV,name:"docking",active:EV,apis:xV,state:kV}),BE=J(Je("toolbar-height-change")),Qu={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},Nb="tox-tinymce--toolbar-sticky-on",fP="tox-tinymce--toolbar-sticky-off",_V=(t,s)=>{const a=Sa(s),d=dd(s).dom.innerHeight,g=Yr(a),p=te.fromDom(t.elm),y=Ga(p),w=os(p),E=y.y,_=E+w,D=xc(s),R=os(s),P=D.top,I=P+R,Z=Math.abs(P-g.top)<2,ie=Math.abs(I-(g.top+d))<2;if(Z&&E<I)vv(g.left,E-R,a);else if(ie&&_>P){const G=E-d+w+R;vv(g.left,G,a)}},Pb=(t,s)=>Po(Mo.getModes(t),s),NE=t=>{const s=i=>du(i)+(parseInt(bo(i,"margin-top"),10)||0)+(parseInt(bo(i,"margin-bottom"),10)||0),a=t.element;Jc(a).each(i=>{const d="padding-"+Mo.getModes(t)[0];if(Mo.isDocked(t)){const g=fs(i);Mt(a,"width",g+"px"),Mt(i,d,s(a)+"px")}else mn(a,"width"),mn(i,d)})},gP=(t,s)=>{s?(ao(t,Qu.fadeOutClass),_l(t,[Qu.transitionClass,Qu.fadeInClass])):(ao(t,Qu.fadeInClass),_l(t,[Qu.fadeOutClass,Qu.transitionClass]))},hP=(t,s)=>{const a=te.fromDom(t.getContainer());s?(So(a,Nb),ao(a,fP)):(So(a,fP),ao(a,Nb))},OV=(t,s)=>{const a=Sa(s);hi(a).filter(i=>!Bn(s,i)).filter(i=>Bn(i,te.fromDom(a.dom.body))||ja(t,i)).each(()=>oc(s))},AV=(t,s)=>sc(t).orThunk(()=>s().toOptional().bind(a=>sc(a.element))),DV=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Mo.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(NE)}),t.on("SkinLoaded",()=>{a().each(i=>{Mo.isDocked(i)?Mo.reset(i):Mo.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(Mo.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{Mo.refresh(d);const g=d.element;mr(g)&&_V(i,g)})}),t.on("PostRender",()=>{hP(t,!1)})},RV=t=>t().map(Mo.isDocked).getOr(!1),MV=()=>[nr.config({channels:{[BE()]:{onReceive:NE}}})],pP=(t,s)=>{const a=Un(),i=s.getSink,d=y=>{i().each(w=>y(w.element))},g=y=>{t.inline||NE(y),hP(t,Mo.isDocked(y)),y.getSystem().broadcastOn([Wu()],{}),i().each(w=>w.getSystem().broadcastOn([Wu()],{}))},p=t.inline?[]:MV();return[Ct.config({}),Mo.config({contextual:{lazyContext:y=>{const w=du(y.element),E=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(E).map(_=>{const D=vo(te.fromDom(_));return Ah(t,y.element).fold(()=>{const P=D.height-w,I=D.y+(Pb(y,"top")?0:w);return mo(D.x,I,D.width,P)},P=>{const I=Cv(D,yb(P)),Z=Pb(y,"top")?I.y:I.y+w;return mo(I.x,Z,I.width,I.height-w)})})},onShow:()=>{d(y=>gP(y,!0))},onShown:y=>{d(w=>xr(w,[Qu.transitionClass,Qu.fadeInClass])),a.get().each(w=>{OV(y.element,w),a.clear()})},onHide:y=>{AV(y.element,i).fold(a.clear,a.set),d(w=>gP(w,!1))},onHidden:()=>{d(y=>xr(y,[Qu.transitionClass]))},...Qu},lazyViewport:y=>Ah(t,y.element).fold(()=>{const E=wr(),_=ex(t),D=E.y+(Pb(y,"top")?_:0),R=E.height-(Pb(y,"bottom")?_:0);return{bounds:mo(E.x,D,E.width,R),optScrollEnv:k.none()}},E=>({bounds:yb(E),optScrollEnv:k.some({currentScrollTop:E.element.dom.scrollTop,scrollElmTop:xc(E.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var BV=Object.freeze({__proto__:null,setup:DV,isDocked:RV,getBehaviours:pP});const uj=t=>{const s=t.editor,a=t.sticky?pP:_E;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Ae(a(s,t.sharedBackstage))}},NV=ct([Zo,In("items",qe([pu([gx,Oa("items",Ts)]),Ts]))].concat(mb)),bP=t=>ro("GroupToolbarButton",NV,t),vP=[er("text"),er("tooltip"),er("icon"),$r("search",!1,qe([qa,ct([er("placeholder")])],t=>hl(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),ea("fetch"),ps("onSetup",()=>K)],O2=ct([Zo,...vP]),YO=t=>ro("menubutton",O2,t),PV=ct([Zo,am,Ei,Of,fM,px,wh,Ka("presets","normal",["normal","color","listpreview"]),bx(1),lc,_4]),$V=t=>ro("SplitButton",PV,t);var XO=Zs({factory:(t,s)=>{const a=(d,g)=>{const p=we(g,y=>{const w={type:"menubutton",text:y.text,fetch:_=>{_(y.getItems())}},E=YO(w).mapError(_=>zi(_)).getOrDie();return b2(E,"tox-mbtn",s.backstage,k.some("menuitem"))});kt.set(d,p)},i={focus:ut.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Ae([kt.config({}),Nt("menubar-events",[Vn(d=>{t.onSetup(d)}),be(Ls(),(d,g)=>{eo(d.element,".tox-mbtn--active").each(p=>{ia(g.event.target,".tox-mbtn").each(y=>{Bn(p,y)||d.getSystem().getByDom(p).each(w=>{d.getSystem().getByDom(y).each(E=>{_i.expand(E),_i.close(w),Ct.focus(E)})})})})}),be(Ip(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{_i.isOpen(p)&&(_i.expand(y),_i.close(p))})})})]),ut.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),fo.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ve("dom"),ve("uid"),ve("onEscape"),ve("backstage"),ne("onSetup",K)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const FV="⚡️Upgrade",IV="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",LV=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:IV,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:FV}}]}),JO="container",yP=[Qo("slotBehaviours",[])],CP=t=>"<alloy.field."+t+">",wP=t=>{const s=(()=>{const g=[];return{slot:(y,w)=>(g.push(y),yS(JO,CP(y),w)),record:J(g)}})(),a=t(s),i=s.record(),d=we(i,g=>Ws({name:g,pname:CP(g)}));return hy(JO,yP,d,HV,a)},HV=(t,s)=>{const a=Z=>SS(t),i=(Z,ie)=>Rn(Z,t,ie),d=(Z,ie)=>(G,j)=>Rn(G,t,j).map(ue=>Z(ue,j)).getOr(ie),g=Z=>(ie,G)=>{Xe(G,j=>Z(ie,j))},p=(Z,ie)=>po(Z.element,"aria-hidden")!=="true",y=(Z,ie)=>{if(!p(Z)){const G=Z.element;mn(G,"display"),qo(G,"aria-hidden"),lt(Z,Vv(),{name:ie,visible:!0})}},w=(Z,ie)=>{if(p(Z)){const G=Z.element;Mt(G,"display","none"),Ke(G,"aria-hidden","true"),lt(Z,Vv(),{name:ie,visible:!1})}},E=d(p,!1),_=d(w),D=g(_),R=Z=>D(Z,a()),P=d(y),I={getSlotNames:a,getSlot:i,isShowing:E,hideSlot:_,hideAllSlots:R,showSlot:P};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ic(t.slotBehaviours),apis:I}},Rr={...lo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Mu(t)),sketch:wP},Ih=ct([Ei,am,ps("onShow",K),ps("onHide",K),wh]),SP=t=>ro("sidebar",Ih,t),A2=t=>{const{sidebars:s}=t.ui.registry.getAll();Xe(io(s),a=>{const i=s[a],d=()=>ya(k.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},PE=t=>({element:()=>t.element.dom}),xP=(t,s)=>{const a=we(io(s),i=>{const d=s[i],g=ks(SP(d));return{name:i,getApi:PE,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return we(a,i=>{const d=pt(K);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:fb.unnamedEvents([cm(i,d),im(i,d),be(Vv(),(g,p)=>{const y=p.event;Rt(a,E=>E.name===y.name).each(E=>{(y.visible?E.onShow:E.onHide)(E.getApi(g))})})])})})},EP=t=>Rr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:xP(s,t),slotBehaviours:fb.unnamedEvents([Vn(a=>Rr.hideAllSlots(a))])})),TP=(t,s,a)=>{Xt.getCurrent(t).each(d=>{kt.set(d,[EP(s)]);const g=a==null?void 0:a.toLowerCase();En(g)&&yn(s,g)&&Xt.getCurrent(d).each(p=>{Rr.showSlot(p,g),mc.immediateGrow(d),mn(d.element,"width"),QO(t.element,"region")})})},QO=(t,s)=>{Ke(t,"role",s)},VV=(t,s)=>{Xt.getCurrent(t).each(i=>{Xt.getCurrent(i).each(g=>{mc.hasGrown(i)?Rr.isShowing(g,s)?(mc.shrink(i),QO(t.element,"presentation")):(Rr.hideAllSlots(g),Rr.showSlot(g,s),QO(t.element,"region")):(Rr.hideAllSlots(g),Rr.showSlot(g,s),mc.grow(i),QO(t.element,"region"))})})},zV=t=>Xt.getCurrent(t).bind(a=>mc.isGrowing(a)||mc.hasGrown(a)?Xt.getCurrent(a).bind(g=>Rt(Rr.getSlotNames(g),p=>Rr.isShowing(g,p))):k.none()),eA=Je("FixSizeEvent"),tA=Je("AutoSizeEvent"),UV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ae([fo.config({}),Ct.config({}),mc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Xt.getCurrent(s).each(Rr.hideAllSlots),rn(s,tA)},onGrown:s=>{rn(s,tA)},onStartGrow:s=>{lt(s,eA,{width:Ns(s.element,"width").getOr("")})},onStartShrink:s=>{lt(s,eA,{width:fs(s.element)+"px"})}}),kt.config({}),Xt.config({find:s=>{const a=kt.contents(s);return Wr(a)}})])}],behaviours:Ae([ul.childAt(0),Nt("sidebar-sliding-events",[be(eA,(s,a)=>{Mt(s.element,"width",a.event.width)}),be(tA,(s,a)=>{mn(s.element,"width")})])])});var WV=Object.freeze({__proto__:null,block:(t,s,a,i)=>{Ke(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Ae([ut.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),Ct.config({})]),p=i(d,g),y=d.getSystem().build(p);kt.append(d,Er(y)),y.hasConfigured(ut)&&s.focus&&ut.focusIn(y),a.isBlocked()||s.onBlock(t),a.blockWith(()=>kt.remove(d,y))},unblock:(t,s,a)=>{qo(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),ZV=[ps("getRoot",k.none),Yo("focus",!0),Yt("onBlock"),Yt("onUnblock")],jV=Object.freeze({__proto__:null,init:()=>{const t=Fu(),s=a=>{t.set({destroy:a})};return Fr({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const fc=As({fields:ZV,name:"blocking",apis:WV,state:jV}),OP=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Yn(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},GV=t=>Array.prototype.slice.call(t.dom.classList,0),zf=t=>{const s=te.fromHtml(t),a=Qc(s),i=OP(s),d=GV(s),g=a.length===0?{}:{innerHtml:jp(s)};return{tag:Cc(s),classes:d,attributes:i,...g}},qV=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:zf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),AP=t=>Xt.getCurrent(t).each(s=>oc(s.element)),KV=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;k.from(t.iframeElement).map(te.fromDom).each(d=>{s?(Kr(d,a).each(g=>Ke(d,i,g)),Ke(d,a,-1)):(qo(d,a),Kr(d,i).each(g=>{Ke(d,a,g),qo(d,i)}))})},YV=(t,s,a,i)=>{const d=s.element;if(KV(t,a),a)fc.block(s,qV(i)),mn(d,"display"),qo(d,"aria-hidden"),t.hasFocus()&&AP(s);else{const g=Xt.getCurrent(s).exists(p=>ef(p.element));fc.unblock(s),Mt(d,"display","none"),Ke(d,"aria-hidden","true"),g&&t.focus()}},DP=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ae([kt.config({}),fc.config({focus:!1}),Xt.config({find:s=>Wr(s.components())})]),components:[]}),RP=t=>t.type==="focusin",XV=t=>RP(t)?(t.composed?Wr(t.composedPath()):k.from(t.target)).map(te.fromDom).filter(Pn).exists(a=>aa(a,"mce-pastebin")):!1,JV=(t,s,a)=>{const i=pt(!1),d=Un(),g=y=>{i.get()&&!XV(y)&&(y.preventDefault(),AP(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const p=y=>{y!==i.get()&&(i.set(y),YV(t,s(),y,a.providers),d8(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),Bi(y.time)){const w=XS.setEditorTimeout(t,()=>p(y.state),y.time);d.set(w)}else p(y.state),d.clear()})},FE=(t,s)=>Yn(t,(d,g)=>s(g,d.len).fold(J(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,$b=(t,s,a)=>({within:t,extra:s,withinWidth:a}),MP=(t,s,a)=>{const i=FE(t,(y,w)=>{const E=a(y);return k.some({element:y,start:w,finish:w+E,width:E})}),d=Wn(i,y=>y.finish<=s),g=ts(d,(y,w)=>y+w.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},IE=t=>we(t,s=>s.element),QV=(t,s,a)=>{const i=IE(t.concat(s));return $b(i,[],a)},e9=(t,s,a,i)=>{const d=IE(t).concat([a]);return $b(d,IE(s),i)},nA=(t,s,a)=>$b(IE(t),[],a),oA=(t,s,a)=>{const i=MP(s,t,a);return i.extra.length===0?k.some(i):k.none()},t9=(t,s,a,i)=>{const d=oA(t,s,a).getOrThunk(()=>MP(s,t-a(i),a)),g=d.within,p=d.extra,y=d.withinWidth;return p.length===1&&p[0].width<=a(i)?QV(g,p,y):p.length>=1?e9(g,p,i,y):nA(g,p,y)},LE=(t,s)=>{const a=we(s,i=>Er(i));Ql.setGroups(t,a)},n9=t=>Gs(t,s=>sc(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),BP=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Ll(t,s,"primary"),g=To.getCoupled(t,"overflowGroup");Mt(d.element,"visibility","hidden");const p=i.concat([g]),y=n9(p);a([]),LE(d,p);const w=fs(d.element),E=t9(w,s.builtGroups.get(),_=>fs(_.element),g);E.extra.length===0?(kt.remove(d,g),a([])):(LE(d,E.within),a(E.extra)),mn(d.element,"visibility"),yl(d.element),y.each(Ct.focus)},NP=J([Qo("splitToolbarBehaviours",[To]),Qs("builtGroups",()=>pt([]))]),o9=J([la(["overflowToggledClass"]),wd("getOverflowBounds"),ve("lazySink"),Qs("overflowGroups",()=>pt([])),Yt("onOpened"),Yt("onClosed")].concat(NP())),s9=J([Ws({factory:Ql,schema:$h(),name:"primary"}),cc({schema:$h(),name:"overflow"}),cc({name:"overflow-button"}),cc({name:"overflow-group"})]),PP=J((t,s)=>{PT(t,Math.floor(s))}),fj=J([la(["toggledClass"]),ve("lazySink"),ea("fetch"),wd("getBounds"),as("fireDismissalEventInstead",[ne("event",Tu())]),pi(),Yt("onToggled")]),$P=J([cc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ae([Lt.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),cc({factory:Ql,schema:$h(),name:"toolbar",overrides:t=>({toolbarBehaviours:Ae([ut.config({mode:"cyclic",onEscape:s=>(Rn(s,t,"button").each(Ct.focus),k.none())})])})})]),HE=Un(),FP=(t,s)=>{HE.set(!0),sA(t,s),HE.clear()},sA=(t,s)=>{const a=To.getCoupled(t,"toolbarSandbox");Zt.isOpen(a)?Zt.close(a):Zt.open(a,s.toolbar())},rA=(t,s,a,i)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();or.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:PP()}}},d)},IP=(t,s,a,i,d)=>{Ql.setGroups(s,d),rA(t,s,a,i),Lt.on(t)},r9=(t,s,a)=>{const i=m0(),d=(p,y)=>{const w=HE.get().getOr(!1);a.fetch().get(E=>{IP(t,y,a,s.layouts,E),i.link(t.element),w||ut.focusIn(y)})},g=()=>{Lt.off(t),HE.get().getOr(!1)||Ct.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Ae([ut.config({mode:"special",onEscape:p=>(Zt.close(p),k.some(!0))}),Zt.config({onOpen:d,onClose:g,isPartOf:(p,y,w)=>$d(y,w)||$d(t,w),getAttachPoint:()=>a.lazySink(t).getOrDie()}),nr.config({channels:{...hf({isExtraPart:Dn,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...J0({doReposition:()=>{Zt.getState(To.getCoupled(t,"toolbarSandbox")).each(p=>{rA(t,p,a,s.layouts)})}})}})])}},Cm=sr({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...js.sketch({...i.button(),action:d=>{sA(d,i)},buttonBehaviours:Lc.augment({dump:i.button().buttonBehaviours},[To.config({others:{toolbarSandbox:d=>r9(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Zt.getState(To.getCoupled(d,"toolbarSandbox")).each(p=>{IP(d,p,t,a.layouts,g)})},reposition:d=>{Zt.getState(To.getCoupled(d,"toolbarSandbox")).each(g=>{rA(d,g,t,a.layouts)})},toggle:d=>{sA(d,i)},toggleWithoutFocusing:d=>{FP(d,i)},getToolbar:d=>Zt.getState(To.getCoupled(d,"toolbarSandbox")),isOpen:d=>Zt.isOpen(To.getCoupled(d,"toolbarSandbox"))}}),configFields:fj(),partFields:$P(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),a9=J([ve("items"),la(["itemSelector"]),Qo("tgroupBehaviours",[ut])]),c9=J([da({name:"items",unit:"item"})]),i9=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:is(t.tgroupBehaviours,[ut.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),aA=sr({name:"ToolbarGroup",configFields:a9(),partFields:c9(),factory:i9}),l9=t=>we(t,s=>Er(s)),cA=(t,s,a)=>{BP(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{Cm.setGroups(d,l9(i))})})},LP=(t,s,a,i)=>{const d=bn(Cm.sketch({fetch:()=>hr.nu(g=>{g(l9(t.overflowGroups.get()))}),layouts:{onLtr:()=>[_s,Xo],onRtl:()=>[Xo,_s],onBottomLtr:()=>[Gn,Lr],onBottomRtl:()=>[Lr,Gn]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:is(t.splitToolbarBehaviours,[To.config({others:{overflowGroup:()=>aA.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(we(p,g.getSystem().build)),cA(g,d,t)},refresh:g=>cA(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{Cm.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Cm.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Cm.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{Cm.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(Cm.getToolbar)},domModification:{attributes:{role:"group"}}}},HP=sr({name:"SplitFloatingToolbar",configFields:o9(),partFields:s9(),factory:LP,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),u9=J([la(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Yt("onOpened"),Yt("onClosed")].concat(NP())),Gc=J([Ws({factory:Ql,schema:$h(),name:"primary"}),Ws({factory:Ql,schema:$h(),name:"overflow",overrides:t=>({toolbarBehaviours:Ae([mc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Rn(s,t,"overflow-button").each(a=>{Lt.off(a),Ct.focus(a)}),t.onClosed(s)},onGrown:s=>{ut.focusIn(s),t.onOpened(s)},onStartGrow:s=>{Rn(s,t,"overflow-button").each(Lt.on)}}),ut.config({mode:"acyclic",onEscape:s=>(Rn(s,t,"overflow-button").each(Ct.focus),k.some(!0))})])})}),cc({name:"overflow-button",overrides:t=>({buttonBehaviours:Ae([Lt.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),cc({name:"overflow-group"})]),d9=(t,s)=>Rn(t,s,"overflow").map(mc.hasGrown).getOr(!1),iA=(t,s)=>{Rn(t,s,"overflow-button").bind(()=>Rn(t,s,"overflow")).each(a=>{VE(t,s),mc.toggleGrow(a)})},VE=(t,s)=>{Rn(t,s,"overflow").each(a=>{BP(t,s,i=>{const d=we(i,g=>Er(g));Ql.setGroups(a,d)}),Rn(t,s,"overflow-button").each(i=>{mc.hasGrown(a)&&Lt.on(i)}),mc.refresh(a)})},m9=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(p,y)=>{const w=we(y,p.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:is(t.splitToolbarBehaviours,[To.config({others:{overflowGroup:p=>aA.sketch({...i["overflow-group"](),items:[js.sketch({...i["overflow-button"](),action:y=>{rn(p,d)}})]})}}),Nt("toolbar-toggle-events",[be(d,p=>{iA(p,t)})])]),apis:{setGroups:(p,y)=>{g(p,y),VE(p,t)},refresh:p=>VE(p,t),toggle:p=>iA(p,t),isOpen:p=>d9(p,t)},domModification:{attributes:{role:"group"}}}},Lh=sr({name:"SplitSlidingToolbar",configFields:u9(),partFields:Gc(),factory:m9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),VP=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[aA.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ae([fo.config({}),Ct.config({})])}},Hh=t=>aA.sketch(VP(t)),zP=(t,s)=>{const a=Vn(i=>{const d=we(t.initGroups,Hh);Ql.setGroups(i,d)});return Ae([Ti.toolbarButton(t.providers.isDisabled),ls(),ut.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Nt("toolbar-events",[a])])},R2=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":VP({title:k.none(),items:[]}),"overflow-button":pN({name:"more",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:k.none(),borderless:!1},k.none(),t.providers)},splitToolbarBehaviours:zP(t,s)}},f9=t=>{const s=R2(t),a=4,i=HP.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return HP.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Ga(d),p=mp(d),y=Ga(p),w=Math.max(p.dom.scrollHeight,y.height);return mo(g.x+a,y.y,g.width-a*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},g9=t=>{const s=Lh.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=Lh.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=R2(t);return Lh.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([BE()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([BE()],{type:"closed"}),t.onToggled(d,!1)}})},La=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Ql.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===xi.scrolling?["tox-toolbar--scrolling"]:[])},components:[Ql.parts.groups({})],toolbarBehaviours:zP(t,s)})},UP=[Of,Ei,er("tooltip"),Ka("buttonType","secondary",["primary","secondary"]),Yo("borderless",!1),ea("onAction")],zE=[...UP,Ul,bu("type",["button"])],WP=[...UP,Yo("active",!1),bu("type",["togglebutton"])],lA={button:zE,togglebutton:WP},h9=[bu("type",["group"]),ta("buttons",[],Fs("type",lA))],ZP=Fs("type",{...lA,group:h9}),p9=ct([ta("buttons",[],ZP),ea("onShow"),ea("onHide")]),b9=t=>ro("view",p9,t),v9=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(ue=>Lf(ue,s.icons)).map(bn),y=(()=>ue=>{const oe=$e=>{g.map(Ue=>Ue.getOpt(ue).each(Wt=>{kt.set(Wt,[Lf($e,s.icons)])}))},ke=$e=>{const Ue=ue.element;$e?(So(Ue,"tox-button--enabled"),Ke(Ue,"aria-pressed",!0)):(ao(Ue,"tox-button--enabled"),qo(Ue,"aria-pressed"))},xe=()=>aa(ue.element,"tox-button--enabled");if(d)return t.onAction({setIcon:oe,setActive:ke,isActive:xe});if(t.type==="button")return t.onAction({setIcon:oe})})(),w={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},E=kO((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),_=d?t.text.map(s.translate):k.some(s.translate(t.text)),D=_.map(jn),R=w.tooltip.or(_).map(ue=>({"aria-label":s.translate(ue),title:s.translate(ue)})).getOr({}),P=g.map(ue=>ue.asSpec()),I=hb([P,D]),Z=t.icon.isSome()&&D.isSome(),ie={tag:"button",classes:E.concat(...t.icon.isSome()&&!Z?["tox-button--icon"]:[]).concat(...Z?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:R},G=[],j=fE(w,k.some(y),G,ie,I,s);return js.sketch(j)},jP=(t,s)=>v9(t,s),y9=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:we(t.buttons,a=>jP(a,s))}),GP=Fi().deviceType,C9=GP.isPhone(),qP=GP.isTablet(),KP=t=>{let s=!1;const a=we(t.buttons,i=>i.type==="group"?(s=!0,y9(i,t.providers)):jP(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...C9||qP?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ae([Ct.config({}),ut.config({mode:"flow",selector:"button, .tox-button",focusInside:zl.OnEnterOrSpaceMode})]),components:s?a:[Gl.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Gl.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},YP=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),w9=(t,s,a,i)=>{const d={getPane:g=>Ds.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var Vh=sr({name:"silver.View",configFields:[ve("viewConfig")],partFields:[Fa({factory:{sketch:KP},schema:[ve("buttons"),ve("providers")],name:"header"}),Fa({factory:{sketch:YP},schema:[],name:"pane"})],factory:w9,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const XP=(t,s,a)=>ip(s,(i,d)=>{const g=ks(b9(i));return t.slot(d,Vh.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Vh.parts.header({buttons:g.buttons,providers:a})]:[],Vh.parts.pane({})]}))}),JP=(t,s)=>Rr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:XP(a,t,s),slotBehaviours:fb.unnamedEvents([Vn(i=>Rr.hideAllSlots(i))])})),QP=t=>Rt(Rr.getSlotNames(t),s=>Rr.isShowing(t,s)),S9=t=>{const s=t.element;Mt(s,"display","none"),Ke(s,"aria-hidden","true")},x9=t=>{const s=t.element;mn(s,"display"),qo(s,"aria-hidden")},e$=t=>({getContainer:J(t)}),t$=(t,s,a)=>{Rr.getSlot(t,s).each(i=>{Vh.getPane(i).each(d=>{a(i)(e$(d.element.dom))})})},E9=(t,s)=>t$(t,s,Vh.getOnShow),T9=(t,s)=>t$(t,s,Vh.getOnHide);var UE=Zs({factory:(t,s)=>{const g={setViews:(p,y)=>{kt.set(p,[JP(y,s.backstage.shared.providers)])},whichView:p=>Xt.getCurrent(p).bind(QP),toggleView:(p,y,w,E)=>Xt.getCurrent(p).exists(_=>{const D=QP(_),R=D.exists(I=>E===I),P=Rr.getSlot(_,E).isSome();return P&&(Rr.hideAllSlots(_),R?(S9(p),y()):(w(),x9(p),Rr.showSlot(_,E),E9(_,E)),D.each(I=>T9(_,I))),P})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ae([kt.config({}),Xt.config({find:p=>{const y=kt.contents(p);return Wr(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[ve("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const k9=(t,s,a)=>{let i=!1;const d={getSocket:g=>Ds.getPart(g,t,"socket"),setSidebar:(g,p,y)=>{Ds.getPart(g,t,"sidebar").each(w=>TP(w,p,y))},toggleSidebar:(g,p)=>{Ds.getPart(g,t,"sidebar").each(y=>VV(y,p))},whichSidebar:g=>Ds.getPart(g,t,"sidebar").bind(zV).getOrNull(),getHeader:g=>Ds.getPart(g,t,"header"),getToolbar:g=>Ds.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{Ds.getPart(g,t,"toolbar").each(y=>{const w=we(p,Hh);y.getApis().setGroups(y,w)})},setToolbars:(g,p)=>{Ds.getPart(g,t,"multiple-toolbar").each(y=>{const w=we(p,E=>we(E,Hh));QN.setItems(y,w)})},refreshToolbar:g=>{Ds.getPart(g,t,"toolbar").each(y=>y.getApis().refresh(y))},toggleToolbarDrawer:g=>{Ds.getPart(g,t,"toolbar").each(p=>{Xn(p.getApis().toggle,y=>y(p))})},toggleToolbarDrawerWithoutFocusing:g=>{Ds.getPart(g,t,"toolbar").each(p=>{Xn(p.getApis().toggleWithoutFocusing,y=>y(p))})},isToolbarDrawerToggled:g=>Ds.getPart(g,t,"toolbar").bind(p=>k.from(p.getApis().isOpen).map(y=>y(p))).getOr(!1),getThrobber:g=>Ds.getPart(g,t,"throbber"),focusToolbar:g=>{Ds.getPart(g,t,"toolbar").orThunk(()=>Ds.getPart(g,t,"multiple-toolbar")).each(y=>{ut.focusIn(y)})},setMenubar:(g,p)=>{Ds.getPart(g,t,"menubar").each(y=>{XO.setMenus(y,p)})},focusMenubar:g=>{Ds.getPart(g,t,"menubar").each(p=>{XO.focus(p)})},setViews:(g,p)=>{Ds.getPart(g,t,"viewWrapper").each(y=>{UE.setViews(y,p)})},toggleView:(g,p)=>Ds.getPart(g,t,"viewWrapper").exists(y=>UE.toggleView(y,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>Ds.getPart(g,t,"viewWrapper").bind(UE.whichView).getOrNull(),hideMainView:g=>{i=d.isToolbarDrawerToggled(g),i&&d.toggleToolbarDrawer(g),Ds.getPart(g,t,"editorContainer").each(p=>{const y=p.element;Mt(y,"display","none"),Ke(y,"aria-hidden","true")})},showMainView:g=>{i&&d.toggleToolbarDrawer(g),Ds.getPart(g,t,"editorContainer").each(p=>{const y=p.element;mn(y,"display"),qo(y,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},_9=Jl.optional({factory:XO,name:"menubar",schema:[ve("backstage")]}),O9=t=>t.type===xi.sliding?g9:t.type===xi.floating?f9:La,A9=Jl.optional({factory:{sketch:t=>QN.sketch({uid:t.uid,dom:t.dom,listBehaviours:Ae([ut.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>La({type:t.type,uid:Je("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,a,i,d)=>{Ql.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[ve("dom"),ve("onEscape")]}),D9=Jl.optional({factory:{sketch:t=>{const s=O9(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[ve("dom"),ve("onEscape"),ve("getSink")]}),n$=Jl.optional({factory:{sketch:uj},name:"header",schema:[ve("dom")]}),R9=Jl.optional({factory:{sketch:LV},name:"promotion",schema:[ve("dom")]}),M9=Jl.optional({name:"socket",schema:[ve("dom")]}),uA=Jl.optional({factory:{sketch:UV},name:"sidebar",schema:[ve("dom")]}),B9=Jl.optional({factory:{sketch:DP},name:"throbber",schema:[ve("dom")]}),WE=Jl.optional({factory:UE,name:"viewWrapper",schema:[ve("backstage")]}),N9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),o$=Jl.optional({factory:{sketch:N9},name:"editorContainer",schema:[]});var Hn=sr({name:"OuterContainer",factory:k9,configFields:[ve("dom"),ve("behaviours")],partFields:[n$,_9,D9,A9,M9,uA,R9,B9,WE,o$],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const P9="file edit view insert format tools table help",$9={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},F9=(t,s,a)=>{const i=BR(a).split(/[ ,]/);return{text:t.title,getItems:()=>he(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:va(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},dA=t=>t.split(" "),ZE=(t,s)=>{const a={...$9,...s.menus},i=io(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?dA(P9):dA(s.menubar===!1?"":s.menubar),g=Wn(d,y=>{const w=yn($9,y);return i?w||Ze(s.menus,y).exists(E=>yn(E,"items")):w}),p=we(g,y=>{const w=a[y];return F9({title:w.title,items:dA(w.items)},s,t)});return Wn(p,y=>{const w=E=>En(E)||E.type!=="separator";return y.getItems().length>0&&va(y.getItems(),w)})},s$=t=>{const s=()=>{t._skinLoaded=!0,u8(t)};return()=>{t.initialized?s():t.on("init",s)}},jE=(t,s)=>()=>Jy(t,{message:s}),mA=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),r$=(t,s)=>{const a=s+"/skin.min.css";return mA(t,a,t.ui.styleSheetLoader)},fA=(t,s)=>{if(MT(te.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return mA(t,i,Ry.DOM.styleSheetLoader)}else return Promise.resolve()},a$=(t,s)=>{const a=qR(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!nx(s)&&En(a)?Promise.all([r$(s,a),fA(s,a)]).then(s$(s),jE(s,"Skin could not be loaded")):Promise.resolve(s$(s)())},c$=cn(a$,!1),Fb=cn(a$,!0),i$=(t,s,a)=>{const i=(y,w,E,_)=>{const D=s.shared.providers.translate(y.title);if(y.type==="separator")return k.some({type:"separator",text:D});if(y.type==="submenu"){const R=he(y.getStyleItems(),P=>d(P,w,_));return w===0&&R.length<=0?k.none():k.some({type:"nestedmenuitem",text:D,enabled:R.length>0,getSubmenuItems:()=>he(y.getStyleItems(),P=>d(P,w,_))})}else return k.some({type:"togglemenuitem",text:D,icon:y.icon,active:y.isSelected(_),enabled:!E,onAction:a.onAction(y),...y.getStylePreview().fold(()=>({}),R=>({meta:{style:R}}))})},d=(y,w,E)=>{const _=y.type==="formatter"&&a.isInvalid(y);return w===0?_?[]:i(y,w,!1,E).toArray():i(y,w,_,E).toArray()},g=y=>{const w=a.getCurrentValue(),E=a.shouldHide?0:1;return he(y,_=>d(_,E,w))};return{validateItems:g,getFetch:(y,w)=>(E,_)=>{const D=w(),R=g(D),P=_b(R,al.CLOSE_ON_EXECUTE,y,{isHorizontalMenu:!1,search:k.none()});_(P)}}},Ib=(t,s,a)=>{const i=a.dataset,d=i.type==="basic"?()=>we(i.data,g=>LN(g,a.isSelectedFor,a.getPreviewFor)):i.getData;return{items:i$(t,s,a),getStyleItems:d}},M2=(t,s,a)=>{const{items:i,getStyleItems:d}=Ib(t,s,a),g=y=>({getComponent:J(y)}),p=Ku(t,"NodeChange",y=>{const w=y.getComponent();a.updateText(w),yt.set(y.getComponent(),!t.selection.isEditable())});return oE({text:a.icon.isSome()?k.none():a.text,icon:a.icon,tooltip:k.from(a.tooltip),role:k.none(),fetch:i.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},I9=t=>we(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),gA=t=>({type:"basic",data:t});var Lb;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Lb||(Lb={}));const L9=(t,s)=>s===Lb.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),GE=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:I9(L9(i,a))}},qE=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],B2=t=>{const s=()=>Rt(qE,y=>t.formatter.match(y.format)),a=y=>()=>t.formatter.match(y),i=y=>k.none,d=y=>{const E=s().fold(J("left"),_=>_.title.toLowerCase());lt(y,Hf,{icon:`align-${E}`})},g=gA(qE),p=y=>()=>Rt(qE,w=>w.format===y.format).each(w=>t.execCommand(w.command));return{tooltip:"Align",text:k.none(),icon:k.some("align-left"),isSelectedFor:a,getCurrentValue:k.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},hA=(t,s)=>M2(t,s,B2(t)),H9=(t,s)=>{const a=Ib(t,s,B2(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),onSetup:Vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},l$=(t,s)=>{const a=s(),i=we(a,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>Rt(a,g=>g.format===d)).orThunk(()=>Tt(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},pA=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),i=p=>()=>{const y=t.formatter.get(p);return y?k.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):k.none()},d=p=>{const w=l$(t,()=>g.data).fold(J(s),E=>E.title);lt(p,Ai,{text:w})},g=GE(t,"block_formats",Lb.SemiColon);return{tooltip:"Blocks",text:k.some(s),icon:k.none(),isSelectedFor:a,getCurrentValue:k.none,getPreviewFor:i,onAction:Q4(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},V9=(t,s)=>M2(t,s,pA(t)),z9=(t,s)=>{const a=Ib(t,s,pA(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},U9=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],bA=t=>{const s=t.split(/\s*,\s*/);return we(s,a=>a.replace(/^['"]+|['"]+$/g,""))},W9=t=>{const s=()=>{const a=bA(t.toLowerCase());return au(U9,i=>a.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},u$=t=>{const s="System Font",a=()=>{const E=I=>I?bA(I)[0]:"",_=t.queryCommandValue("FontName"),D=w.data,R=_?_.toLowerCase():"";return{matchOpt:Rt(D,I=>{const Z=I.format;return Z.toLowerCase()===R||E(Z).toLowerCase()===E(R).toLowerCase()}).orThunk(()=>Tt(W9(R),{title:s,format:R})),font:_}},i=E=>_=>_.exists(D=>D.format===E),d=()=>{const{matchOpt:E}=a();return E},g=E=>()=>k.some({tag:"div",styles:E.indexOf("dings")===-1?{"font-family":E}:{}}),p=E=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,E.format)})},y=E=>{const{matchOpt:_,font:D}=a(),R=_.fold(J(D),P=>P.title);lt(E,Ai,{text:R})},w=GE(t,"font_family_formats",Lb.SemiColon);return{tooltip:"Fonts",text:k.some(s),icon:k.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:y,dataset:w,shouldHide:!1,isInvalid:Dn}},vA=(t,s)=>M2(t,s,u$(t)),Z9=(t,s)=>{const a=Ib(t,s,u$(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),onSetup:Vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},j9={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},d$=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=y=>`(?:${y})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),G9=(t,s)=>va(s,a=>va(j9[a],i=>t===i)),N2=(t,s)=>k.from(d$.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return G9(g,s)?k.some({value:d,unit:g}):k.none()}),q9=(t,s)=>N2(t,s).map(({value:a,unit:i})=>a+i),yA={tab:J(9),escape:J(27),enter:J(13),backspace:J(8),delete:J(46),left:J(37),up:J(38),right:J(39),down:J(40),space:J(32),home:J(36),end:J(35),pageUp:J(33),pageDown:J(34)},K9=(t,s,a)=>{let i=k.none();const d=j=>j.map(ue=>We.getValue(ue)).getOr(""),g=Ku(t,"NodeChange SwitchMode",j=>{const ue=j.getComponent();i=k.some(ue),a.updateInputValue(ue),yt.set(ue,!t.selection.isEditable())}),p=j=>({getComponent:J(j)}),y=pt(K),w=Je("custom-number-input-events"),E=(j,ue,oe)=>{const ke=d(i),xe=a.getNewValue(ke,j),$e=ke.length-`${xe}`.length,Ue=i.map(rt=>rt.element.dom.selectionStart-$e),Wt=i.map(rt=>rt.element.dom.selectionEnd-$e);a.onAction(xe,oe),i.each(rt=>{We.setValue(rt,xe),ue&&(Ue.each(Dt=>rt.element.dom.selectionStart=Dt),Wt.each(Dt=>rt.element.dom.selectionEnd=Dt))})},_=(j,ue)=>E((oe,ke)=>oe-ke,j,ue),D=(j,ue)=>E((oe,ke)=>oe+ke,j,ue),R=j=>Jc(j.element).fold(k.none,ue=>(oc(ue),k.some(!0))),P=j=>ef(j.element)?(fp(j.element).each(ue=>oc(ue)),k.some(!0)):k.none(),I=(j,ue,oe,ke)=>{const xe=s.shared.providers.translate(oe),$e=Je("altExecuting"),Ue=Ku(t,"NodeChange SwitchMode",rt=>{yt.set(rt.getComponent(),!t.selection.isEditable())}),Wt=rt=>{yt.isDisabled(rt)||j(!0)};return js.sketch({dom:{tag:"button",attributes:{title:xe,"aria-label":xe},classes:ke.concat(ue)},components:[iO(ue,s.shared.providers.icons)],buttonBehaviours:Ae([yt.config({}),Nt($e,[cm({onSetup:Ue,getApi:p},y),im({getApi:p},y),be(Mc(),(rt,Dt)=>{(Dt.event.raw.keyCode===yA.space()||Dt.event.raw.keyCode===yA.enter())&&(yt.isDisabled(rt)||j(!1))}),be(wu(),Wt),be(Ed(),Wt)])]),eventOrder:{[Mc()]:[$e,"keying"],[wu()]:[$e,"alloy.base.behaviour"],[Ed()]:[$e,"alloy.base.behaviour"]}})},Z=bn(I(j=>_(!1,j),"minus","Decrease font size",["highlight-on-focus"])),ie=bn(I(j=>D(!1,j),"plus","Increase font size",["highlight-on-focus"])),G=bn({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[yh.sketch({inputBehaviours:Ae([yt.config({}),Nt(w,[cm({onSetup:g,getApi:p},y),im({getApi:p},y)]),Nt("input-update-display-text",[be(Ai,(j,ue)=>{We.setValue(j,ue.event.text)}),be(wg(),j=>{a.onAction(We.getValue(j))}),be(_d(),j=>{a.onAction(We.getValue(j))})]),ut.config({mode:"special",onEnter:j=>(E(on,!0,!0),k.some(!0)),onEscape:R,onUp:j=>(D(!0,!1),k.some(!0)),onDown:j=>(_(!0,!1),k.some(!0)),onLeft:(j,ue)=>(ue.cut(),k.none()),onRight:(j,ue)=>(ue.cut(),k.none())})])})],behaviours:Ae([Ct.config({}),ut.config({mode:"special",onEnter:P,onSpace:P,onEscape:R}),Nt("input-wrapper-events",[be(Ls(),j=>{Xe([Z,ie],ue=>{const oe=te.fromDom(ue.get(j).element.dom);ef(oe)&&p1(oe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[Z.asSpec(),G.asSpec(),ie.asSpec()],behaviours:Ae([Ct.config({}),ut.config({mode:"flow",focusInside:zl.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:j=>ef(j.element)?k.none():(oc(j.element),k.some(!0))})])}},Y9={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},X9={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},m$=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},J9=(t,s)=>/[0-9.]+px$/.test(t)?m$(parseInt(t,10)*72/96,s||0)+"pt":Ze(X9,t).getOr(t),Q9=t=>Ze(Y9,t).getOr(""),f$=t=>{const s=()=>{let w=k.none();const E=y.data,_=t.queryCommandValue("FontSize");if(_)for(let D=3;w.isNone()&&D>=0;D--){const R=J9(_,D),P=Q9(R);w=Rt(E,I=>I.format===_||I.format===R||I.format===P)}return{matchOpt:w,size:_}},a=w=>E=>E.exists(_=>_.format===w),i=()=>{const{matchOpt:w}=s();return w},d=J(k.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},p=w=>{const{matchOpt:E,size:_}=s(),D=E.fold(J(_),R=>R.title);lt(w,Ai,{text:D})},y=GE(t,"font_size_formats",Lb.Space);return{tooltip:"Font sizes",text:k.some("12pt"),icon:k.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:y,shouldHide:!1,isInvalid:Dn}},CA=(t,s)=>M2(t,s,f$(t)),wA=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},ez=16,tz=t=>t>=0,nz=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>lt(i,Ai,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{N2(i,["unsupportedLength","empty"]);const g=N2(i,["unsupportedLength","empty"]).or(N2(s(),["unsupportedLength","empty"])),p=g.map(_=>_.value).getOr(ez),y=LR(t),w=g.map(_=>_.unit).filter(_=>_!=="").getOr(y),E=d(p,wA(w).step);return`${tz(E)?E:p}${w}`}}},oz=(t,s)=>K9(t,s,nz(t)),sz=(t,s)=>{const a=Ib(t,s,f$(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},g$=(t,s)=>{const a="Paragraph",i=p=>()=>t.formatter.match(p),d=p=>()=>{const y=t.formatter.get(p);return y!==void 0?k.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):k.none()},g=p=>{const y=D=>MO(D)?he(D.items,y):$N(D)?[{title:D.title,format:D.format}]:[],w=he($O(t),y),_=l$(t,J(w)).fold(J(a),D=>D.title);lt(p,Ai,{text:_})};return{tooltip:"Formats",text:k.some(a),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:Q4(t),updateText:g,shouldHide:a4(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},rz=(t,s)=>{const a={type:"advanced",...s.styles};return M2(t,s,g$(t,a))},az=(t,s)=>{const a={type:"advanced",...s.styles},i=Ib(t,s,g$(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Vr(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},cz=J([ve("toggleClass"),ve("fetch"),Rl("onExecute"),ne("getHotspot",k.some),ne("getAnchorOverrides",J({})),pi(),Rl("onItemExecute"),gn("lazySink"),ve("dom"),Yt("onOpen"),Qo("splitDropdownBehaviours",[To,ut,Ct]),ne("matchWidth",!1),ne("useMinWidth",!1),ne("eventOrder",{}),gn("role")].concat(w3())),h$=Ws({factory:js,schema:[ve("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Ae([Ct.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(_u)},buttonBehaviours:Ae([Lt.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),KE=Ws({factory:js,schema:[ve("dom")],name:"button",defaults:()=>({buttonBehaviours:Ae([Ct.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),SA=J([h$,KE,Fa({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ve("text")],name:"aria-descriptor"}),cc({schema:[r1()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),vB()]),p$=(t,s,a,i)=>{const d=_=>{Xt.getCurrent(_).each(D=>{ln.highlightFirst(D),ut.focusIn(D)})},g=_=>{y3(t,on,_,i,d,ma.HighlightMenuAndItem).get(K)},p=_=>(g(_),k.some(!0)),y=_=>{const D=Ll(_,t,"button");return _u(D),k.some(!0)},w={...Ln([Vn((_,D)=>{Rn(_,t,"aria-descriptor").each(P=>{const I=Je("aria");Ke(P.element,"id",I),Ke(_.element,"aria-describedby",I)})})]),...ZS(k.some(g))},E={repositionMenus:_=>{Lt.isOn(_)&&EB(_)}};return{uid:t.uid,dom:t.dom,components:s,apis:E,eventOrder:{...t.eventOrder,[sa()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:is(t.splitDropdownBehaviours,[To.config({others:{sandbox:_=>{const D=Ll(_,t,"arrow");return C3(t,_,{onOpen:()=>{Lt.on(D),Lt.on(_)},onClose:()=>{Lt.off(D),Lt.off(_)}})}}}),ut.config({mode:"special",onSpace:y,onEnter:y,onDown:p}),Ct.config({}),Lt.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},eu=sr({name:"SplitDropdown",configFields:cz(),partFields:SA(),factory:p$,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),xA=t=>({isEnabled:()=>!yt.isDisabled(t),setEnabled:s=>yt.set(t,!s),setText:s=>lt(t,Ai,{text:s}),setIcon:s=>lt(t,Hf,{icon:s})}),iz=t=>({setActive:s=>{Lt.set(t,s)},isActive:()=>Lt.isOn(t),isEnabled:()=>!yt.isDisabled(t),setEnabled:s=>yt.set(t,!s),setText:s=>lt(t,Ai,{text:s}),setIcon:s=>lt(t,Hf,{icon:s})}),b$=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),v$=Je("focus-button"),EA=(t,s,a,i,d)=>{const g=s.map(y=>bn(V5(y,"tox-tbtn",d))),p=t.map(y=>bn(Lf(y,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:b$(a,d)},components:hb([p.map(y=>y.asSpec()),g.map(y=>y.asSpec())]),eventOrder:{[Ya()]:["focusing","alloy.base.behaviour",If],[Xa()]:[If,"toolbar-group-button-events"]},buttonBehaviours:Ae([Ti.toolbarButton(d.isDisabled),ls(),Nt(If,[Vn((y,w)=>nE(y)),be(Ai,(y,w)=>{g.bind(E=>E.getOpt(y)).each(E=>{kt.set(E,[jn(d.translate(w.event.text))])})}),be(Hf,(y,w)=>{p.bind(E=>E.getOpt(y)).each(E=>{kt.set(E,[Lf(w.event.icon,d.icons)])})}),be(Ya(),(y,w)=>{w.event.prevent(),rn(y,v$)})])].concat(i.getOr([])))}},lz=(t,s,a,i)=>{const d=s.shared,g=pt(K),p={toolbarButtonBehaviours:[],getApi:xA,onSetup:t.onSetup},y=[Nt("toolbar-group-button-events",[cm(p,g),im(p,g)])];return Cm.sketch({lazySink:d.getSink,fetch:()=>hr.nu(w=>{w(we(a(t.items),Hh))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:EA(t.icon,t.text,t.tooltip,k.some(y),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},y$=(t,s,a)=>{var i;const d=pt(K),g=EA(t.icon,t.text,t.tooltip,k.none(),a);return js.sketch({dom:g.dom,components:g.components,eventOrder:cO,buttonBehaviours:{...Ae([Nt("toolbar-button-events",[L5({onAction:t.onAction,getApi:s.getApi}),cm(s,d),im(s,d)]),Ti.toolbarButton(()=>!t.enabled||a.isDisabled()),ls()].concat(s.toolbarButtonBehaviours)),[If]:(i=g.buttonBehaviours)===null||i===void 0?void 0:i[If]}})},uz=(t,s)=>TA(t,s,[]),TA=(t,s,a)=>y$(t,{toolbarButtonBehaviours:a.length>0?[Nt("toolbarButtonWith",a)]:[],getApi:xA,onSetup:t.onSetup},s),dz=(t,s)=>C$(t,s,[]),C$=(t,s,a)=>y$(t,{toolbarButtonBehaviours:[kt.config({}),Lt.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Nt("toolbarToggleButtonWith",a)]:[]),getApi:iz,onSetup:t.onSetup},s),kA=(t,s,a)=>i=>hr.nu(d=>s.fetch(d)).map(d=>k.from(k3($n(Ax(Je("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,al.CLOSE_ON_EXECUTE,s.select.getOr(Dn),a),{movement:Dx(s.columns,s.presets),menuBehaviours:fb.unnamedEvents(s.columns!=="auto"?[]:[Vn((g,p)=>{V4(g,4,nM(s.presets)).each(({numRows:y,numColumns:w})=>{ut.setGridSize(g,y,w)})})])})))),mz=(t,s)=>{const a=g=>({isEnabled:()=>!yt.isDisabled(g),setEnabled:p=>yt.set(g,!p),setIconFill:(p,y)=>{eo(g.element,`svg path[class="${p}"], rect[class="${p}"]`).each(w=>{Ke(w,"fill",y)})},setActive:p=>{Ke(g.element,"aria-pressed",p),eo(g.element,"span").each(y=>{g.getSystem().getByDom(y).each(w=>Lt.set(w,p))})},isActive:()=>eo(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists(Lt.isOn)),setText:p=>eo(g.element,"span").each(y=>g.getSystem().getByDom(y).each(w=>lt(w,Ai,{text:p}))),setIcon:p=>eo(g.element,"span").each(y=>g.getSystem().getByDom(y).each(w=>lt(w,Hf,{icon:p})))}),i=pt(K),d={getApi:a,onSetup:t.onSetup};return eu.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...b$(t.tooltip,s.providers)}},onExecute:g=>{const p=a(g);p.isEnabled()&&t.onAction(p)},onItemExecute:(g,p,y)=>{},splitDropdownBehaviours:Ae([Ti.splitButton(s.providers.isDisabled),ls(),Nt("split-dropdown-events",[Vn((g,p)=>nE(g)),be(v$,Ct.focus),cm(d,i),im(d,i)]),o2.config({})]),eventOrder:{[Xa()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:kA(a,t,s.providers),parts:{menu:ub(!1,t.columns,t.presets)},components:[eu.parts.button(EA(t.icon,t.text,k.none(),k.some([Lt.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),eu.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:DR("chevron-down",s.providers.icons)},buttonBehaviours:Ae([Ti.splitButton(s.providers.isDisabled),ls(),Q_()])}),eu.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},fz=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],P2=(t,s)=>(a,i,d)=>{const g=t(a).mapError(p=>zi(p)).getOrDie();return s(g,i,d)},gz={button:P2(M4,(t,s)=>uz(t,s.shared.providers)),togglebutton:P2(B4,(t,s)=>dz(t,s.shared.providers)),menubutton:P2(YO,(t,s)=>b2(t,"tox-tbtn",s,k.none(),!1)),splitbutton:P2($V,(t,s)=>mz(t,s.shared)),grouptoolbarbutton:P2(bP,(t,s,a)=>{const i=a.ui.registry.getAll().buttons,d=p=>YE(a,{buttons:i,toolbar:p,allowToolbarGroups:!1},s,k.none()),g={[S1]:s.shared.header.isPositionedAtTop()?Ji.TopToBottom:Ji.BottomToTop};switch(ab(a)){case xi.floating:return lz(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},hz=(t,s,a)=>Ze(gz,t.type).fold(()=>(console.error("skipping button defined by",t),k.none()),i=>k.some(i(t,s,a))),w$={styles:rz,fontsize:CA,fontsizeinput:oz,fontfamily:vA,blocks:V9,align:hA},S$=t=>{const s=we(fz,a=>{const i=Wn(a.items,d=>yn(t,d)||yn(w$,d));return{name:a.name,items:i}});return Wn(s,a=>a.items.length>0)},x$=t=>{const s=t.split("|");return we(s,a=>({items:a.trim().split(" ")}))},E$=t=>ru(t,s=>yn(s,"name")&&yn(s,"items")),pz=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?S$(a):En(s)?x$(s):E$(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},T$=(t,s,a,i,d,g)=>Ze(s,a.toLowerCase()).orThunk(()=>g.bind(p=>Gs(p,y=>Ze(s,y+a.toLowerCase())))).fold(()=>Ze(w$,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none()):hz(p,d,t)),YE=(t,s,a,i)=>{const d=pz(s),g=we(d,p=>{const y=he(p.items,w=>w.trim().length===0?[]:T$(t,s.buttons,w,s.allowToolbarGroups,a,i).toArray());return{title:k.from(t.translate(p.name)),items:y}});return Wn(g,p=>p.items.length>0)},k$=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(ru(g,En)){const y=g.map(w=>{const E={toolbar:w,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return YE(t,E,i,k.none())});Hn.setToolbars(d,y)}else Hn.setToolbar(d,YE(t,a,i,k.none()))},_$=Fi(),O$=_$.os.isiOS()&&_$.os.version.major<=12,bz=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=pt(fn(d.innerWidth,d.innerHeight)),y=pt(fn(g.offsetWidth,g.offsetHeight)),w=()=>{const R=p.get();(R.left!==d.innerWidth||R.top!==d.innerHeight)&&(p.set(fn(d.innerWidth,d.innerHeight)),X4(t))},E=()=>{const R=t.getDoc().documentElement,P=y.get();(P.left!==R.offsetWidth||P.top!==R.offsetHeight)&&(y.set(fn(R.offsetWidth,R.offsetHeight)),X4(t))},_=R=>{Mf(t,R)};i.bind(d,"resize",w),i.bind(d,"scroll",_);const D=sf(te.fromDom(t.getBody()),"load",E);t.on("hide",()=>{Xe(a,R=>{Mt(R.element,"display","none")})}),t.on("show",()=>{Xe(a,R=>{mn(R.element,"display")})}),t.on("NodeChange",E),t.on("remove",()=>{D.unbind(),i.unbind(d,"resize",w),i.unbind(d,"scroll",_),d=null})},A$=(t,s,a)=>{Gu(t)&&Gg(a.mainUi.mothership.element,a.popupUi.mothership),gf(s,a.dialogUi.mothership)};var vz=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=s,y=pt(0),w=g.outerContainer;await c$(t);const E=te.fromDom(d.targetNode),_=Sc(so(E));Gg(E,g.mothership),A$(t,_,s),t.on("PostRender",()=>{Hn.setSidebar(w,a.sidebar,ZR(t)),k$(t,s,a,i),y.set(t.getWin().innerWidth),Hn.setMenubar(w,ZE(t,a)),Hn.setViews(w,a.views),bz(t,s)});const D=Hn.getSocket(w).getOrDie("Could not find expected socket element");if(O$){xa(D.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Z=D5(()=>{t.dispatch("ScrollContent")},20),ie=kr(D.element,"scroll",Z.throttle);t.on("remove",ie.unbind)}BM(t,s),t.addCommand("ToggleSidebar",(Z,ie)=>{Hn.toggleSidebar(w,ie),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var Z;return(Z=Hn.whichSidebar(w))!==null&&Z!==void 0?Z:""}),t.addCommand("ToggleView",(Z,ie)=>{if(Hn.toggleView(w,ie)){const G=w.element;g.mothership.broadcastOn([rc()],{target:G}),Xe(p,j=>{j.broadcastOn([rc()],{target:G})}),su(Hn.whichView(w))&&(t.focus(),t.nodeChanged(),Hn.refreshToolbar(w))}}),t.addQueryValueHandler("ToggleView",()=>{var Z;return(Z=Hn.whichView(w))!==null&&Z!==void 0?Z:""});const R=ab(t),P=()=>{Hn.refreshToolbar(s.mainUi.outerContainer)};(R===xi.sliding||R===xi.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Z=t.getWin().innerWidth;Z!==y.get()&&(P(),y.set(Z))});const I={setEnabled:Z=>{Eh(s,!Z)},isEnabled:()=>!yt.isDisabled(w)};return{iframeContainer:D.element.dom,editorContainer:w.element.dom,api:I}}});const _A=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),OA=t=>Bi(t)?t+"px":t,XE=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},yz=t=>{const s=QS(t),a=s4(t),i=r4(t);return _A(s).map(d=>XE(d,a,i))},Cz=t=>yz(t).getOr(QS(t)),AA=t=>{const s=o4(t),a=By(t),i=sb(t);return _A(s).map(d=>XE(d,a,i))},wz=t=>AA(t).getOr(o4(t)),{ToolbarLocation:DA,ToolbarMode:D$}=sI,Sz=40,xz=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=a,y=Ry.DOM,w=ib(t),E=Ly(t),_=sb(t).or(AA(t)),D=i.shared.header,R=D.isPositionedAtTop,P=ab(t),I=P===D$.sliding||P===D$.floating,Z=pt(!1),ie=()=>Z.get()&&!t.removed,G=mt=>I?mt.fold(J(0),Qt=>Qt.components().length>1?os(Qt.components()[1].element):0):0,j=mt=>{switch(i4(t)){case DA.auto:const Qt=Hn.getToolbar(g.outerContainer),Fe=G(Qt),nt=os(mt.element)-Fe,St=vo(s);if(St.y>nt)return"top";{const ft=mp(s),_t=Math.max(ft.dom.scrollHeight,os(ft));return St.bottom<_t-nt||wr().bottom<St.bottom-nt?"bottom":"top"}case DA.bottom:return"bottom";case DA.top:default:return"top"}},ue=mt=>{d.on(Qt=>{Mo.setModes(Qt,[mt]),D.setDockingMode(mt);const Fe=R()?Ji.TopToBottom:Ji.BottomToTop;Ke(Qt.element,S1,Fe)})},oe=()=>{d.on(mt=>{const Qt=_.getOrThunk(()=>{const Fe=_A(bo(Ys(),"margin-left")).getOr(0);return fs(Ys())-xc(s).left+Fe});Mt(mt.element,"max-width",Qt+"px")})},ke=mt=>{d.on(Qt=>{const Fe=Hn.getToolbar(g.outerContainer),nt=G(Fe),St=vo(s),{top:Gt,left:ft}=xe(t,g.outerContainer.element).fold(()=>({top:R()?Math.max(St.y-os(Qt.element)+nt,0):St.bottom,left:St.x}),dn=>{var Mr;const to=vo(dn),za=(Mr=dn.dom.scrollTop)!==null&&Mr!==void 0?Mr:0,fl=Bn(dn,Ys()),Kf=fl?Math.max(St.y-os(Qt.element)+nt,0):St.y-to.y+za-os(Qt.element)+nt;return{top:R()?Kf:St.bottom,left:fl?St.x:St.x-to.x}}),_t={position:"absolute",left:Math.round(ft)+"px",top:Math.round(Gt)+"px"},Mn=mt.map(dn=>{const Mr=Yr(),to=150,za=window.innerWidth-(ft-Mr.left);return{width:Math.max(Math.min(dn,za),to)+"px"}}).getOr({});xa(g.outerContainer.element,{..._t,...Mn})})},xe=(mt,Qt)=>Gu(mt)?UO(Qt):k.none(),$e=()=>{Xe(p,mt=>{mt.broadcastOn([Wu()],{})})},Ue=()=>{if(w)return k.none();if(xc(g.outerContainer.element).left+ti(g.outerContainer.element)>=window.innerWidth-Sz||Ns(g.outerContainer.element,"width").isSome()){Mt(g.outerContainer.element,"position","absolute"),Mt(g.outerContainer.element,"left","0px"),mn(g.outerContainer.element,"width");const Qt=ti(g.outerContainer.element);return k.some(Qt)}else return k.none()},Wt=mt=>{if(!ie())return;w||oe();const Qt=w?k.none():Ue();I&&Hn.refreshToolbar(g.outerContainer),w||ke(Qt),E&&d.on(mt),$e()},rt=()=>w||!E||!ie()?!1:d.get().exists(mt=>{const Qt=D.getDockingMode(),Fe=j(mt);return Fe!==Qt?(ue(Fe),!0):!1});return{isVisible:ie,isPositionedAtTop:R,show:()=>{Z.set(!0),Mt(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),Xe(p,mt=>{mn(mt.element,"display")}),rt(),Gu(t)?Wt(mt=>Mo.isDocked(mt)?Mo.reset(mt):Mo.refresh(mt)):Wt(Mo.refresh)},hide:()=>{Z.set(!1),Mt(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),Xe(p,mt=>{Mt(mt.element,"display","none")})},update:Wt,updateMode:()=>{rt()&&Wt(Mo.reset)},repositionPopups:$e}},R$=(t,s)=>{const a=vo(t);return{pos:s?a.y:a.bottom,bounds:a}},Ez=(t,s,a,i)=>{const d=pt(R$(s,a.isPositionedAtTop())),g=E=>{const{pos:_,bounds:D}=R$(s,a.isPositionedAtTop()),{pos:R,bounds:P}=d.get(),I=D.height!==P.height||D.width!==P.width;d.set({pos:_,bounds:D}),I&&X4(t,E),a.isVisible()&&(R!==_?a.update(Mo.reset):I&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Mo.reset)),t.on("NodeChange keydown",E=>{requestAnimationFrame(()=>g(E))});let p=0;const y=Dr(()=>a.update(Mo.refresh),33);t.on("ScrollWindow",()=>{const E=Yr().left;E!==p&&(p=E,y.throttle()),a.updateMode()}),Gu(t)&&t.on("ElementScroll",E=>{a.update(Mo.refresh)});const w=of();w.set(sf(te.fromDom(t.getBody()),"load",E=>g(E.raw))),t.on("remove",()=>{w.clear()})};var kz=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:g}=s,p=Un(),y=te.fromDom(d.targetNode),w=xz(t,y,s,i,p),E=u4(t);await Fb(t);const _=()=>{if(p.isSet()){w.show();return}p.set(Hn.getHeader(g.outerContainer).getOrDie());const R=sx(t);Gu(t)?(Gg(y,g.mothership),Gg(y,s.popupUi.mothership)):gf(R,g.mothership),gf(R,s.dialogUi.mothership),k$(t,s,a,i),Hn.setMenubar(g.outerContainer,ZE(t,a)),w.show(),Ez(t,y,w,E),t.nodeChanged()};t.on("show",_),t.on("hide",w.hide),E||(t.on("focus",_),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||E)&&_()}),BM(t,s);const D={show:_,hide:w.hide,setEnabled:R=>{Eh(s,!R)},isEnabled:()=>!yt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:D}}});const _z=()=>{const t=Un(),s=Un(),a=Un();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),p=s.get().map(y=>y.mothership);return g.fold(()=>p.toArray(),y=>p.fold(()=>[y],w=>Bn(y.element,w.element)?[y]:[y,w]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(y=>p(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},M$="contexttoolbar-show",B$="contexttoolbar-hide",N$=t=>({hide:()=>rn(t,wo()),getValue:()=>We.getValue(t)}),RA=(t,s)=>be(kb,(a,i)=>{const d=t.get(a),g=N$(d);s.onAction(g,i.event.buttonApi)}),Oz=(t,s,a)=>{const{primary:i,...d}=s.original,g=ks(M4({...d,type:"button",onAction:K}));return TA(g,a,[RA(t,s)])},Az=(t,s,a)=>{const{primary:i,...d}=s.original,g=ks(B4({...d,type:"togglebutton",onAction:K}));return C$(g,a,[RA(t,s)])},Dz=t=>t.type==="contextformtogglebutton",Hb=(t,s,a)=>Dz(s)?Az(t,s,a):Oz(t,s,a),Rz=(t,s,a)=>{const i=we(s,p=>bn(Hb(t,p,a)));return{asSpecs:()=>we(i,p=>p.asSpec()),findPrimary:p=>Gs(s,(y,w)=>y.primary?k.from(i[w]).bind(E=>E.getOpt(p)).filter(Se(yt.isDisabled)):k.none())}},P$=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=bn(yh.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Ae([ut.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(_u(p),!0)),onLeft:(g,p)=>(p.cut(),k.none()),onRight:(g,p)=>(p.cut(),k.none())})])})),d=Rz(i,t.commands,s);return[{title:k.none(),items:[i.asSpec()]},{title:k.none(),items:d.asSpecs()}]},Mz={renderContextForm:(t,s,a)=>La({type:t,uid:Je("context-toolbar"),initGroups:P$(s,a),onEscape:k.none,cyclicKeying:!0,providers:a}),buildInitGroups:P$},$$=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,Bz=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=sv(te.fromDom(t.startContainer),t.startOffset).element;return(wa(a)?wc(a):k.some(a)).filter(Pn).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},MA=t=>{const s=t.selection.getRng(),a=Bz(s);if(t.inline){const i=Yr();return mo(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=Ga(te.fromDom(t.getBody()));return mo(i.x+a.left,i.y+a.top,a.width,a.height)}},Nz=(t,s)=>s.filter(a=>Es(a)&&Dm(a)).map(Ga).getOrThunk(()=>MA(t)),BA=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},Pz=(t,s,a,i,d,g)=>{const p=te.fromDom(t.getContainer()),y=eo(p,".tox-editor-header").getOr(p),w=vo(y),E=w.y>=s.bottom,_=i&&!E;if(t.inline&&_)return{y:Math.max(w.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!_)return{y:a.y,bottom:Math.min(w.y-g,a.bottom)};const D=d==="line"?vo(p):s;return _?{y:Math.max(w.bottom+g,a.y),bottom:Math.min(D.bottom-g,a.bottom)}:{y:Math.max(D.y+g,a.y),bottom:Math.min(w.y-g,a.bottom)}},F$=(t,s,a,i=0)=>{const d=yv(window),g=vo(te.fromDom(t.getContentAreaContainer())),p=cb(t)||ox(t)||Iy(t),{x:y,width:w}=BA(g,d,i);if(t.inline&&!p)return mo(y,d.y,w,d.height);{const E=s.header.isPositionedAtTop(),{y:_,bottom:D}=Pz(t,g,d,E,a,i);return mo(y,_,w,D-_)}},$2=12,NA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},I$={maxHeightFunction:Nl(),maxWidthFunction:PP()},$z=(t,s)=>{const a=t.selection.getRng(),i=sv(te.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Bn(i.element,s)},Fz=(t,s,a)=>{const i=Ns(t,"position");Mt(t,"position",s);const d=a(t);return i.each(g=>Mt(t,"position",g)),d},L$=t=>t==="node",Iz=(t,s,a,i,d)=>{const g=MA(t),p=i.lastElement().exists(y=>Bn(a,y));if($z(t,a))return p?BN:dl;if(p)return Fz(s,i.getMode(),()=>$$(g,vo(s),-20)&&!i.isReposition()?_H:BN);{const y=i.getMode()==="fixed"?d.y+Yr().top:d.y,w=os(s)+$2;return y+w<=g.y?dl:x2}},Lz=(t,s,a,i)=>{const d=w=>(E,_,D,R,P)=>{const I=Iz(t,R,w,a,P),Z={...E,y:P.y,height:P.height};return{...I(Z,_,D,R,P),alwaysFit:!0}},g=w=>L$(i)?[d(w)]:[];return s?{onLtr:w=>[ys,Xo,_s,Lr,Gn,Os].concat(g(w)),onRtl:w=>[ys,_s,Xo,Gn,Lr,Os].concat(g(w))}:{onLtr:w=>[Os,ys,Lr,Xo,Gn,_s].concat(g(w)),onRtl:w=>[Os,ys,Gn,_s,Lr,Xo].concat(g(w))}},H$=(t,s,a,i)=>s==="line"?{bubble:Pl($2,0,NA),layouts:{onLtr:()=>[m1],onRtl:()=>[f1]},overrides:I$}:{bubble:Pl(0,$2,NA,1/$2),layouts:Lz(t,a,i,s),overrides:I$},PA=(t,s)=>{const a=Wn(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=km(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},Hz=t=>{if(t.length<=1)return t;{const s=g=>va(t,p=>p.position===g),a=g=>Wn(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),p=we(a("selection"),y=>({...y,position:"node"}));return g.concat(p)}else return a(i?"selection":"node");else return a("line")}},Vz=t=>{if(t.length<=1)return t;{const s=i=>Rt(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Wn(t,d=>d.position===i))}},zz=(t,s,a)=>{const i=PA(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=PA(t,a);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=Hz(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},JE=(t,s,a)=>t(s)?k.none():$v(s,i=>{if(Pn(i)){const{contextToolbars:d,contextForms:g}=PA(i,a.inNodeScope),p=g.length>0?g:Vz(d);return p.length>0?k.some({elem:i,toolbars:p}):k.none()}else return k.none()},t),Uz=(t,s)=>{const a=te.fromDom(s.getBody()),i=p=>Bn(p,a),d=p=>!i(p)&&!ja(a,p),g=te.fromDom(s.selection.getNode());return d(g)?k.none():zz(g,t.inNodeScope,t.inEditorScope).orThunk(()=>JE(i,g,t))},QE=(t,s)=>{const a={},i=[],d=[],g={},p={},y=(_,D)=>{const R=ks(CM(D));a[_]=R,R.launch.map(P=>{g["form:"+_]={...D.launch,type:P.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(R)}}}),R.scope==="editor"?d.push(R):i.push(R),p[_]=R},w=(_,D)=>{FI(D).each(R=>{D.scope==="editor"?d.push(R):i.push(R),p[_]=R})},E=io(t);return Xe(E,_=>{const D=t[_];D.type==="contextform"?y(_,D):D.type==="contexttoolbar"&&w(_,D)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},F2=Je("forward-slide"),$A=Je("backward-slide"),FA=Je("change-slide-event"),IA="tox-pop--resizing",Wz=t=>{const s=pt([]);return co.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),co.getContent(a).each(i=>{mn(i.element,"visibility")}),ao(a.element,IA),mn(a.element,"width")},inlineBehaviours:Ae([Nt("context-toolbar-events",[Rd(Wm(),(a,i)=>{i.event.raw.propertyName==="width"&&(ao(a.element,IA),mn(a.element,"width"))}),be(FA,(a,i)=>{const d=a.element;mn(d,"width");const g=fs(d);co.setContent(a,i.event.contents),So(d,IA);const p=fs(d);Mt(d,"width",g+"px"),co.getContent(a).each(y=>{i.event.focus.bind(w=>(oc(w),sc(d))).orThunk(()=>(ut.focusIn(y),hi(so(d))))}),setTimeout(()=>{Mt(a.element,"width",p+"px")},0)}),be(F2,(a,i)=>{co.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:hi(so(a.element))}]))}),lt(a,FA,{contents:i.event.forwardContents,focus:k.none()})}),be($A,(a,i)=>{ap(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),lt(a,FA,{contents:Er(d.bar),focus:d.focus})})})]),ut.config({mode:"special",onEscape:a=>ap(s.get()).fold(()=>t.onEscape(),i=>(rn(a,$A),k.some(!0)))})]),lazySink:()=>$t.value(t.sink)})},LA="tox-pop--transition",Zz=(t,s,a,i)=>{const d=i.backstage,g=d.shared,p=Fi().deviceType.isTouch,y=Un(),w=Un(),E=Un(),_=Hs(Wz({sink:a,onEscape:()=>(t.focus(),k.some(!0))})),D=()=>{const rt=E.get().getOr("node"),Dt=L$(rt)?1:0;return F$(t,g,rt,Dt)},R=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),P=rt=>ya(ad(rt,y.get(),Bn),!0),I=()=>{if(R()){const rt=D(),Dt=ya(E.get(),"node")?Nz(t,y.get()):MA(t);return rt.height<=0||!$$(Dt,rt,.01)}else return!0},Z=()=>{y.clear(),w.clear(),E.clear(),co.hide(_)},ie=()=>{if(co.isOpen(_)){const rt=_.element;mn(rt,"display"),I()?Mt(rt,"display","none"):(w.set(0),co.reposition(_))}},G=rt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[rt],behaviours:Ae([ut.config({mode:"acyclic"}),Nt("pop-dialog-wrap-events",[Vn(Dt=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>ut.focusIn(Dt))}),ji(Dt=>{t.shortcuts.remove("ctrl+F9")})])])}),j=uo(()=>QE(s,rt=>{const Dt=ke([rt]);lt(_,F2,{forwardContents:G(Dt)})})),ue=(rt,Dt)=>YE(t,{buttons:rt,toolbar:Dt.items,allowToolbarGroups:!1},i.backstage,k.some(["form:"])),oe=(rt,Dt)=>Mz.buildInitGroups(rt,Dt),ke=rt=>{const{buttons:Dt}=t.ui.registry.getAll(),Et=j(),nn={...Dt,...Et.formNavigators},mt=ab(t)===xi.scrolling?xi.scrolling:xi.default,Qt=Ft(we(rt,Fe=>Fe.type==="contexttoolbar"?ue(nn,Fe):oe(Fe,g.providers)));return La({type:mt,uid:Je("context-toolbar"),initGroups:Qt,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},xe=(rt,Dt)=>{const Et=rt==="node"?g.anchors.node(Dt):g.anchors.cursor(),nn=H$(t,rt,p(),{lastElement:y.get,isReposition:()=>ya(w.get(),0),getMode:()=>or.getMode(a)});return $n(Et,nn)},$e=(rt,Dt)=>{if(Wt.cancel(),!R())return;const Et=ke(rt),nn=rt[0].position,mt=xe(nn,Dt);E.set(nn),w.set(1);const Qt=_.element;mn(Qt,"display"),P(Dt)||(ao(Qt,LA),or.reset(a,_)),co.showWithinBounds(_,G(Et),{anchor:mt,transition:{classes:[LA],mode:"placement"}},()=>k.some(D())),Dt.fold(y.clear,y.set),I()&&Mt(Qt,"display","none")};let Ue=!1;const Wt=Dr(()=>{if(!(!t.hasFocus()||t.removed||Ue))if(aa(_.element,LA))Wt.throttle();else{const rt=j();Uz(rt,t).fold(Z,Dt=>{$e(Dt.toolbars,k.some(Dt.elem))})}},17);t.on("init",()=>{t.on("remove",Z),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ie),t.on("click keyup focus SetContent",Wt.throttle),t.on(B$,Z),t.on(M$,rt=>{const Dt=j();Ze(Dt.lookupTable,rt.toolbarKey).each(Et=>{$e([Et],Tt(rt.target!==t,rt.target)),co.getContent(_).each(ut.focusIn)})}),t.on("focusout",rt=>{XS.setEditorTimeout(t,()=>{sc(a.element).isNone()&&sc(_.element).isNone()&&Z()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Z()}),t.on("AfterProgressState",rt=>{rt.state?Z():t.hasFocus()&&Wt.throttle()}),t.on("dragstart",()=>{Ue=!0}),t.on("dragend drop",()=>{Ue=!1}),t.on("NodeChange",rt=>{sc(_.element).fold(Wt.throttle,K)})})},eT=t=>{Xe([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:ga(t,a.cmd),onSetup:qu(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Vr(t),onAction:ga(t,"JustifyNone")})},HA=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Un();return we(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:y=>{const w=_=>{_&&(g.on(D=>D.setActive(!1)),g.set(y)),y.setActive(_)};w(ya(d,s.hash(p)));const E=s.watcher(t,p,w);return()=>{g.clear(),E()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},V$=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:Fy,hash:s=>q9(s,["fixed","relative","empty"]).getOr(s),display:on,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>k.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Vr(t),onMenuSetup:Vr(t)}),z$=t=>k.from(c4(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:J(a),hash:i=>Ur(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=te.fromDom(i.selection.getNode());return Dp(d,g=>k.some(g).filter(Pn).bind(p=>Kr(p,"lang").map(w=>{const E=Kr(p,"data-mce-lang").getOrUndefined();return{code:w,customCode:E,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=of();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),ki(d.clear,Vr(t)(i))},onMenuSetup:Vr(t)})),U$=t=>{HA(t,V$(t)),z$(t).each(s=>HA(t,s))},jz=(t,s)=>{H9(t,s),Z9(t,s),az(t,s),z9(t,s),sz(t,s)},W$=t=>Ku(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),Gz=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:W$(t),onAction:ga(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Vr(t),onAction:ga(t,"indent")})},qz=t=>{Gz(t)},Z$=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),ki(()=>t.off("PastePlainTextToggle",i),Vr(t)(a))},Kz=t=>{const s=pt(WR(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:Z$(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:Z$(t,s)})},VA=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},I2=t=>{pm.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:qu(t,s.name),onAction:VA(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:qu(t,a),onAction:VA(t,a)})}},Yz=t=>{pm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ga(t,s.action)})}),pm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Vr(t),onAction:ga(t,s.action)})})},Xz=t=>{pm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ga(t,s.action),onSetup:qu(t,s.name)})})},Jz=t=>{I2(t),Yz(t),Xz(t)},j$=t=>{pm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:ga(t,s.action)})}),pm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Vr(t),onAction:ga(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Vr(t),onAction:VA(t,"code")})},Qz=t=>{Jz(t),j$(t)},L2=(t,s)=>Ku(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),eU=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:L2(t,"hasUndo"),onAction:ga(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:L2(t,"hasRedo"),onAction:ga(t,"redo")})},tU=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:L2(t,"hasUndo"),onAction:ga(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:L2(t,"hasRedo"),onAction:ga(t,"redo")})},nU=t=>{eU(t),tU(t)},oU=t=>Ku(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),sU=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:oU(t),onAction:ga(t,"mceToggleVisualAid")})},H2=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ga(t,"mceToggleVisualAid")})},G$=t=>{H2(t),sU(t)},rU=(t,s)=>{eT(t),Qz(t),jz(t,s),nU(t),aB(t),G$(t),qz(t),U$(t),Kz(t)},aU=t=>En(t)?t.split(/[ ,]/):t,zA=t=>s=>s.options.get(t),UA=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:En(a)||ru(a,En)?{value:aU(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},WA=zA("contextmenu_never_use_native"),q$=zA("contextmenu_avoid_overlap"),cU=t=>zh(t).length===0,zh=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Wn(a,i=>yn(s,i))},Uf=(t,s)=>({type:"makeshift",x:t,y:s}),ZA=(t,s,a)=>Uf(t.x+s,t.y+a),jA=t=>t.type==="longpress"||t.type.indexOf("touch")===0,K$=t=>{if(jA(t)){const s=t.touches[0];return Uf(s.pageX,s.pageY)}else return Uf(t.pageX,t.pageY)},iU=t=>{if(jA(t)){const s=t.touches[0];return Uf(s.clientX,s.clientY)}else return Uf(t.clientX,t.clientY)},Y$=(t,s)=>{const a=Ry.DOM.getPos(t);return ZA(s,a.x,a.y)},lU=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?K$(s):Y$(t.getContentAreaContainer(),iU(s)):X$(t),X$=t=>({type:"selection",root:te.fromDom(t.selection.getNode())}),uU=t=>({type:"node",node:k.some(te.fromDom(t.selection.getNode())),root:te.fromDom(t.getBody())}),J$=(t,s,a)=>{switch(a){case"node":return uU(t);case"point":return lU(t,s);case"selection":return X$(t)}},dU=(t,s,a,i,d,g)=>{const p=a(),y=J$(t,s,g);_b(p,al.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(w=>{s.preventDefault(),co.showMenuAt(d,{anchor:y},{menu:{markers:vh("normal")},data:w})})},Q$={onLtr:()=>[ys,Xo,_s,Lr,Gn,Os,dl,x2,S2,wE,w2,C2],onRtl:()=>[ys,_s,Xo,Gn,Lr,Os,dl,x2,w2,C2,S2,wE]},tT=12,eF={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},tF=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return jk(t.getWin(),Vg.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},GA=t=>{const s=t.selection.getRng(),a=()=>{XS.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},mU=(t,s,a)=>{const i=J$(t,s,a);return{bubble:Pl(0,a==="point"?tT:0,eF),layouts:Q$,overrides:{maxWidthFunction:PP(),maxHeightFunction:Nl()},...i}},nF=(t,s,a,i,d,g,p)=>{const y=mU(t,s,g);_b(a,al.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(w=>{s.preventDefault();const E=p?ma.HighlightMenuAndItem:ma.HighlightNone;co.showMenuWithinBounds(d,{anchor:y},{menu:{markers:vh("normal"),highlightOnOpen:E},data:w,type:"horizontal"},()=>k.some(F$(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(B$)})},fU=(t,s,a,i,d,g)=>{const p=Fi(),y=p.os.isiOS(),w=p.os.isMacOS(),E=p.os.isAndroid(),_=p.deviceType.isTouch(),D=()=>!(E||y||w&&_),R=()=>{const P=a();nF(t,s,P,i,d,g,D())};if((w||y)&&g!=="node"){const P=()=>{GA(t),R()};tF(t,s)?P():(t.once("selectionchange",P),t.once("touchend",()=>t.off("selectionchange",P)))}else R()},oF=t=>En(t)?t==="|":t.type==="separator",Vb={type:"separator"},qA=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(En(t))return t;switch(t.type){case"separator":return Vb;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return En(i)?i:we(i,qA)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Sn(a.onAction)}}},sF=(t,s)=>{if(s.length===0)return t;const i=ap(t).filter(d=>!oF(d)).fold(()=>[],d=>[Vb]);return t.concat(i).concat(s).concat([Vb])},gU=(t,s,a)=>{const i=Yn(s,(d,g)=>Ze(t,g.toLowerCase()).map(p=>{const y=p.update(a);if(En(y)&&Ca(pl(y)))return sF(d,y.split(" "));if(Ri(y)&&y.length>0){const w=we(y,qA);return sF(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&oF(i[i.length-1])&&i.pop(),i},hU=(t,s)=>s.ctrlKey&&!WA(t),pU=t=>t.type==="longpress"||yn(t,"touches"),rF=(t,s)=>!pU(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),KA=(t,s)=>rF(t,s)?t.selection.getStart(!0):s.target,aF=(t,s)=>{const a=q$(t),i=rF(t,s)?"selection":"point";if(Ca(a)){const d=KA(t,s);return Cb(te.fromDom(d),a)?"node":i}else return i},bU=(t,s,a)=>{const d=Fi().deviceType.isTouch,g=Hs(co.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ae([Nt("dismissContextMenu",[be(Tu(),(w,E)=>{Zt.close(w),t.focus()})])])})),p=()=>co.hide(g),y=w=>{if(WA(t)&&w.preventDefault(),hU(t,w)||cU(t))return;const E=aF(t,w),_=()=>{const R=KA(t,w),P=t.ui.registry.getAll(),I=zh(t);return gU(P.contextMenus,I,R)};(d()?fU:dU)(t,w,_,a,g,E)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,p),t.on("longpress contextmenu",y)})},YA=Rc.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),V2=t=>s=>s.translate(-t.left,-t.top),nT=t=>s=>s.translate(t.left,t.top),wm=t=>(s,a)=>Yn(t,(i,d)=>d(i),fn(s,a)),oT=(t,s,a)=>t.fold(wm([nT(a),V2(s)]),wm([V2(s)]),wm([])),zb=(t,s,a)=>t.fold(wm([nT(a)]),wm([]),wm([nT(s)])),cF=(t,s,a)=>t.fold(wm([]),wm([V2(a)]),wm([nT(s),V2(a)])),XA=(t,s,a,i,d,g)=>{const p=zb(t,d,g),y=zb(s,d,g);return Math.abs(p.left-y.left)<=a&&Math.abs(p.top-y.top)<=i},vU=(t,s,a,i,d,g)=>{const p=zb(t,d,g),y=zb(s,d,g),w=Math.abs(p.left-y.left),E=Math.abs(p.top-y.top);return fn(w,E)},iF=(t,s,a)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-a.left+"px"),top:k.some(g-a.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},JA=(t,s,a)=>t.fold((i,d)=>z2(i+s,d+a),(i,d)=>Wf(i+s,d+a),(i,d)=>Uh(i+s,d+a)),sT=(t,s,a,i)=>{const d=(g,p)=>(y,w)=>{const E=g(s,a,i);return p(y.getOr(E.left),w.getOr(E.top))};return t.fold(d(cF,z2),d(zb,Wf),d(oT,Uh))},z2=YA.offset,Wf=YA.absolute,Uh=YA.fixed,lF=(t,s)=>{const a=po(t,s);return Ur(a)?NaN:parseInt(a,10)},yU=(t,s)=>{const a=t.element,i=lF(a,s.leftAttr),d=lF(a,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(fn(i,d))},CU=(t,s,a)=>{const i=t.element;Ke(i,s.leftAttr,a.left+"px"),Ke(i,s.topAttr,a.top+"px")},uF=(t,s)=>{const a=t.element;qo(a,s.leftAttr),qo(a,s.topAttr)},wU=(t,s,a,i)=>yU(t,s).fold(()=>a,d=>Uh(d.left+i.left,d.top+i.top)),dF=(t,s,a,i,d,g)=>{const p=wU(t,s,a,i),y=s.mustSnap?QA(t,s,p,d,g):xU(t,s,p,d,g),w=oT(p,d,g);return CU(t,s,w),y.fold(()=>({coord:Uh(w.left,w.top),extra:k.none()}),E=>({coord:E.output,extra:E.extra}))},SU=(t,s)=>{uF(t,s)},mF=(t,s,a,i)=>Gs(t,d=>{const g=d.sensor;return XA(s,g,d.range.left,d.range.top,a,i)?k.some({output:sT(d.output,s,a,i),extra:d.extra}):k.none()}),QA=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return mF(g,a,i,d).orThunk(()=>Yn(g,(w,E)=>{const _=E.sensor,D=vU(a,_,E.range.left,E.range.top,i,d);return w.deltas.fold(()=>({deltas:k.some(D),snap:k.some(E)}),R=>{const P=(D.left+D.top)/2,I=(R.left+R.top)/2;return P<=I?{deltas:k.some(D),snap:k.some(E)}:w})},{deltas:k.none(),snap:k.none()}).snap.map(w=>({output:sT(w.output,a,i,d),extra:w.extra})))},xU=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return mF(g,a,i,d)},fF=(t,s,a)=>({coord:sT(t.output,t.output,s,a),extra:t.extra});var EU=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Sa(t.element),p=Yr(g),y=WO(d),w=fF(i,p,y),E=iF(w.coord,p,y);Re(d,E)}}});const U2="data-initial-z-index",TU=t=>{wc(t.element).filter(Pn).each(s=>{Kr(s,U2).fold(()=>mn(s,"z-index"),a=>Mt(s,"z-index",a)),qo(s,U2)})},kU=t=>{wc(t.element).filter(Pn).each(s=>{Ns(s,"z-index").each(a=>{Ke(s,U2,a)}),Mt(s,"z-index",bo(t.element,"z-index"))})},gF=(t,s)=>{t.getSystem().addToGui(s),kU(s)},_U=t=>{TU(t),t.getSystem().removeFromGui(t)},hF=(t,s,a)=>t.getSystem().build(Gl.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var pF=as("snaps",[ve("getSnapPoints"),Yt("onSensor"),ve("leftAttr"),ve("topAttr"),ne("lazyViewport",wr),ne("mustSnap",!1)]);const eD=[ne("useFixed",Dn),ve("blockerClass"),ne("getTarget",on),ne("onDrag",K),ne("repositionTarget",!0),ne("onDrop",K),ps("getBounds",wr),pF],OU=t=>_m(Ns(t,"left"),Ns(t,"top"),Ns(t,"position"),(s,a,i)=>(i==="fixed"?Uh:z2)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=xc(t);return Wf(s.left,s.top)}),AU=(t,s,a,i,d)=>{const g=d.bounds,p=zb(s,a,i),y=nc(p.left,g.x,g.x+g.width-d.width),w=nc(p.top,g.y,g.y+g.height-d.height),E=Wf(y,w);return s.fold(()=>{const _=cF(E,a,i);return z2(_.left,_.top)},J(E),()=>{const _=oT(E,a,i);return Uh(_.left,_.top)})},DU=(t,s,a,i,d,g,p)=>{const y=s.fold(()=>{const w=JA(a,g.left,g.top),E=oT(w,i,d);return Uh(E.left,E.top)},w=>{const E=dF(t,w,a,g,i,d);return E.extra.each(_=>{w.onSensor(t,_)}),E.coord});return AU(t,y,i,d,p)},RU=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Sa(t.element),p=Yr(g),y=WO(d),w=OU(d),E=DU(t,s.snaps,w,p,y,i,a),_=iF(E,p,y);Re(d,_)}s.onDrag(t,d,i)},bF=(t,s)=>({bounds:t.getBounds(),height:du(s.element),width:ti(s.element)}),tD=(t,s,a,i,d)=>{const g=a.update(i,d),p=a.getStartData().getOrThunk(()=>bF(s,t));g.each(y=>{RU(t,s,p,y)})},vF=(t,s,a,i)=>{s.each(_U),a.snaps.each(g=>{SU(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},rT=t=>(s,a)=>{const i=d=>{a.setStartData(bF(s,d))};return Ln([be(Sl(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},MU=t=>Ln([be(Ya(),t.forceDrop),be(Iv(),t.drop),be(Td(),(s,a)=>{t.move(a.event)}),be(Np(),t.delayDrop)]);var NU=Object.freeze({__proto__:null,getData:t=>k.from(fn(t.x,t.y)),getDelta:(t,s)=>fn(s.left-t.left,s.top-t.top)});const yF=(t,s,a)=>[be(Ya(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>vF(i,k.some(E),t,s),y=RB(p,200),w={drop:p,delayDrop:y.schedule,forceDrop:p,move:D=>{y.cancel(),tD(i,t,s,NU,D)}},E=hF(i,t.blockerClass,MU(w));(()=>{a(i),gF(i,E)})()})],Wh=[...eD,zn("dragger",{handlers:rT(yF)})],CF=t=>Ln([be(ui(),t.forceDrop),be(Ed(),t.drop),be(IC(),t.drop),be(Cg(),(s,a)=>{t.move(a.event)})]),PU=t=>{const s=t[0];return k.some(fn(s.clientX,s.clientY))};var wF=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?PU(a):k.none()},getDelta:(t,s)=>fn(s.left-t.left,s.top-t.top)});const nD=(t,s,a)=>{const i=Un(),d=g=>{vF(g,i.get(),t,s),i.clear()};return[be(ui(),(g,p)=>{p.stop();const y=()=>d(g),w={drop:y,delayDrop:K,forceDrop:y,move:D=>{tD(g,t,s,wF,D)}},E=hF(g,t.blockerClass,CF(w));i.set(E),(()=>{a(g),gF(g,E)})()}),be(Cg(),(g,p)=>{p.stop(),tD(g,t,s,wF,p.event)}),be(Ed(),(g,p)=>{p.stop(),d(g)}),be(IC(),d)]},$U=[...eD,zn("dragger",{handlers:rT(nD)})],FU=(t,s,a)=>[...yF(t,s,a),...nD(t,s,a)],IU=[...eD,zn("dragger",{handlers:rT(FU)})];var LU=Object.freeze({__proto__:null,mouse:Wh,touch:$U,mouseOrTouch:IU}),HU=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const a=()=>{t=k.none(),s=k.none()},i=(w,E)=>{const _=t.map(D=>w.getDelta(D,E));return t=k.some(E),_},d=(w,E)=>w.getData(E).bind(_=>i(w,_)),g=w=>{s=k.some(w)},p=()=>s,y=J({});return Fr({readState:y,reset:a,update:d,getStartData:p,setStartData:g})}});const Zh=x0({branchKey:"mode",branches:LU,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)})},state:HU,apis:EU}),aT=40,W2=aT/2,SF=(t,s,a,i,d,g)=>t.fold(()=>Zh.snap({sensor:Wf(a-W2,i-W2),range:fn(d,g),output:Wf(k.some(a),k.some(i)),extra:{td:s}}),p=>{const y=a-W2,w=i-W2,E=aT,_=aT,D=p.element.dom.getBoundingClientRect();return Zh.snap({sensor:Wf(y,w),range:fn(E,_),output:Wf(k.some(a-D.width/2),k.some(i-D.height/2)),extra:{td:s}})}),Ub=(t,s,a)=>{const i=(d,g)=>d.exists(p=>Bn(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},xF=t=>bn(js.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ae([Zh.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),o2.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),VU=(t,s)=>{const a=pt([]),i=pt([]),d=pt(!1),g=Un(),p=Un(),y=$e=>{const Ue=Ga($e);return SF(P.getOpt(s),$e,Ue.x,Ue.y,Ue.width,Ue.height)},w=()=>we(a.get(),$e=>y($e)),E=$e=>{const Ue=Ga($e);return SF(I.getOpt(s),$e,Ue.right,Ue.bottom,Ue.width,Ue.height)},_=()=>we(i.get(),$e=>E($e)),D=Ub(w,g,$e=>{p.get().each(Ue=>{t.dispatch("TableSelectorChange",{start:$e,finish:Ue})})}),R=Ub(_,p,$e=>{g.get().each(Ue=>{t.dispatch("TableSelectorChange",{start:Ue,finish:$e})})}),P=xF(D),I=xF(R),Z=Hs(P.asSpec()),ie=Hs(I.asSpec()),G=($e,Ue,Wt,rt)=>{const Dt=Ue.dom.getBoundingClientRect();mn($e.element,"display");const Et=dd(te.fromDom(t.getBody())).dom.innerHeight,nn=Wt(Dt),mt=rt(Dt,Et);(nn||mt)&&Mt($e.element,"display","none")},j=($e,Ue,Wt,rt)=>{const Dt=Wt(Ue);Zh.snapTo($e,Dt),G($e,Ue,mt=>mt[rt]<0,(mt,Qt)=>mt[rt]>Qt)},ue=$e=>j(Z,$e,y,"top"),oe=()=>g.get().each(ue),ke=$e=>j(ie,$e,E,"bottom"),xe=()=>p.get().each(ke);Fi().deviceType.isTouch()&&(t.on("TableSelectionChange",$e=>{d.get()||(Eo(s,Z),Eo(s,ie),d.set(!0)),g.set($e.start),p.set($e.finish),$e.otherCells.each(Ue=>{a.set(Ue.upOrLeftCells),i.set(Ue.downOrRightCells),ue($e.start),ke($e.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{oe(),xe()}),t.on("TableSelectionClear",()=>{d.get()&&(Us(Z),Us(ie),d.set(!1)),g.clear(),p.clear()}))};var oD=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const zU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",UU=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(E,_,D)=>js.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":D,"aria-level":D+1}},components:[jn(E)],action:R=>{t.focus(),t.selection.select(_),t.nodeChanged()},buttonBehaviours:Ae([Ti.button(a.isDisabled),ls()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[jn(` ${d} `)]}),y=E=>Yn(E,(_,D,R)=>{const P=g(D.name,D.element,R);return R===0?_.concat([P]):_.concat([p(),P])},[]),w=E=>{const _=[];let D=E.length;for(;D-- >0;){const R=E[D];if(R.nodeType===1&&!zU(R)){const P=uc(t,R);if(P.isDefaultPrevented()||_.push({name:P.name,element:R}),P.isPropagationStopped())break}}return _};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ae([ut.config({mode:"flow",selector:"div[role=button]"}),yt.config({disabled:a.isDisabled}),ls(),fo.config({}),kt.config({}),Nt("elementPathEvents",[Vn((E,_)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>ut.focusIn(E)),t.on("NodeChange",D=>{const R=w(D.parents),P=R.length>0?y(R):[];kt.set(E,P)})})])]),components:[]}};var Zf;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Zf||(Zf={}));const WU=(t,s,a,i,d)=>{const g={height:XE(i+s.top,s4(t),r4(t))};return a===Zf.Both&&(g.width=XE(d+s.left,By(t),sb(t))),g},EF=(t,s,a)=>{const i=te.fromDom(t.getContainer()),d=WU(t,s,a,os(i),fs(i));ms(d,(g,p)=>{Bi(g)&&Mt(i,p,OA(g))}),xx(t)},ZU=t=>{const s=UR(t);return s===!1?Zf.None:s==="both"?Zf.Both:Zf.Vertical},cT=(t,s,a,i)=>{const g=fn(a*20,i*20);return EF(t,g,s),k.some(!0)},jU=(t,s)=>{const a=ZU(t);if(a===Zf.None)return k.none();const i=a===Zf.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return k.some(rl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize"),"aria-label":s.translate(i)},behaviours:[Zh.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,p)=>EF(t,p,a),blockerClass:"tox-blocker"}),ut.config({mode:"special",onLeft:()=>cT(t,a,-1,0),onRight:()=>cT(t,a,1,0),onUp:()=>cT(t,a,0,-1),onDown:()=>cT(t,a,0,1)}),fo.config({}),Ct.config({})]},s.icons))},GU=(t,s)=>{const a=(i,d,g)=>kt.set(i,[jn(s.translate(["{0} "+g,d[g]]))]);return js.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ae([Ti.button(s.isDisabled),ls(),fo.config({}),kt.config({}),We.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Nt("wordcount-events",[Bc(i=>{const d=We.getValue(i),g=d.mode==="words"?"characters":"words";We.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Vn(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=We.getValue(i);We.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[sa()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},qU=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Uc.translate(["Powered by {0}","Tiny"])},innerHtml:oD.trim()},behaviours:Ae([Ct.config({})])}]}),i=()=>{const y=W4("Alt+0"),w="Press {0} for help";return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[jn(Uc.translate([w,y]))]}},d=()=>{const y=[];return t.hasPlugin("wordcount")&&y.push(GU(t,s)),$y(t)&&y.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:y}},g=()=>{const y=[],w=GR(t),E=zR(t),_=$y(t)||t.hasPlugin("wordcount"),D=()=>{const R="tox-statusbar__text-container--flex-start",P="tox-statusbar__text-container--flex-end",I="tox-statusbar__text-container--space-around";if(w){const Z="tox-statusbar__text-container-3-cols";return!_&&!E?[Z,I]:_&&!E?[Z,P]:[Z,R]}return[_&&!E?P:R]};return E&&y.push(UU(t,{},s)),w&&y.push(i()),_&&y.push(d()),y.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...D()]},components:y}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const y=g(),w=jU(t,s);return y.concat(w.toArray())})()}},TF=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),KU=(t,s)=>{const a=t.inline,i=a?kz:vz,d=Ly(t)?BV:fV,g=_z(),p=Un(),y=Un(),w=Un(),R=Fi().deviceType.isTouch()?["tox-platform-touch"]:[],P=h4(t),I=ab(t),Z=bn({dom:{tag:"div",classes:["tox-anchorbar"]}}),ie=bn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),G=()=>g.mainUi.get().map(ft=>ft.outerContainer).bind(Hn.getHeader),j=()=>$t.fromOption(g.dialogUi.get().map(ft=>ft.sink),"UI has not been rendered"),ue=()=>$t.fromOption(g.popupUi.get().map(ft=>ft.sink),"(popup) UI has not been rendered"),oe=g.lazyGetInOuterOrDie("anchor bar",Z.getOpt),ke=g.lazyGetInOuterOrDie("bottom anchor bar",ie.getOpt),xe=g.lazyGetInOuterOrDie("toolbar",Hn.getToolbar),$e=g.lazyGetInOuterOrDie("throbber",Hn.getThrobber),Ue=cV({popup:ue,dialog:j},t,oe,ke),Wt=()=>{const ft={attributes:{[S1]:P?Ji.BottomToTop:Ji.TopToBottom}},_t=Hn.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ue.popup,onEscape:()=>{t.focus()}}),Mn=Hn.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ue.popup.shared.getSink,providers:Ue.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Tm=>{J4(t,Tm)},type:I,lazyToolbar:xe,lazyHeader:()=>G().getOrDie("Could not find header element"),...ft}),dn=Hn.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ue.popup.shared.providers,onEscape:()=>{t.focus()},type:I}),Mr=Iy(t),to=ox(t),za=cb(t),fl=jR(t),Kf=rt(),Yf=Mr||to||za,tp=()=>Mr?[dn]:to?[Mn]:[],Xf=fl?[Kf,_t]:[_t];return Hn.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Yf?[]:["tox-editor-header--empty"]),...ft},components:Ft([za?Xf:[],tp(),ib(t)?[]:[Z.asSpec()]]),sticky:Ly(t),editor:t,sharedBackstage:Ue.popup.shared})},rt=()=>Hn.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Dt=()=>{const ft=Hn.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),_t=Hn.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ft,_t]}},Et=()=>{const ft=sx(t),_t=Bn(Ys(),ft)&&bo(ft,"display")==="grid",Mn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(R),attributes:{...Uc.isRtl()?{dir:"rtl"}:{}}},behaviours:Ae([or.config({useFixed:()=>d.isDocked(G)})])},dn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ln([be(mi(),za=>{Mt(za.element,"width",document.body.clientWidth+"px")})])},Mr=Hs($n(Mn,_t?dn:{})),to=O3(Mr);return y.set(to),{sink:Mr,mothership:to}},nn=()=>{const ft={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(R),attributes:{...Uc.isRtl()?{dir:"rtl"}:{}}},behaviours:Ae([or.config({useFixed:()=>d.isDocked(G),getBounds:()=>s.getPopupSinkBounds()})])},_t=Hs(ft),Mn=O3(_t);return w.set(Mn),{sink:_t,mothership:Mn}},mt=()=>{const ft=Wt(),_t=Dt(),Mn=Hn.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ue.popup}),dn=Hn.parts.viewWrapper({backstage:Ue.popup}),Mr=f4(t)&&!a?k.some(qU(t,Ue.popup.shared.providers)):k.none(),to=Ft([P?[]:[ft],a?[]:[_t],P?[ft]:[]]),za=Hn.parts.editorContainer({components:Ft([to,a?[]:[ie.asSpec(),...Mr.toArray()]])}),fl=p4(t),Kf={role:"application",...Uc.isRtl()?{dir:"rtl"}:{},...fl?{"aria-hidden":"true"}:{}},Yf=Hs(Hn.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(P?["tox-tinymce--toolbar-bottom"]:[]).concat(R),styles:{visibility:"hidden",...fl?{opacity:"0",border:"0"}:{}},attributes:Kf},components:[za,...a?[]:[dn],Mn],behaviours:Ae([ls(),yt.config({disableClass:"tox-tinymce--disabled"}),ut.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),tp=O3(Yf);return p.set(tp),{mothership:tp,outerContainer:Yf}},Qt=ft=>{const _t=OA(Cz(t)),Mn=OA(wz(t));return t.inline||(uu("div","width",Mn)&&Mt(ft.element,"width",Mn),uu("div","height",_t)?Mt(ft.element,"height",_t):Mt(ft.element,"height","400px")),_t},Fe=ft=>{t.addShortcut("alt+F9","focus menubar",()=>{Hn.focusMenubar(ft)}),t.addShortcut("alt+F10","focus toolbar",()=>{Hn.focusToolbar(ft)}),t.addCommand("ToggleToolbarDrawer",(_t,Mn)=>{Mn!=null&&Mn.skipFocus?Hn.toggleToolbarDrawerWithoutFocusing(ft):Hn.toggleToolbarDrawer(ft)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Hn.isToolbarDrawerToggled(ft))},nt=ft=>{const{mainUi:_t,popupUi:Mn,uiMotherships:dn}=ft;lo(NR(t),(xD,Yb)=>{t.ui.registry.addGroupToolbarButton(Yb,xD)});const{buttons:Mr,menuItems:to,contextToolbars:za,sidebars:fl,views:Kf}=t.ui.registry.getAll(),Yf=g4(t),tp={menuItems:to,menus:_f(t),menubar:$R(t),toolbar:Yf.getOrThunk(()=>Py(t)),allowToolbarGroups:I===xi.floating,buttons:Mr,sidebar:fl,views:Kf};Fe(_t.outerContainer),iV(t,_t.mothership,dn),d.setup(t,Ue.popup.shared,G),rU(t,Ue.popup),bU(t,Ue.popup.shared.getSink,Ue.popup),A2(t),JV(t,$e,Ue.popup.shared),Zz(t,za,Mn.sink,{backstage:Ue.popup}),VU(t,Mn.sink);const Xf=t.getElement(),Tm=Qt(_t.outerContainer),SD={targetNode:Xf,height:Tm};return i.render(t,ft,tp,Ue.popup,SD)},St=ft=>(w.set(ft.mothership),ft),Gt=()=>{const ft=mt(),_t=Et(),Mn=Gu(t)?nn():St(_t);g.dialogUi.set(_t),g.popupUi.set(Mn),g.mainUi.set(ft);const dn={popupUi:Mn,dialogUi:_t,mainUi:ft,uiMotherships:g.getUiMotherships()};return nt(dn)};return{popups:{backstage:Ue.popup,getMothership:()=>TF("popups",w)},dialogs:{backstage:Ue.dialog,getMothership:()=>TF("dialogs",y)},renderUI:Gt}},YU=(t,s)=>{const a=Kr(t,"id").fold(()=>{const i=Je("dialog-label");return Ke(s,"id",i),i},on);Ke(t,"aria-labelledby",a)},XU=J([ve("lazySink"),gn("dragBlockClass"),ps("getBounds",wr),ne("useTabstopAt",vt),ne("firstTabstop",0),ne("eventOrder",{}),Qo("modalBehaviours",[ut]),Tr("onExecute"),h0("onEscape")]),sD={sketch:on},JU=J([Fa({name:"draghandle",overrides:(t,s)=>({behaviours:Ae([Zh.config({mode:"mouse",getTarget:a=>Al(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Ws({schema:[ve("dom")],name:"title"}),Ws({factory:sD,schema:[ve("dom")],name:"close"}),Ws({factory:sD,schema:[ve("dom")],name:"body"}),Fa({factory:sD,schema:[ve("dom")],name:"footer"}),cc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[ne("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ne("components",[])],name:"blocker"})]),QU=(t,s,a,i)=>{const d=Un(),g=P=>{d.set(P);const I=t.lazySink(P).getOrDie(),Z=i.blocker(),ie=I.getSystem().build({...Z,components:Z.components.concat([Er(P)]),behaviours:Ae([Ct.config({}),Nt("dialog-blocker-events",[Rd(oa(),()=>{fc.isBlocked(P)?K():ut.focusIn(P)})])])});Eo(I,ie),ut.focusIn(P)},p=P=>{d.clear(),wc(P.element).each(I=>{P.getSystem().getByDom(I).each(Z=>{Us(Z)})})},y=P=>Ll(P,t,"body"),w=P=>Rn(P,t,"footer"),E=(P,I)=>{fc.block(P,I)},_=P=>{fc.unblock(P)},D=Je("modal-events"),R={...t.eventOrder,[Xa()]:[D].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:y,getFooter:w,setIdle:_,setBusy:E},eventOrder:R,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:is(t.modalBehaviours,[kt.config({}),ut.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),fc.config({getRoot:d.get}),Nt(D,[Vn(P=>{YU(P.element,Ll(P,t,"title").element)})])])}},jo=sr({name:"ModalDialog",configFields:XU(),partFields:JU(),factory:QU,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),eW=ct([Zo,gx].concat(Sh)),tW=qa,rD=[R4("button"),Ei,Ka("align","end",["start","end"]),db,cl,Bv("buttonType",["primary","secondary"])],kF=[...rD,Ul],aD=[bu("type",["submit","cancel","custom"]),...kF],nW=[bu("type",["menu"]),Of,am,Ei,Oa("items",eW),...rD],_F=[...rD,bu("type",["togglebutton"]),Vo("tooltip"),Ei,Of,Yo("active",!1)],oW=Fs("type",{submit:aD,cancel:aD,custom:aD,menu:nW,togglebutton:_F}),sW=[Zo,Ul,bu("level",["info","warn","error","success"]),k4,ne("url","")],rW=ct(sW),aW=t=>[Zo,t],cW=[Zo,Ul,cl,R4("button"),Ei,A4,Bv("buttonType",["primary","secondary","toolbar"]),db],cD=ct(cW),jh=[Zo,gx],tu=jh.concat([O4]),iW=jh.concat([T4,cl]),lW=ct(iW),uW=qa,dW=tu.concat([bx("auto")]),mW=ct(dW),fW=pu([Ch,Ul,k4]),gW=tu.concat([li("storageKey","default")]),hW=ct(gW),pW=Ts,bW=ct(tu),vW=Ts,yW=jh.concat([li("tag","textarea"),Vo("scriptId"),Vo("scriptUrl"),Ap("settings",void 0)]),CW=jh.concat([li("tag","textarea"),ea("init")]),wW=Ac(t=>ro("customeditor.old",Fn(CW),t).orThunk(()=>ro("customeditor.new",Fn(yW),t))),SW=Ts,EW=ct(tu),TW=wl(),kW=t=>[Zo,Rv("columns"),t],_W=[Zo,Vo("html"),Ka("presets","presentation",["presentation","document"])],OW=ct(_W),AW=tu.concat([Yo("border",!1),Yo("sandboxed",!0),Yo("streamContent",!1),Yo("transparent",!0)]),DW=ct(AW),RW=Ts,OF=ct(jh.concat([er("height")])),AF=ct([Vo("url"),Cd("zoom"),Cd("cachedWidth"),Cd("cachedHeight")]),Gh=tu.concat([er("inputMode"),er("placeholder"),Yo("maximized",!1),cl]),MW=ct(Gh),iD=Ts,iT=t=>[Zo,T4,t,Ka("align","start",["start","center","end"])],BW=[Ul,Ch],NW=[Ul,Oa("items",ii("items",()=>DF))],DF=qe([ct(BW),ct(NW)]),PW=tu.concat([Oa("items",DF),cl]),$W=ct(PW),qh=Ts,RF=tu.concat([$C("items",[Ul,Ch]),Dc("size",1),cl]),FW=ct(RF),IW=Ts,LW=tu.concat([Yo("constrain",!0),cl]),HW=ct(LW),MF=ct([Vo("width"),Vo("height")]),VW=jh.concat([T4,Dc("min",0),Dc("max",0)]),zW=ct(VW),UW=Vi,lD=[Zo,Oa("header",Ts),Oa("cells",ci(Ts))],Z2=ct(lD),uD=tu.concat([er("placeholder"),Yo("maximized",!1),cl]),lT=ct(uD),Kh=Ts,j2=[bu("type",["directory","leaf"]),hx,Vo("id"),Ui("menu",O2)],dD=ct(j2),BF=j2.concat([Oa("children",ii("children",()=>yd("type",{directory:mD,leaf:dD})))]),mD=ct(BF),WW=yd("type",{directory:mD,leaf:dD}),ZW=[Zo,Oa("items",WW),wd("onLeafAction"),wd("onToggleExpand"),ta("defaultExpandedIds",[],Ts),er("defaultSelectedId")],jW=ct(ZW),NF=tu.concat([Ka("filetype","file",["image","media","file"]),cl]),PF=ct(NF),fD=ct([Ch,D4]),gD=t=>Is("items","items",Tn(),ci(Ac(s=>ro(`Checking item of ${t}`,hD,s).fold(a=>$t.error(zi(a)),a=>$t.value(a))))),hD=hs(()=>yd("type",{alertbanner:rW,bar:ct(aW(gD("bar"))),button:cD,checkbox:lW,colorinput:hW,colorpicker:bW,dropzone:EW,grid:ct(kW(gD("grid"))),iframe:DW,input:MW,listbox:$W,selectbox:FW,sizeinput:HW,slider:zW,textarea:lT,urlinput:PF,customeditor:wW,htmlpanel:OW,imagepreview:OF,collection:mW,label:ct(iT(gD("label"))),table:Z2,tree:jW,panel:pD})),GW=[Zo,ne("classes",[]),Oa("items",hD)],pD=ct(GW),qW=[R4("tab"),hx,Oa("items",hD)],KW=[Zo,$C("tabs",qW)],YW=ct(KW),bD=kF,vD=oW,XW=ct([Vo("title"),In("body",yd("type",{panel:pD,tabpanel:YW})),li("size","normal"),ta("buttons",[],vD),ne("initialData",{}),ps("onAction",K),ps("onChange",K),ps("onSubmit",K),ps("onClose",K),ps("onCancel",K),ps("onTabChange",K)]),$F=t=>ro("dialog",XW,t),JW=ct([bu("type",["cancel","custom"]),...bD]),QW=ct([Vo("title"),Vo("url"),Cd("height"),Cd("width"),FC("buttons",JW),ps("onAction",K),ps("onCancel",K),ps("onClose",K),ps("onMessage",K)]),FF=t=>ro("dialog",QW,t),yD=t=>vc(t)?[t].concat(he(Qb(t),yD)):Ri(t)?he(t,yD):[],eZ=t=>En(t.type)&&En(t.name),Yh={checkbox:uW,colorinput:pW,colorpicker:vW,dropzone:TW,input:iD,iframe:RW,imagepreview:AF,selectbox:IW,sizeinput:MF,slider:UW,listbox:qh,size:MF,textarea:Kh,urlinput:fD,customeditor:SW,collection:fW,togglemenuitem:tW},IF=t=>k.from(Yh[t.type]),tZ=t=>Wn(yD(t),eZ),uT=t=>{const s=tZ(t),a=he(s,i=>IF(i).fold(()=>[],d=>[In(i.name,d)]));return ct(a)},Xh=t=>{var s;const a=ks($F(t)),i=uT(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},ed={open:(t,s)=>{const a=Xh(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=ks(FF(s));return t(a)},redial:t=>Xh(t)};var dT=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?L_:aR)(i,p)})};return Ln([be(Wi(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;Po(g.channels,p)&&a(i,g.data)}}),Vn((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),mT=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),LF=[ve("channel"),gn("renderComponents"),gn("updateState"),gn("initialData"),Yo("reuseDom",!0)],sZ=Object.freeze({__proto__:null,init:()=>{const t=pt(k.none()),s=()=>t.set(k.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const qc=As({fields:LF,name:"reflecting",active:dT,apis:mT,state:sZ}),Sm=t=>{const s=[],a={};return ms(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?$t.error(s):$t.value(a)},Oj=(t,s,a)=>{const i=bn(Nh.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:we(t.items,g=>OO(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:Ae([ut.config({mode:"acyclic",useTabstopAt:Se(d2)}),ul.memento(i),x5(i,{postprocess:d=>Sm(d).fold(g=>(console.error(g),{}),on)}),Nt("dialog-body-panel",[be(oa(),(d,g)=>{d.getSystem().broadcastOn([Tb],{newFocus:k.some(g.event.target)})})])])}},rZ=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:ZS(t.action),behaviours:is(t.tabButtonBehaviours,[Ct.config({}),ut.config({mode:"execution",useSpace:!0,useEnter:!0}),We.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),HF=Zs({name:"TabButton",configFields:[ne("uid",void 0),ve("value"),Is("dom","dom",qt(()=>({attributes:{role:"tab",id:Je("aria"),"aria-selected":"false"}})),Qr()),gn("action"),ne("domModification",{}),Qo("tabButtonBehaviours",[Ct,ut,We]),ve("view")],factory:rZ}),Wb=J([ve("tabs"),ve("dom"),ne("clickToDismiss",!1),Qo("tabbarBehaviours",[ln,ut]),la(["tabClass","selectedClass"])]),fT=da({factory:HF,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{ln.dehighlight(i,d),lt(i,Hp(),{tabbar:i,button:d})},a=(i,d)=>{ln.highlight(i,d),lt(i,Lp(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=ln.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?K:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),VF=J([fT]),aZ=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:is(t.tabbarBehaviours,[ln.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Ke(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Ke(g.element,"aria-selected","false")}}),ut.config({mode:"flow",getInitial:d=>ln.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),zF=sr({name:"Tabbar",configFields:Wb(),partFields:VF(),factory:aZ}),cZ=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:is(t.tabviewBehaviours,[kt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),iZ=Zs({name:"Tabview",configFields:[Qo("tabviewBehaviours",[kt])],factory:cZ}),Zb=J([ne("selectFirst",!0),Yt("onChangeTab"),Yt("onDismissTab"),ne("tabs",[]),Qo("tabSectionBehaviours",[])]),Aj=Ws({factory:zF,schema:[ve("dom"),vu("markers",[ve("tabClass"),ve("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),lZ=Ws({factory:iZ,name:"tabview"}),uZ=J([Aj,lZ]),Dj=(t,s,a,i)=>{const d=p=>{const y=We.getValue(p);Rn(p,t,"tabview").each(w=>{Rt(t.tabs,_=>_.value===y).each(_=>{const D=_.view();Kr(p.element,"id").each(R=>{Ke(w.element,"aria-labelledby",R)}),kt.set(w,D),t.onChangeTab(w,p,D)})})},g=(p,y)=>{Rn(p,t,"tabbar").each(w=>{y(w).each(_u)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ic(t.tabSectionBehaviours),events:Ln(Ft([t.selectFirst?[Vn((p,y)=>{g(p,ln.getFirst)})]:[],[be(Lp(),(p,y)=>{const w=y.event.button;d(w)}),be(Hp(),(p,y)=>{const w=y.event.button;t.onDismissTab(p,w)})]])),apis:{getViewItems:p=>Rn(p,t,"tabview").map(y=>kt.contents(y)).getOr([]),showTab:(p,y)=>{g(p,E=>{const _=ln.getCandidates(E);return Rt(_,R=>We.getValue(R)===y).filter(R=>!ln.isHighlighted(E,R))})}}}},jb=sr({name:"TabSection",configFields:Zb(),partFields:uZ(),factory:Dj,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),dZ=(t,s,a)=>we(t,(i,d)=>{kt.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return kt.set(a,[]),g.height}),G2=t=>Wr(rp(t,(s,a)=>s>a?-1:s<a?1:0)),mZ=(t,s,a)=>{const i=mp(t).dom,d=Al(t,".tox-dialog-wrap").getOr(t),g=bo(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const y=os(s),E=s.dom.offsetLeft>=a.dom.offsetLeft+fs(a)?Math.max(os(a),y):y,_=parseInt(bo(t,"margin-top"),10)||0,D=parseInt(bo(t,"margin-bottom"),10)||0,P=os(t)+_+D-E;return p-P},fZ=(t,s)=>{Wr(t).each(a=>jb.showTab(s,a.value))},CD=(t,s)=>{Mt(t,"height",s+"px"),Mt(t,"flex-basis",s+"px")},gT=(t,s,a)=>{Al(t,'[role="dialog"]').each(i=>{eo(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Mt(s,"height","0"),Mt(s,"flex-basis","0"),Math.min(g,mZ(i,s,d)))).each(g=>{CD(s,g)})})})},UF=t=>eo(t,'[role="tabpanel"]'),e=t=>{const s=Un();return{extraEvents:[Vn(d=>{const g=d.element;UF(g).each(p=>{Mt(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(y=>{const w=dZ(t,p,y);G2(w).fold(s.clear,s.set)}),gT(g,p,s),mn(p,"visibility"),fZ(t,d),requestAnimationFrame(()=>{gT(g,p,s)})})}),be(mi(),d=>{const g=d.element;UF(g).each(p=>{gT(g,p,s)})}),be(D3,(d,g)=>{const p=d.element;UF(p).each(y=>{const w=hi(so(y));Mt(y,"visibility","hidden");const E=Ns(y,"height").map(R=>parseInt(R,10));mn(y,"height"),mn(y,"flex-basis");const _=y.dom.getBoundingClientRect().height;E.forall(R=>_>R)?(s.set(_),gT(p,y,s)):E.each(R=>{CD(y,R)}),mn(y,"visibility"),w.each(oc)})})],selectFirst:!1}},n="send-data-to-section",o="send-data-to-view",r=(t,s,a)=>{const i=pt({}),d=E=>{const _=We.getValue(E),D=Sm(_).getOr({}),R=i.get(),P=$n(R,D);i.set(P)},g=E=>{const _=i.get();We.setValue(E,_)},p=pt(null),y=we(t.tabs,E=>({value:E.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[jn(a.shared.providers.translate(E.title))],view:()=>[Nh.sketch(_=>({dom:{tag:"div",classes:["tox-form"]},components:we(E.items,D=>OO(_,D,s,a)),formBehaviours:Ae([ut.config({mode:"acyclic",useTabstopAt:Se(d2)}),Nt("TabView.form.events",[Vn(g),ji(d)]),nr.config({channels:Cu([{key:n,value:{onReceive:d}},{key:o,value:{onReceive:g}}])})])}))]})),w=e(y);return jb.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(E,_,D)=>{const R=We.getValue(_);lt(E,VB,{name:R,oldName:p.get()}),p.set(R)},tabs:y,components:[jb.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[zF.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ae([fo.config({})])}),jb.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:w.selectFirst,tabSectionBehaviours:Ae([Nt("tabpanel",w.extraEvents),ut.config({mode:"acyclic"}),Xt.config({find:E=>Wr(jb.getViewItems(E))}),gm(k.none(),E=>(E.getSystem().broadcastOn([n],{}),i.get()),(E,_)=>{i.set(_),E.getSystem().broadcastOn([o],{})})])})},c=(t,s,a,i,d)=>{const g=w=>{const E=w.body;switch(E.type){case"tabpanel":return[r(E,w.initialData,i)];default:return[Oj(E,w.initialData,i)]}},p=(w,E)=>k.some({isTabPanel:()=>E.body.type==="tabpanel"}),y={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(w=>({id:w})).getOr({}),...d?y:{}}},components:[],behaviours:Ae([ul.childAt(0),qc.config({channel:`${Qx}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},u=(t,s,a,i,d)=>c(t,s,k.some(a),i,d),f=(t,s,a)=>{const i=c(t,s,k.none(),a,!1);return jo.parts.body(i)},b=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[oO(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Ae([fo.config({}),Ct.config({})])})]}],behaviours:Ae([ut.config({mode:"acyclic",useTabstopAt:Se(d2)})])};return jo.parts.body(s)};function C(t){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},C(t)}function x(t,s){return x=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},x(t,s)}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(t,s,a){return O()?A=Reflect.construct:A=function(d,g,p){var y=[null];y.push.apply(y,g);var w=Function.bind.apply(d,y),E=new w;return p&&x(E,p.prototype),E},A.apply(null,arguments)}function B(t){return L(t)||z(t)||F(t)||Y()}function L(t){if(Array.isArray(t))return V(t)}function z(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F(t,s){if(t){if(typeof t=="string")return V(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return V(t,s)}}function V(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=t[a];return i}function Y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var X=Object.hasOwnProperty,Q=Object.setPrototypeOf,se=Object.isFrozen,Ce=Object.getPrototypeOf,Ie=Object.getOwnPropertyDescriptor,Pe=Object.freeze,ce=Object.seal,le=Object.create,Te=typeof Reflect<"u"&&Reflect,tt=Te.apply,it=Te.construct;tt||(tt=function(s,a,i){return s.apply(a,i)}),Pe||(Pe=function(s){return s}),ce||(ce=function(s){return s}),it||(it=function(s,a){return A(s,B(a))});var Bt=Ht(Array.prototype.forEach),zt=Ht(Array.prototype.pop),un=Ht(Array.prototype.push),xn=Ht(String.prototype.toLowerCase),ko=Ht(String.prototype.match),Go=Ht(String.prototype.replace),Ss=Ht(String.prototype.indexOf),Me=Ht(String.prototype.trim),je=Ht(RegExp.prototype.test),sn=st(TypeError);function Ht(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return tt(t,s,i)}}function st(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return it(t,a)}}function Be(t,s){Q&&Q(t,null);for(var a=s.length;a--;){var i=s[a];if(typeof i=="string"){var d=xn(i);d!==i&&(se(s)||(s[a]=d),i=d)}t[i]=!0}return t}function De(t){var s=le(null),a;for(a in t)tt(X,t,[a])&&(s[a]=t[a]);return s}function bt(t,s){for(;t!==null;){var a=Ie(t,s);if(a){if(a.get)return Ht(a.get);if(typeof a.value=="function")return Ht(a.value)}t=Ce(t)}function i(d){return console.warn("fallback value for",d),null}return i}var jt=Pe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pn=Pe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qe=Pe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ut=Pe(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wn=Pe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),go=Pe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),On=Pe(["#text"]),Rs=Pe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hc=Pe(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ha=Pe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Kc=Pe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jf=ce(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Jh=ce(/<%[\w\W]*|[\w\W]*%>/gm),Gf=ce(/^data-[\-\w.\u00B7-\uFFFF]/),qf=ce(/^aria-[\-\w]+$/),hT=ce(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pT=ce(/^(?:\w+script|data):/i),bT=ce(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q2=ce(/^html$/i),K2=function(){return typeof window>"u"?null:window},Y2=function(s,a){if(C(s)!=="object"||typeof s.createPolicy!="function")return null;var i=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(i=a.currentScript.getAttribute(d));var g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML:function(y){return y}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function Gb(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K2(),s=function(fe){return Gb(fe)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,i=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,y=t.Element,w=t.NodeFilter,E=t.NamedNodeMap,_=E===void 0?t.NamedNodeMap||t.MozNamedAttrMap:E,D=t.HTMLFormElement,R=t.DOMParser,P=t.trustedTypes,I=y.prototype,Z=bt(I,"cloneNode"),ie=bt(I,"nextSibling"),G=bt(I,"childNodes"),j=bt(I,"parentNode");if(typeof g=="function"){var ue=i.createElement("template");ue.content&&ue.content.ownerDocument&&(i=ue.content.ownerDocument)}var oe=Y2(P,a),ke=oe?oe.createHTML(""):"",xe=i,$e=xe.implementation,Ue=xe.createNodeIterator,Wt=xe.createDocumentFragment,rt=xe.getElementsByTagName,Dt=a.importNode,Et={};try{Et=De(i).documentMode?i.documentMode:{}}catch{}var nn={};s.isSupported=typeof j=="function"&&$e&&typeof $e.createHTMLDocument<"u"&&Et!==9;var mt=jf,Qt=Jh,Fe=Gf,nt=qf,St=pT,Gt=bT,ft=hT,_t=null,Mn=Be({},[].concat(B(jt),B(pn),B(Qe),B(wn),B(On))),dn=null,Mr=Be({},[].concat(B(Rs),B(hc),B(Ha),B(Kc))),to=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),za=null,fl=null,Kf=!0,Yf=!0,tp=!1,Xf=!1,Tm=!1,SD=!1,xD=!1,Yb=!1,GF=!1,qF=!1,Nj=!0,pZ=!0,ED=!1,CT={},wT=null,Pj=Be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),$j=null,Fj=Be({},["audio","video","img","source","image","track"]),bZ=null,Ij=Be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vZ="http://www.w3.org/1998/Math/MathML",yZ="http://www.w3.org/2000/svg",Xb="http://www.w3.org/1999/xhtml",KF=Xb,CZ=!1,ST,oG=["application/xhtml+xml","text/html"],sG="text/html",sC,xT=null,rG=i.createElement("form"),Lj=function(fe){return fe instanceof RegExp||fe instanceof Function},wZ=function(fe){xT&&xT===fe||((!fe||C(fe)!=="object")&&(fe={}),fe=De(fe),_t="ALLOWED_TAGS"in fe?Be({},fe.ALLOWED_TAGS):Mn,dn="ALLOWED_ATTR"in fe?Be({},fe.ALLOWED_ATTR):Mr,bZ="ADD_URI_SAFE_ATTR"in fe?Be(De(Ij),fe.ADD_URI_SAFE_ATTR):Ij,$j="ADD_DATA_URI_TAGS"in fe?Be(De(Fj),fe.ADD_DATA_URI_TAGS):Fj,wT="FORBID_CONTENTS"in fe?Be({},fe.FORBID_CONTENTS):Pj,za="FORBID_TAGS"in fe?Be({},fe.FORBID_TAGS):{},fl="FORBID_ATTR"in fe?Be({},fe.FORBID_ATTR):{},CT="USE_PROFILES"in fe?fe.USE_PROFILES:!1,Kf=fe.ALLOW_ARIA_ATTR!==!1,Yf=fe.ALLOW_DATA_ATTR!==!1,tp=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Xf=fe.SAFE_FOR_TEMPLATES||!1,Tm=fe.WHOLE_DOCUMENT||!1,Yb=fe.RETURN_DOM||!1,GF=fe.RETURN_DOM_FRAGMENT||!1,qF=fe.RETURN_TRUSTED_TYPE||!1,xD=fe.FORCE_BODY||!1,Nj=fe.SANITIZE_DOM!==!1,pZ=fe.KEEP_CONTENT!==!1,ED=fe.IN_PLACE||!1,ft=fe.ALLOWED_URI_REGEXP||ft,KF=fe.NAMESPACE||Xb,fe.CUSTOM_ELEMENT_HANDLING&&Lj(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(to.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&Lj(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(to.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(to.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ST=oG.indexOf(fe.PARSER_MEDIA_TYPE)===-1?ST=sG:ST=fe.PARSER_MEDIA_TYPE,sC=ST==="application/xhtml+xml"?function(at){return at}:xn,Xf&&(Yf=!1),GF&&(Yb=!0),CT&&(_t=Be({},B(On)),dn=[],CT.html===!0&&(Be(_t,jt),Be(dn,Rs)),CT.svg===!0&&(Be(_t,pn),Be(dn,hc),Be(dn,Kc)),CT.svgFilters===!0&&(Be(_t,Qe),Be(dn,hc),Be(dn,Kc)),CT.mathMl===!0&&(Be(_t,wn),Be(dn,Ha),Be(dn,Kc))),fe.ADD_TAGS&&(_t===Mn&&(_t=De(_t)),Be(_t,fe.ADD_TAGS)),fe.ADD_ATTR&&(dn===Mr&&(dn=De(dn)),Be(dn,fe.ADD_ATTR)),fe.ADD_URI_SAFE_ATTR&&Be(bZ,fe.ADD_URI_SAFE_ATTR),fe.FORBID_CONTENTS&&(wT===Pj&&(wT=De(wT)),Be(wT,fe.FORBID_CONTENTS)),pZ&&(_t["#text"]=!0),Tm&&Be(_t,["html","head","body"]),_t.table&&(Be(_t,["tbody"]),delete za.tbody),Pe&&Pe(fe),xT=fe)},Hj=Be({},["mi","mo","mn","ms","mtext"]),Vj=Be({},["foreignobject","desc","title","annotation-xml"]),aG=Be({},["title","style","font","a","script"]),YF=Be({},pn);Be(YF,Qe),Be(YF,Ut);var SZ=Be({},wn);Be(SZ,go);var cG=function(fe){var at=j(fe);(!at||!at.tagName)&&(at={namespaceURI:Xb,tagName:"template"});var Pt=xn(fe.tagName),es=xn(at.tagName);return fe.namespaceURI===yZ?at.namespaceURI===Xb?Pt==="svg":at.namespaceURI===vZ?Pt==="svg"&&(es==="annotation-xml"||Hj[es]):!!YF[Pt]:fe.namespaceURI===vZ?at.namespaceURI===Xb?Pt==="math":at.namespaceURI===yZ?Pt==="math"&&Vj[es]:!!SZ[Pt]:fe.namespaceURI===Xb?at.namespaceURI===yZ&&!Vj[es]||at.namespaceURI===vZ&&!Hj[es]?!1:!SZ[Pt]&&(aG[Pt]||!YF[Pt]):!1},np=function(fe){un(s.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=ke}catch{fe.remove()}}},XF=function(fe,at){try{un(s.removed,{attribute:at.getAttributeNode(fe),from:at})}catch{un(s.removed,{attribute:null,from:at})}if(at.removeAttribute(fe),fe==="is"&&!dn[fe])if(Yb||GF)try{np(at)}catch{}else try{at.setAttribute(fe,"")}catch{}},zj=function(fe){var at,Pt;if(xD)fe="<remove></remove>"+fe;else{var es=ko(fe,/^[\r\n\t ]+/);Pt=es&&es[0]}ST==="application/xhtml+xml"&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var gl=oe?oe.createHTML(fe):fe;if(KF===Xb)try{at=new R().parseFromString(gl,ST)}catch{}if(!at||!at.documentElement){at=$e.createDocument(KF,"template",null);try{at.documentElement.innerHTML=CZ?"":gl}catch{}}var Xc=at.body||at.documentElement;return fe&&Pt&&Xc.insertBefore(i.createTextNode(Pt),Xc.childNodes[0]||null),KF===Xb?rt.call(at,Tm?"html":"body")[0]:Tm?at.documentElement:Xc},Uj=function(fe){return Ue.call(fe.ownerDocument||fe,fe,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT,null,!1)},iG=function(fe){return fe instanceof D&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof _)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function")},TD=function(fe){return C(p)==="object"?fe instanceof p:fe&&C(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},op=function(fe,at,Pt){nn[fe]&&Bt(nn[fe],function(es){es.call(s,at,Pt,xT)})},Wj=function(fe){var at;if(op("beforeSanitizeElements",fe,null),iG(fe)||je(/[\u0080-\uFFFF]/,fe.nodeName))return np(fe),!0;var Pt=sC(fe.nodeName);if(op("uponSanitizeElement",fe,{tagName:Pt,allowedTags:_t}),fe.hasChildNodes()&&!TD(fe.firstElementChild)&&(!TD(fe.content)||!TD(fe.content.firstElementChild))&&je(/<[/\w]/g,fe.innerHTML)&&je(/<[/\w]/g,fe.textContent)||Pt==="select"&&je(/<template/i,fe.innerHTML))return np(fe),!0;if(!_t[Pt]||za[Pt]){if(!za[Pt]&&jj(Pt)&&(to.tagNameCheck instanceof RegExp&&je(to.tagNameCheck,Pt)||to.tagNameCheck instanceof Function&&to.tagNameCheck(Pt)))return!1;if(pZ&&!wT[Pt]){var es=j(fe)||fe.parentNode,gl=G(fe)||fe.childNodes;if(gl&&es)for(var Xc=gl.length,pc=Xc-1;pc>=0;--pc)es.insertBefore(Z(gl[pc],!0),ie(fe))}return np(fe),!0}return fe instanceof y&&!cG(fe)||(Pt==="noscript"||Pt==="noembed")&&je(/<\/no(script|embed)/i,fe.innerHTML)?(np(fe),!0):(Xf&&fe.nodeType===3&&(at=fe.textContent,at=Go(at,mt," "),at=Go(at,Qt," "),fe.textContent!==at&&(un(s.removed,{element:fe.cloneNode()}),fe.textContent=at)),op("afterSanitizeElements",fe,null),!1)},Zj=function(fe,at,Pt){if(Nj&&(at==="id"||at==="name")&&(Pt in i||Pt in rG))return!1;if(!(Yf&&!fl[at]&&je(Fe,at))){if(!(Kf&&je(nt,at))){if(!dn[at]||fl[at]){if(!(jj(fe)&&(to.tagNameCheck instanceof RegExp&&je(to.tagNameCheck,fe)||to.tagNameCheck instanceof Function&&to.tagNameCheck(fe))&&(to.attributeNameCheck instanceof RegExp&&je(to.attributeNameCheck,at)||to.attributeNameCheck instanceof Function&&to.attributeNameCheck(at))||at==="is"&&to.allowCustomizedBuiltInElements&&(to.tagNameCheck instanceof RegExp&&je(to.tagNameCheck,Pt)||to.tagNameCheck instanceof Function&&to.tagNameCheck(Pt))))return!1}else if(!bZ[at]){if(!je(ft,Go(Pt,Gt,""))){if(!((at==="src"||at==="xlink:href"||at==="href")&&fe!=="script"&&Ss(Pt,"data:")===0&&$j[fe])){if(!(tp&&!je(St,Go(Pt,Gt,"")))){if(Pt)return!1}}}}}}return!0},jj=function(fe){return fe.indexOf("-")>0},Gj=function(fe){var at,Pt,es,gl;op("beforeSanitizeAttributes",fe,null);var Xc=fe.attributes;if(Xc){var pc={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:dn};for(gl=Xc.length;gl--;){at=Xc[gl];var JF=at,bc=JF.name,qj=JF.namespaceURI;Pt=bc==="value"?at.value:Me(at.value),es=sC(bc);var uG=Pt;if(pc.attrName=es,pc.attrValue=Pt,pc.keepAttr=!0,pc.forceKeepAttr=void 0,op("uponSanitizeAttribute",fe,pc),Pt=pc.attrValue,!pc.forceKeepAttr){if(!pc.keepAttr){XF(bc,fe);continue}if(je(/\/>/i,Pt)){XF(bc,fe);continue}Xf&&(Pt=Go(Pt,mt," "),Pt=Go(Pt,Qt," "));var dG=sC(fe.nodeName);if(!Zj(dG,es,Pt)){XF(bc,fe);continue}if(Pt!==uG)try{qj?fe.setAttributeNS(qj,bc,Pt):fe.setAttribute(bc,Pt)}catch{XF(bc,fe)}}}op("afterSanitizeAttributes",fe,null)}},lG=function Kt(fe){var at,Pt=Uj(fe);for(op("beforeSanitizeShadowDOM",fe,null);at=Pt.nextNode();)op("uponSanitizeShadowNode",at,null),!Wj(at)&&(at.content instanceof d&&Kt(at.content),Gj(at));op("afterSanitizeShadowDOM",fe,null)};return s.sanitize=function(Kt,fe){var at,Pt,es,gl,Xc;if(CZ=!Kt,CZ&&(Kt="<!-->"),typeof Kt!="string"&&!TD(Kt)){if(typeof Kt.toString!="function")throw sn("toString is not a function");if(Kt=Kt.toString(),typeof Kt!="string")throw sn("dirty is not a string, aborting")}if(!s.isSupported){if(C(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Kt=="string")return t.toStaticHTML(Kt);if(TD(Kt))return t.toStaticHTML(Kt.outerHTML)}return Kt}if(SD||wZ(fe),s.removed=[],typeof Kt=="string"&&(ED=!1),ED){if(Kt.nodeName){var pc=sC(Kt.nodeName);if(!_t[pc]||za[pc])throw sn("root node is forbidden and cannot be sanitized in-place")}}else if(Kt instanceof p)at=zj("<!---->"),Pt=at.ownerDocument.importNode(Kt,!0),Pt.nodeType===1&&Pt.nodeName==="BODY"||Pt.nodeName==="HTML"?at=Pt:at.appendChild(Pt);else{if(!Yb&&!Xf&&!Tm&&Kt.indexOf("<")===-1)return oe&&qF?oe.createHTML(Kt):Kt;if(at=zj(Kt),!at)return Yb?null:qF?ke:""}at&&xD&&np(at.firstChild);for(var JF=Uj(ED?Kt:at);es=JF.nextNode();)es.nodeType===3&&es===gl||Wj(es)||(es.content instanceof d&&lG(es.content),Gj(es),gl=es);if(gl=null,ED)return Kt;if(Yb){if(GF)for(Xc=Wt.call(at.ownerDocument);at.firstChild;)Xc.appendChild(at.firstChild);else Xc=at;return dn.shadowroot&&(Xc=Dt.call(a,Xc,!0)),Xc}var bc=Tm?at.outerHTML:at.innerHTML;return Tm&&_t["!doctype"]&&at.ownerDocument&&at.ownerDocument.doctype&&at.ownerDocument.doctype.name&&je(q2,at.ownerDocument.doctype.name)&&(bc="<!DOCTYPE "+at.ownerDocument.doctype.name+`>
`+bc),Xf&&(bc=Go(bc,mt," "),bc=Go(bc,Qt," ")),oe&&qF?oe.createHTML(bc):bc},s.setConfig=function(Kt){wZ(Kt),SD=!0},s.clearConfig=function(){xT=null,SD=!1},s.isValidAttribute=function(Kt,fe,at){xT||wZ({});var Pt=sC(Kt),es=sC(fe);return Zj(Pt,es,at)},s.addHook=function(Kt,fe){typeof fe=="function"&&(nn[Kt]=nn[Kt]||[],un(nn[Kt],fe))},s.removeHook=function(Kt){if(nn[Kt])return zt(nn[Kt])},s.removeHooks=function(Kt){nn[Kt]&&(nn[Kt]=[])},s.removeAllHooks=function(){nn={}},s}var nu=Gb();const qb=t=>nu().sanitize(t),Qh=ob.deviceType.isTouch(),xm=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),X2=(t,s)=>jo.parts.close(js.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Ae([fo.config({})])})),J2=()=>jo.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),td=(t,s)=>jo.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:zf(`<p>${qb(s.translate(t))}</p>`)}]}]}),Em=t=>jo.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Q2=(t,s)=>[Gl.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Gl.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],eC=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return jo.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!d2(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:zf(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Qh?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Ae([Ct.config({}),Nt("dialog-events",t.dialogEvents.concat([Rd(oa(),(g,p)=>{fc.isBlocked(g)?K():ut.focusIn(g)}),be(Ip(),(g,p)=>{g.getSystem().broadcastOn([Tb],{newFocus:p.event.newFocus})})])),Nt("scroll-lock",[Vn(()=>{So(Ys(),d)}),ji(()=>{ao(Ys(),d)})]),...t.extraBehaviours]),eventOrder:{[sa()]:["dialog-events"],[Xa()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Dd()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},tC=t=>js.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:Ae([fo.config({})]),components:[rl("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{rn(s,Bf)}}),vT=(t,s,a,i)=>{const d=g=>[jn(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Ae([qc.config({channel:`${Yl}-${s}`,initialData:t,renderComponents:d})])}},yT=()=>({dom:zf('<div class="tox-dialog__draghandle"></div>')}),WF=(t,s,a,i)=>Gl.sketch({dom:zf('<div class="tox-dialog__header"></div>'),components:[vT(t,s,k.some(a),i),yT(),tC(i)],containerBehaviours:Ae([Zh.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ia(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),ou=(t,s,a)=>{const i=jo.parts.title(vT(t,s,k.none(),a)),d=jo.parts.draghandle(yT()),g=jo.parts.close(tC(a)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return Gl.sketch({dom:zf('<div class="tox-dialog__header"></div>'),components:p})},ep=(t,s,a)=>ou({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),re=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:zf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),ae=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=eo(t().element,".tox-dialog__header").map(g=>os(g));jo.setBusy(t(),(g,p)=>re(i.message,p,s,d))},onUnblock:()=>{jo.setIdle(t())}}),Ne=(t,s,a,i)=>{const d=(g,p)=>k.some(p);return Hs(eC({...t,firstTabstop:1,lazySink:i.shared.getSink,extraBehaviours:[qc.config({channel:`${Jx}-${t.id}`,updateState:d,initialData:s}),hm({}),...t.extraBehaviours],onEscape:g=>{rn(g,Bf)},dialogEvents:a,eventOrder:{[Wi()]:[qc.name(),nr.name()],[Xa()]:["scroll-lock",qc.name(),"messages","dialog-events","alloy.base.behaviour"],[Dd()]:["alloy.base.behaviour","dialog-events","messages",qc.name(),"scroll-lock"]}}))},_e=(t,s={})=>{const a=i=>{const d=we(i.items,g=>{const p=Ze(s,g.name).getOr(pt(!1));return{...g,storage:p}});return{...i,items:d}};return we(t,i=>i.type==="menu"?a(i):i)},dt=t=>Yn(t,(s,a)=>a.type==="menu"?Yn(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),tn=(t,s)=>[jv(oa(),OL),t(n2,(a,i,d,g)=>{hi(so(g.element)).fold(K,p1),s.onClose(),i.onClose()}),t(Bf,(a,i,d,g)=>{i.onCancel(a),rn(g,n2)}),be(Mx,(a,i)=>s.onUnblock()),be(A3,(a,i)=>s.onBlock(i.event))],Kn=(t,s)=>{const a=(d,g)=>be(d,(p,y)=>{i(p,(w,E)=>{g(t(),w,y.event,p)})}),i=(d,g)=>{qc.getState(d).get().each(p=>{g(p,d)})};return[...tn(a,s),a(Ju,(d,g,p)=>{g.onAction(d,{name:p.name})})]},Ms=(t,s,a)=>{const i=(g,p)=>be(g,(y,w)=>{d(y,(E,_)=>{p(t(),E,w.event,y)})}),d=(g,p)=>{qc.getState(g).get().each(y=>{p(y.internalDialog,g)})};return[...tn(i,s),i(wb,(g,p)=>p.onSubmit(g)),i(dc,(g,p,y)=>{p.onChange(g,{name:y.name})}),i(Ju,(g,p,y,w)=>{const E=()=>w.getSystem().isConnected()?ut.focusIn(w):void 0,_=P=>cv(P,"disabled")||Kr(P,"aria-disabled").exists(I=>I==="true"),D=so(w.element),R=hi(D);p.onAction(g,{name:y.name,value:y.value}),hi(D).fold(E,P=>{_(P)||R.exists(I=>ja(P,I)&&_(I))?E():a().toOptional().filter(I=>!ja(I.element,P)).each(E)})}),i(VB,(g,p,y)=>{p.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),ji(g=>{const p=t();We.setValue(g,p.getData())})]},rr=(t,s)=>gE(t,t.type,s),nC=(t,s,a)=>Rt(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),oC=(t,s)=>{const a=s.map(y=>y.footerButtons).getOr([]),i=km(a,y=>y.align==="start"),d=(y,w)=>Gl.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:we(w,E=>E.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},wD=(t,s,a)=>{const i=(d,g)=>{const p=we(g.buttons,w=>{const E=bn(rr(w,a));return{name:w.name,align:w.align,memento:E}}),y=w=>nC(d,p,w);return k.some({lookupByName:y,footerButtons:p})};return{dom:zf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ae([qc.config({channel:`${sO}-${s}`,initialData:t,updateState:i,renderComponents:oC})])}},gZ=(t,s,a)=>wD(t,s,a),Vt=(t,s,a)=>jo.parts.footer(wD(t,s,a)),me=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Xt.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Nh.getField(i,s).orThunk(()=>t.getFooter().bind(p=>qc.getState(p).get()).bind(p=>p.lookupByName(s)))}else return k.none()},ot=(t,s)=>{const a=t.getRoot();return qc.getState(a).get().map(i=>ks(ro("data",i.dataValidator,s))).getOr(s)},At=(t,s,a)=>{const i=I=>{const Z=t.getRoot();Z.getSystem().isConnected()&&I(Z)},P={getData:()=>{const I=t.getRoot(),Z=I.getSystem().isConnected()?t.getFormWrapper():I,ie=We.getValue(Z),G=lo(a,j=>j.get());return{...ie,...G}},setData:I=>{i(Z=>{const ie=P.getData(),G=$n(ie,I),j=ot(t,G),ue=t.getFormWrapper();We.setValue(ue,j),ms(a,(oe,ke)=>{yn(G,ke)&&oe.set(G[ke])})})},setEnabled:(I,Z)=>{me(t,I).each(Z?yt.enable:yt.disable)},focus:I=>{me(t,I).each(Ct.focus)},block:I=>{if(!En(I))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(Z=>{lt(Z,A3,{message:I})})},unblock:()=>{i(I=>{rn(I,Mx)})},showTab:I=>{i(Z=>{const ie=t.getBody();qc.getState(ie).get().exists(j=>j.isTabPanel())&&Xt.getCurrent(ie).each(j=>{jb.showTab(j,I)})})},redial:I=>{i(Z=>{const ie=t.getId(),G=s(I),j=_e(G.internalDialog.buttons,a);Z.getSystem().broadcastOn([`${Jx}-${ie}`],G),Z.getSystem().broadcastOn([`${Yl}-${ie}`],G.internalDialog),Z.getSystem().broadcastOn([`${Qx}-${ie}`],G.internalDialog),Z.getSystem().broadcastOn([`${sO}-${ie}`],{...G.internalDialog,buttons:j}),P.setData(G.initialData)})},close:()=>{i(I=>{rn(I,n2)})},toggleFullscreen:t.toggleFullscreen};return P},Bo=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},Yc=(t,s,a)=>{const i=Je("dialog"),d=t.internalDialog,g=ep(d.title,i,a),p=f({body:d.body,initialData:d.initialData},i,a),y=_e(d.buttons),w=dt(y),E=Tt(y.length!==0,Vt({buttons:y},i,a)),_=Ms(()=>Z,ae(()=>P,a.shared.providers,s),a.shared.getSink),D=Bo(d.size),P=Ne({id:i,header:g,body:p,footer:E,extraClasses:D,extraBehaviours:[],extraStyles:{}},t,_,a),I=(()=>{const ie=()=>{const j=jo.getBody(P);return Xt.getCurrent(j).getOr(j)},G=()=>{const j="tox-dialog--fullscreen",ue=te.fromDom(P.element.dom);aa(ue,j)?(ao(ue,j),_l(ue,D)):(xr(ue,D),So(ue,j))};return{getId:J(i),getRoot:J(P),getBody:()=>jo.getBody(P),getFooter:()=>jo.getFooter(P),getFormWrapper:ie,toggleFullscreen:G}})(),Z=At(I,s.redial,w);return{dialog:P,instanceApi:Z}},Va=t=>{switch(t){case"medium":return k.some("tox-dialog--width-md");default:return k.none()}},zr=(t,s,a,i=!1)=>{const d=Je("dialog"),g=Je("dialog-label"),p=Je("dialog-content"),y=t.internalDialog,w=Va(y.size),E=(oe,ke)=>k.some(ke),_=bn(WF({title:y.title,draggable:!0},d,g,a.shared.providers)),D=bn(u({body:y.body,initialData:y.initialData},d,p,a,i)),R=_e(y.buttons),P=dt(R),I=Tt(R.length!==0,bn(gZ({buttons:R},d,a))),Z=Ms(()=>ue,{onBlock:oe=>{fc.block(G,(ke,xe)=>{const $e=_.getOpt(G).map(Ue=>os(Ue.element));return re(oe.message,xe,a.shared.providers,$e)})},onUnblock:()=>{fc.unblock(G)},onClose:()=>s.closeWindow()},a.shared.getSink),ie="tox-dialog-inline",G=Hs({dom:{tag:"div",classes:["tox-dialog",ie,...w.toArray()],attributes:{role:"dialog","aria-labelledby":g}},eventOrder:{[Wi()]:[qc.name(),nr.name()],[sa()]:["execute-on-form"],[Xa()]:["reflecting","execute-on-form"]},behaviours:Ae([ut.config({mode:"cyclic",onEscape:oe=>(rn(oe,n2),k.some(!0)),useTabstopAt:oe=>!d2(oe)&&(Cc(oe)!=="button"||po(oe,"disabled")!=="disabled"),firstTabstop:1}),qc.config({channel:`${Jx}-${d}`,updateState:E,initialData:t}),Ct.config({}),Nt("execute-on-form",Z.concat([Rd(oa(),(oe,ke)=>{ut.focusIn(oe)}),be(Ip(),(oe,ke)=>{oe.getSystem().broadcastOn([Tb],{newFocus:ke.event.newFocus})})])),fc.config({getRoot:()=>k.some(G)}),kt.config({}),hm({})]),components:[_.asSpec(),D.asSpec(),...I.map(oe=>oe.asSpec()).toArray()]}),j=()=>{const oe="tox-dialog--fullscreen",ke=te.fromDom(G.element.dom);tk(ke,[oe])?(xr(ke,[oe]),_l(ke,[ie])):(xr(ke,[ie]),_l(ke,[oe]))},ue=At({getId:J(d),getRoot:J(G),getFooter:()=>I.map(oe=>oe.get(G)),getBody:()=>D.get(G),getFormWrapper:()=>{const oe=D.get(G);return Xt.getCurrent(oe).getOr(oe)},toggleFullscreen:j},s.redial,P);return{dialog:G,instanceApi:ue}};var Kb=tinymce.util.Tools.resolve("tinymce.util.URI");const pa=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!En(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{lt(y,A3,{message:p})})},unblock:()=>{s(p=>{rn(p,Mx)})},close:()=>{s(p=>{rn(p,n2)})},sendMessage:p=>{s(y=>{y.getSystem().broadcastOn([m2],p)})}}},ZF=["insertContent","setContent","execCommand","close","block","unblock"],jF=t=>vc(t)&&ZF.indexOf(t.mceAction)!==-1,hZ=t=>!jF(t)&&vc(t)&&yn(t,"mceAction"),Rj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=hl(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Yj=(t,s,a,i)=>{const d=Je("dialog"),g=ep(t.title,d,i),p=b(t),y=t.buttons.bind(j=>j.length===0?k.none():k.some(Vt({buttons:j},d,i))),w=Kn(()=>G,ae(()=>ie,i.shared.providers,s)),E={...t.height.fold(()=>({}),j=>({height:j+"px","max-height":j+"px"})),...t.width.fold(()=>({}),j=>({width:j+"px","max-width":j+"px"}))},_=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],D=new Kb(t.url,{base_uri:new Kb(window.location.href)}),R=`${D.protocol}://${D.host}${D.port?":"+D.port:""}`,P=of(),I=[Nt("messages",[Vn(()=>{const j=kr(te.fromDom(window),"message",ue=>{if(D.isSameOrigin(new Kb(ue.raw.origin))){const oe=ue.raw.data;jF(oe)?Rj(a,G,oe):hZ(oe)&&t.onMessage(G,oe)}});P.set(j)}),ji(P.clear)]),nr.config({channels:{[m2]:{onReceive:(j,ue)=>{eo(j.element,"iframe").each(oe=>{const ke=oe.dom.contentWindow;ar(ke)&&ke.postMessage(ue,R)})}}}})],ie=Ne({id:d,header:g,body:p,footer:y,extraClasses:_,extraBehaviours:I,extraStyles:E},t,w,i),G=pa(ie);return{dialog:ie,instanceApi:G}},Xj=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{jo.hide(E),d()},p=bn(gE({name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),y=J2(),w=X2(g,s.providers),E=Hs(eC({lazySink:()=>s.getSink(),header:xm(y,w),body:td(i,s.providers),footer:k.some(Em(Q2([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[be(Bf,g)],eventOrder:{}}));jo.show(E);const _=p.get(E);Ct.focus(_)}}},Jj=t=>{const s=t.shared;return{open:(i,d)=>{const g=R=>{jo.hide(_),d(R)},p=bn(gE({name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),y=gE({name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),w=J2(),E=X2(()=>g(!1),s.providers),_=Hs(eC({lazySink:()=>s.getSink(),header:xm(w,E),body:td(i,s.providers),footer:k.some(Em(Q2([],[y,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[be(Bf,()=>g(!1)),be(wb,()=>g(!0))],eventOrder:{}}));jo.show(_);const D=p.get(_);Ct.focus(D)}}},Mj=(t,s)=>ks(ro("data",s,t)),Bj=t=>Cb(t,".tox-alert-dialog")||Cb(t,".tox-confirm-dialog"),Qj=(t,s,a)=>s&&a?[]:[Mo.config({contextual:{lazyContext:()=>k.some(vo(te.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Ah(t,i.element).map(g=>({bounds:yb(g),optScrollEnv:k.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:xc(g.element).top})})).getOrThunk(()=>({bounds:wr(),optScrollEnv:k.none()}))})],eG=t=>{const s=t.editor,a=Ly(s),i=Xj(t.backstages.dialog),d=Jj(t.backstages.dialog),g=(I,Z,ie)=>{if(!Ur(Z)){if(Z.inline==="toolbar")return E(I,t.backstages.popup.shared.anchors.inlineDialog(),ie,Z);if(Z.inline==="bottom")return _(I,t.backstages.popup.shared.anchors.inlineBottomDialog(),ie,Z);if(Z.inline==="cursor")return E(I,t.backstages.popup.shared.anchors.cursor(),ie,Z)}return w(I,ie)},p=(I,Z)=>y(I,Z),y=(I,Z)=>{const ie=G=>{const j=Yj(G,{closeWindow:()=>{jo.hide(j.dialog),Z(j.instanceApi)}},s,t.backstages.dialog);return jo.show(j.dialog),j.instanceApi};return ed.openUrl(ie,I)},w=(I,Z)=>{const ie=(G,j,ue)=>{const oe=j,xe=Yc({dataValidator:ue,initialData:oe,internalDialog:G},{redial:ed.redial,closeWindow:()=>{jo.hide(xe.dialog),Z(xe.instanceApi)}},t.backstages.dialog);return jo.show(xe.dialog),xe.instanceApi.setData(oe),xe.instanceApi};return ed.open(ie,I)},E=(I,Z,ie,G)=>{const j=(ue,oe,ke)=>{const xe=Mj(oe,ke),$e=Un(),Ue=t.backstages.popup.shared.header.isPositionedAtTop(),Wt={dataValidator:ke,initialData:xe,internalDialog:ue},rt=()=>$e.on(mt=>{co.reposition(mt),Mo.refresh(mt)}),Dt=zr(Wt,{redial:ed.redial,closeWindow:()=>{$e.on(co.hide),s.off("ResizeEditor",rt),$e.clear(),ie(Dt.instanceApi)}},t.backstages.popup,G.ariaAttrs),Et=Hs(co.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...Ue?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ae([Nt("window-manager-inline-events",[be(Tu(),(mt,Qt)=>{rn(Dt.dialog,Bf)})]),...Qj(s,a,Ue)]),isExtraPart:(mt,Qt)=>Bj(Qt)}));$e.set(Et);const nn=()=>{const mt=s.inline?Ys():te.fromDom(s.getContainer()),Qt=vo(mt);return k.some(Qt)};return co.showWithinBounds(Et,Er(Dt.dialog),{anchor:Z},nn),(!a||!Ue)&&(Mo.refresh(Et),s.on("ResizeEditor",rt)),Dt.instanceApi.setData(xe),ut.focusIn(Dt.dialog),Dt.instanceApi};return ed.open(j,I)},_=(I,Z,ie,G)=>{const j=(ue,oe,ke)=>{const xe=Mj(oe,ke),$e=Un(),Ue=t.backstages.popup.shared.header.isPositionedAtTop(),Wt={dataValidator:ke,initialData:xe,internalDialog:ue},rt=()=>$e.on(mt=>{co.reposition(mt),Mo.refresh(mt)}),Dt=zr(Wt,{redial:ed.redial,closeWindow:()=>{$e.on(co.hide),s.off("ResizeEditor ScrollWindow ElementScroll",rt),$e.clear(),ie(Dt.instanceApi)}},t.backstages.popup,G.ariaAttrs),Et=Hs(co.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...Ue?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ae([Nt("window-manager-inline-events",[be(Tu(),(mt,Qt)=>{rn(Dt.dialog,Bf)})]),Mo.config({contextual:{lazyContext:()=>k.some(vo(te.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:mt=>Ah(s,mt.element).map(Fe=>({bounds:yb(Fe),optScrollEnv:k.some({currentScrollTop:Fe.element.dom.scrollTop,scrollElmTop:xc(Fe.element).top})})).getOrThunk(()=>({bounds:wr(),optScrollEnv:k.none()}))})]),isExtraPart:(mt,Qt)=>Bj(Qt)}));$e.set(Et);const nn=()=>t.backstages.popup.shared.getSink().toOptional().bind(mt=>{const Qt=Ah(s,mt.element),Fe=15,nt=Qt.map(ft=>yb(ft)).getOr(wr()),St=vo(te.fromDom(s.getContentAreaContainer())),Gt=Cv(St,nt);return k.some(mo(Gt.x,Gt.y,Gt.width,Gt.height-Fe))});return co.showWithinBounds(Et,Er(Dt.dialog),{anchor:Z},nn),Mo.refresh(Et),s.on("ResizeEditor ScrollWindow ElementScroll",rt),Dt.instanceApi.setData(xe),ut.focusIn(Dt.dialog),Dt.instanceApi};return ed.open(j,I)};return{open:g,openUrl:p,alert:(I,Z)=>{i.open(I,Z)},close:I=>{I.close()},confirm:(I,Z)=>{d.open(I,Z)}}},tG=t=>{t4(t),h8(t),UA(t)};var nG=()=>{Fm.add("silver",t=>{tG(t);let s=()=>wr();const{dialogs:a,popups:i,renderUI:d}=KU(t,{getPopupSinkBounds:()=>s()}),g=async()=>{const w=await d();return Ah(t,i.getMothership().element).each(_=>{s=()=>yb(_)}),w};j8.register(t,i.backstage.shared);const p=eG({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),y=()=>MR(t,{backstage:i.backstage},i.getMothership());return{renderUI:g,getWindowManagerImpl:J(p),getNotificationManagerImpl:y}})};nG()})();(function(){var ET=tinymce.util.Tools.resolve("tinymce.ModelManager");const Jb=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},TT=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Jb(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Jf=l=>m=>TT(m)===l,Qf=l=>m=>typeof m===l,nd=l=>m=>l===m,eg=Jf("string"),En=Jf("object"),vc=Jf("array"),rC=nd(null),Ri=Qf("boolean"),su=nd(void 0),hl=l=>l==null,Ur=l=>!hl(l),Mi=Qf("function"),ar=Qf("number"),gt=()=>{},Bi=(l,m)=>(...h)=>l(m.apply(null,h)),ru=(l,m)=>h=>l(m(h)),K=l=>()=>l,Sn=l=>l,sp=(l,m)=>l===m;function An(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const J=l=>m=>!l(m),on=l=>()=>{throw new Error(l)},Bs=l=>l(),cn=K(!1),Se=K(!0);class q{constructor(m,h){this.tag=m,this.value=h}static some(m){return new q(!0,m)}static none(){return q.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?q.some(m(this.value)):q.none()}bind(m){return this.tag?m(this.value):q.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:q.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Ur(m)?q.some(m):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const ba=Array.prototype.slice,Dn=Array.prototype.indexOf,vt=Array.prototype.push,k=(l,m)=>Dn.call(l,m),No=(l,m)=>k(l,m)>-1,Le=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return!0}return!1},ho=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},Ot=(l,m)=>{const h=l.length,v=new Array(h);for(let S=0;S<h;S++){const T=l[S];v[S]=m(T,S)}return v},Ee=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];m(S,h)}},Po=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},va=(l,m)=>{const h=[],v=[];for(let S=0,T=l.length;S<T;S++){const M=l[S];(m(M,S)?h:v).push(M)}return{pass:h,fail:v}},$o=(l,m)=>{const h=[];for(let v=0,S=l.length;v<S;v++){const T=l[v];m(T,v)&&h.push(T)}return h},Br=(l,m,h)=>(Po(l,(v,S)=>{h=m(h,v,S)}),h),we=(l,m,h)=>(Ee(l,(v,S)=>{h=m(h,v,S)}),h),Xe=(l,m,h)=>{for(let v=0,S=l.length;v<S;v++){const T=l[v];if(m(T,v))return q.some(T);if(h(T,v))break}return q.none()},N=(l,m)=>Xe(l,m,cn),km=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return q.some(h)}return q.none()},Wn=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!vc(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);vt.apply(m,l[h])}return m},ts=(l,m)=>Wn(Ot(l,m)),Yn=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const S=l[h];if(m(S,h)!==!0)return!1}return!0},kT=l=>{const m=ba.call(l,0);return m.reverse(),m},Rt=(l,m)=>{const h={};for(let v=0,S=l.length;v<S;v++){const T=l[v];h[String(T)]=m(T,v)}return h},no=(l,m)=>{const h=ba.call(l,0);return h.sort(m),h},Ft=(l,m)=>m>=0&&m<l.length?q.some(l[m]):q.none(),he=l=>Ft(l,0),au=l=>Ft(l,l.length-1),br=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return q.none()},ht=Object.keys,od=Object.hasOwnProperty,_o=(l,m)=>{const h=ht(l);for(let v=0,S=h.length;v<S;v++){const T=h[v],M=l[T];m(M,T)}},rp=(l,m)=>Fo(l,(h,v)=>({k:v,v:m(h,v)})),Fo=(l,m)=>{const h={};return _o(l,(v,S)=>{const T=m(v,S);h[T.k]=T.v}),h},Wr=l=>(m,h)=>{l[h]=m},ap=(l,m,h,v)=>{_o(l,(S,T)=>{(m(S,T)?h:v)(S,T)})},Ua=(l,m)=>{const h={};return ap(l,m,Wr(h),gt),h},Gs=(l,m)=>{const h=[];return _o(l,(v,S)=>{h.push(m(v,S))}),h},io=l=>Gs(l,Sn),cp=(l,m)=>ms(l,m)?q.from(l[m]):q.none(),ms=(l,m)=>od.call(l,m),lo=(l,m)=>ms(l,m)&&l[m]!==void 0&&l[m]!==null,tg=l=>{for(const m in l)if(od.call(l,m))return!1;return!0},vr=typeof window<"u"?window:Function("return this;")(),cu=(l,m)=>{let h=m??vr;for(let v=0;v<l.length&&h!==void 0&&h!==null;++v)h=h[l[v]];return h},Zr=(l,m)=>{const h=l.split(".");return cu(h,m)},sd=(l,m)=>Zr(l,m),ip=(l,m)=>{const h=sd(l,m);if(h==null)throw new Error(l+" not available on this browser");return h},yr=Object.getPrototypeOf,Qb=l=>ip("HTMLElement",l),Ze=l=>{const m=Zr("ownerDocument.defaultView",l);return En(l)&&(Qb(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(yr(l).constructor.name))},yn=8,Wa=9,ya=11,lp=1,rd=3,oo=l=>l.dom.nodeName.toLowerCase(),ad=l=>l.dom.nodeType,_m=l=>m=>ad(m)===l,Xn=l=>ad(l)===yn||oo(l)==="#comment",Tt=l=>jr(l)&&Ze(l.dom),jr=_m(lp),cd=_m(rd),up=_m(Wa),ev=_m(ya),Gr=l=>m=>jr(m)&&oo(m)===l,cr=(l,m,h)=>{if(eg(h)||Ri(h)||ar(h))l.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",l),new Error("Attribute value was not simple")},ns=(l,m,h)=>{cr(l.dom,m,h)},Ni=(l,m)=>{const h=l.dom;_o(m,(v,S)=>{cr(h,S,v)})},dp=(l,m)=>{_o(m,(h,v)=>{h.fold(()=>{Io(l,v)},S=>{cr(l.dom,v,S)})})},pl=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},Ca=(l,m)=>q.from(pl(l,m)),Io=(l,m)=>{l.dom.removeAttribute(m)},yc=l=>we(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),id=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,l),new Error(S)}return bl(v.childNodes[0])},_T=(l,m)=>{const v=(m||document).createElement(l);return bl(v)},OT=(l,m)=>{const v=(m||document).createTextNode(l);return bl(v)},bl=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},te={fromHtml:id,fromTag:_T,fromText:OT,fromDom:bl,fromPoint:(l,m,h)=>q.from(l.dom.elementFromPoint(m,h)).map(bl)},qr=(l,m)=>{const h=l.dom;if(h.nodeType!==lp)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Om=l=>l.nodeType!==lp&&l.nodeType!==Wa&&l.nodeType!==ya||l.childElementCount===0,aC=(l,m)=>{const h=m===void 0?document:m.dom;return Om(h)?[]:Ot(h.querySelectorAll(l),te.fromDom)},tv=(l,m)=>{const h=m===void 0?document:m.dom;return Om(h)?q.none():q.from(h.querySelector(l)).map(te.fromDom)},Jn=(l,m)=>l.dom===m.dom,nv=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},AT=qr,ng=l=>te.fromDom(l.dom.ownerDocument),Am=l=>up(l)?l:ng(l),qs=l=>te.fromDom(Am(l).dom.documentElement),xs=l=>te.fromDom(Am(l).dom.defaultView),vl=l=>q.from(l.dom.parentNode).map(te.fromDom),Cc=l=>q.from(l.dom.parentElement).map(te.fromDom),ld=(l,m)=>{const h=Mi(m)?m:cn;let v=l.dom;const S=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const T=v.parentNode,M=te.fromDom(T);if(S.push(M),h(M)===!0)break;v=T}return S},og=l=>q.from(l.dom.previousSibling).map(te.fromDom),Dm=l=>q.from(l.dom.nextSibling).map(te.fromDom),Pn=l=>Ot(l.dom.childNodes,te.fromDom),wa=(l,m)=>{const h=l.dom.childNodes;return q.from(h[m]).map(te.fromDom)},DT=l=>wa(l,0),ud=(l,m)=>{vl(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},iu=(l,m)=>{Dm(l).fold(()=>{vl(l).each(S=>{Oo(S,m)})},v=>{ud(v,m)})},Za=(l,m)=>{DT(l).fold(()=>{Oo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Oo=(l,m)=>{l.dom.appendChild(m.dom)},RT=(l,m,h)=>{wa(l,h).fold(()=>{Oo(l,m)},v=>{ud(v,m)})},cC=(l,m)=>{ud(l,m),Oo(m,l)},Bn=(l,m)=>{Ee(m,(h,v)=>{const S=v===0?l:m[v-1];iu(S,h)})},ja=(l,m)=>{Ee(m,h=>{Oo(l,h)})},Sa=l=>{l.dom.textContent="",Ee(Pn(l),m=>{Ks(m)})},Ks=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},mp=l=>{const m=Pn(l);m.length>0&&Bn(l,m),Ks(l)},dd=(l,m)=>te.fromDom(l.dom.cloneNode(m)),wc=l=>dd(l,!1),md=l=>dd(l,!0),Jc=(l,m)=>{const h=te.fromTag(m),v=yc(l);return Ni(h,v),h},iC=(l,m)=>{const h=Jc(l,m),v=Pn(md(l));return ja(h,v),h},ov=(l,m)=>{const h=Jc(l,m);iu(l,h);const v=Pn(l);return ja(h,v),Ks(l),h},lC=["tfoot","thead","tbody","colgroup"],Qc=l=>No(lC,l),lu=(l,m)=>({rows:l,columns:m}),fp=(l,m)=>({row:l,column:m}),gp=(l,m,h)=>({element:l,rowspan:m,colspan:h}),sv=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),rv=(l,m,h,v,S,T)=>({element:l,rowspan:m,colspan:h,row:v,column:S,isLocked:T}),sg=(l,m,h)=>({element:l,cells:m,section:h}),uC=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),so=(l,m,h)=>({element:l,isNew:m,isLocked:h}),Sc=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),MT=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),av=(l,m,h)=>({element:l,colspan:m,column:h}),ei=(l,m)=>({element:l,columns:m}),BT=l=>ev(l)&&Ur(l.dom.host),hp=Mi(Element.prototype.attachShadow)&&Mi(Node.prototype.getRootNode),Es=K(hp),Ys=hp?l=>te.fromDom(l.dom.getRootNode()):Am,fd=l=>{const m=Ys(l);return BT(m)?q.some(m):q.none()},dC=l=>te.fromDom(l.dom.host),Ke=l=>{if(Es()&&Ur(l.target)){const m=te.fromDom(l.target);if(jr(m)&&mC(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return he(h)}}return q.from(l.target)},mC=l=>Ur(l.dom.shadowRoot),po=l=>{const m=cd(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return fd(te.fromDom(m)).fold(()=>h.body.contains(m),ru(po,dC))},Kr=()=>cv(te.fromDom(document)),cv=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return te.fromDom(m)},qo=(l,m,h)=>$o(ld(l,h),m),NT=(l,m)=>$o(Pn(l),m),rg=(l,m)=>{let h=[];return Ee(Pn(l),v=>{m(v)&&(h=h.concat([v])),h=h.concat(rg(v,m))}),h},ag=(l,m,h)=>qo(l,v=>qr(v,m),h),Mt=(l,m)=>NT(l,h=>qr(h,m)),xa=(l,m)=>aC(m,l);var Re=(l,m,h,v,S)=>l(h,v)?q.some(h):Mi(S)&&S(h)?q.none():m(h,v,S);const bo=(l,m,h)=>{let v=l.dom;const S=Mi(h)?h:cn;for(;v.parentNode;){v=v.parentNode;const T=te.fromDom(v);if(m(T))return q.some(T);if(S(T))break}return q.none()},cg=(l,m,h)=>Re((S,T)=>T(S),bo,l,m,h),Ns=(l,m)=>{const h=S=>m(te.fromDom(S));return N(l.dom.childNodes,h).map(te.fromDom)},ir=(l,m)=>{const h=v=>{for(let S=0;S<v.childNodes.length;S++){const T=te.fromDom(v.childNodes[S]);if(m(T))return q.some(T);const M=h(v.childNodes[S]);if(M.isSome())return M}return q.none()};return h(l.dom)},uu=(l,m,h)=>bo(l,v=>qr(v,m),h),mn=(l,m)=>Ns(l,h=>qr(h,m)),yl=(l,m)=>tv(m,l),Ps=(l,m,h)=>Re((S,T)=>qr(S,T),uu,l,m,h),Rm=(l,m,h=sp)=>l.exists(v=>h(v,m)),os=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},du=(l,m)=>l!=null?m(l):q.none(),iv=(l,m)=>l?q.some(m):q.none(),lv=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,fn=(l,m,h=0,v)=>{const S=l.indexOf(m,h);return S!==-1?su(v)?!0:S+m.length<=v:!1},uv=(l,m)=>lv(l,m,0),mu=(l,m)=>lv(l,m,l.length-m.length),gd=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),ig=l=>l.length>0,Qn=l=>{const m=parseFloat(l);return isNaN(m)?q.none():q.some(m)},fs=l=>l.style!==void 0&&Mi(l.style.getPropertyValue),ti=(l,m,h)=>{if(!eg(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",l),new Error("CSS value must be a string: "+h);fs(l)&&l.style.setProperty(m,h)},PT=(l,m)=>{fs(l)&&l.style.removeProperty(m)},uo=(l,m,h)=>{const v=l.dom;ti(v,m,h)},Xs=(l,m)=>{const h=l.dom;_o(m,(v,S)=>{ti(h,S,v)})},Js=(l,m)=>{const h=l.dom,S=window.getComputedStyle(h).getPropertyValue(m);return S===""&&!po(l)?fC(h,m):S},fC=(l,m)=>fs(l)?l.style.getPropertyValue(m):"",dv=(l,m)=>{const h=l.dom,v=fC(h,m);return q.from(v).filter(S=>S.length>0)},ni=(l,m)=>{const h=l.dom;PT(h,m),Rm(Ca(l,"style").map(gd),"")&&Io(l,"style")},pp=(l,m)=>{const h=l.dom,v=m.dom;fs(h)&&fs(v)&&(v.style.cssText=h.style.cssText)},Zn=(l,m,h=0)=>Ca(l,m).map(v=>parseInt(v,10)).getOr(h),Pi=(l,m)=>Zn(l,m,1),Nr=l=>Gr("col")(l)?Zn(l,"span",1)>1:Pi(l,"colspan")>1,$i=l=>Pi(l,"rowspan")>1,hd=(l,m)=>parseInt(Js(l,m),10),Lo=K(10),oi=K(10),lg=(l,m)=>ug(l,m,Se),ug=(l,m,h)=>ts(Pn(l),v=>qr(v,m)?h(v)?[v]:[]:ug(v,m,h)),gC=(l,m,h=cn)=>{if(h(m))return q.none();if(No(l,oo(m)))return q.some(m);const v=S=>qr(S,"table")||h(S);return uu(m,l.join(","),v)},mv=(l,m)=>gC(["td","th"],l,m),si=l=>lg(l,"th,td"),dg=l=>qr(l,"colgroup")?Mt(l,"col"):ts(fv(l),m=>Mt(m,"col")),Pr=(l,m)=>Ps(l,"table",m),bp=l=>lg(l,"tr"),fv=l=>Pr(l).fold(K([]),m=>Mt(m,"colgroup")),pd=(l,m)=>Ot(l,h=>{if(oo(h)==="colgroup"){const v=Ot(dg(h),S=>{const T=Zn(S,"span",1);return gp(S,1,T)});return sg(h,v,"colgroup")}else{const v=Ot(si(h),S=>{const T=Zn(S,"rowspan",1),M=Zn(S,"colspan",1);return gp(S,T,M)});return sg(h,v,m(h))}}),gv=l=>vl(l).map(m=>{const h=oo(m);return Qc(h)?h:"tbody"}).getOr("tbody"),bd=l=>{const m=bp(l),v=[...fv(l),...m];return pd(v,gv)},hC=(l,m)=>pd(l,()=>m),fu=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},pC=(l,m,h,v)=>{const S=l.isiOS()&&/ipad/i.test(h)===!0,T=l.isiOS()&&!S,M=l.isiOS()||l.isAndroid(),$=M||v("(pointer:coarse)"),H=S||!T&&M&&v("(min-device-width:768px)"),W=T||M&&!H,ee=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,ye=!W&&!H&&!ee;return{isiPad:K(S),isiPhone:K(T),isTablet:K(H),isPhone:K(W),isTouch:K($),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:K(ee),isDesktop:K(ye)}},bC=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},vC=(l,m)=>{const h=bC(l,m);if(!h)return{major:0,minor:0};const v=S=>Number(m.replace(h,"$"+S));return U(v(1),v(2))},Mm=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?yC():vC(l,h)},yC=()=>U(0,0),U=(l,m)=>({major:l,minor:m}),Bm={nu:U,detect:Mm,unknown:yC},Ec=(l,m)=>br(m.brands,h=>{const v=h.brand.toLowerCase();return N(l,S=>{var T;return v===((T=S.brand)===null||T===void 0?void 0:T.toLowerCase())}).map(S=>({current:S.name,version:Bm.nu(parseInt(h.version,10),0)}))}),vp=(l,m)=>{const h=String(m).toLowerCase();return N(l,v=>v.search(h))},kD=(l,m)=>vp(l,m).map(h=>{const v=Bm.detect(h.versionRegexes,m);return{current:h.name,version:v}}),$T=(l,m)=>vp(l,m).map(h=>{const v=Bm.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Cn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Cr=l=>m=>fn(m,l),Fi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>fn(l,"edge/")&&fn(l,"chrome")&&fn(l,"safari")&&fn(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Cn],search:l=>fn(l,"chrome")&&!fn(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>fn(l,"msie")||fn(l,"trident")},{name:"Opera",versionRegexes:[Cn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Cr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Cr("firefox")},{name:"Safari",versionRegexes:[Cn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(fn(l,"safari")||fn(l,"mobile/"))&&fn(l,"applewebkit")}],Cl=[{name:"Windows",search:Cr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>fn(l,"iphone")||fn(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Cr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Cr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Cr("linux"),versionRegexes:[]},{name:"Solaris",search:Cr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Cr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Cr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],hv={browsers:K(Fi),oses:K(Cl)},Nm="Edge",Ea="Chromium",mg="IE",pv="Opera",CC="Firefox",Tc="Safari",fg=()=>bv({current:void 0,version:Bm.unknown()}),bv=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isEdge:v(Nm),isChromium:v(Ea),isIE:v(mg),isOpera:v(pv),isFirefox:v(CC),isSafari:v(Tc)}},Ta={unknown:fg,nu:bv,edge:K(Nm),chromium:K(Ea),ie:K(mg),opera:K(pv),firefox:K(CC),safari:K(Tc)},$s="Windows",gu="iOS",Pm="Android",kc="Linux",Yr="macOS",vv="Solaris",wC="FreeBSD",gg="ChromeOS",yv=()=>yp({current:void 0,version:Bm.unknown()}),yp=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isWindows:v($s),isiOS:v(gu),isAndroid:v(Pm),isMacOS:v(Yr),isLinux:v(kc),isSolaris:v(vv),isFreeBSD:v(wC),isChromeOS:v(gg)}},Ii={unknown:yv,nu:yp,windows:K($s),ios:K(gu),android:K(Pm),linux:K(kc),macos:K(Yr),solaris:K(vv),freebsd:K(wC),chromeos:K(gg)},_D={detect:(l,m,h)=>{const v=hv.browsers(),S=hv.oses(),T=m.bind(H=>Ec(v,H)).orThunk(()=>kD(v,l)).fold(Ta.unknown,Ta.nu),M=$T(S,l).fold(Ii.unknown,Ii.nu),$=pC(M,T,l,h);return{browser:T,os:M,deviceType:$}}},OD=l=>window.matchMedia(l).matches;let FT=fu(()=>_D.detect(navigator.userAgent,q.from(navigator.userAgentData),OD));const hg=()=>FT(),xC=(l,m)=>{const h=($,H)=>{if(!ar(H)&&!H.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+H);const W=$.dom;fs(W)&&(W.style[l]=H+"px")},v=$=>{const H=m($);if(H<=0||H===null){const W=Js($,l);return parseFloat(W)||0}return H},S=v,T=($,H)=>we(H,(W,ee)=>{const ye=Js($,ee),ze=ye===void 0?0:parseInt(ye,10);return isNaN(ze)?W:W+ze},0);return{set:h,get:v,getOuter:S,aggregate:T,max:($,H,W)=>{const ee=T($,W);return H>ee?H-ee:0}}},$m=(l,m)=>Qn(l).getOr(m),mo=(l,m,h)=>$m(Js(l,m),h),vo=(l,m,h,v)=>{const S=mo(l,`padding-${h}`,0),T=mo(l,`padding-${v}`,0),M=mo(l,`border-${h}-width`,0),$=mo(l,`border-${v}-width`,0);return m-S-T-M-$},Ga=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:vo(l,v,"left","right")},Cv=l=>mo(l,"height",l.dom.offsetHeight),IT=l=>mo(l,"width",l.dom.offsetWidth),wr=l=>Ga(l,"content-box"),Fm=xC("width",l=>l.dom.offsetWidth),ka=l=>Fm.get(l),Li=l=>Fm.getOuter(l),EC=wr,$t=IT,Xr=(l,m,h)=>{const v=l.cells,S=v.slice(0,m),T=v.slice(m),M=S.concat(h).concat(T);return TC(l,M)},hu=(l,m,h)=>Xr(l,m,[h]),Im=(l,m,h)=>{const v=l.cells;v[m]=h},TC=(l,m)=>Sc(l.element,m,l.section,l.isNew),kC=(l,m)=>{const h=l.cells,v=Ot(h,m);return Sc(l.element,v,l.section,l.isNew)},Jr=(l,m)=>l.cells[m],ss=(l,m)=>Jr(l,m).element,_a=l=>l.cells.length,rs=l=>{const m=va(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},_C=(l,m,h)=>{const v=Ot(l.cells,h);return Sc(m(l.element),v,l.section,!0)},Cp="data-snooker-locked-cols",Ho=l=>Ca(l,Cp).bind(m=>q.from(m.match(/\d+/g))).map(m=>Rt(m,Se)),gs=l=>{const m=we(rs(l).rows,(v,S)=>(Ee(S.cells,(T,M)=>{T.isLocked&&(v[M]=!0)}),v),{}),h=Gs(m,(v,S)=>parseInt(S,10));return no(h)},ri=(l,m)=>l+","+m,wp=(l,m,h)=>q.from(l.access[ri(m,h)]),Ko=(l,m,h)=>{const v=wv(l,S=>h(m,S.element));return v.length>0?q.some(v[0]):q.none()},wv=(l,m)=>{const h=ts(l.all,v=>v.cells);return $o(h,m)},OC=l=>{const m={};let h=0;return Ee(l.cells,v=>{const S=v.colspan;ho(S,T=>{const M=h+T;m[M]=av(v.element,S,M)}),h+=S}),m},$n=l=>{const m={},h=[],S=he(l).map(He=>He.element).bind(Pr).bind(Ho).getOr({});let T=0,M=0,$=0;const{pass:H,fail:W}=va(l,He=>He.section==="colgroup");Ee(W,He=>{const pe=[];Ee(He.cells,Ve=>{let ge=0;for(;m[ri($,ge)]!==void 0;)ge++;const et=lo(S,ge.toString()),wt=rv(Ve.element,Ve.rowspan,Ve.colspan,$,ge,et);for(let It=0;It<Ve.colspan;It++)for(let qn=0;qn<Ve.rowspan;qn++){const Wo=$+qn,Ro=ge+It,mr=ri(Wo,Ro);m[mr]=wt,M=Math.max(M,Ro+1)}pe.push(wt)}),T++,h.push(sg(He.element,pe,He.section)),$++});const{columns:ee,colgroups:ye}=au(H).map(He=>{const pe=OC(He);return{colgroups:[ei(He.element,io(pe))],columns:pe}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:lu(T,M),access:m,all:h,columns:ee,colgroups:ye}},qt={fromTable:l=>{const m=bd(l);return $n(m)},generate:$n,getAt:wp,findItem:Ko,filterItems:wv,justCells:l=>ts(l.all,m=>m.cells),justColumns:l=>io(l.columns),hasColumns:l=>ht(l.columns).length>0,getColumnAt:(l,m)=>q.from(l.columns[m])},Hm=(l,m=Se)=>{const h=l.grid,v=ho(h.columns,Sn),S=ho(h.rows,Sn);return Ot(v,T=>AC(()=>ts(S,W=>qt.getAt(l,W,T).filter(ee=>ee.column===T).toArray()),W=>W.colspan===1&&m(W.element),()=>qt.getAt(l,0,T)))},AC=(l,m,h)=>{const v=l();return N(v,m).orThunk(()=>q.from(v[0]).orThunk(h)).map(M=>M.element)},xv=l=>{const m=l.grid,h=ho(m.rows,Sn),v=ho(m.columns,Sn);return Ot(h,S=>AC(()=>ts(v,H=>qt.getAt(l,S,H).filter(W=>W.row===S).fold(K([]),W=>[W])),H=>H.rowspan===1,()=>qt.getAt(l,S,0)))},AD=(l,m)=>{if(m<0||m>=l.length-1)return q.none();const h=l[m].fold(()=>{const S=kT(l.slice(0,m));return br(S,(T,M)=>T.map($=>({value:$,delta:M+1})))},S=>q.some({value:S,delta:0})),v=l[m+1].fold(()=>{const S=l.slice(m+1);return br(S,(T,M)=>T.map($=>({value:$,delta:M+1})))},S=>q.some({value:S,delta:1}));return h.bind(S=>v.map(T=>{const M=T.delta+S.delta;return Math.abs(T.value-S.value)/M}))},LT=(l,m)=>h=>DC(h)==="rtl"?m:l,DC=l=>Js(l,"direction")==="rtl"?"rtl":"ltr",xp=xC("height",l=>{const m=l.dom;return po(l)?m.getBoundingClientRect().height:m.offsetHeight}),Ev=l=>xp.get(l),vd=l=>xp.getOuter(l),Vm=Cv,RC=(l,m)=>({left:l,top:m,translate:(v,S)=>RC(l+v,m+S)}),_c=RC,HT=l=>{const m=l.getBoundingClientRect();return _c(m.left,m.top)},zm=(l,m)=>l!==void 0?l:m!==void 0?m:0,Oc=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,S=m.documentElement;if(h===l.dom)return _c(h.offsetLeft,h.offsetTop);const T=zm(v==null?void 0:v.pageYOffset,S.scrollTop),M=zm(v==null?void 0:v.pageXOffset,S.scrollLeft),$=zm(S.clientTop,h.clientTop),H=zm(S.clientLeft,h.clientLeft);return Tv(l).translate(M-H,T-$)},Tv=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?_c(v.offsetLeft,v.offsetTop):po(l)?HT(m):_c(0,0)},kv=(l,m)=>({row:l,y:m}),_v=(l,m)=>({col:l,x:m}),Ov=l=>Oc(l).left+Li(l),Av=l=>Oc(l).left,MC=(l,m)=>_v(l,Av(m)),Dv=(l,m)=>_v(l,Ov(m)),hs=l=>Oc(l).top,BC=(l,m)=>kv(l,hs(m)),Fn=(l,m)=>kv(l,hs(m)+vd(m)),ct=(l,m,h)=>{if(h.length===0)return[];const v=Ot(h.slice(1),(T,M)=>T.map($=>l(M,$))),S=h[h.length-1].map(T=>m(h.length-1,T));return v.concat([S])},ci=l=>-l,qe={delta:Sn,positions:l=>ct(BC,Fn,l),edge:hs},pu=LT({delta:Sn,edge:Av,positions:l=>ct(MC,Dv,l)},{delta:ci,edge:Ov,positions:l=>ct(Dv,MC,l)}),Qr={delta:(l,m)=>pu(m).delta(l,m),positions:(l,m)=>pu(m).positions(l,m),edge:l=>pu(l).edge(l)},Tp={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Vi=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",S=$=>`(?:${$})?`,M=`[+-]?(?:${["Infinity",l+v+S(l)+S(h),v+l+S(h),l+S(h)].join("|")})`;return new RegExp(`^(${M})(.*)$`)})(),Ts=(l,m)=>Le(m,h=>Le(Tp[h],v=>l===v)),qa=(l,m)=>q.from(Vi.exec(l)).bind(v=>{const S=Number(v[1]),T=v[2];return Ts(T,m)?q.some({value:S,unit:T}):q.none()}),pg=/(\d+(\.\d+)?)%/,kp=/(\d+(\.\d+)?)px|em/,Oe=Gr("col"),NC=(l,m,h)=>{const v=Cc(l).getOrThunk(()=>cv(ng(l)));return m(l)/h(v)*100},yd=(l,m)=>{uo(l,"width",m+"px")},wl=(l,m)=>{uo(l,"width",m+"%")},Ac=(l,m)=>{uo(l,"height",m+"px")},_p=l=>Vm(l)+"px",yo=(l,m,h,v)=>{const S=Pr(l).map(T=>{const M=h(T);return Math.floor(m/100*M)}).getOr(m);return v(l,S),S},ro=(l,m,h,v)=>{const S=parseFloat(l);return mu(l,"%")&&oo(m)!=="table"?yo(m,S,h,v):S},ks=l=>{const m=_p(l);return m?ro(m,l,Ev,Ac):Ev(l)},an=(l,m,h)=>{const v=h(l),S=Pi(l,m);return v/S},zi=(l,m)=>dv(l,m).orThunk(()=>Ca(l,m).map(h=>h+"px")),Fs=l=>zi(l,"width"),ii=l=>zi(l,"height"),Is=l=>NC(l,ka,EC),Qs=l=>Oe(l)?ka(l):$t(l),Op=l=>an(l,"rowspan",ks),ve=l=>Fs(l).bind(h=>qa(h,["fixed","relative","empty"])),In=(l,m,h)=>{uo(l,"width",m+h)},Rv=l=>ka(l)+"px",Vo=l=>NC(l,ka,EC)+"%",bu=l=>Fs(l).exists(m=>pg.test(m)),Mv=l=>Fs(l).exists(m=>kp.test(m)),ea=l=>Fs(l).isNone(),PC=K(pg),vu=Gr("col"),$C=l=>Fs(l).getOrThunk(()=>Qs(l)+"px"),Oa=l=>ii(l).getOrThunk(()=>Op(l)+"px"),gn=l=>Ot(qt.justColumns(l),m=>q.from(m.element)),Ui=l=>{const m=hg().browser,h=m.isChromium()||m.isFirefox();return vu(l)?h:!0},Cd=(l,m,h,v,S,T)=>l.filter(v).fold(()=>T(AD(h,m)),M=>S(M)),er=(l,m,h,v)=>{const S=Hm(l),T=qt.hasColumns(l)?gn(l):S,M=[q.some(Qr.edge(m))].concat(Ot(Qr.positions(S,m),H=>H.map(W=>W.x))),$=J(Nr);return Ot(T,(H,W)=>Cd(H,W,M,$,ee=>{if(Ui(ee))return h(ee);{const ye=du(S[W],Sn);return Cd(ye,W,M,$,ze=>v(q.some(ka(ze))),v)}},v))},Bv=l=>l.map(m=>m+"px").getOr(""),wd=(l,m)=>er(l,m,$C,Bv),FC=(l,m,h)=>er(l,m,Is,v=>v.fold(()=>h.minCellWidth(),S=>S/h.pixelWidth()*100)),as=(l,m,h)=>er(l,m,Qs,v=>v.getOrThunk(h.minCellWidth)),Aa=(l,m,h,v,S)=>{const T=xv(l),M=[q.some(h.edge(m))].concat(Ot(h.positions(T,m),$=>$.map(H=>H.y)));return Ot(T,($,H)=>Cd($,H,M,J($i),v,S))},ne=(l,m,h)=>Aa(l,m,h,Op,v=>v.getOrThunk(oi)),$r=(l,m,h)=>Aa(l,m,h,Oa,Bv),Dc=(l,m)=>()=>po(l)?m(l):parseFloat(dv(l,"width").getOr("0")),li=l=>{const m=Dc(l,ka),h=K(0);return{width:m,pixelWidth:m,getWidths:(S,T)=>as(S,l,T),getCellDelta:h,singleColumnWidth:K([0]),minCellWidth:h,setElementWidth:gt,adjustTableWidth:gt,isRelative:!0,label:"none"}},Ka=l=>{const m=Dc(l,H=>parseFloat(Vo(H))),h=Dc(l,ka);return{width:m,pixelWidth:h,getWidths:(H,W)=>FC(H,l,W),getCellDelta:H=>H/h()*100,singleColumnWidth:(H,W)=>[100-H],minCellWidth:()=>Lo()/h()*100,setElementWidth:wl,adjustTableWidth:H=>{const W=m(),ee=H/100*W,ye=W+ee;wl(l,ye)},isRelative:!0,label:"percent"}},Yo=l=>{const m=Dc(l,ka);return{width:m,pixelWidth:m,getWidths:(M,$)=>as(M,l,$),getCellDelta:Sn,singleColumnWidth:(M,$)=>[Math.max(Lo(),M+$)-M],minCellWidth:Lo,setElementWidth:yd,adjustTableWidth:M=>{const $=m()+M;yd(l,$)},isRelative:!1,label:"pixel"}},ps=(l,m)=>PC().exec(m)!==null?Ka(l):Yo(l),ta={getTableSize:l=>Fs(l).fold(()=>li(l),h=>ps(l,h)),pixelSize:Yo,percentageSize:Ka,noneSize:li},Nv=(l,m,h,v,S,T)=>({minRow:l,minCol:m,maxRow:h,maxCol:v,allCells:S,selectedCells:T}),pt=(l,m)=>{const h=l.grid.columns;let S=l.grid.rows,T=h,M=0,$=0;const H=[],W=[];return _o(l.access,ee=>{if(H.push(ee),m(ee)){W.push(ee);const ye=ee.row,ze=ye+ee.rowspan-1,He=ee.column,pe=He+ee.colspan-1;ye<S?S=ye:ze>M&&(M=ze),He<T?T=He:pe>$&&($=pe)}}),Nv(S,T,M,$,H,W)},DD=(l,m,h)=>{const v=l[h].element,S=te.fromTag("td");Oo(S,te.fromTag("br")),(m?Oo:Za)(v,S)},Rc=(l,m,h,v)=>{const S=$o(l,$=>$.section!=="colgroup"),T=m.grid.columns,M=m.grid.rows;for(let $=0;$<M;$++){let H=!1;for(let W=0;W<T;W++)$<h.minRow||$>h.maxRow||W<h.minCol||W>h.maxCol||(qt.getAt(m,$,W).filter(v).isNone()?DD(S,H,$):H=!0)}},bg=(l,m,h,v)=>{_o(h.columns,M=>{(M.column<m.minCol||M.column>m.maxCol)&&Ks(M.element)});const S=$o(lg(l,"tr"),M=>M.dom.childElementCount===0);Ee(S,Ks),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ee(lg(l,"th,td"),M=>{Io(M,"rowspan"),Io(M,"colspan")}),Io(l,Cp),Io(l,"data-snooker-col-series"),ta.getTableSize(l).adjustTableWidth(v)},yu=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const S=as(m,l,h),T=we(S,(W,ee)=>W+ee,0),H=we(S.slice(v.minCol,v.maxCol+1),(W,ee)=>W+ee,0)/T*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(H)},VT=(l,m)=>{const h=ze=>qr(ze.element,m),v=md(l),S=bd(v),T=ta.getTableSize(l),M=qt.generate(S),$=pt(M,h),H="th:not("+m+"),td:not("+m+")",W=ug(v,"th,td",ze=>qr(ze,H));Ee(W,Ks),Rc(S,M,$,h);const ee=qt.fromTable(l),ye=yu(l,ee,T,$);return bg(v,$,M,ye),v},tr=" ",Sr=((l,m)=>{const h=T=>{if(!l(T))throw new Error("Can only get "+m+" value of a "+m+" node");return v(T).getOr("")},v=T=>l(T)?q.from(T.dom.nodeValue):q.none();return{get:h,getOption:v,set:(T,M)=>{if(!l(T))throw new Error("Can only set raw "+m+" value of a "+m+" node");T.dom.nodeValue=M}}})(cd,"text"),Cu=l=>Sr.get(l),Sd=l=>Sr.getOption(l),Um=(l,m)=>Sr.set(l,m),na=l=>oo(l)==="img"?1:Sd(l).fold(()=>Pn(l).length,m=>m.length),Da=l=>Sd(l).filter(m=>m.trim().length!==0||m.indexOf(tr)>-1).isSome(),$v=l=>Tt(l)&&pl(l,"contenteditable")==="false",Dp=["img","br"],vg=l=>Da(l)||No(Dp,oo(l))||$v(l),Rp=l=>ir(l,vg),xd=l=>Mp(l,vg),Mp=(l,m)=>{const h=v=>{const S=Pn(v);for(let T=S.length-1;T>=0;T--){const M=S[T];if(m(M))return q.some(M);const $=h(M);if($.isSome())return $}return q.none()};return h(l)},Bp={scope:["row","col"]},Fv=l=>()=>{const m=te.fromTag("td",l.dom);return Oo(m,te.fromTag("br",l.dom)),m},yg=l=>()=>te.fromTag("col",l.dom),bs=l=>()=>te.fromTag("colgroup",l.dom),ui=l=>()=>te.fromTag("tr",l.dom),Cg=(l,m,h)=>{const v=iC(l,m);return _o(h,(S,T)=>{S===null?Io(v,T):ns(v,T,S)}),v},Ed=l=>l,IC=(l,m,h)=>Rp(l).map(S=>{const T=h.join(","),M=ag(S,T,$=>Jn($,l));return Br(M,($,H)=>{const W=wc(H);return Oo($,W),W},m)}).getOr(m),Ya=(l,m)=>{_o(Bp,(h,v)=>Ca(l,v).filter(S=>No(h,S)).each(S=>ns(m,v,S)))},Td=(l,m,h)=>{const v=(M,$)=>{pp(M.element,$),ni($,"height"),M.colspan!==1&&ni($,"width")},S=M=>{const $=te.fromTag(oo(M.element),m.dom),H=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),W=H.length>0?IC(M.element,$,H):$;return Oo(W,te.fromTag("br")),v(M,$),Ya(M.element,$),l(M.element,$),$};return{col:M=>{const $=te.fromTag(oo(M.element),m.dom);return v(M,$),l(M.element,$),$},colgroup:bs(m),row:ui(m),cell:S,replace:Cg,colGap:yg(m),gap:Fv(m)}},Np=l=>({col:yg(l),colgroup:bs(l),row:ui(l),cell:Fv(l),replace:Ed,colGap:yg(l),gap:Fv(l)}),Iv=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,Pn(te.fromDom(v))},Ls=l=>Ot(l,te.fromDom),oa=l=>m=>m.options.get(l),wg="100%",Mc=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return EC(te.fromDom(v))+"px"},zT=(l,m)=>Od(l)||!sa(l)?m:xu(l)?{...m,width:Mc(l)}:{...m,width:wg},kd=(l,m)=>Od(l)||sa(l)?m:xu(l)?{...m,width:Mc(l)}:{...m,width:wg},_d=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=No(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=No(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},wu=l=>q.from(l.options.get("table_clone_elements")),Su=l=>{const m=l.options.get("object_resizing");return No(m.split(","),"table")},Wm=oa("table_header_type"),Lv=oa("table_column_resizing"),Hv=l=>Lv(l)==="preservetable",Co=l=>Lv(l)==="resizetable",Pp=oa("table_sizing_mode"),di=l=>Pp(l)==="relative",xu=l=>Pp(l)==="fixed",Od=l=>Pp(l)==="responsive",Wi=oa("table_resize_bars"),sa=oa("table_style_by_css"),Sg=oa("table_merge_content_on_paste"),xg=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:kd(l,h)},UT=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:zT(l,h)},wo=oa("table_use_colgroups"),Ad=l=>Ps(l,"[contenteditable]"),Eu=(l,m=!1)=>po(l)?l.dom.isContentEditable:Ad(l).fold(K(m),h=>$p(h)==="true"),$p=l=>l.dom.contentEditable,Eg=l=>te.fromDom(l.getBody()),Sl=l=>m=>Jn(m,Eg(l)),mi=l=>{Io(l,"data-mce-style");const m=h=>Io(h,"data-mce-style");Ee(si(l),m),Ee(dg(l),m),Ee(bp(l),m)},Xa=l=>te.fromDom(l.selection.getStart()),Dd=l=>l.getBoundingClientRect().width,Tu=l=>l.getBoundingClientRect().height,Fp=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return q.from(h).filter(ig)},Ip=l=>/^(\d+(\.\d+)?)%$/.test(l),Vv=l=>/^(\d+(\.\d+)?)px$/.test(l),Zm=l=>cg(l,Gr("table")).exists(Eu),Lp=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,S=m.row,T=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&S<=l.finishRow&&T>=l.startRow},Hp=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,ku=(l,m)=>{let h=!0;const v=An(Hp,m);for(let S=m.startRow;S<=m.finishRow;S++)for(let T=m.startCol;T<=m.finishCol;T++)h=h&&qt.getAt(l,S,T).exists(v);return h?q.some(m):q.none()},zv=(l,m)=>MT(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),rn=(l,m,h)=>{const v=qt.findItem(l,m,Jn),S=qt.findItem(l,h,Jn);return v.bind(T=>S.map(M=>zv(T,M)))},lt=(l,m,h)=>rn(l,m,h).bind(v=>ku(l,v)),_u=(l,m,h,v)=>qt.findItem(l,m,Jn).bind(S=>{const T=h>0?S.row+S.rowspan-1:S.row,M=v>0?S.column+S.colspan-1:S.column;return qt.getAt(l,T+h,M+v).map(H=>H.element)}),Vp=(l,m,h)=>rn(l,m,h).map(v=>{const S=qt.filterItems(l,An(Lp,v));return Ot(S,T=>T.element)}),Tg=(l,m)=>{const h=(v,S)=>nv(S,v);return qt.findItem(l,m,h).map(v=>v.element)},WT=(l,m,h)=>Pr(l).bind(v=>{const S=zp(v);return _u(S,l,m,h)}),Uv=(l,m,h)=>{const v=zp(l);return Vp(v,m,h)},Ln=(l,m,h,v,S)=>{const T=zp(l),M=Jn(l,h)?q.some(m):Tg(T,m),$=Jn(l,S)?q.some(v):Tg(T,v);return M.bind(H=>$.bind(W=>Vp(T,H,W)))},Wv=(l,m,h)=>{const v=zp(l);return lt(v,m,h)},zp=qt.fromTable;var Zv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],be=()=>{const l=W=>te.fromDom(W.dom.cloneNode(!1)),m=W=>Am(W).dom,h=W=>jr(W)?oo(W)==="body"?!0:No(Zv,oo(W)):!1,v=W=>jr(W)?No(["br","img","hr","input"],oo(W)):!1,S=W=>jr(W)&&pl(W,"contenteditable")==="false",T=(W,ee)=>W.dom.compareDocumentPosition(ee.dom),M=(W,ee)=>{const ye=yc(W);Ni(ee,ye)},$=W=>{const ee=oo(W);return No(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ee)},H=W=>jr(W)?Ca(W,"lang"):q.none();return{up:K({selector:uu,closest:Ps,predicate:bo,all:ld}),down:K({selector:xa,predicate:rg}),styles:K({get:Js,getRaw:dv,set:uo,remove:ni}),attrs:K({get:pl,set:ns,remove:Io,copyTo:M}),insert:K({before:ud,after:iu,afterAll:Bn,append:Oo,appendAll:ja,prepend:Za,wrap:cC}),remove:K({unwrap:mp,remove:Ks}),create:K({nu:te.fromTag,clone:l,text:te.fromText}),query:K({comparePosition:T,prevSibling:og,nextSibling:Dm}),property:K({children:Pn,name:oo,parent:vl,document:m,isText:cd,isComment:Xn,isElement:jr,isSpecial:$,getLanguage:H,getText:Cu,setText:Um,isBoundary:h,isEmptyTag:v,isNonEditable:S}),eq:Jn,is:AT}};const Up=(l,m,h,v)=>{const S=h[0],T=h.slice(1);return v(l,m,S,T)},ZT=(l,m,h)=>h.length>0?Up(l,m,h,Wp):q.none(),Wp=(l,m,h,v)=>{const S=m(l,h);return Br(v,(T,M)=>{const $=m(l,M);return jT(l,T,$)},S)},jT=(l,m,h)=>m.bind(v=>h.filter(An(l.eq,v))),Ou=(l,m)=>An(l.eq,m),jv=(l,m,h,v=cn)=>{const S=[m].concat(l.up().all(m)),T=[h].concat(l.up().all(h)),M=ee=>km(ee,v).fold(()=>ee,ze=>ee.slice(0,ze+1)),$=M(S),H=M(T),W=N($,ee=>Le(H,Ou(l,ee)));return{firstpath:$,secondpath:H,shared:W}},Zi=ZT,Zp=jv,Rd=be(),Vn=(l,m)=>Zi(Rd,(h,v)=>l(v),m),ji=(l,m,h)=>Zp(Rd,l,m,h),xl=l=>uu(l,"table"),Bc=(l,m,h)=>{const v=S=>T=>h!==void 0&&h(T)||Jn(T,S);return Jn(l,m)?q.some({boxes:q.some([l]),start:l,finish:m}):xl(l).bind(S=>xl(m).bind(T=>{if(Jn(S,T))return q.some({boxes:Uv(S,l,m),start:l,finish:m});if(nv(S,T)){const M=ag(m,"td,th",v(S)),$=M.length>0?M[M.length-1]:m;return q.some({boxes:Ln(S,l,S,m,T),start:l,finish:$})}else if(nv(T,S)){const M=ag(l,"td,th",v(T)),$=M.length>0?M[M.length-1]:l;return q.some({boxes:Ln(T,l,S,m,T),start:l,finish:$})}else return ji(l,m).shared.bind(M=>Ps(M,"table",h).bind($=>{const H=ag(m,"td,th",v($)),W=H.length>0?H[H.length-1]:m,ee=ag(l,"td,th",v($)),ye=ee.length>0?ee[ee.length-1]:l;return q.some({boxes:Ln($,l,S,m,T),start:ye,finish:W})}))}))},Gv=(l,m)=>{const h=xa(l,m);return h.length>0?q.some(h):q.none()},jp=(l,m)=>N(l,h=>qr(h,m)),El=(l,m,h)=>yl(l,m).bind(v=>yl(l,h).bind(S=>Vn(xl,[v,S]).map(T=>({first:v,last:S,table:T})))),LC=(l,m)=>uu(l,"table").bind(h=>yl(h,m).bind(v=>Bc(v,l).bind(S=>S.boxes.map(T=>({boxes:T,start:S.start,finish:S.finish}))))),GT=(l,m,h,v,S)=>jp(l,S).bind(T=>WT(T,m,h).bind(M=>LC(M,v))),qv=(l,m)=>Gv(l,m),Kv=(l,m,h)=>El(l,m,h).bind(v=>{const S=H=>Jn(l,H),T="thead,tfoot,tbody,table",M=uu(v.first,T,S),$=uu(v.last,T,S);return M.bind(H=>$.bind(W=>Jn(H,W)?Wv(v.table,v.first,v.last):q.none()))}),Au=Sn,RD=l=>{const m=(v,S)=>Ca(v,S).exists(T=>parseInt(T,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&Yn(l,h)?q.some(l):q.none()},Du=(l,m,h)=>m.length<=1?q.none():Kv(l,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),vs="data-mce-selected",Yv="td["+vs+"],th["+vs+"]",Je="["+vs+"]",Xv="data-mce-first-selected",qT="td["+Xv+"],th["+Xv+"]",Jv="data-mce-last-selected",HC="td["+Jv+"],th["+Jv+"]",KT=Je,Tl={selected:vs,selectedSelector:Yv,firstSelected:Xv,firstSelectedSelector:qT,lastSelected:Jv,lastSelectedSelector:HC},Ru=(l,m,h)=>({element:h,mergable:Du(m,l,Tl),unmergable:RD(l),selection:Au(l)}),kl=(l,m,h)=>({element:l,clipboard:m,generators:h}),kg=(l,m,h,v)=>({selection:Au(l),clipboard:h,generators:v}),Ra=l=>Pr(l).bind(m=>qv(m,Tl.firstSelectedSelector)).fold(K(l),m=>m[0]),Gp=l=>(m,h)=>{const v=oo(m),S=v==="col"||v==="colgroup"?Ra(m):m;return Ps(S,l,h)},VC=Gp("th,td,caption"),jm=Gp("th,td"),Ja=l=>Ls(l.model.table.getSelectedCells()),Qv=l=>$o(Ja(l),m=>qr(m,Tl.selectedSelector)),fi=l=>Pr(l[0]).map(m=>{const h=VT(m,KT);return mi(h),[h]}),qp=(l,m)=>Ot(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),YT=l=>Ot(l,m=>m.dom.innerText).join(""),zC=(l,m)=>{l.on("BeforeGetContent",h=>{const v=S=>{h.preventDefault(),fi(S).each(T=>{h.content=h.format==="text"?YT(T):qp(l,T)})};if(h.selection===!0){const S=Qv(l);S.length>=1&&v(S)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=Ja(l);he(v).each(S=>{Pr(S).each(T=>{const M=$o(Iv(h.content),H=>oo(H)!=="meta"),$=Gr("table");if(Sg(l)&&M.length===1&&$(M[0])){h.preventDefault();const H=te.fromDom(l.getDoc()),W=Np(H),ee=kl(S,M[0],W);m.pasteCells(T,ee).each(()=>{l.focus()})}})})}})},Mu=(l,m)=>({element:l,offset:m}),Nc=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>Nc(l,v,h).orThunk(()=>q.some(v))):q.none(),Fr=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Kp=(l,m)=>{const h=Nc(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return Mu(h,Fr(l,h));const v=l.property().children(h);return v.length>0?Kp(l,v[v.length-1]):Mu(h,Fr(l,h))},XT=Kp,JT=be(),Yp=l=>XT(JT,l),ra=(l,m)=>{Nr(l)||ve(l).each(v=>{const S=v.value/2;In(l,S,v.unit),In(m,S,v.unit)})},Xp=l=>Ot(l,K(0)),Gm=(l,m,h,v,S)=>S(l.slice(0,m)).concat(v).concat(S(l.slice(h))),UC=l=>(m,h,v,S)=>{if(l(v)){const T=Math.max(S,m[h]-Math.abs(v)),M=Math.abs(T-m[h]);return v>=0?M:-M}else return v},Gi=UC(l=>l<0),e0=UC(Se),WC=()=>{const l=($,H,W,ee,ye)=>{const ze=Gi($,H,ee,ye);return Gm($,H,W+1,[ze,0],Xp)},m=($,H,W,ee)=>{const ye=(100+W)/100,ze=Math.max(ee,($[H]+W)/ye);return Ot($,(He,pe)=>(pe===H?ze:He/ye)-He)},h=($,H,W,ee,ye,ze)=>ze?m($,H,ee,ye):l($,H,W,ee,ye);return{resizeTable:($,H)=>$(H),clampTableDelta:Gi,calcLeftEdgeDeltas:h,calcMiddleDeltas:($,H,W,ee,ye,ze,He)=>h($,W,ee,ye,ze,He),calcRightEdgeDeltas:($,H,W,ee,ye,ze)=>{if(ze)return m($,W,ee,ye);{const He=Gi($,W,ee,ye);return Xp($.slice(0,W)).concat([He])}},calcRedestributedWidths:($,H,W,ee)=>{if(ee){const ze=(H+W)/H,He=Ot($,pe=>pe/ze);return{delta:ze*100-100,newSizes:He}}else return{delta:W,newSizes:$}}}},Md=()=>{const l=(M,$,H,W,ee)=>{const ye=W>=0?H:$,ze=e0(M,ye,W,ee);return Gm(M,$,H+1,[ze,-ze],Xp)};return{resizeTable:(M,$,H)=>{H&&M($)},clampTableDelta:(M,$,H,W,ee)=>{if(ee){if(H>=0)return H;{const ye=we(M,(ze,He)=>ze+He-W,0);return Math.max(-ye,H)}}else return Gi(M,$,H,W)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(M,$,H,W,ee,ye)=>l(M,H,W,ee,ye),calcRightEdgeDeltas:(M,$,H,W,ee,ye)=>{if(ye)return Xp(M);{const ze=W/M.length;return Ot(M,K(ze))}},calcRedestributedWidths:(M,$,H,W)=>({delta:0,newSizes:M})}},t0=l=>qt.fromTable(l).grid,Bu=Gr("th"),_g=l=>Yn(l,m=>Bu(m.element)),qm=(l,m)=>l&&m?"sectionCells":l?"section":"cells",n0=l=>{const m=l.section==="thead",h=Rm(o0(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:qm(m,h)}:{type:"body"}},o0=l=>{const m=$o(l,h=>Bu(h.element));return m.length===0?q.some("td"):m.length===l.length?q.some("th"):q.none()},ZC=l=>{const m=Ot(l,S=>n0(S).type),h=No(m,"header"),v=No(m,"footer");if(!h&&!v)return q.some("body");{const S=No(m,"body");return h&&!S&&!v?q.some("header"):!h&&!S&&v?q.some("footer"):q.none()}},QT=l=>br(l.all,m=>{const h=n0(m);return h.type==="header"?q.from(h.subType):q.none()}),hn=(l,m,h)=>so(h(l.element,m),!0,l.isLocked),s0=(l,m)=>l.section!==m?Sc(l.element,l.cells,m,l.isNew):l,jC=()=>({transformRow:s0,transformCell:(l,m,h)=>{const v=h(l.element,m),S=oo(v)!=="td"?ov(v,"td"):v;return so(S,l.isNew,l.isLocked)}}),GC=()=>({transformRow:s0,transformCell:hn}),Og=()=>({transformRow:(l,m)=>s0(l,m==="thead"?"tbody":m),transformCell:hn}),zo={getTableSectionType:(l,m)=>{const h=qt.fromTable(l);switch(QT(h).getOr(m)){case"section":return jC();case"sectionCells":return GC();case"cells":return Og()}},section:jC,sectionCells:GC,cells:Og,fallback:()=>({transformRow:Sn,transformCell:hn})},Ag=(l,m,h,v)=>{h===v?Io(l,m):ns(l,m,h)},Km=(l,m,h)=>{au(Mt(l,m)).fold(()=>Za(l,h),v=>iu(v,h))},qC=(l,m)=>{const h=mn(l,m).getOrThunk(()=>{const v=te.fromTag(m,ng(l).dom);return m==="thead"?Km(l,"caption,colgroup",v):m==="colgroup"?Km(l,"caption",v):Oo(l,v),v});return Sa(h),h},Dg=(l,m)=>{const h=[],v=[],S=He=>Ot(He,pe=>{pe.isNew&&h.push(pe.element);const Ve=pe.element;return Sa(Ve),Ee(pe.cells,ge=>{ge.isNew&&v.push(ge.element),Ag(ge.element,"colspan",ge.colspan,1),Ag(ge.element,"rowspan",ge.rowspan,1),Oo(Ve,ge.element)}),Ve}),T=He=>ts(He,pe=>Ot(pe.cells,Ve=>(Ag(Ve.element,"span",Ve.colspan,1),Ve.element))),M=(He,pe)=>{const Ve=qC(l,pe),et=(pe==="colgroup"?T:S)(He);ja(Ve,et)},$=He=>{mn(l,He).each(Ks)},H=(He,pe)=>{He.length>0?M(He,pe):$(pe)},W=[],ee=[],ye=[],ze=[];return Ee(m,He=>{switch(He.section){case"thead":W.push(He);break;case"tbody":ee.push(He);break;case"tfoot":ye.push(He);break;case"colgroup":ze.push(He);break}}),H(ze,"colgroup"),H(W,"thead"),H(ee,"tbody"),H(ye,"tfoot"),{newRows:h,newCells:v}},r0=l=>Ot(l,m=>{const h=wc(m.element);return Ee(m.cells,v=>{const S=md(v.element);Ag(S,"colspan",v.colspan,1),Ag(S,"rowspan",v.rowspan,1),Oo(h,S)}),h}),So=(l,m)=>Ot(l,h=>Jr(h,m)),MD=(l,m)=>l[m],ao=(l,m)=>{if(l.length===0)return 0;const h=l[0];return km(l,S=>!m(h.element,S.element)).getOr(l.length)},aa=(l,m,h,v)=>{const S=MD(l,m),T=S.section==="colgroup",M=ao(S.cells.slice(h),v),$=T?1:ao(So(l.slice(m),h),v);return{colspan:M,rowspan:$}},_l=(l,m)=>{const h=Ot(l,S=>Ot(S.cells,cn)),v=(S,T,M,$)=>{for(let H=S;H<S+M;H++)for(let W=T;W<T+$;W++)h[H][W]=!0};return Ot(l,(S,T)=>{const M=ts(S.cells,($,H)=>{if(h[T][H]===!1){const W=aa(l,T,H,m);return v(T,H,W.rowspan,W.colspan),[sv($.element,W.rowspan,W.colspan,$.isNew)]}else return[]});return uC(S.element,M,S.section,S.isNew)})},xr=(l,m,h)=>{const v=[];Ee(l.colgroups,S=>{const T=[];for(let M=0;M<l.grid.columns;M++){const $=qt.getColumnAt(l,M).map(H=>so(H.element,h,!1)).getOrThunk(()=>so(m.colGap(),!0,!1));T.push($)}v.push(Sc(S.element,T,"colgroup",h))});for(let S=0;S<l.grid.rows;S++){const T=[];for(let H=0;H<l.grid.columns;H++){const W=qt.getAt(l,S,H).map(ee=>so(ee.element,h,ee.isLocked)).getOrThunk(()=>so(m.gap(),!0,!1));T.push(W)}const M=l.all[S],$=Sc(M.element,T,M.section,h);v.push($)}return v},tk=(l,m)=>xr(l,m,!1),a0=l=>_l(l,Jn),Qa=(l,m)=>br(l.all,h=>N(h.cells,v=>Jn(m,v.element))),xo=(l,m,h)=>{const v=Ot(m.selection,T=>mv(T).bind(M=>Qa(l,M)).filter(h)),S=os(v);return iv(S.length>0,S)},Ao=(l,m,h,v,S)=>(T,M,$,H)=>{const W=qt.fromTable(T),ee=q.from(H==null?void 0:H.section).getOrThunk(zo.fallback);return m(W,M).map(ze=>{const He=tk(W,$),pe=l(He,ze,Jn,S($),ee),Ve=gs(pe.grid),ge=a0(pe.grid);return{info:ze,grid:ge,cursor:pe.cursor,lockedColumns:Ve}}).bind(ze=>{const He=Dg(T,ze.grid),pe=q.from(H==null?void 0:H.sizing).getOrThunk(()=>ta.getTableSize(T)),Ve=q.from(H==null?void 0:H.resize).getOrThunk(Md);return h(T,ze.grid,ze.info,{sizing:pe,resize:Ve,section:ee}),v(T),Io(T,Cp),ze.lockedColumns.length>0&&ns(T,Cp,ze.lockedColumns.join(",")),q.some({cursor:ze.cursor,newRows:He.newRows,newCells:He.newCells})})},nk=(l,m)=>mv(m.element).bind(h=>Qa(l,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),gi=(l,m)=>xo(l,m,Se).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),Rg=(l,m)=>m.mergable,Jp=(l,m)=>m.unmergable,ec=(l,m)=>xo(l,m,Se),ca=(l,m)=>xo(l,m,h=>!h.isLocked),Bd=(l,m)=>Qa(l,m).exists(h=>!h.isLocked),Ym=(l,m)=>Yn(m,h=>Bd(l,h)),Mg=(l,m)=>Rg(l,m).filter(h=>Ym(l,h.cells)),Bg=(l,m)=>Jp(l,m).filter(h=>Ym(l,h)),KC=(l,m,h,v)=>{const S=rs(l).rows;if(S.length===0)return l;for(let T=m.startRow;T<=m.finishRow;T++)for(let M=m.startCol;M<=m.finishCol;M++){const $=S[T],H=Jr($,M).isLocked;Im($,M,so(v(),!1,H))}return l},c0=(l,m,h,v)=>{const S=rs(l).rows;let T=!0;for(let M=0;M<S.length;M++)for(let $=0;$<_a(S[0]);$++){const H=S[M],W=Jr(H,$),ee=W.element,ye=h(ee,m);ye&&!T?Im(H,$,so(v(),!0,W.isLocked)):ye&&(T=!1)}return l},ok=(l,m)=>we(l,(h,v)=>Le(h,S=>m(S.element,v.element))?h:h.concat([v]),[]),YC=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&Ee(l,S=>{const T=S.cells[m-1];let M=0;const $=v();for(;S.cells.length>m+M&&h(T.element,S.cells[m+M].element);)Im(S,m+M,so($,!0,S.cells[m+M].isLocked)),M++}),l),XC=(l,m,h,v)=>{const S=rs(l).rows;if(m>0&&m<S.length){const T=S[m-1].cells,M=ok(T,h);Ee(M,$=>{let H=q.none();for(let W=m;W<S.length;W++)for(let ee=0;ee<_a(S[0]);ee++){const ye=S[W],ze=Jr(ye,ee);h(ze.element,$.element)&&(H.isNone()&&(H=q.some(v())),H.each(pe=>{Im(ye,ee,so(pe,!0,ze.isLocked))}))}})}return l},i0=l=>{const m=T=>T(l),h=K(l),v=()=>S,S={tag:!0,inner:l,fold:(T,M)=>M(l),isValue:Se,isError:cn,map:T=>Qp.value(T(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:T=>{T(l)},toOptional:()=>q.some(l)};return S},JC=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,S)=>v(l),isValue:cn,isError:Se,map:m,mapError:v=>Qp.error(v(l)),bind:m,exists:cn,forall:Se,getOr:Sn,or:Sn,getOrThunk:Bs,orThunk:Bs,getOrDie:on(String(l)),each:gt,toOptional:q.none};return h},Qp={value:i0,error:JC,fromOption:(l,m)=>l.fold(()=>JC(m),i0)},QC=(l,m,h)=>{if(l.row>=m.length||l.column>_a(m[0]))return Qp.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),S=v[0].cells.slice(l.column),T=_a(h[0]),M=h.length;return Qp.value({rowDelta:v.length-M,colDelta:S.length-T})},jn=(l,m)=>{const h=_a(l[0]),v=_a(m[0]);return{rowDelta:0,colDelta:h-v}},l0=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},u0=(l,m,h,v)=>{const S=m.section==="colgroup"?h.col:h.cell;return ho(l,T=>so(S(),!0,v(T)))},ew=(l,m,h,v)=>{const S=l[l.length-1];return l.concat(ho(m,()=>{const T=S.section==="colgroup"?h.colgroup:h.row,M=_C(S,T,Sn),$=u0(M.cells.length,M,h,H=>ms(v,H.toString()));return TC(M,$)}))},Ol=(l,m,h,v)=>Ot(l,S=>{const T=u0(m,S,h,cn);return Xr(S,v,T)}),Hs=(l,m,h)=>Ot(l,v=>we(h,(S,T)=>{const M=u0(1,v,m,Se)[0];return hu(S,T,M)},v)),Er=(l,m,h)=>{const v=m.colDelta<0?Ol:Sn,S=m.rowDelta<0?ew:Sn,T=gs(l),M=_a(l[0]),$=Le(T,ee=>ee===M-1),H=v(l,Math.abs(m.colDelta),h,$?M-1:M),W=gs(H);return S(H,Math.abs(m.rowDelta),h,Rt(W,Se))},tw=(l,m,h,v)=>{const S=Jr(l[m],h),T=An(v,S.element),M=l[m];return l.length>1&&_a(M)>1&&(h>0&&T(ss(M,h-1))||h<M.cells.length-1&&T(ss(M,h+1))||m>0&&T(ss(l[m-1],h))||m<l.length-1&&T(ss(l[m+1],h)))},d0=(l,m,h,v,S,T)=>{const M=l.row,$=l.column,H=h.length,W=_a(h[0]),ee=M+H,ye=$+W+T.length,ze=Rt(T,Se);for(let He=M;He<ee;He++){let pe=0;for(let Ve=$;Ve<ye;Ve++){if(ze[Ve]){pe++;continue}tw(m,He,Ve,S)&&c0(m,ss(m[He],Ve),S,v.cell);const ge=Ve-$-pe,et=Jr(h[He-M],ge),wt=et.element,It=v.replace(wt);Im(m[He],Ve,so(It,!0,et.isLocked))}}return m},Nu=(l,m,h)=>{const v=_a(m[0]),S=rs(m).cols.length+l.row,T=ho(v-l.column,$=>$+l.column),M=N(T,$=>Yn(h,H=>H!==$)).getOr(v-1);return{row:S,column:M}},Nd=(l,m,h)=>$o(h,v=>v>=l.column&&v<=_a(m[0])+l.column),Pd=(l,m,h,v,S)=>{const T=gs(m),M=Nu(l,m,T),$=rs(h).rows,H=Nd(M,$,T);return QC(M,m,$).map(ee=>{const ye={...ee,colDelta:ee.colDelta-H.length},ze=Er(m,ye,v),He=gs(ze),pe=Nd(M,$,He);return d0(M,ze,$,v,S,pe)})},e1=(l,m,h,v,S)=>{YC(m,l,S,v.cell);const T=l0(h,m),M=Er(h,T,v),$=l0(m,M),H=Er(m,$,v);return Ot(H,(W,ee)=>Xr(W,l,M[ee].cells))},Al=(l,m,h,v,S)=>{XC(m,l,S,v.cell);const T=gs(m),M=jn(m,h),$={...M,colDelta:M.colDelta-T.length},H=Er(m,$,v),{cols:W,rows:ee}=rs(H),ye=gs(H),ze=jn(h,m),He={...ze,colDelta:ze.colDelta+ye.length},pe=Hs(h,v,ye),Ve=Er(pe,He,v);return[...W,...ee.slice(0,l),...Ve,...ee.slice(l,ee.length)]},t1=(l,m,h,v)=>_C(l,S=>v(S,h),m),eo=(l,m,h,v,S)=>{const{rows:T,cols:M}=rs(l),$=T.slice(0,m),H=T.slice(m),W=t1(T[h],(ee,ye)=>m>0&&m<T.length&&v(ss(T[m-1],ye),ss(T[m],ye))?Jr(T[m],ye):so(S(ee.element,v),!0,ee.isLocked),v,S);return[...M,...$,W,...H]},ia=(l,m,h,v,S,T,M)=>{if(h==="colgroup"||!v){const $=Jr(l,S);return so(M($.element,T),!0,!1)}else return Jr(l,m)},Xm=(l,m,h,v,S)=>Ot(l,T=>{const M=m>0&&m<_a(T)&&v(ss(T,m-1),ss(T,m)),$=ia(T,m,T.section,M,h,v,S);return hu(T,m,$)}),sk=(l,m)=>ts(l,h=>{const v=h.cells,S=Br(m,(T,M)=>M>=0&&M<T.length?T.slice(0,M).concat(T.slice(M+1)):T,v);return S.length>0?[Sc(h.element,S,h.section,h.isNew)]:[]}),m0=(l,m,h)=>{const{rows:v,cols:S}=rs(l);return[...S,...v.slice(0,m),...v.slice(h+1)]},rk=(l,m,h,v)=>ss(l[m],h)!==void 0&&m>0&&v(ss(l[m-1],h),ss(l[m],h)),$d=(l,m,h)=>m>0&&h(ss(l,m-1),ss(l,m)),Jm=(l,m,h,v)=>rk(l,m,h,v)||$d(l[m],h,v),tc=(l,m)=>Yn(m,Sn)&&_g(l.cells)?Se:(v,S,T)=>!(oo(v.element)==="th"&&m[T]),f0=(l,m)=>Yn(m,Sn)&&_g(l)?Se:(v,S,T)=>!(oo(v.element)==="th"&&m[S]),nw=(l,m,h,v)=>{const S=M=>M==="row"?$i(m):Nr(m),T=M=>S(M)?`${M}group`:M;return l?Bu(m)?T(h):null:v&&Bu(m)?T(h==="row"?"col":"row"):null},ow=(l,m)=>(h,v,S)=>q.some(nw(l,h.element,"col",m[S])),ak=(l,m)=>(h,v)=>q.some(nw(l,h.element,"row",m[v])),sw=(l,m,h)=>so(h(l.element,m),!0,l.isLocked),n1=(l,m,h,v,S,T,M)=>{const $=H=>Le(m,W=>h(H.element,W.element));return Ot(l,(H,W)=>kC(H,(ee,ye)=>{if($(ee)){const ze=M(ee,W,ye)?S(ee,h,v):ee;return T(ze,W,ye).each(He=>{dp(ze.element,{scope:q.from(He)})}),ze}else return ee}))},o1=(l,m,h)=>ts(l,(v,S)=>Jm(l,S,m,h)?[]:[Jr(v,m)]),rw=(l,m,h)=>{const v=l[m];return ts(v.cells,(S,T)=>Jm(l,m,T,h)?[]:[S])},g0=(l,m,h,v,S)=>{const T=rs(l).rows,M=ts(m,ee=>o1(T,ee,v)),$=Ot(T,ee=>_g(ee.cells)),H=f0(M,$),W=ak(h,$);return n1(l,M,v,S,sw,W,H)},Fd=(l,m,h,v,S,T,M)=>{const{cols:$,rows:H}=rs(l),W=H[m[0]],ee=ts(m,ge=>rw(H,ge,S)),ye=Ot(W.cells,(ge,et)=>_g(o1(H,et,S))),ze=[...H];Ee(m,ge=>{ze[ge]=M.transformRow(H[ge],h)});const He=[...$,...ze],pe=tc(W,ye),Ve=ow(v,ye);return n1(He,ee,S,T,M.transformCell,Ve,pe)},aw=(l,m,h,v)=>{const S=rs(l).rows,T=Ot(m,M=>Jr(S[M.row],M.column));return n1(l,T,h,v,sw,q.none,Se)},Dl={generate:l=>{if(!vc(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return Ee(l,(v,S)=>{const T=ht(v);if(T.length!==1)throw new Error("one and only one name per case");const M=T[0],$=v[M];if(h[M]!==void 0)throw new Error("duplicate key detected:"+M);if(M==="cata")throw new Error("cannot have a case named cata (sorry)");if(!vc($))throw new Error("case arguments must be an array");m.push(M),h[M]=(...H)=>{const W=H.length;if(W!==$.length)throw new Error("Wrong number of arguments to case "+M+". Expected "+$.length+" ("+$+"), got "+W);return{fold:(...ye)=>{if(ye.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+ye.length);return ye[S].apply(null,H)},match:ye=>{const ze=ht(ye);if(m.length!==ze.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+ze.join(","));if(!Yn(m,pe=>No(ze,pe)))throw new Error("Not all branches were specified when using match. Specified: "+ze.join(", ")+`
Required: `+m.join(", "));return ye[M].apply(null,H)},log:ye=>{console.log(ye,{constructors:m,constructor:M,params:H})}}}}),h}},la={...Dl.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Qm=(l,m)=>l.length===0?la.none():l.length===1?la.only(0):m===0?la.left(0,1):m===l.length-1?la.right(m-1,m):m>0&&m<l.length-1?la.middle(m-1,m,m+1):la.none(),Yt=(l,m,h,v,S)=>{const T=l.slice(0),M=Qm(l,m),$=K(Ot(T,K(0))),H=ze=>v.singleColumnWidth(T[ze],h),W=(ze,He)=>S.calcLeftEdgeDeltas(T,ze,He,h,v.minCellWidth(),v.isRelative),ee=(ze,He,pe)=>S.calcMiddleDeltas(T,ze,He,pe,h,v.minCellWidth(),v.isRelative),ye=(ze,He)=>S.calcRightEdgeDeltas(T,ze,He,h,v.minCellWidth(),v.isRelative);return M.fold($,H,W,ee,ye)},Tr=(l,m,h)=>{let v=0;for(let S=l;S<m;S++)v+=h[S]!==void 0?h[S]:0;return v},Rl=(l,m)=>{const h=qt.justCells(l);return Ot(h,v=>{const S=Tr(v.column,v.column+v.colspan,m);return{element:v.element,width:S,colspan:v.colspan}})},h0=(l,m)=>{const h=qt.justColumns(l);return Ot(h,(v,S)=>({element:v.element,width:m[S],colspan:v.colspan}))},zn=(l,m)=>{const h=qt.justCells(l);return Ot(h,v=>{const S=Tr(v.row,v.row+v.rowspan,m);return{element:v.element,height:S,rowspan:v.rowspan}})},p0=(l,m)=>Ot(l.all,(h,v)=>({element:h.element,height:m[v]})),Ml=l=>Br(l,(m,h)=>m+h,0),Do=(l,m)=>qt.hasColumns(l)?h0(l,m):Rl(l,m),Ki=(l,m,h)=>{const v=Do(l,m);Ee(v,S=>{h.setElementWidth(S.element,S.width)})},de=(l,m,h,v,S)=>{const T=qt.fromTable(l),M=S.getCellDelta(m),$=S.getWidths(T,S),H=h===T.grid.columns-1,W=v.clampTableDelta($,h,M,S.minCellWidth(),H),ee=Yt($,h,W,S,v),ye=Ot(ee,(ze,He)=>ze+$[He]);Ki(T,ye,S),v.resizeTable(S.adjustTableWidth,W,H)},a1=(l,m,h,v)=>{const S=qt.fromTable(l),T=ne(S,l,v),M=Ot(T,(ee,ye)=>h===ye?Math.max(m+ee,oi()):ee),$=zn(S,M),H=p0(S,M);Ee(H,ee=>{Ac(ee.element,ee.height)}),Ee($,ee=>{Ac(ee.element,ee.height)});const W=Ml(M);Ac(l,W)},ck=(l,m,h,v,S)=>{const T=qt.generate(m),M=v.getWidths(T,v),$=v.pixelWidth(),{newSizes:H,delta:W}=S.calcRedestributedWidths(M,$,h.pixelDelta,v.isRelative);Ki(T,H,v),v.adjustTableWidth(W)},c1=(l,m,h,v)=>{const S=qt.generate(m),T=v.getWidths(S,v);Ki(S,T,v)},Yi=l=>we(l,(h,v)=>Le(h,T=>T.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),Ma=Gr("col"),Ng=Gr("colgroup"),i1=l=>oo(l)==="tr"||Ng(l),b0=l=>{const m=Zn(l,"colspan",1),h=Zn(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},l1=(l,m=b0)=>{const h=$=>Ma($.element)?l.col($):l.cell($),v=$=>Ng($.element)?l.colgroup($):l.row($),S=$=>{if(i1($))return v({element:$});{const H=$,W=h(m(H));return T=q.some({item:H,replacement:W}),W}};let T=q.none();return{getOrInit:($,H)=>T.fold(()=>S($),W=>H($,W.item)?W.replacement:S($))}},cw=l=>m=>{const h=[],v=(M,$)=>N(h,H=>$(H.item,M)),S=M=>{const $=l==="td"?{scope:null}:{},H=m.replace(M,l,$);return h.push({item:M,sub:H}),H};return{replaceOrInit:(M,$)=>{if(i1(M)||Ma(M))return M;{const H=M;return v(H,$).fold(()=>S(H),W=>$(M,W.item)?W.sub:S(H))}}}},Pu=l=>Ca(l,"scope").map(m=>m.substr(0,3)),Ir={modification:l1,transform:cw,merging:l=>({unmerge:v=>{const S=Pu(v);return S.each(T=>ns(v,"scope",T)),()=>{const T=l.cell({element:v,colspan:1,rowspan:1});return ni(T,"width"),ni(v,"width"),S.each(M=>ns(T,"scope",M)),T}},merge:v=>{const S=()=>{const T=os(Ot(v,Pu));if(T.length===0)return q.none();{const M=T[0],$=["row","col"];return Le(T,W=>W!==M&&No($,W))?q.none():q.from(M)}};return ni(v[0],"width"),S().fold(()=>Io(v[0],"scope"),T=>ns(v[0],"scope",T+"group")),K(v[0])}})},Vs=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],iw=(l,m)=>{const h=l.property().name(m);return No(["ol","ul"],h)},$u=(l,m)=>{const h=l.property().name(m);return No(Vs,h)},lw=(l,m)=>No(["br","img","hr","input"],l.property().name(m)),Pg=be(),Id=l=>$u(Pg,l),v0=l=>iw(Pg,l),u1=l=>lw(Pg,l),uw=l=>{const m=Gr("br"),h=H=>Yn(H,W=>m(W)||cd(W)&&Cu(W).trim().length===0),v=H=>oo(H)==="li"||bo(H,v0).isSome(),S=H=>Dm(H).map(W=>Id(W)?!0:u1(W)?oo(W)!=="img":!1).getOr(!1),T=H=>xd(H).bind(W=>{const ee=S(W);return vl(W).map(ye=>ee===!0||v(ye)||m(W)||Id(ye)&&!Jn(H,ye)?[]:[te.fromTag("br")])}).getOr([]),$=(()=>{const H=ts(l,W=>{const ee=Pn(W);return h(ee)?[]:ee.concat(T(W))});return H.length===0?[te.fromTag("br")]:H})();Sa(l[0]),ja(l[0],$)},d1=l=>Eu(l,!0),y0=l=>{si(l).length===0&&Ks(l)},Xo=(l,m)=>({grid:l,cursor:m}),_s=l=>br(l,m=>br(m.cells,h=>{const v=h.element;return iv(d1(v),v)})),Lr=(l,m,h)=>{var v,S;const T=rs(l).rows;return q.from((S=(v=T[m])===null||v===void 0?void 0:v.cells[h])===null||S===void 0?void 0:S.element).filter(d1).orThunk(()=>_s(T))},Gn=(l,m,h)=>{const v=Lr(l,m,h);return Xo(l,v)},Os=l=>we(l,(h,v)=>Le(h,T=>T.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),ys=(l,m,h,v)=>{const S=m[0].row,T=Os(m),M=Br(T,($,H)=>({grid:eo($.grid,S,H.row+$.delta,h,v.getOrInit),delta:$.delta+1}),{grid:l,delta:0}).grid;return Gn(M,S,m[0].column)},m1=(l,m,h,v)=>{const S=Os(m),T=S[S.length-1],M=T.row+T.rowspan,$=Br(S,(H,W)=>eo(H,M,W.row,h,v.getOrInit),l);return Gn($,M,m[0].column)},f1=(l,m,h,v)=>{const S=m.details,T=Yi(S),M=T[0].column,$=Br(T,(H,W)=>({grid:Xm(H.grid,M,W.column+H.delta,h,v.getOrInit),delta:H.delta+1}),{grid:l,delta:0}).grid;return Gn($,S[0].row,M)},dw=(l,m,h,v)=>{const S=m.details,T=S[S.length-1],M=T.column+T.colspan,$=Yi(S),H=Br($,(W,ee)=>Xm(W,M,ee.column,h,v.getOrInit),l);return Gn(H,S[0].row,M)},g1=(l,m,h,v)=>{const S=Yi(m),T=Ot(S,$=>$.column),M=g0(l,T,!0,h,v.replaceOrInit);return Gn(M,m[0].row,m[0].column)},C0=(l,m,h,v)=>{const S=aw(l,m,h,v.replaceOrInit);return Gn(S,m[0].row,m[0].column)},w0=(l,m,h,v)=>{const S=Yi(m),T=Ot(S,$=>$.column),M=g0(l,T,!1,h,v.replaceOrInit);return Gn(M,m[0].row,m[0].column)},mw=(l,m,h,v)=>{const S=aw(l,m,h,v.replaceOrInit);return Gn(S,m[0].row,m[0].column)},zs=(l,m)=>(h,v,S,T,M)=>{const $=Os(v),H=Ot($,ee=>ee.row),W=Fd(h,H,l,m,S,T.replaceOrInit,M);return Gn(W,v[0].row,v[0].column)},ND=zs("thead",!0),Bl=zs("tbody",!1),ik=zs("tfoot",!1),lk=(l,m,h,v)=>{const S=Yi(m.details),T=sk(l,Ot(S,$=>$.column)),M=T.length>0?T[0].cells.length-1:0;return Gn(T,S[0].row,Math.min(S[0].column,M))},uk=(l,m,h,v)=>{const S=Os(m),T=m0(l,S[0].row,S[S.length-1].row),M=T.length>0?T.length-1:0;return Gn(T,Math.min(m[0].row,M),m[0].column)},S0=(l,m,h,v)=>{const S=m.cells;uw(S);const T=KC(l,m.bounds,h,v.merge(S));return Xo(T,q.from(S[0]))},fw=(l,m,h,v)=>{const T=Br(m,(M,$)=>c0(M,$,h,v.unmerge($)),l);return Xo(T,q.from(m[0]))},gw=(l,m,h,v)=>{const T=((H,W)=>{const ee=qt.fromTable(H);return xr(ee,W,!0)})(m.clipboard,m.generators),M=fp(m.row,m.column);return Pd(M,l,T,m.generators,h).fold(()=>Xo(l,q.some(m.element)),H=>Gn(H,m.row,m.column))},h1=(l,m,h)=>{const v=hC(l,h.section),S=qt.generate(v);return xr(S,m,!0)},hw=(l,m,h,v)=>{const S=rs(l).rows,T=m.cells[0].column,M=S[m.cells[0].row],$=h1(m.clipboard,m.generators,M),H=e1(T,l,$,m.generators,h);return Gn(H,m.cells[0].row,m.cells[0].column)},pw=(l,m,h,v)=>{const S=rs(l).rows,T=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,M=S[m.cells[0].row],$=h1(m.clipboard,m.generators,M),H=e1(T,l,$,m.generators,h);return Gn(H,m.cells[0].row,m.cells[0].column)},Ae=(l,m,h,v)=>{const S=rs(l).rows,T=m.cells[0].row,M=S[T],$=h1(m.clipboard,m.generators,M),H=Al(T,l,$,m.generators,h);return Gn(H,m.cells[0].row,m.cells[0].column)},dk=(l,m,h,v)=>{const S=rs(l).rows,T=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,M=S[m.cells[0].row],$=h1(m.clipboard,m.generators,M),H=Al(T,l,$,m.generators,h);return Gn(H,m.cells[0].row,m.cells[0].column)},As=(l,m)=>{const h=qt.fromTable(l);return ec(h,m).bind(S=>{const T=S[S.length-1],M=S[0].column,$=T.column+T.colspan,H=Wn(Ot(h.all,W=>$o(W.cells,ee=>ee.column>=M&&ee.column<$)));return o0(H)}).getOr("")},mk=(l,m)=>{const h=qt.fromTable(l);return ec(h,m).bind(o0).getOr("")},x0=(l,m)=>{const h=qt.fromTable(l);return ec(h,m).bind(S=>{const T=S[S.length-1],M=S[0].row,$=T.row+T.rowspan,H=h.all.slice(M,$);return ZC(H)}).getOr("")},Ye=(l,m,h,v)=>c1(l,m,h,v.sizing),nr=(l,m,h,v)=>ck(l,m,h,v.sizing,v.resize),bw=(l,m)=>Le(m,h=>h.column===0&&h.isLocked),vw=(l,m)=>Le(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),oc=(l,m)=>{const h=Hm(l),v=Yi(m);return we(v,(S,T)=>{const $=h[T.column].map(Li).getOr(0);return S+$},0)},p1=l=>(m,h)=>ec(m,h).filter(v=>!(l?bw:vw)(m,v)).map(v=>({details:v,pixelDelta:oc(m,v)})),ef=(l,m)=>ca(l,m).map(h=>({details:h,pixelDelta:-oc(l,h)})),hi=l=>(m,h)=>gi(m,h).filter(v=>!(l?bw:vw)(m,v.cells)),sc=Ir.transform("th"),Ld=Ir.transform("td"),Pc=Ao(ys,ec,gt,gt,Ir.modification),lr=Ao(m1,ec,gt,gt,Ir.modification),tf=Ao(f1,p1(!0),nr,gt,Ir.modification),E0=Ao(dw,p1(!1),nr,gt,Ir.modification),yw=Ao(lk,ef,nr,y0,Ir.modification),Cw=Ao(uk,ec,gt,y0,Ir.modification),T0=Ao(g1,ca,gt,gt,sc),fk=Ao(w0,ca,gt,gt,Ld),k0=Ao(ND,ca,gt,gt,sc),ww=Ao(Bl,ca,gt,gt,Ld),gk=Ao(ik,ca,gt,gt,Ld),Sw=Ao(C0,ca,gt,gt,sc),hk=Ao(mw,ca,gt,gt,Ld),pk=Ao(S0,Mg,Ye,gt,Ir.merging),_0=Ao(fw,Bg,Ye,gt,Ir.merging),bk=Ao(gw,nk,Ye,gt,Ir.modification),xw=Ao(hw,hi(!0),gt,gt,Ir.modification),vk=Ao(pw,hi(!1),gt,gt,Ir.modification),nf=Ao(Ae,gi,gt,gt,Ir.modification),Ew=Ao(dk,gi,gt,gt,Ir.modification),yk=As,Tw=mk,Ck=x0,kw=(l,m)=>l.dispatch("NewRow",{node:m}),b1=(l,m)=>l.dispatch("NewCell",{node:m}),Fu=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},of=(l,m,h,v,S)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:S})},Un=l=>{l.dispatch("TableSelectionClear")},O0=(l,m,h,v,S)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:S})},kr=(l,m,h,v,S)=>{l.dispatch("ObjectResized",{target:m,width:h,height:v,origin:S})},sf={structure:!1,style:!0},cs={structure:!0,style:!1},_w={structure:!0,style:!0},Xi=(l,m)=>di(l)?ta.percentageSize(m):xu(l)?ta.pixelSize(m):ta.getTableSize(m),wk=(l,m,h)=>{const v=gr=>oo(Eg(gr))==="table",S=gr=>!v(l)||t0(gr).rows>1,T=gr=>!v(l)||t0(gr).columns>1,M=wu(l),$=Co(l)?gt:ra,H=gr=>{switch(Wm(l)){case"section":return zo.section();case"sectionCells":return zo.sectionCells();case"cells":return zo.cells();default:return zo.getTableSectionType(gr,"section")}},W=(gr,uh)=>uh.cursor.fold(()=>{const dh=si(gr);return he(dh).filter(po).map(Ci=>{h.clearSelectedCells(gr.dom);const ws=l.dom.createRng();return ws.selectNode(Ci.dom),l.selection.setRng(ws),ns(Ci,"data-mce-selected","1"),ws})},dh=>{const Ci=Yp(dh),ws=l.dom.createRng();return ws.setStart(Ci.element.dom,Ci.offset),ws.setEnd(Ci.element.dom,Ci.offset),l.selection.setRng(ws),h.clearSelectedCells(gr.dom),q.some(ws)}),ee=(gr,uh,dh,Ci)=>(ws,xy,BS=!1)=>{mi(ws);const NS=te.fromDom(l.getDoc()),PS=Td(dh,NS,M),M_={sizing:Xi(l,ws),resize:Co(l)?WC():Md(),section:H(ws)};return uh(ws)?gr(ws,xy,PS,M_).bind(Ey=>{m.refresh(ws.dom),Ee(Ey.newRows,mh=>{kw(l,mh.dom)}),Ee(Ey.newCells,mh=>{b1(l,mh.dom)});const B_=W(ws,Ey);return po(ws)&&(mi(ws),BS||Fu(l,ws.dom,Ci)),B_.map(mh=>({rng:mh,effect:Ci}))}):q.none()},ye=ee(Cw,S,gt,cs),ze=ee(yw,T,gt,cs),He=ee(Pc,Se,gt,cs),pe=ee(lr,Se,gt,cs),Ve=ee(tf,Se,$,cs),ge=ee(E0,Se,$,cs),et=ee(pk,Se,gt,cs),wt=ee(_0,Se,gt,cs),It=ee(xw,Se,gt,cs),qn=ee(vk,Se,gt,cs),Wo=ee(nf,Se,gt,cs),Ro=ee(Ew,Se,gt,cs),mr=ee(bk,Se,gt,_w),Jd=ee(Sw,Se,gt,cs),lh=ee(hk,Se,gt,cs),Q1=ee(T0,Se,gt,cs),eb=ee(fk,Se,gt,cs),kn=ee(k0,Se,gt,cs),fr=ee(ww,Se,gt,cs),Or=ee(gk,Se,gt,cs);return{deleteRow:ye,deleteColumn:ze,insertRowsBefore:He,insertRowsAfter:pe,insertColumnsBefore:Ve,insertColumnsAfter:ge,mergeCells:et,unmergeCells:wt,pasteColsBefore:It,pasteColsAfter:qn,pasteRowsBefore:Wo,pasteRowsAfter:Ro,pasteCells:mr,makeCellsHeader:Jd,unmakeCellsHeader:lh,makeColumnsHeader:Q1,unmakeColumnsHeader:eb,makeRowsHeader:kn,makeRowsBody:fr,makeRowsFooter:Or,getTableRowType:Ck,getTableCellType:Tw,getTableColType:yk}},v1=(l,m,h)=>{const v=Zn(l,m,1);h===1||v<=1?Io(l,m):ns(l,m,Math.min(h,v))},Ow=(l,m)=>h=>{const v=h.column+h.colspan-1,S=h.column;return v>=l&&S<m},$g=(l,m,h)=>{if(qt.hasColumns(l)){const v=$o(qt.justColumns(l),Ow(m,h)),S=Ot(v,M=>{const $=md(M.element);return v1($,"span",h-m),$}),T=te.fromTag("colgroup");return ja(T,S),[T]}else return[]},Sk=(l,m,h)=>Ot(l.all,v=>{const S=$o(v.cells,Ow(m,h)),T=Ot(S,$=>{const H=md($.element);return v1(H,"colspan",h-m),H}),M=te.fromTag("tr");return ja(M,T),M}),xk=(l,m)=>{const h=qt.fromTable(l);return ca(h,m).map(S=>{const T=S[S.length-1],M=S[0].column,$=T.column+T.colspan,H=$g(h,M,$),W=Sk(h,M,$);return[...H,...W]})},Ek=(l,m,h)=>{const v=qt.fromTable(l);return ec(v,m).bind(T=>{const M=xr(v,h,!1),H=rs(M).rows.slice(T[0].row,T[T.length-1].row+T[T.length-1].rowspan),W=ts(H,ye=>{const ze=$o(ye.cells,He=>!He.isLocked);return ze.length>0?[{...ye,cells:ze}]:[]}),ee=a0(W);return iv(ee.length>0,ee)}).map(T=>r0(T))},Fg=Dl.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Aw=(l,m,h)=>{const v=h.substring(0,h.length-l.length),S=parseFloat(v);return v===S.toString()?m(S):Fg.invalid(h)},Hd={...Fg,from:l=>mu(l,"%")?Aw("%",Fg.percent,l):mu(l,"px")?Aw("px",Fg.pixels,l):Fg.invalid(l)},Tk=(l,m)=>Ot(l,h=>Hd.from(h).fold(()=>h,S=>S/m*100+"%",S=>S+"%")),kk=(l,m,h)=>{const v=h/m;return Ot(l,S=>Hd.from(S).fold(()=>S,M=>M*v+"px",M=>M/100*h+"px"))},_k=(l,m)=>{const h=l.fold(()=>K(""),v=>{const S=v/m;return K(S+"px")},()=>{const v=100/m;return K(v+"%")});return ho(m,h)},Rw=(l,m,h)=>l.fold(()=>m,v=>kk(m,h,v),v=>Tk(m,h)),A0=(l,m,h)=>{const v=Hd.from(h),S=Yn(l,T=>T==="0px")?_k(v,l.length):Rw(v,l,m);return y1(S)},Nl=(l,m)=>l.length===0?m:Br(l,(h,v)=>Hd.from(v).fold(K(0),Sn,Sn)+h,0),Mw=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},Bw=(l,m)=>Hd.from(l).fold(K(l),h=>h+m+"px",h=>h+m+"%"),y1=l=>{if(l.length===0)return l;const m=Br(l,(v,S)=>{const T=Hd.from(S).fold(()=>({value:S,remainder:0}),M=>Mw(M,"px"),M=>({value:M+"%",remainder:0}));return{output:[T.value].concat(v.output),remainder:v.remainder+T.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([Bw(h[h.length-1],Math.round(m.remainder))])},Ok=Hd.from,Pl=(l,m,h)=>{Ee(m,v=>{const S=l.slice(v.column,v.colspan+v.column),T=Nl(S,Lo());uo(v.element,"width",T+h)})},C1=(l,m,h)=>{Ee(m,(v,S)=>{const T=Nl([l[S]],Lo());uo(v.element,"width",T+h)})},w1=(l,m,h,v)=>{Ee(h,S=>{const T=l.slice(S.row,S.rowspan+S.row),M=Nl(T,oi());uo(S.element,"height",M+v)}),Ee(m,(S,T)=>{uo(S.element,"height",l[T])})},Ig=l=>Ok(l).fold(K("px"),K("px"),K("%")),Nw=(l,m,h)=>{const v=qt.fromTable(l),S=v.all,T=qt.justCells(v),M=qt.justColumns(v);m.each($=>{const H=Ig($),W=ka(l),ee=wd(v,l),ye=A0(ee,W,$);qt.hasColumns(v)?C1(ye,M,H):Pl(ye,T,H),uo(l,"width",$)}),h.each($=>{const H=Ig($),W=Ev(l),ee=$r(v,l,qe),ye=A0(ee,W,$);w1(ye,S,T,H),uo(l,"height",$)})},Ji=bu,S1=Mv,Pw=ea,pi=l=>{Io(l,"width")},Iu=l=>{const m=Vo(l);Nw(l,q.some(m),q.none()),pi(l)},D0=l=>{const m=Rv(l);Nw(l,q.some(m),q.none()),pi(l)},$w=l=>{ni(l,"width");const m=dg(l),h=m.length>0?m:si(l);Ee(h,v=>{ni(v,"width"),pi(v)}),pi(l)},x1={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ak=()=>te.fromTag("th"),Fw=()=>te.fromTag("td"),Dk=()=>te.fromTag("col"),Rk=(l,m,h,v)=>{const S=te.fromTag("tr");for(let T=0;T<l;T++){const M=v<m||T<h?Ak():Fw();T<h&&ns(M,"scope","row"),v<m&&ns(M,"scope","col"),Oo(M,te.fromTag("br")),Oo(S,M)}return S},Iw=l=>{const m=te.fromTag("colgroup");return ho(l,()=>Oo(m,Dk())),m},Lw=(l,m,h,v)=>ho(l,S=>Rk(m,h,v,S)),Hw=(l,m,h,v,S,T=x1)=>{const M=te.fromTag("table"),$=S!=="cells";Xs(M,T.styles),Ni(M,T.attributes),T.colGroups&&Oo(M,Iw(m));const H=Math.min(l,h);if($&&h>0){const He=te.fromTag("thead");Oo(M,He);const Ve=Lw(h,m,S==="sectionCells"?H:0,v);ja(He,Ve)}const W=te.fromTag("tbody");Oo(M,W);const ee=$?l-H:l,ze=Lw(ee,m,$?0:h,v);return ja(W,ze),M},Mk=l=>l.dom.innerHTML,Bk=l=>{const m=te.fromTag("div"),h=te.fromDom(l.dom.cloneNode(!0));return Oo(m,h),Mk(m)},Nk=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},Vw=(l,m)=>{yl(m,"td,th").each(An(Nk,l))},R0=(l,m)=>{Ee(xa(m,"tr"),h=>{kw(l,h.dom),Ee(xa(h,"th,td"),v=>{b1(l,v.dom)})})},M0=l=>eg(l)&&l.indexOf("%")!==-1,Pk=(l,m,h,v,S)=>{const T=UT(l),M={styles:T,attributes:xg(l),colGroups:wo(l)};return l.undoManager.ignore(()=>{const $=Hw(h,m,S,v,Wm(l),M);ns($,"data-mce-id","__mce");const H=Bk($);l.insertContent(H),l.addVisual()}),yl(Eg(l),'table[data-mce-id="__mce"]').map($=>(xu(l)?D0($):Od(l)?$w($):(di(l)||M0(T.width))&&Iu($),mi($),Io($,"data-mce-id"),R0(l,$),Vw(l,$),$.dom)).getOrNull()},$k=(l,m,h,v={})=>{const S=T=>ar(T)&&T>0;if(S(m)&&S(h)){const T=v.headerRows||0,M=v.headerColumns||0;return Pk(l,h,m,M,T)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var E1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const zw="x-tinymce/dom-table-",T1=zw+"rows",Lg=zw+"columns",k1=l=>{const m=E1.FakeClipboardItem(l);E1.write([m])},B0=l=>{var m;const h=(m=E1.read())!==null&&m!==void 0?m:[];return br(h,v=>q.from(v.getType(l)))},Uw=l=>{B0(l).isSome()&&E1.clear()},Ww=l=>{l.fold(Fk,m=>k1({[T1]:m}))},N0=()=>B0(T1),Fk=()=>Uw(T1),Zw=l=>{l.fold(Ik,m=>k1({[Lg]:m}))},Hg=()=>B0(Lg),Ik=()=>Uw(Lg),_1=l=>VC(Xa(l),Sl(l)).filter(Zm),jw=l=>jm(Xa(l),Sl(l)).filter(Zm),Gw=(l,m)=>{const h=Sl(l),v=()=>_1(l).each(ge=>{Pr(ge,h).filter(J(h)).each(et=>{const wt=te.fromText("");if(iu(et,wt),Ks(et),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const It=l.dom.createRng();It.setStart(wt.dom,0),It.setEnd(wt.dom,0),l.selection.setRng(It),l.nodeChanged()}})}),S=ge=>_1(l).each(et=>{Od(l)||xu(l)||di(l)||Pr(et,h).each(It=>{ge==="relative"&&!Ji(It)?Iu(It):ge==="fixed"&&!S1(It)?D0(It):ge==="responsive"&&!Pw(It)&&$w(It),mi(It),Fu(l,It.dom,cs)})}),T=ge=>Pr(ge,h),M=ge=>jw(l).bind(et=>T(et).map(wt=>ge(wt,et))),$=(ge,et)=>{M(wt=>{l.formatter.toggle("tableclass",{value:et},wt.dom),Fu(l,wt.dom,sf)})},H=(ge,et)=>{M(wt=>{const It=Ja(l),Wo=Yn(It,Ro=>l.formatter.match("tablecellclass",{value:et},Ro.dom))?l.formatter.remove:l.formatter.apply;Ee(It,Ro=>Wo("tablecellclass",{value:et},Ro.dom)),Fu(l,wt.dom,sf)})},W=()=>{_1(l).each(ge=>{Pr(ge,h).each(et=>{mn(et,"caption").fold(()=>{const wt=te.fromTag("caption");Oo(wt,te.fromText("Caption")),RT(et,wt,0),l.selection.setCursorLocation(wt.dom,0)},wt=>{Gr("caption")(ge)&&tv("td",et).each(It=>l.selection.setCursorLocation(It.dom,0)),Ks(wt)}),Fu(l,et.dom,cs)})})},ee=ge=>{l.focus()},ye=(ge,et=!1)=>M((wt,It)=>{const qn=Ru(Ja(l),wt,It);ge(wt,qn,et).each(ee)}),ze=()=>M((ge,et)=>{const wt=Ru(Ja(l),ge,et),It=Td(gt,te.fromDom(l.getDoc()),q.none());return Ek(ge,wt,It)}),He=()=>M((ge,et)=>{const wt=Ru(Ja(l),ge,et);return xk(ge,wt)}),pe=(ge,et)=>et().each(wt=>{const It=Ot(wt,qn=>md(qn));M((qn,Wo)=>{const Ro=Np(te.fromDom(l.getDoc())),mr=kg(Ja(l),Wo,It,Ro);ge(qn,mr).each(ee)})}),Ve=ge=>(et,wt)=>cp(wt,"type").each(It=>{ye(ge(It),wt.no_events)});_o({mceTableSplitCells:()=>ye(m.unmergeCells),mceTableMergeCells:()=>ye(m.mergeCells),mceTableInsertRowBefore:()=>ye(m.insertRowsBefore),mceTableInsertRowAfter:()=>ye(m.insertRowsAfter),mceTableInsertColBefore:()=>ye(m.insertColumnsBefore),mceTableInsertColAfter:()=>ye(m.insertColumnsAfter),mceTableDeleteCol:()=>ye(m.deleteColumn),mceTableDeleteRow:()=>ye(m.deleteRow),mceTableCutCol:()=>He().each(ge=>{Zw(ge),ye(m.deleteColumn)}),mceTableCutRow:()=>ze().each(ge=>{Ww(ge),ye(m.deleteRow)}),mceTableCopyCol:()=>He().each(ge=>Zw(ge)),mceTableCopyRow:()=>ze().each(ge=>Ww(ge)),mceTablePasteColBefore:()=>pe(m.pasteColsBefore,Hg),mceTablePasteColAfter:()=>pe(m.pasteColsAfter,Hg),mceTablePasteRowBefore:()=>pe(m.pasteRowsBefore,N0),mceTablePasteRowAfter:()=>pe(m.pasteRowsAfter,N0),mceTableDelete:v,mceTableCellToggleClass:H,mceTableToggleClass:$,mceTableToggleCaption:W,mceTableSizingMode:(ge,et)=>S(et),mceTableCellType:Ve(ge=>ge==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Ve(ge=>ge==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Ve(ge=>{switch(ge){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(ge,et)=>l.addCommand(et,ge)),l.addCommand("mceInsertTable",(ge,et)=>{$k(l,et.rows,et.columns,et.options)}),l.addCommand("mceTableApplyCellStyle",(ge,et)=>{const wt=Wo=>"tablecell"+Wo.toLowerCase().replace("-","");if(!En(et))return;const It=$o(Ja(l),Zm);if(It.length===0)return;const qn=Ua(et,(Wo,Ro)=>l.formatter.has(wt(Ro))&&eg(Wo));tg(qn)||(_o(qn,(Wo,Ro)=>{const mr=wt(Ro);Ee(It,Jd=>{Wo===""?l.formatter.remove(mr,{value:null},Jd.dom,!0):l.formatter.apply(mr,{value:Wo},Jd.dom)})}),T(It[0]).each(Wo=>Fu(l,Wo.dom,sf)))})},qw=(l,m)=>{const h=Sl(l),v=S=>jm(Xa(l)).bind(T=>Pr(T,h).map(M=>{const $=Ru(Ja(l),M,T);return S(M,$)})).getOr("");_o({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(S,T)=>l.addQueryValueHandler(T,S))},O1=Dl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Lk=(l,m,h,v)=>l.fold(m,h,v),Vg=l=>l.fold(Sn,Sn,Sn),Hk=O1.before,Vk=O1.on,Kw=O1.after,Jo={before:Hk,on:Vk,after:Kw,cata:Lk,getStart:Vg},rf={create:(l,m)=>({selection:l,kill:m})},Uk=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},zg=(l,m)=>{const h=l.document.createRange();return P0(h,m),h},P0=(l,m)=>l.selectNodeContents(m.dom),Wk=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},Zk=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},$0=(l,m,h)=>{const v=l.document.createRange();return Wk(v,m),Zk(v,h),v},Lu=(l,m,h,v,S)=>{const T=l.document.createRange();return T.setStart(m.dom,h),T.setEnd(v.dom,S),T},af=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),_r=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?q.some(h).map(af):q.none()},Vd=Dl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Yw=(l,m,h)=>m(te.fromDom(h.startContainer),h.startOffset,te.fromDom(h.endContainer),h.endOffset),Xw=(l,m)=>m.match({domRange:h=>({ltr:K(h),rtl:q.none}),relative:(h,v)=>({ltr:fu(()=>$0(l,h,v)),rtl:fu(()=>q.some($0(l,v,h)))}),exact:(h,v,S,T)=>({ltr:fu(()=>Lu(l,h,v,S,T)),rtl:fu(()=>q.some(Lu(l,S,T,h,v)))})}),F0=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(S=>S.collapsed===!1).map(S=>Vd.rtl(te.fromDom(S.endContainer),S.endOffset,te.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>Yw(l,Vd.ltr,h)):Yw(l,Vd.ltr,h)},I0=(l,m)=>{const h=Xw(l,m);return F0(l,h)},L0=(l,m)=>I0(l,m).match({ltr:(v,S,T,M)=>{const $=l.document.createRange();return $.setStart(v.dom,S),$.setEnd(T.dom,M),$},rtl:(v,S,T,M)=>{const $=l.document.createRange();return $.setStart(T.dom,M),$.setEnd(v.dom,S),$}});Vd.ltr,Vd.rtl;const Ug={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},Hu={create:(l,m,h,v)=>({start:Jo.on(l,m),finish:Jo.on(h,v)})},Wg=(l,m)=>{const h=L0(l,m);return Ug.create(te.fromDom(h.startContainer),h.startOffset,te.fromDom(h.endContainer),h.endOffset)},bi=Hu.create,Gk=(l,m,h,v,S,T,M)=>Jn(h,S)&&v===T?q.none():Ps(h,"td,th",m).bind($=>Ps(S,"td,th",m).bind(H=>Qi(l,m,$,H,M))),Qi=(l,m,h,v,S)=>Jn(h,v)?q.none():Bc(h,v,m).bind(T=>{const M=T.boxes.getOr([]);return M.length>1?(S(l,M,T.start,T.finish),q.some(rf.create(q.some(bi(h,0,h,na(h))),!0))):q.none()}),$c=(l,m,h,v,S)=>{const T=M=>(S.clearBeforeUpdate(h),S.selectRange(h,M.boxes,M.start,M.finish),M.boxes);return GT(v,l,m,S.firstSelectedSelector,S.lastSelectedSelector).map(T)},cf=(l,m)=>({item:l,mode:m}),H0=(l,m,h,v=lf)=>l.property().parent(m).map(S=>cf(S,v)),lf=(l,m,h,v=$l)=>h.sibling(l,m).map(S=>cf(S,v)),$l=(l,m,h,v=$l)=>{const S=l.property().children(m);return h.first(S).map(M=>cf(M,v))},uf=[{current:H0,next:lf,fallback:q.none()},{current:lf,next:$l,fallback:q.some(H0)},{current:$l,next:$l,fallback:q.some(lf)}],zd=(l,m,h,v,S=uf)=>N(S,M=>M.current===h).bind(M=>M.current(l,m,v,M.next).orThunk(()=>M.fallback.bind($=>zd(l,m,$,v)))),Ud={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?q.some(h[h.length-1]):q.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?q.some(h[0]):q.none()})},Wd=(l,m,h,v,S,T)=>zd(l,m,v,S).bind($=>T($.item)?q.none():h($.item)?q.some($.item):Wd(l,$.item,h,$.mode,S,T)),Qw=(l,m,h,v)=>Wd(l,m,h,lf,Ud.left(),v),D1=(l,m,h,v)=>Wd(l,m,h,lf,Ud.right(),v),df=l=>m=>l.property().children(m).length===0,Cs=(l,m,h)=>vi(l,m,df(l),h),qk=(l,m,h)=>z0(l,m,df(l),h),vi=Qw,z0=D1,mf=be(),Zd=(l,m)=>Cs(mf,l,m),U0=(l,m)=>qk(mf,l,m),R1=(l,m,h)=>vi(mf,l,m,h),Kk=(l,m,h)=>z0(mf,l,m,h),eS=(l,m,h)=>bo(l,m,h).isSome(),Zg=Dl.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),tS=(l,m,h)=>{const v=l.getRect(m),S=l.getRect(h);return S.right>v.left&&S.left<v.right},nS=l=>Ps(l,"tr"),jg={...Zg,verify:(l,m,h,v,S,T,M)=>Ps(v,"td,th",M).bind($=>Ps(m,"td,th",M).map(H=>Jn($,H)?Jn(v,$)&&na($)===S?T(H):Zg.none("in same cell"):Vn(nS,[$,H]).fold(()=>tS(l,H,$)?Zg.success():T(H),W=>T(H)))).getOr(Zg.none("default")),cata:(l,m,h,v,S)=>l.fold(m,h,v,S)},oS=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),or=l=>vl(l).bind(m=>{const h=Pn(m);return M1(h,l).map(v=>oS(m,h,l,v))}),M1=(l,m)=>km(l,An(Jn,m)),jd=Gr("br"),Gd=(l,m,h)=>m(l,h).bind(v=>cd(v)&&Cu(v).trim().length===0?Gd(v,m,h):q.some(v)),Ba=(l,m,h)=>h.traverse(m).orThunk(()=>Gd(m,h.gather,l)).map(h.relative),zu=(l,m)=>wa(l,m).filter(jd).orThunk(()=>wa(l,m-1).filter(jd)),W0=(l,m,h,v)=>zu(m,h).bind(S=>v.traverse(S).fold(()=>Gd(S,v.gather,l).map(v.relative),T=>or(T).map(M=>Jo.on(M.parent,M.index)))),ff=(l,m,h,v)=>(jd(m)?Ba(l,m,v):W0(l,m,h,v)).map(T=>({start:T,finish:T})),Hr=l=>jg.cata(l,m=>q.none(),()=>q.none(),m=>q.some(Mu(m,0)),m=>q.some(Mu(m,na(m)))),ur=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),Eo=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),Na=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),B1=l=>l.top,Us=l=>l.bottom,Uu=(l,m,h)=>h>=0&&h<na(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):q.none(),gf=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Gg=(l,m)=>q.some(l.getRect(m)),Z0=(l,m,h)=>jr(m)?Gg(l,m).map(gf):cd(m)?Uu(l,m,h).map(gf):q.none(),j0=(l,m)=>jr(m)?Gg(l,m).map(gf):cd(m)?l.getRangedRect(m,0,m,na(m)).map(gf):q.none(),Fl=5,qg=100,yi=Dl.generate([{none:[]},{retry:["caret"]}]),Yk=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,G0=(l,m,h)=>cg(m,Id).fold(cn,v=>j0(l,v).exists(S=>Yk(h,S))),sS=(l,m,h,v,S)=>{const T=ur(S,Fl);return Math.abs(h.bottom-v.bottom)<1||h.top>S.bottom?yi.retry(T):h.top===S.bottom?yi.retry(ur(S,1)):G0(l,m,S)?yi.retry(Na(T,Fl,0)):yi.none()},rS={point:B1,adjuster:(l,m,h,v,S)=>{const T=Eo(S,Fl);return Math.abs(h.top-v.top)<1||h.bottom<S.top?yi.retry(T):h.bottom===S.top?yi.retry(Eo(S,1)):G0(l,m,S)?yi.retry(Na(T,Fl,0)):yi.none()},move:Eo,gather:Zd},aS={point:Us,adjuster:sS,move:ur,gather:U0},q0=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>oo(v)==="table").isSome(),K0=(l,m,h,v,S)=>Y0(l,m,h,m.move(v,Fl),S),Y0=(l,m,h,v,S)=>S===0?q.some(v):q0(l,v.left,m.point(v))?K0(l,m,h,v,S-1):l.situsFromPoint(v.left,m.point(v)).bind(T=>T.start.fold(q.none,M=>j0(l,M).bind($=>m.adjuster(l,M,$,h,v).fold(q.none,H=>Y0(l,m,h,H,S-1))).orThunk(()=>q.some(v)),q.none)),cS=(l,m,h)=>l.point(m)>h.getInnerHeight()?q.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?q.some(-l.point(m)):q.none(),iS=(l,m,h)=>{const v=l.move(h,Fl),S=Y0(m,l,h,v,qg).getOr(v);return cS(l,S,m).fold(()=>m.situsFromPoint(S.left,l.point(S)),T=>(m.scrollBy(0,T),m.situsFromPoint(S.left,l.point(S)-T)))},lS={tryUp:An(iS,rS),tryDown:An(iS,aS),getJumpSize:K(Fl)},Xk=20,Jk=(l,m,h)=>l.getSelection().bind(v=>ff(m,v.finish,v.foffset,h).fold(()=>q.some(Mu(v.finish,v.foffset)),S=>{const T=l.fromSitus(S),M=jg.verify(l,v.finish,v.foffset,T.finish,T.foffset,h.failure,m);return Hr(M)})),Pa=(l,m,h,v,S,T)=>T===0?q.none():rc(l,m,h,v,S).bind(M=>{const $=l.fromSitus(M),H=jg.verify(l,h,v,$.finish,$.foffset,S.failure,m);return jg.cata(H,()=>q.none(),()=>q.some(M),W=>Jn(h,W)&&v===0?Qk(l,h,v,Eo,S):Pa(l,m,W,0,S,T-1),W=>Jn(h,W)&&v===na(W)?Qk(l,h,v,ur,S):Pa(l,m,W,na(W),S,T-1))}),Qk=(l,m,h,v,S)=>Z0(l,m,h).bind(T=>Zt(l,S,v(T,lS.getJumpSize()))),Zt=(l,m,h)=>{const v=hg().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):q.none()},rc=(l,m,h,v,S)=>Z0(l,h,v).bind(T=>Zt(l,S,T)),Wu=(l,m,h)=>Jk(l,m,h).bind(v=>Pa(l,m,v.element,v.offset,h,Xk).map(l.fromSitus)),X0=(l,m)=>eS(l,h=>vl(h).exists(v=>Jn(v,m))),uS=(l,m,h,v,S)=>Ps(v,"td,th",m).bind(T=>Ps(T,"table",m).bind(M=>X0(S,M)?Wu(l,m,h).bind($=>Ps($.finish,"td,th",m).map(H=>({start:T,finish:H,range:$}))):q.none())),hf=(l,m,h,v,S,T)=>T(v,m).orThunk(()=>uS(l,m,h,v,S).map(M=>{const $=M.range;return rf.create(q.some(bi($.start,$.soffset,$.finish,$.foffset)),!0)})),e_=(l,m)=>Ps(l,"tr",m).bind(h=>Ps(h,"table",m).bind(v=>{const S=xa(v,"tr");return Jn(h,S[0])?R1(v,T=>xd(T).isSome(),m).map(T=>{const M=na(T);return rf.create(q.some(bi(T,M,T,M)),!0)}):q.none()})),J0=(l,m)=>Ps(l,"tr",m).bind(h=>Ps(h,"table",m).bind(v=>{const S=xa(v,"tr");return Jn(h,S[S.length-1])?Kk(v,T=>Rp(T).isSome(),m).map(T=>rf.create(q.some(bi(T,0,T,0)),!0)):q.none()})),N1=(l,m,h,v,S,T,M)=>uS(l,h,v,S,T).bind($=>Qi(m,h,$.start,$.finish,M)),Kg=l=>{let m=l;return{get:()=>m,set:S=>{m=S}}},t_=l=>{const m=Kg(q.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(q.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:$=>{h(),m.set(q.some($))}}},Q0=()=>{const l=t_(gt);return{...l,on:h=>l.get().each(h)}},P1=(l,m)=>Ps(l,"td,th",m),ey=l=>Cc(l).exists(Eu),FD=(l,m,h,v)=>{const S=Q0(),T=S.clear,M=ee=>{S.on(ye=>{v.clearBeforeUpdate(m),P1(ee.target,h).each(ze=>{Bc(ye,ze,h).each(He=>{const pe=He.boxes.getOr([]);if(pe.length===1){const Ve=pe[0],ge=$p(Ve)==="false",et=Rm(Ad(ee.target),Ve,Jn);ge&&et&&(v.selectRange(m,pe,Ve,Ve),l.selectContents(Ve))}else pe.length>1&&(v.selectRange(m,pe,He.start,He.finish),l.selectContents(ze))})})})};return{clearstate:T,mousedown:ee=>{v.clear(m),P1(ee.target,h).filter(ey).each(S.set)},mouseover:ee=>{M(ee)},mouseup:ee=>{M(ee),T()}}},dS={traverse:Dm,gather:U0,relative:Jo.before,retry:lS.tryDown,failure:jg.failedDown},ty={traverse:og,gather:Zd,relative:Jo.before,retry:lS.tryUp,failure:jg.failedUp},pf=l=>m=>m===l,Yg=pf(38),Zu=pf(40),el=l=>l>=37&&l<=40,mS={isBackward:pf(37),isForward:pf(39)},n_={isBackward:pf(39),isForward:pf(37)},fS=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return _c(h,v)},ny=(l,m,h)=>{const S=(h!==void 0?h.dom:document).defaultView;S&&S.scrollBy(l,m)},bf=Dl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),oy=l=>bf.exact(l.start,l.soffset,l.finish,l.foffset),$1=l=>l.match({domRange:m=>te.fromDom(m.startContainer),relative:(m,h)=>Jo.getStart(m),exact:(m,h,v,S)=>m}),sy=bf.domRange,gS=bf.relative,Xg=bf.exact,ry=l=>{const m=$1(l);return xs(m)},o_=Ug.create,Fc={domRange:sy,relative:gS,exact:Xg,exactFromRange:oy,getWin:ry,range:o_},hS=(l,m,h)=>{var v,S;return q.from((S=(v=l.dom).caretPositionFromPoint)===null||S===void 0?void 0:S.call(v,m,h)).bind(T=>{if(T.offsetNode===null)return q.none();const M=l.dom.createRange();return M.setStart(T.offsetNode,T.offset),M.collapse(),q.some(M)})},s_=(l,m,h)=>{var v,S;return q.from((S=(v=l.dom).caretRangeFromPoint)===null||S===void 0?void 0:S.call(v,m,h))},We=(()=>document.caretPositionFromPoint?hS:document.caretRangeFromPoint?s_:q.none)(),Qo=(l,m,h)=>{const v=te.fromDom(l.document);return We(v,m,h).map(S=>Ug.create(te.fromDom(S.startContainer),S.startOffset,te.fromDom(S.endContainer),S.endOffset))},Ic=(l,m)=>{const h=oo(l);return h==="input"?Jo.after(l):No(["br","img"],h)?m===0?Jo.before(l):Jo.after(l):Jo.on(l,m)},is=(l,m)=>{const h=l.fold(Jo.before,Ic,Jo.after),v=m.fold(Jo.before,Ic,Jo.after);return Fc.relative(h,v)},Lc=(l,m,h,v)=>{const S=Ic(l,m),T=Ic(h,v);return Fc.relative(S,T)},pS=(l,m,h,v)=>{const T=ng(l).dom.createRange();return T.setStart(l.dom,m),T.setEnd(h.dom,v),T},Jg=(l,m,h,v)=>{const S=pS(l,m,h,v),T=Jn(l,h)&&m===v;return S.collapsed&&!T},ac=l=>q.from(l.getSelection()),F1=(l,m)=>{ac(l).each(h=>{h.removeAllRanges(),h.addRange(m)})},Qg=(l,m,h,v,S)=>{const T=Lu(l,m,h,v,S);F1(l,T)},eh=(l,m,h,v,S,T)=>{m.collapse(h.dom,v),m.extend(S.dom,T)},ay=(l,m)=>I0(l,m).match({ltr:(h,v,S,T)=>{Qg(l,h,v,S,T)},rtl:(h,v,S,T)=>{ac(l).each(M=>{if(M.setBaseAndExtent)M.setBaseAndExtent(h.dom,v,S.dom,T);else if(M.extend)try{eh(l,M,h,v,S,T)}catch{Qg(l,S,T,h,v)}else Qg(l,S,T,h,v)})}}),th=(l,m,h,v,S)=>{const T=Lc(m,h,v,S);ay(l,T)},I1=(l,m,h)=>{const v=is(m,h);ay(l,v)},cy=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return q.some(Ug.create(te.fromDom(m.startContainer),m.startOffset,te.fromDom(h.endContainer),h.endOffset))}else return q.none()},r_=l=>{if(l.anchorNode===null||l.focusNode===null)return cy(l);{const m=te.fromDom(l.anchorNode),h=te.fromDom(l.focusNode);return Jg(m,l.anchorOffset,h,l.focusOffset)?q.some(Ug.create(m,l.anchorOffset,h,l.focusOffset)):cy(l)}},Hc=(l,m,h=!0)=>{const S=(h?zg:Uk)(l,m);F1(l,S)},L1=l=>ac(l).filter(m=>m.rangeCount>0).bind(r_),nh=l=>L1(l).map(m=>Fc.exact(m.start,m.soffset,m.finish,m.foffset)),ua=(l,m)=>{const h=L0(l,m);return _r(h)},Uo=(l,m,h)=>Qo(l,m,h),iy=l=>{ac(l).each(m=>m.removeAllRanges())},oh=l=>({elementFromPoint:(ge,et)=>te.fromPoint(te.fromDom(l.document),ge,et),getRect:ge=>ge.dom.getBoundingClientRect(),getRangedRect:(ge,et,wt,It)=>{const qn=Fc.exact(ge,et,wt,It);return ua(l,qn)},getSelection:()=>nh(l).map(ge=>Wg(l,ge)),fromSitus:ge=>{const et=Fc.relative(ge.start,ge.finish);return Wg(l,et)},situsFromPoint:(ge,et)=>Uo(l,ge,et).map(wt=>Hu.create(wt.start,wt.soffset,wt.finish,wt.foffset)),clearSelection:()=>{iy(l)},collapseSelection:(ge=!1)=>{nh(l).each(et=>et.fold(wt=>wt.collapse(ge),(wt,It)=>{const qn=ge?wt:It;I1(l,qn,qn)},(wt,It,qn,Wo)=>{const Ro=ge?wt:qn,mr=ge?It:Wo;th(l,Ro,mr,Ro,mr)}))},setSelection:ge=>{th(l,ge.start,ge.soffset,ge.finish,ge.foffset)},setRelativeSelection:(ge,et)=>{I1(l,ge,et)},selectNode:ge=>{Hc(l,ge,!1)},selectContents:ge=>{Hc(l,ge)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>fS(te.fromDom(l.document)).top,scrollBy:(ge,et)=>{ny(ge,et,te.fromDom(l.document))}}),$a=(l,m)=>({rows:l,cols:m}),sh=(l,m,h,v)=>{const S=oh(l),T=FD(S,m,h,v);return{clearstate:T.clearstate,mousedown:T.mousedown,mouseover:T.mouseover,mouseup:T.mouseup}},ly=l=>cg(l,Tt).exists(Eu),uy=(l,m)=>ly(l)||ly(m),a_=(l,m,h,v)=>{const S=oh(l),T=()=>(v.clear(m),q.none());return{keydown:(H,W,ee,ye,ze,He)=>{const pe=H.raw,Ve=pe.which,ge=pe.shiftKey===!0;return Gv(m,v.selectedSelector).fold(()=>(el(Ve)&&!ge&&v.clearBeforeUpdate(m),el(Ve)&&ge&&!uy(W,ye)?q.none:Zu(Ve)&&ge?An(N1,S,m,h,dS,ye,W,v.selectRange):Yg(Ve)&&ge?An(N1,S,m,h,ty,ye,W,v.selectRange):Zu(Ve)?An(hf,S,h,dS,ye,W,J0):Yg(Ve)?An(hf,S,h,ty,ye,W,e_):q.none),wt=>{const It=qn=>()=>br(qn,Ro=>$c(Ro.rows,Ro.cols,m,wt,v)).fold(()=>El(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Ro=>{const mr=Zu(Ve)||He.isForward(Ve)?Jo.after:Jo.before;return S.setRelativeSelection(Jo.on(Ro.first,0),mr(Ro.table)),v.clear(m),rf.create(q.none(),!0)}),Ro=>q.some(rf.create(q.none(),!0)));return el(Ve)&&ge&&!uy(W,ye)?q.none:Zu(Ve)&&ge?It([$a(1,0)]):Yg(Ve)&&ge?It([$a(-1,0)]):He.isBackward(Ve)&&ge?It([$a(0,-1),$a(-1,0)]):He.isForward(Ve)&&ge?It([$a(0,1),$a(1,0)]):el(Ve)&&!ge?T:q.none})()},keyup:(H,W,ee,ye,ze)=>Gv(m,v.selectedSelector).fold(()=>{const He=H.raw,pe=He.which;return He.shiftKey===!0&&el(pe)&&uy(W,ye)?Gk(m,h,W,ee,ye,ze,v.selectRange):q.none()},q.none)}},bS=(l,m,h,v)=>{const S=oh(l);return(T,M)=>{v.clearBeforeUpdate(m),Bc(T,M,h).each($=>{const H=$.boxes.getOr([]);v.selectRange(m,H,$.start,$.finish),S.selectContents(M),S.collapseSelection()})}},rh=(l,m)=>{const h=pl(l,m);return h===void 0||h===""?[]:h.split(" ")},vS=(l,m,h)=>{const S=rh(l,m).concat([h]);return ns(l,m,S.join(" ")),!0},c_=(l,m,h)=>{const v=$o(rh(l,m),S=>S!==h);return v.length>0?ns(l,m,v.join(" ")):Io(l,m),!1},ju=l=>l.dom.classList!==void 0,Ws=l=>rh(l,"class"),cc=(l,m)=>vS(l,"class",m),Fa=(l,m)=>c_(l,"class",m),da=(l,m)=>{ju(l)?l.dom.classList.add(m):cc(l,m)},H1=l=>{(ju(l)?l.dom.classList:Ws(l)).length===0&&Io(l,"class")},qd=(l,m)=>{ju(l)?l.dom.classList.remove(m):Fa(l,m),H1(l)},Il=(l,m)=>ju(l)&&l.dom.classList.contains(m),i_=(l,m)=>{Ee(m,h=>{qd(l,h)})},dy=l=>m=>{da(m,l)},l_=l=>m=>{i_(m,l)},wS={byClass:l=>{const m=dy(l.selected),h=l_([l.selected,l.lastSelected,l.firstSelected]),v=T=>{const M=xa(T,l.selectedSelector);Ee(M,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(T,M,$,H)=>{v(T),Ee(M,m),da($,l.firstSelected),da(H,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=H=>{Io(H,l.selected),Io(H,l.firstSelected),Io(H,l.lastSelected)},S=H=>{ns(H,l.selected,"1")},T=H=>{M(H),h()},M=H=>{const W=xa(H,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ee(W,v)};return{clearBeforeUpdate:M,clear:T,selectRange:(H,W,ee,ye)=>{T(H),Ee(W,S),ns(ee,l.firstSelected,"1"),ns(ye,l.lastSelected,"1"),m(W,ee,ye)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},V1=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},my=()=>({tag:"none"}),Rn=l=>({tag:"multiple",elements:l}),Ll=l=>({tag:"single",element:l}),vf=(l,m,h)=>({get:()=>qv(l(),h).fold(()=>m().fold(my,Ll),Rn)}),fy=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=a0(h);return ts(v,S=>{const T=S.cells.slice(0,m[m.length-1].column+1);return Ot(T,M=>M.element)})},SS=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=a0(h);return ts(v,S=>{const T=S.cells.slice(m[0].column+m[0].colspan-1,S.cells.length);return Ot(T,M=>M.element)})},gy=(l,m,h)=>{const v=qt.fromTable(l);return ec(v,m).map(T=>{const M=xr(v,h,!1),{rows:$}=rs(M),H=fy($,T),W=SS($,T);return{upOrLeftCells:H,downOrRightCells:W}})},xS=(l,m,h,v,S,T,M)=>({target:l,x:m,y:h,stop:v,prevent:S,kill:T,raw:M}),z1=l=>{const m=te.fromDom(Ke(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),S=Bi(v,h);return xS(m,l.clientX,l.clientY,h,v,S,l)},u_=(l,m)=>h=>{l(h)&&m(z1(h))},d_=(l,m,h,v,S)=>{const T=u_(h,v);return l.dom.addEventListener(m,T,S),{unbind:An(m_,l,m,T,S)}},ES=(l,m,h,v)=>d_(l,m,h,v,!1),m_=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},hy=Se,yf=(l,m,h)=>ES(l,m,hy,h),Cf=z1,U1=l=>!Il(te.fromDom(l.target),"ephox-snooker-resizer-bar"),TS=(l,m)=>{const h=vf(()=>te.fromDom(l.getBody()),()=>jm(Xa(l),Sl(l)),Tl.selectedSelector),v=(H,W,ee)=>{Pr(W).each(ze=>{const He=wu(l),pe=Td(gt,te.fromDom(l.getDoc()),He),Ve=Ja(l),ge=gy(ze,{selection:Ve},pe);of(l,H,W,ee,ge)})},S=()=>Un(l),T=wS.byAttr(Tl,v,S);return l.on("init",H=>{const W=l.getWin(),ee=Eg(l),ye=Sl(l),ze=()=>{const kn=l.selection,fr=te.fromDom(kn.getStart()),Or=te.fromDom(kn.getEnd());Vn(Pr,[fr,Or]).fold(()=>T.clear(ee),gt)},He=sh(W,ee,ye,T),pe=a_(W,ee,ye,T),Ve=bS(W,ee,ye,T),ge=kn=>kn.raw.shiftKey===!0;l.on("TableSelectorChange",kn=>Ve(kn.start,kn.finish));const et=(kn,fr)=>{ge(kn)&&(fr.kill&&kn.kill(),fr.selection.each(Or=>{const zc=Fc.relative(Or.start,Or.finish),Ar=L0(W,zc);l.selection.setRng(Ar)}))},wt=kn=>{const fr=Cf(kn);if(fr.raw.shiftKey&&el(fr.raw.which)){const Or=l.selection.getRng(),zc=te.fromDom(Or.startContainer),Ar=te.fromDom(Or.endContainer);pe.keyup(fr,zc,Or.startOffset,Ar,Or.endOffset).each(Qd=>{et(fr,Qd)})}},It=kn=>{const fr=Cf(kn);m.hide();const Or=l.selection.getRng(),zc=te.fromDom(Or.startContainer),Ar=te.fromDom(Or.endContainer),Qd=LT(mS,n_)(te.fromDom(l.selection.getStart()));pe.keydown(fr,zc,Or.startOffset,Ar,Or.endOffset,Qd).each(gr=>{et(fr,gr)}),m.show()},qn=kn=>kn.button===0,Wo=kn=>kn.buttons===void 0?!0:(kn.buttons&1)!==0,Ro=kn=>{He.clearstate()},mr=kn=>{qn(kn)&&U1(kn)&&He.mousedown(Cf(kn))},Jd=kn=>{Wo(kn)&&U1(kn)&&He.mouseover(Cf(kn))},lh=kn=>{qn(kn)&&U1(kn)&&He.mouseup(Cf(kn))},eb=(()=>{const kn=Kg(te.fromDom(ee)),fr=Kg(0);return{touchEnd:zc=>{const Ar=te.fromDom(zc.target);if(Gr("td")(Ar)||Gr("th")(Ar)){const Qd=kn.get(),gr=fr.get();Jn(Qd,Ar)&&zc.timeStamp-gr<300&&(zc.preventDefault(),Ve(Ar,Ar))}kn.set(Ar),fr.set(zc.timeStamp)}}})();l.on("dragstart",Ro),l.on("mousedown",mr),l.on("mouseover",Jd),l.on("mouseup",lh),l.on("touchend",eb.touchEnd),l.on("keyup",wt),l.on("keydown",It),l.on("NodeChange",ze)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Tl.firstSelected),l.serializer.addTempAttr(Tl.lastSelected)}),{getSelectedCells:()=>V1(h.get(),K([]),H=>Ot(H,W=>W.dom),H=>[H.dom]),clearSelectedCells:H=>T.clear(te.fromDom(H))}},ic=l=>{let m=[];return{bind:T=>{if(T===void 0)throw new Error("Event bind error: undefined handler");m.push(T)},unbind:T=>{m=$o(m,M=>M!==T)},trigger:(...T)=>{const M={};Ee(l,($,H)=>{M[$]=T[H]}),Ee(m,$=>{$(M)})}}},Zs=l=>{const m=rp(l,v=>({bind:v.bind,unbind:v.unbind})),h=rp(l,v=>v.trigger);return{registry:m,trigger:h}},sr=(l,m)=>{let h=null;const v=()=>{rC(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...T)=>{v(),h=setTimeout(()=>{h=null,l.apply(null,T)},m)}}},tl=l=>l.slice(0).sort(),f_=(l,m)=>{throw new Error("All required keys ("+tl(l).join(", ")+") were not specified. Specified keys were: "+tl(m).join(", ")+".")},g_=l=>{throw new Error("Unsupported keys for object: "+tl(l).join(", "))},h_=(l,m)=>{if(!vc(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ee(m,h=>{if(!eg(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},Xt=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+tl(l).join(", ")+") were not.")},p_=l=>{const m=tl(l);N(m,(v,S)=>S<m.length-1&&v===m[S+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},kS=(l,m)=>W1(l,m,{validate:Mi,label:"function"}),W1=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return h_("required",m),p_(m),v=>{const S=ht(v);Yn(m,$=>No(S,$))||f_(m,S),l(m,S);const M=$o(m,$=>!h.validate(v[$],$));return M.length>0&&Xt(M,h.label),v}},b_=(l,m)=>{const h=$o(m,v=>!No(l,v));h.length>0&&g_(h)},Ge=l=>kS(b_,l),Kd=Ge(["compare","extract","mutate","sink"]),v_=Ge(["element","start","stop","destroy"]),_S=Ge(["forceDrop","drop","move","delayDrop"]),Z1=()=>{let l=q.none();const m=()=>{l=q.none()},h=(T,M)=>{const $=l.map(H=>T.compare(H,M));return l=q.some(M),$},v=(T,M)=>{M.extract(T).each(H=>{h(M,H).each(ee=>{S.trigger.move(ee)})})},S=Zs({move:ic(["info"])});return{onEvent:v,reset:m,events:S.registry}},ah=()=>{const l=Zs({move:ic(["info"])});return{onEvent:gt,reset:gt,events:l.registry}},py=()=>{const l=ah(),m=Z1();let h=l;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=l},isOn:()=>h===m,onEvent:($,H)=>{h.onEvent($,H)},events:m.events}},by=(l,m,h)=>{let v=!1;const S=Zs({start:ic([]),stop:ic([])}),T=py(),M=()=>{pe.stop(),T.isOn()&&(T.off(),S.trigger.stop())},$=sr(M,200),H=ge=>{pe.start(ge),T.on(),S.trigger.start()},W=ge=>{$.cancel(),T.onEvent(ge,m)};T.events.move.bind(ge=>{m.mutate(l,ge.info)});const ee=()=>{v=!0},ye=()=>{v=!1},ze=()=>v,He=ge=>(...et)=>{v&&ge.apply(null,et)},pe=m.sink(_S({forceDrop:M,drop:He(M),move:He(W),delayDrop:He($.throttle)}),h),Ve=()=>{pe.destroy()};return{element:pe.element,go:H,on:ee,off:ye,isActive:ze,destroy:Ve,events:S.registry}},y_=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},OS=y_("ephox-dragster").resolve,AS=l=>{const m={layerClass:OS("blocker"),...l},h=te.fromTag("div");return ns(h,"role","presentation"),Xs(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),da(h,OS("blocker")),da(h,m.layerClass),{element:K(h),destroy:()=>{Ks(h)}}};var S_=Kd({compare:(l,m)=>_c(m.left-l.left,m.top-l.top),extract:l=>q.some(_c(l.x,l.y)),sink:(l,m)=>{const h=AS(m),v=yf(h.element(),"mousedown",l.forceDrop),S=yf(h.element(),"mouseup",l.drop),T=yf(h.element(),"mousemove",l.move),M=yf(h.element(),"mouseout",l.delayDrop),$=()=>{h.destroy(),S.unbind(),T.unbind(),M.unbind(),v.unbind()},H=ee=>{Oo(ee,h.element())},W=()=>{Ks(h.element())};return v_({element:h.element,start:H,stop:W,destroy:$})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const LD=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:S_;return by(l,v,m)},G1=y_("ephox-snooker").resolve,x_=()=>{const l=Zs({drag:ic(["xDelta","yDelta"])});return{mutate:(h,v)=>{l.trigger.drag(h,v)},events:l.registry}},E_=()=>{const l=Zs({drag:ic(["xDelta","yDelta","target"])});let m=q.none();const h=x_();return h.events.drag.bind(T=>{m.each(M=>{l.trigger.drag(T.xDelta,T.yDelta,M)})}),{assign:T=>{m=q.some(T)},get:()=>m,mutate:h.mutate,events:l.registry}},T_=(l,m,h,v,S)=>{const T=te.fromTag("div");return Xs(T,{position:"absolute",left:m-v/2+"px",top:h+"px",height:S+"px",width:v+"px"}),Ni(T,{"data-column":l,role:"presentation"}),T},ih=(l,m,h,v,S)=>{const T=te.fromTag("div");return Xs(T,{position:"absolute",left:m+"px",top:h-S/2+"px",height:S+"px",width:v+"px"}),Ni(T,{"data-row":l,role:"presentation"}),T},vy=G1("resizer-bar"),DS=G1("resizer-rows"),yy=G1("resizer-cols"),Cy=7,RS=(l,m)=>ts(l.all,(h,v)=>m(h.element)?[v]:[]),Hl=(l,m)=>{const h=[];return ho(l.grid.columns,v=>{qt.getColumnAt(l,v).map(T=>T.element).forall(m)&&h.push(v)}),$o(h,v=>{const S=qt.filterItems(l,T=>T.column===v);return Yn(S,T=>m(T.element))})},wf=l=>{const m=xa(l.parent(),"."+vy);Ee(m,Ks)},wy=(l,m,h)=>{const v=l.origin();Ee(m,S=>{S.each(T=>{const M=h(v,T);da(M,vy),Oo(l.parent(),M)})})},k_=(l,m,h,v)=>{wy(l,m,(S,T)=>{const M=T_(T.col,T.x-S.left,h.top-S.top,Cy,v);return da(M,yy),M})},__=(l,m,h,v)=>{wy(l,m,(S,T)=>{const M=ih(T.row,h.left-S.left,T.y-S.top,v,Cy);return da(M,DS),M})},ln=(l,m,h,v,S)=>{const T=Oc(h),M=m.isResizable,$=v.length>0?qe.positions(v,h):[],H=$.length>0?RS(l,M):[],W=$o($,(He,pe)=>Le(H,Ve=>pe===Ve));__(m,W,T,Li(h));const ee=S.length>0?Qr.positions(S,h):[],ye=ee.length>0?Hl(l,M):[],ze=$o(ee,(He,pe)=>Le(ye,Ve=>pe===Ve));k_(m,ze,T,vd(h))},Sy=(l,m)=>{if(wf(l),l.isResizable(m)){const h=qt.fromTable(m),v=xv(h),S=Hm(h);ln(h,l,m,v,S)}},nl=(l,m)=>{const h=xa(l.parent(),"."+vy);Ee(h,m)},ol=l=>{nl(l,m=>{uo(m,"display","none")})},Vl=l=>{nl(l,m=>{uo(m,"display","block")})},dr=l=>Il(l,DS),q1=l=>Il(l,yy),Sf=G1("resizer-bar-dragging"),K1=l=>{const m=E_(),h=LD(m,{});let v=q.none();const S=(pe,Ve)=>q.from(pl(pe,Ve));m.events.drag.bind(pe=>{S(pe.target,"data-row").each(Ve=>{const ge=hd(pe.target,"top");uo(pe.target,"top",ge+pe.yDelta+"px")}),S(pe.target,"data-column").each(Ve=>{const ge=hd(pe.target,"left");uo(pe.target,"left",ge+pe.xDelta+"px")})});const T=(pe,Ve)=>{const ge=hd(pe,Ve),et=Zn(pe,"data-initial-"+Ve,0);return ge-et};h.events.stop.bind(()=>{m.get().each(pe=>{v.each(Ve=>{S(pe,"data-row").each(ge=>{const et=T(pe,"top");Io(pe,"data-initial-top"),He.trigger.adjustHeight(Ve,et,parseInt(ge,10))}),S(pe,"data-column").each(ge=>{const et=T(pe,"left");Io(pe,"data-initial-left"),He.trigger.adjustWidth(Ve,et,parseInt(ge,10))}),Sy(l,Ve)})})});const M=(pe,Ve)=>{He.trigger.startAdjust(),m.assign(pe),ns(pe,"data-initial-"+Ve,hd(pe,Ve)),da(pe,Sf),uo(pe,"opacity","0.2"),h.go(l.parent())},$=yf(l.parent(),"mousedown",pe=>{dr(pe.target)&&M(pe.target,"top"),q1(pe.target)&&M(pe.target,"left")}),H=pe=>Jn(pe,l.view()),W=pe=>Ps(pe,"table",H).filter(Eu),ee=yf(l.view(),"mouseover",pe=>{W(pe.target).fold(()=>{po(pe.target)&&wf(l)},Ve=>{h.isActive()&&(v=q.some(Ve),Sy(l,Ve))})}),ye=()=>{$.unbind(),ee.unbind(),h.destroy(),wf(l)},ze=pe=>{Sy(l,pe)},He=Zs({adjustHeight:ic(["table","delta","row"]),adjustWidth:ic(["table","delta","column"]),startAdjust:ic([])});return{destroy:ye,refresh:ze,on:h.on,off:h.off,hideBars:An(ol,l),showBars:An(Vl,l),events:He.registry}},O_={create:(l,m,h)=>{const v=qe,S=Qr,T=K1(l),M=Zs({beforeResize:ic(["table","type"]),afterResize:ic(["table","type"]),startDrag:ic([])});return T.events.adjustHeight.bind($=>{const H=$.table;M.trigger.beforeResize(H,"row");const W=v.delta($.delta,H);a1(H,W,$.row,v),M.trigger.afterResize(H,"row")}),T.events.startAdjust.bind($=>{M.trigger.startDrag()}),T.events.adjustWidth.bind($=>{const H=$.table;M.trigger.beforeResize(H,"col");const W=S.delta($.delta,H),ee=h(H);de(H,W,$.column,m,ee),M.trigger.afterResize(H,"col")}),{on:T.on,off:T.off,refreshBars:T.refresh,hideBars:T.hideBars,showBars:T.showBars,destroy:T.destroy,events:M.registry}}},Jt={only:(l,m)=>{const h=up(l)?qs(l):l;return{parent:K(h),view:K(l),origin:K(_c(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>Oc(m);return{parent:K(m),view:K(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:K(m),view:K(l),origin:K(_c(0,0)),isResizable:h})},Vc=()=>{const l=te.fromTag("div");return Xs(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Oo(Kr(),l),l},xf=(l,m)=>l.inline?Jt.body(te.fromDom(l.getBody()),Vc(),m):Jt.only(te.fromDom(l.getDoc()),m),D_=(l,m)=>{l.inline&&Ks(m.parent())},Xd=l=>Ur(l)&&l.nodeName==="TABLE",en="bar-",R_=l=>pl(l,"data-mce-resize")!=="false",Y1=l=>{const m=qt.fromTable(l);qt.hasColumns(m)||Ee(si(l),h=>{const v=Js(h,"width");uo(h,"width",v),Io(h,"width")})},X1=l=>{const m=Q0(),h=Q0(),v=Q0();let S,T;const M=pe=>Xi(l,pe),$=()=>Hv(l)?Md():WC(),H=pe=>t0(pe).columns,W=(pe,Ve,ge)=>{const et=mu(Ve,"e");if(T===""&&Iu(pe),ge!==S&&T!==""){uo(pe,"width",T);const wt=$(),It=M(pe),qn=Hv(l)||et?H(pe)-1:0;de(pe,ge-S,qn,wt,It)}else if(Ip(T)){const wt=parseFloat(T.replace("%","")),It=ge*wt/S;uo(pe,"width",It+"%")}Vv(T)&&Y1(pe)},ee=()=>{h.on(pe=>{pe.destroy()}),v.on(pe=>{D_(l,pe)})};return l.on("init",()=>{const pe=xf(l,R_);if(v.set(pe),Su(l)&&Wi(l)){const Ve=$(),ge=O_.create(pe,Ve,M);ge.on(),ge.events.startDrag.bind(et=>{m.set(l.selection.getRng())}),ge.events.beforeResize.bind(et=>{const wt=et.table.dom;O0(l,wt,Dd(wt),Tu(wt),en+et.type)}),ge.events.afterResize.bind(et=>{const wt=et.table,It=wt.dom;mi(wt),m.on(qn=>{l.selection.setRng(qn),l.focus()}),kr(l,It,Dd(It),Tu(It),en+et.type),l.undoManager.add()}),h.set(ge)}}),l.on("ObjectResizeStart",pe=>{const Ve=pe.target;if(Xd(Ve)){const ge=te.fromDom(Ve);Ee(l.dom.select(".mce-clonedresizable"),et=>{l.dom.addClass(et,"mce-"+Lv(l)+"-columns")}),!S1(ge)&&xu(l)?D0(ge):!Ji(ge)&&di(l)&&Iu(ge),Pw(ge)&&uv(pe.origin,en)&&Iu(ge),S=pe.width,T=Od(l)?"":Fp(l,Ve).getOr("")}}),l.on("ObjectResized",pe=>{const Ve=pe.target;if(Xd(Ve)){const ge=te.fromDom(Ve),et=pe.origin;uv(et,"corner-")&&W(ge,et,pe.width),mi(ge),Fu(l,ge.dom,sf)}}),l.on("SwitchMode",()=>{h.on(pe=>{l.mode.isReadOnly()?pe.hideBars():pe.showBars()})}),l.on("dragstart dragend",pe=>{h.on(Ve=>{pe.type==="dragstart"?(Ve.hideBars(),Ve.off()):(Ve.on(),Ve.showBars())})}),l.on("remove",()=>{ee()}),{refresh:pe=>{h.on(Ve=>Ve.refreshBars(te.fromDom(pe)))},hide:()=>{h.on(pe=>pe.hideBars())},show:()=>{h.on(pe=>pe.showBars())}}},J1=l=>{_d(l);const m=X1(l),h=TS(l,m),v=wk(l,m,h);return Gw(l,v),qw(l,v),zC(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},zl=l=>({table:J1(l)});var sl=()=>{ET.add("dom",zl)};sl()})();
